import{c as e,g as t,a as i}from"./_commonjsHelpers-f0e2db5e.js";class n{static setLoaded(e){this.setAttribute(e,n.loaded)}static removeLoaded(e){this.removeAttribute(e,n.loaded)}static hasLoaded(e){return null!==e.getAttribute(n.prefix+n.loaded)}static setAttribute(e,t,i=null){e.setAttribute(n.prefix+t,null!=i?i:"")}static removeAttribute(e,t){e.removeAttribute(n.prefix+t)}}n.prefix="data-qa-dxbl-",n.loaded="loaded";var s,r,o;!function(e){e[e.Default=-1]="Default",e[e.None=0]="None",e[e.Dragging=150]="Dragging"}(s||(s={})),function(e){e[e.None=0]="None",e[e.Click=1]="Click",e[e.DblClick=2]="DblClick",e[e.Dragging=4]="Dragging"}(r||(r={})),function(e){e[e.Stopped=0]="Stopped",e[e.WaitingForDragging=1]="WaitingForDragging",e[e.Dragging=2]="Dragging"}(o||(o={}));class a extends CustomEvent{constructor(e){super(a.eventName,{detail:e,bubbles:!0,composed:!1,cancelable:!0})}}a.eventName="dxpointerdragstart";class l extends CustomEvent{constructor(e){super(l.eventName,{detail:e,bubbles:!0,composed:!1,cancelable:!0})}}l.eventName="dxpointerdragstop";class A extends Event{constructor(){super(A.eventName,{bubbles:!0,composed:!1,cancelable:!0})}}A.eventName="dxpointerdragcancel";class d extends CustomEvent{constructor(e){super(d.eventName,{detail:e,bubbles:!0,composed:!1,cancelable:!0})}}d.eventName="dxclick";class c extends CustomEvent{constructor(e){super(c.eventName,{detail:e,bubbles:!0,composed:!1,cancelable:!0})}}c.eventName="dxdblclick";var h=e((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.Browser=void 0;var i=function(){function e(){}return e.IdentUserAgent=function(t,i){void 0===i&&(i=!1);var n=["Mozilla","IE","Firefox","Netscape","Safari","Chrome","Opera","Opera10","Edge"],s="IE",r="Win",o={Safari:2,Chrome:.1,Mozilla:1.9,Netscape:8,Firefox:2,Opera:9,IE:6,Edge:12};if(t&&0!==t.length){t=t.toLowerCase(),e.indentPlatformMajorVersion(t);try{for(var a={Windows:"Win",Macintosh:"Mac","Mac OS":"Mac",Mac_PowerPC:"Mac","cpu os":"MacMobile","cpu iphone os":"MacMobile",Android:"Android","!Windows Phone":"WinPhone","!WPDesktop":"WinPhone","!ZuneWP":"WinPhone"},l="(?:/|\\s*)?",A="(\\d+)(?:\\.((?:\\d+?[1-9])|\\d)0*?)?",d="(?:"+A+")?",c={Safari:"applewebkit(?:.*?(?:version/"+A+"[\\.\\w\\d]*?(?:\\s+mobile/\\S*)?\\s+safari))?",Chrome:"(?:chrome|crios)(?!frame)"+l+d,Mozilla:"mozilla(?:.*rv:"+d+".*Gecko)?",Netscape:"(?:netscape|navigator)\\d*/?\\s*"+d,Firefox:"firefox"+l+d,Opera:"(?:opera|\\sopr)"+l+d,Opera10:"opera.*\\s*version"+l+d,IE:"msie\\s*"+d,Edge:"edge"+l+d},h=null,u=-1,p=0;p<n.length;p++){var m=n[p],g=new RegExp(c[m],"i").exec(t);if(g&&g.index>=0){if("IE"===h&&u>=11&&"Safari"===m)continue;"Opera10"===(h=m)&&(h="Opera"),u=e.GetBrowserVersion(t,g,"trident"+l+d,e.getIECompatibleVersionString()),"Mozilla"===h&&u>=11&&(h="IE")}}h||(h=s);var C=-1!==u;C||(u=o[h]);var f=null,v=Number.MAX_VALUE;for(var b in a)if(Object.prototype.hasOwnProperty.call(a,b)){var w="!"===b.substr(0,1),y=t.indexOf((w?b.substr(1):b).toLowerCase());y>=0&&(y<v||w)&&(v=w?0:y,f=a[b])}var B=t.toUpperCase().match("SM-[A-Z]"),E=B&&B.length>0;"WinPhone"===f&&u<9&&(u=Math.floor(e.getVersionFromTrident(t,"trident"+l+d))),!i&&"IE"===h&&u>7&&document.documentMode<u&&(u=document.documentMode),"WinPhone"===f&&(u=Math.max(9,u)),f||(f=r),f!==a["cpu os"]||C||(u=4),e.fillUserAgentInfo(n,h,u,f,E)}catch(t){e.fillUserAgentInfo(n,s,o[s],r)}}else e.fillUserAgentInfo(n,s,o[s],r)},e.GetBrowserVersion=function(t,i,n,s){var r=e.getVersionFromMatches(i);if(s){var o=e.getVersionFromTrident(t,n);if("edge"===s||parseInt(s)===o)return o}return r},e.getIECompatibleVersionString=function(){if(document.compatible)for(var e=0;e<document.compatible.length;e++)if("IE"===document.compatible[e].userAgent&&document.compatible[e].version)return document.compatible[e].version.toLowerCase();return""},e.isTouchEnabled=function(){return e.hasTouchStart()||e.hasMaxTouchPoints()||e.hasMsMaxTouchPoints()},e.hasTouchStart=function(){return"ontouchstart"in window},e.hasMaxTouchPoints=function(){return navigator.maxTouchPoints>0},e.hasMsMaxTouchPoints=function(){return navigator.msMaxTouchPoints>0},e.hasNavigator=function(){return"undefined"!=typeof navigator},e.fillUserAgentInfo=function(t,i,n,s,r){void 0===r&&(r=!1);for(var o=0;o<t.length;o++){var a=t[o];e[a]=a===i}e.Version=Math.floor(10*n)/10,e.MajorVersion=Math.floor(e.Version),e.WindowsPlatform="Win"===s||"WinPhone"===s,e.MacOSMobilePlatform="MacMobile"===s||"Mac"===s&&e.isTouchEnabled(),e.MacOSPlatform="Mac"===s&&!e.MacOSMobilePlatform,e.AndroidMobilePlatform="Android"===s,e.WindowsPhonePlatform="WinPhone"===s,e.WebKitFamily=e.Safari||e.Chrome||e.Opera&&e.MajorVersion>=15,e.NetscapeFamily=e.Netscape||e.Mozilla||e.Firefox,e.WebKitTouchUI=e.MacOSMobilePlatform||e.AndroidMobilePlatform;var l=e.IE&&e.MajorVersion>9&&e.WindowsPlatform&&e.UserAgent.toLowerCase().indexOf("touch")>=0;if(e.MSTouchUI=l||e.Edge&&!!window.navigator.maxTouchPoints,e.TouchUI=e.WebKitTouchUI||e.MSTouchUI,e.MobileUI=e.WebKitTouchUI||e.WindowsPhonePlatform,e.AndroidDefaultBrowser=e.AndroidMobilePlatform&&!e.Chrome,e.AndroidChromeBrowser=e.AndroidMobilePlatform&&e.Chrome,r&&(e.SamsungAndroidDevice=r),e.MSTouchUI){var A=e.UserAgent.toLowerCase().indexOf("arm;")>-1;e.VirtualKeyboardSupported=A||e.WindowsPhonePlatform}else e.VirtualKeyboardSupported=e.WebKitTouchUI;e.fillDocumentElementBrowserTypeClassNames(t)},e.indentPlatformMajorVersion=function(t){var i=/(?:(?:windows nt|macintosh|mac os|cpu os|cpu iphone os|android|windows phone|linux) )(\d+)(?:[-0-9_.])*/.exec(t);i&&(e.PlaformMajorVersion=i[1])},e.getVersionFromMatches=function(e){var t=-1,i="";return e&&(e[1]&&(i+=e[1],e[2]&&(i+="."+e[2])),""!==i&&(t=parseFloat(i),isNaN(t)&&(t=-1))),t},e.getVersionFromTrident=function(t,i){var n=new RegExp(i,"i").exec(t);return e.getVersionFromMatches(n)+4},e.fillDocumentElementBrowserTypeClassNames=function(t){for(var i="",n=t.concat(["WindowsPlatform","MacOSPlatform","MacOSMobilePlatform","AndroidMobilePlatform","WindowsPhonePlatform","WebKitFamily","WebKitTouchUI","MSTouchUI","TouchUI","AndroidDefaultBrowser"]),s=0;s<n.length;s++){var r=n[s];e[r]&&(i+="dx"+r+" ")}i+="dxBrowserVersion-"+e.MajorVersion,"undefined"!=typeof document&&document&&document.documentElement&&(""!==document.documentElement.className&&(i=" "+i),document.documentElement.className+=i,e.Info=i)},e.getUserAgent=function(){return e.hasNavigator()&&navigator.userAgent?navigator.userAgent.toLowerCase():""},e.UserAgent=e.getUserAgent(),e._foo=e.IdentUserAgent(e.UserAgent),e}();t.Browser=i}));t(h);var u=e((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.StringUtils=void 0;var i=function(){function e(){}return e.isAlpha=function(e){return e>="a"&&e<="z"||e>="A"&&e<="Z"},e.isDigit=function(e){return e>="0"&&e<="9"},e.stringHashCode=function(e){var t=0;if(0===e.length)return t;for(var i=e.length,n=0;n<i;n++)t=(t<<5)-t+e.charCodeAt(n),t|=0;return t},e.endsAt=function(e,t){var i=e.length-1,n=t.length-1,s=i-n;if(s<0)return!1;for(;i>=s;i--,n--)if(e[i]!==t[n])return!1;return!0},e.startsAt=function(e,t){return e.substr(0,t.length)===t},e.stringInLowerCase=function(e){return e.toLowerCase()===e},e.stringInUpperCase=function(e){return e.toUpperCase()===e},e.atLeastOneSymbolInUpperCase=function(t){for(var i=0,n=void 0;n=t[i];i++)if(e.stringInUpperCase(n)&&!e.stringInLowerCase(n))return!0;return!1},e.getSymbolFromEnd=function(e,t){return e[e.length-t]},e.trim=function(t,i){if(void 0===i)return e.trimInternal(t,!0,!0);var n=i.join("");return t.replace(new RegExp("(^["+n+"]*)|(["+n+"]*$)","g"),"")},e.trimStart=function(t,i){if(void 0===i)return e.trimInternal(t,!0,!1);var n=i.join("");return t.replace(new RegExp("^["+n+"]*","g"),"")},e.trimEnd=function(t,i){if(void 0===i)return e.trimInternal(t,!1,!0);var n=i.join("");return t.replace(new RegExp("["+n+"]*$","g"),"")},e.getDecimalSeparator=function(){return 1.1.toLocaleString().substr(1,1)},e.repeat=function(e,t){return new Array(t<=0?0:t+1).join(e)},e.isNullOrEmpty=function(e){return!e||!e.length},e.padLeft=function(t,i,n){return e.repeat(n,Math.max(0,i-t.length))+t},e.trimInternal=function(e,t,i){var n=e.length;if(!n)return e;if(n<764833){var s=e;return t&&(s=s.replace(/^\s+/,"")),i&&(s=s.replace(/\s+$/,"")),s}var r=0;if(i)for(;n>0&&/\s/.test(e[n-1]);)n--;if(t&&n>0)for(;r<n&&/\s/.test(e[r]);)r++;return e.substring(r,n)},e}();t.StringUtils=i}));t(u);var p=e((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.numberToStringHex=t.numberToStringBin=t.isOdd=t.isEven=t.isNonNullString=t.isString=t.isNumber=t.boolToString=t.boolToInt=t.isDefined=void 0,t.isDefined=function(e){return null!=e},t.boolToInt=function(e){return e?1:0},t.boolToString=function(e){return e?"1":"0"},t.isNumber=function(e){return"number"==typeof e},t.isString=function(e){return"string"==typeof e},t.isNonNullString=function(e){return!!e},t.isEven=function(e){return e%2!=0},t.isOdd=function(e){return e%2==0},t.numberToStringBin=function(e,t){return void 0===t&&(t=0),u.StringUtils.padLeft(e.toString(2),t,"0")},t.numberToStringHex=function(e,t){return void 0===t&&(t=0),u.StringUtils.padLeft(e.toString(16),t,"0")}}));t(p);var m=function(e,t){return m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},m(e,t)};var g=function(){return g=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var s in t=arguments[i])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e},g.apply(this,arguments)};function C(e,t,i,n){var s,r=arguments.length,o=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,i,o):s(t,i))||o);return r>3&&o&&Object.defineProperty(t,i,o),o}var f=Object.create?function(e,t,i,n){void 0===n&&(n=i),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]};function v(e){var t="function"==typeof Symbol&&Symbol.iterator,i=t&&e[t],n=0;if(i)return i.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function b(e,t){var i="function"==typeof Symbol&&e[Symbol.iterator];if(!i)return e;var n,s,r=i.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(n=r.next()).done;)o.push(n.value)}catch(e){s={error:e}}finally{try{n&&!n.done&&(i=r.return)&&i.call(r)}finally{if(s)throw s.error}}return o}function w(e){return this instanceof w?(this.v=e,this):new w(e)}var y=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t};const B=Object.freeze({__proto__:null,__extends:function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}m(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},get __assign(){return g},__rest:function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(i[n[s]]=e[n[s]])}return i},__decorate:C,__param:function(e,t){return function(i,n){t(i,n,e)}},__metadata:function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},__awaiter:function(e,t,i,n){return new(i||(i=Promise))((function(s,r){function o(e){try{l(n.next(e))}catch(e){r(e)}}function a(e){try{l(n.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(o,a)}l((n=n.apply(e,t||[])).next())}))},__generator:function(e,t){var i,n,s,r,o={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(r){return function(a){return function(r){if(i)throw new TypeError("Generator is already executing.");for(;o;)try{if(i=1,n&&(s=2&r[0]?n.return:r[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,r[1])).done)return s;switch(n=0,s&&(r=[2&r[0],s.value]),r[0]){case 0:case 1:s=r;break;case 4:return o.label++,{value:r[1],done:!1};case 5:o.label++,n=r[1],r=[0];continue;case 7:r=o.ops.pop(),o.trys.pop();continue;default:if(!(s=o.trys,(s=s.length>0&&s[s.length-1])||6!==r[0]&&2!==r[0])){o=0;continue}if(3===r[0]&&(!s||r[1]>s[0]&&r[1]<s[3])){o.label=r[1];break}if(6===r[0]&&o.label<s[1]){o.label=s[1],s=r;break}if(s&&o.label<s[2]){o.label=s[2],o.ops.push(r);break}s[2]&&o.ops.pop(),o.trys.pop();continue}r=t.call(e,o)}catch(e){r=[6,e],n=0}finally{i=s=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,a])}}},__createBinding:f,__exportStar:function(e,t){for(var i in e)"default"===i||Object.prototype.hasOwnProperty.call(t,i)||f(t,e,i)},__values:v,__read:b,__spread:function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(b(arguments[t]));return e},__spreadArrays:function(){for(var e=0,t=0,i=arguments.length;t<i;t++)e+=arguments[t].length;var n=Array(e),s=0;for(t=0;t<i;t++)for(var r=arguments[t],o=0,a=r.length;o<a;o++,s++)n[s]=r[o];return n},__spreadArray:function(e,t,i){if(i||2===arguments.length)for(var n,s=0,r=t.length;s<r;s++)!n&&s in t||(n||(n=Array.prototype.slice.call(t,0,s)),n[s]=t[s]);return e.concat(n||Array.prototype.slice.call(t))},__await:w,__asyncGenerator:function(e,t,i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,s=i.apply(e,t||[]),r=[];return n={},o("next"),o("throw"),o("return"),n[Symbol.asyncIterator]=function(){return this},n;function o(e){s[e]&&(n[e]=function(t){return new Promise((function(i,n){r.push([e,t,i,n])>1||a(e,t)}))})}function a(e,t){try{!function(e){e.value instanceof w?Promise.resolve(e.value.v).then(l,A):d(r[0][2],e)}(s[e](t))}catch(e){d(r[0][3],e)}}function l(e){a("next",e)}function A(e){a("throw",e)}function d(e,t){e(t),r.shift(),r.length&&a(r[0][0],r[0][1])}},__asyncDelegator:function(e){var t,i;return t={},n("next"),n("throw",(function(e){throw e})),n("return"),t[Symbol.iterator]=function(){return this},t;function n(n,s){t[n]=e[n]?function(t){return(i=!i)?{value:w(e[n](t)),done:"return"===n}:s?s(t):t}:s}},__asyncValues:function(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,i=e[Symbol.asyncIterator];return i?i.call(e):(e=v(e),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(i){t[i]=e[i]&&function(t){return new Promise((function(n,s){(function(e,t,i,n){Promise.resolve(n).then((function(t){e({value:t,done:i})}),t)})(n,s,(t=e[i](t)).done,t.value)}))}}},__makeTemplateObject:function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},__importStar:function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&f(t,e,i);return y(t,e),t},__importDefault:function(e){return e&&e.__esModule?e:{default:e}},__classPrivateFieldGet:function(e,t,i,n){if("a"===i&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?n:"a"===i?n.call(e):n?n.value:t.get(e)},__classPrivateFieldSet:function(e,t,i,n,s){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?s.call(e,i):s?s.value=i:t.set(e,i),i}}),E=i(B);var I=e((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.ExtendedMinMax=t.ExtendedMax=t.ExtendedMin=t.MinMaxNumber=t.MinMax=void 0;var i=function(e,t){this.minElement=e,this.maxElement=t};t.MinMax=i;var n=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return E.__extends(t,e),Object.defineProperty(t.prototype,"length",{get:function(){return this.maxElement-this.minElement},enumerable:!1,configurable:!0}),t}(i);t.MinMaxNumber=n,t.ExtendedMin=function(e,t){this.minElement=e,this.minValue=t},t.ExtendedMax=function(e,t){this.maxElement=e,this.maxValue=t};var s=function(e){function t(t,i,n,s){var r=e.call(this,t,n)||this;return r.minValue=i,r.maxValue=s,r}return E.__extends(t,e),t}(i);t.ExtendedMinMax=s}));t(I);var S=e((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.Equals=t.Comparers=void 0;var i=function(){function e(){}return e.number=function(e,t){return e-t},e.string=function(e,t){return e===t?0:e>t?1:-1},e.stringIgnoreCase=function(e,t){return(e=e.toLowerCase())===(t=t.toLowerCase())?0:e>t?1:-1},e}();t.Comparers=i;var n=function(){function e(){}return e.simpleType=function(e,t){return e===t},e.object=function(e,t){return e&&t&&(e===t||e.equals(t))},e}();t.Equals=n}));t(S);var x=e((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.ListUtils=void 0;var i=function(){function e(){}return e.remove=function(e,t){var i=e.indexOf(t,0);i>=0&&e.splice(i,1)},e.removeBy=function(e,t){for(var i=e.length,n=0;n<i;n++)if(t(e[n],n))return e.splice(n,1)[0];return null},e.shallowCopy=function(e){return e.slice()},e.deepCopy=function(t){return e.map(t,(function(e){return e.clone()}))},e.initByValue=function(e,t){for(var i=[];e>0;e--)i.push(t);return i},e.initByCallback=function(e,t){for(var i=[],n=0;n<e;n++)i.push(t(n));return i},e.forEachOnInterval=function(e,t){for(var i=e.end,n=e.start;n<i;n++)t(n)},e.reverseForEachOnInterval=function(e,t){for(var i=e.start,n=e.end-1;n>=i;n--)t(n)},e.reducedMap=function(e,t,i,n){void 0===i&&(i=0),void 0===n&&(n=e.length);for(var s=[],r=i;r<n;r++){var o=t(e[r],r);null!==o&&s.push(o)}return s},e.filter=function(e,t,i,n){void 0===i&&(i=0),void 0===n&&(n=e.length);for(var s=[],r=i;r<n;r++){var o=e[r];t(o,r)&&s.push(o)}return s},e.map=function(e,t,i,n){void 0===i&&(i=0),void 0===n&&(n=e.length);for(var s=[],r=i;r<n;r++)s.push(t(e[r],r));return s},e.indexBy=function(e,t,i,n){void 0===i&&(i=0),void 0===n&&(n=e.length);for(var s=i;s<n;s++)if(t(e[s],s))return s;return-1},e.reverseIndexBy=function(e,t,i,n){void 0===i&&(i=e.length-1),void 0===n&&(n=0);for(var s=i;s>=n;s--)if(t(e[s],s))return s;return-1},e.elementBy=function(t,i,n,s){void 0===n&&(n=0),void 0===s&&(s=t.length);var r=e.indexBy(t,i,n,s);return r<0?null:t[r]},e.reverseElementBy=function(t,i,n,s){void 0===n&&(n=t.length-1),void 0===s&&(s=0);var r=e.reverseIndexBy(t,i,n,s);return r<0?null:t[r]},e.last=function(e){return e[e.length-1]},e.setLast=function(e,t){return e[e.length-1]=t},e.incLast=function(e){return++e[e.length-1]},e.decLast=function(e){return--e[e.length-1]},e.equals=function(t,i){return t.length===i.length&&e.allOf2(t,i,(function(e,t){return e.equals(t)}))},e.equalsByReference=function(e,t){var i=e.length;if(i!==e.length)return!1;for(var n=0;n<i;n++)if(e[n]!==t[n])return!1;return!0},e.unique=function(t,i,n,s){void 0===n&&(n=i),void 0===s&&(s=function(){});var r=t.length;if(0===r)return[];var o=(t=t.sort(i))[0],a=e.reducedMap(t,(function(e){return 0!==n(o,e)?(o=e,e):(s(e),null)}),1,r);return a.unshift(t[0]),a},e.uniqueNumber=function(e){e=e.sort(S.Comparers.number);for(var t=Number.NaN,i=e.length-1;i>=0;i--)t===e[i]?e.splice(i,1):t=e[i];return e},e.forEach=function(e,t,i,n){void 0===i&&(i=0),void 0===n&&(n=e.length);for(var s=i;s<n;s++)t(e[s],s)},e.forEach2=function(e,t,i,n,s){void 0===n&&(n=0),void 0===s&&(s=e.length);for(var r=n;r<s;r++)i(e[r],t[r],r)},e.reverseForEach=function(e,t,i,n){void 0===i&&(i=e.length-1),void 0===n&&(n=0);for(var s=i;s>=n;s--)t(e[s],s)},e.reverseIndexOf=function(e,t,i,n){void 0===i&&(i=e.length-1),void 0===n&&(n=0);for(var s=i;s>=n;s--)if(e[s]===t)return s;return-1},e.accumulate=function(e,t,i,n,s){void 0===n&&(n=0),void 0===s&&(s=e.length);for(var r=t,o=n;o<s;o++)r=i(r,e[o],o);return r},e.accumulateNumber=function(e,t,i,n,s){void 0===i&&(i=0),void 0===n&&(n=0),void 0===s&&(s=e.length);for(var r=i,o=n;o<s;o++)r+=t(e[o],o,r);return r},e.anyOf=function(e,t,i,n){void 0===i&&(i=0),void 0===n&&(n=e.length);for(var s=i;s<n;s++)if(t(e[s],s))return!0;return!1},e.unsafeAnyOf=function(e,t,i,n){void 0===i&&(i=0),void 0===n&&(n=e.length);for(var s=i;s<n;s++){var r=t(e[s],s);if(r)return r}return null},e.reverseAnyOf=function(e,t,i,n){void 0===i&&(i=e.length-1),void 0===n&&(n=0);for(var s=i;s>=n;s--)if(t(e[s],s))return!0;return!1},e.unsafeReverseAnyOf=function(e,t,i,n){void 0===i&&(i=e.length-1),void 0===n&&(n=0);for(var s=i;s>=n;s--){var r=t(e[s],s);if(r)return r}return null},e.anyOf2=function(e,t,i,n,s){void 0===n&&(n=0),void 0===s&&(s=e.length);for(var r=n;r<s;r++)if(i(e[r],t[r],r))return!0;return!1},e.allOf=function(e,t,i,n){void 0===i&&(i=0),void 0===n&&(n=e.length);for(var s=i;s<n;s++)if(!t(e[s],s))return!1;return!0},e.allOf2=function(e,t,i,n,s){void 0===n&&(n=0),void 0===s&&(s=e.length);for(var r=n;r<s;r++)if(!i(e[r],t[r],r))return!1;return!0},e.allOfOnInterval=function(e,t){for(var i=e.end,n=e.start;n<i;n++)if(!t(n))return!1;return!0},e.addListOnTail=function(e,t){for(var i=0,n=void 0;n=t[i];i++)e.push(n);return e},e.joinLists=function(t){for(var i=[],n=1;n<arguments.length;n++)i[n-1]=arguments[n];return e.accumulate(i,[],(function(i,n){return e.addListOnTail(i,t(n)),i}))},e.push=function(e,t){return e.push(t),e},e.countIf=function(t,i){return e.accumulateNumber(t,(function(e,t){return i(e,t)?1:0}))},e.clear=function(e){e.splice(0)},e.merge=function(e,t,i,n,s,r){if(void 0===s&&(s=0),void 0===r&&(r=e.length),e=e.slice(s,r),r-s<2)return e;for(var o=(e=e.sort(t))[s],a=[o],l=s+1;l<r;l++){var A=e[l];i(o,A)?n(o,A):a.push(o=A)}return a},e.min=function(t,i,n,s){void 0===n&&(n=0),void 0===s&&(s=t.length);var r=e.minExtended(t,i,n,s);return r?r.minElement:null},e.max=function(t,i,n,s){void 0===n&&(n=0),void 0===s&&(s=t.length);var r=e.maxExtended(t,i,n,s);return r?r.maxElement:null},e.minMax=function(t,i,n,s){void 0===n&&(n=0),void 0===s&&(s=t.length);var r=e.minMaxExtended(t,i,n,s);return r?new I.MinMax(r.minElement,r.maxElement):null},e.minExtended=function(e,t,i,n){if(void 0===i&&(i=0),void 0===n&&(n=e.length),0===e.length)return null;for(var s=e[i],r=t(s),o=i+1;o<n;o++){var a=e[o],l=t(a);l<r&&(r=l,s=a)}return new I.ExtendedMin(s,r)},e.maxExtended=function(e,t,i,n){if(void 0===i&&(i=0),void 0===n&&(n=e.length),0===e.length)return null;for(var s=e[i],r=t(s),o=i+1;o<n;o++){var a=e[o],l=t(a);l>r&&(r=l,s=a)}return new I.ExtendedMax(s,r)},e.minMaxExtended=function(e,t,i,n){if(void 0===i&&(i=0),void 0===n&&(n=e.length),0===e.length)return null;for(var s=e[i],r=s,o=t(s),a=o,l=i+1;l<n;l++){var A=e[l],d=t(A);d<o?(o=d,s=A):d>a&&(a=d,r=A)}return new I.ExtendedMinMax(s,o,r,a)},e.minByCmp=function(e,t,i,n){if(void 0===i&&(i=0),void 0===n&&(n=e.length),0===e.length)return null;for(var s=e[i],r=i+1;r<n;r++){var o=e[r];t(o,s)<0&&(s=o)}return s},e.maxByCmp=function(e,t,i,n){if(void 0===i&&(i=0),void 0===n&&(n=e.length),0===e.length)return null;for(var s=e[i],r=i+1;r<n;r++){var o=e[r];t(o,s)>0&&(s=o)}return s},e.minMaxByCmp=function(e,t,i,n){if(void 0===i&&(i=0),void 0===n&&(n=e.length),0===e.length)return null;for(var s=e[i],r=s,o=i+1;o<n;o++){var a=e[o],l=t(a,s);l>0?r=a:l<0&&(s=a)}return new I.MinMax(s,r)},e}();t.ListUtils=i}));t(x);var D=e((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.MathUtils=void 0;var i=function(){function e(){}return e.round=function(t,i){void 0===i&&(i=0);var n=e.powFactor[i];return Math.round(t*n)/n},e.numberCloseTo=function(e,t,i){return void 0===i&&(i=1e-5),Math.abs(e-t)<i},e.restrictValue=function(e,t,i){return i<t&&(i=t),e>i?i:e<t?t:e},e.getRandomInt=function(e,t){return Math.floor(Math.random()*(t-e+1))+e},e.generateGuid=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))},e.powFactor=x.ListUtils.initByCallback(20,(function(e){return Math.pow(10,e)})),e.somePrimes=[1009,1013,1019,1021,1031,1033,1039,1049,1051,1061,1063,1069,1087,1091,1093,1097,1103,1109,1117,1123,1129,1151,1153,1163,1171,1181,1187,1193,1201,1213,1217,1223,1229,1231,1237,1249,1259,1277,1279,1283,1289,1291,1297,1301,1303,1307,1319,1321,1327,1361,1367,1373,1381,1399,1409,1423,1427,1429,1433,1439,1447,1451,1453,1459,1471,1481,1483,1487,1489,1493,1499,1511,1523,1531,1543,1549,1553,1559,1567,1571,1579,1583,1597,1601,1607,1609,1613,1619,1621,1627,1637,1657,1663,1667,1669,1693,1697,1699,1709,1721,1723,1733,1741,1747,1753,1759,1777,1783,1787,1789,1801,1811,1823,1831,1847,1861,1867,1871,1873,1877,1879,1889,1901,1907,1913,1931,1933,1949,1951,1973,1979,1987,1993,1997,1999,2003],e}();t.MathUtils=i}));t(D);var F,T=e((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.DomUtils=void 0;var i=function(){function e(){}return e.clearInnerHtml=function(e){for(;e.firstChild;)e.removeChild(e.firstChild)},e.setStylePosition=function(e,t){e.left=D.MathUtils.round(t.x,3)+"px",e.top=D.MathUtils.round(t.y,3)+"px"},e.setStyleSize=function(e,t){e.width=D.MathUtils.round(t.width,3)+"px",e.height=D.MathUtils.round(t.height,3)+"px"},e.setStyleSizeAndPosition=function(t,i){e.setStylePosition(t,i),e.setStyleSize(t,i)},e.hideNode=function(e){if(e){var t=e.parentNode;t&&t.removeChild(e)}},e.isHTMLElementNode=function(e){return e.nodeType===Node.ELEMENT_NODE},e.isTextNode=function(e){return e.nodeType===Node.TEXT_NODE},e.isElementNode=function(e){return e.nodeType===Node.ELEMENT_NODE},e.isHTMLTableRowElement=function(e){return"TR"===e.tagName},e.isItParent=function(e,t){if(!e||!t)return!1;for(;t;){if(t===e)return!0;if("BODY"===t.tagName)return!1;t=t.parentNode}return!1},e.getParentByTagName=function(e,t){for(t=t.toUpperCase();e;){if("BODY"===e.tagName)return null;if(e.tagName===t)return e;e=e.parentNode}return null},e.getDocumentScrollTop=function(){var t=h.Browser.IE&&"hidden"===e.getCurrentStyle(document.body).overflow&&document.body.scrollTop>0;return h.Browser.WebKitFamily||h.Browser.Edge||t?h.Browser.MacOSMobilePlatform?window.pageYOffset:h.Browser.WebKitFamily&&document.documentElement.scrollTop||document.body.scrollTop:document.documentElement.scrollTop},e.getDocumentScrollLeft=function(){var t=h.Browser.IE&&"hidden"===e.getCurrentStyle(document.body).overflow&&document.body.scrollLeft>0;return h.Browser.Edge||t?document.body?document.body.scrollLeft:document.documentElement.scrollLeft:h.Browser.WebKitFamily?document.documentElement.scrollLeft||document.body.scrollLeft:document.documentElement.scrollLeft},e.getCurrentStyle=function(e){if(e.currentStyle)return e.currentStyle;if(document.defaultView&&document.defaultView.getComputedStyle){var t=document.defaultView.getComputedStyle(e,null);if(!t&&h.Browser.Firefox&&window.frameElement){for(var i=[],n=window.frameElement;!(t=document.defaultView.getComputedStyle(e,null));)i.push([n,n.style.display]),n.style.setProperty("display","block","important"),n="BODY"===n.tagName?n.ownerDocument.defaultView.frameElement:n.parentNode;t=function(e){if("object"!=typeof e||!p.isDefined(e))return e;var t={};for(var i in e)t[i]=e[i];return t}(t);for(var s=void 0,r=0;s=i[r];r++)s[0].style.display=s[1]}return t}return window.getComputedStyle(e,null)},e.setFocus=function(e){function t(){try{e.focus(),h.Browser.IE&&document.activeElement!==e&&e.focus()}catch(e){}}h.Browser.MacOSMobilePlatform?t():setTimeout((function(){t()}),100)},e.hasClassName=function(e,t){try{var i=t.split(" "),n=e.classList;if(n){for(var s=i.length-1;s>=0;s--)if(!n.contains(i[s]))return!1}else{var r=e.getAttribute&&e.getAttribute("class");if(!r)return!1;var o=r.split(" ");for(s=i.length-1;s>=0;s--)if(o.indexOf(i[s])<0)return!1}return!0}catch(e){return!1}},e.addClassName=function(t,i){if(!e.hasClassName(t,i)){var n=t.getAttribute&&t.getAttribute("class");t.setAttribute("class",""===n?i:n+" "+i)}},e.removeClassName=function(e,t){var i=" "+(e.getAttribute&&e.getAttribute("class"))+" ",n=i.replace(" "+t+" "," ");i.length!==n.length&&e.setAttribute("class",u.StringUtils.trim(n))},e.toggleClassName=function(t,i,n){void 0===n?e.hasClassName(t,i)?e.removeClassName(t,i):e.addClassName(t,i):n?e.addClassName(t,i):e.removeClassName(t,i)},e.pxToInt=function(e){return n(e,parseInt)},e.pxToFloat=function(e){return n(e,parseFloat)},e.getAbsolutePositionY=function(t){function i(t){return Math.round(t.getBoundingClientRect().top+e.getDocumentScrollTop())}return t?h.Browser.IE?function(t){return h.Browser.IE&&null===t.parentNode?0:t.getBoundingClientRect().top+e.getDocumentScrollTop()}(t):h.Browser.Firefox&&h.Browser.Version>=3?i(t):h.Browser.Opera?function(t){var i=!0;t&&e.isHTMLTableRowElement(t)&&t.cells.length>0&&(t=t.cells[0]);for(var n=s(t,!1);null!=t;)n+=t.offsetTop,i||(n-=t.scrollTop),t=t.offsetParent,i=!1;return n+=document.body.scrollTop}(t):h.Browser.NetscapeFamily&&(!h.Browser.Firefox||h.Browser.Version<3)?function(t){for(var i=s(t,!1),n=!0;null!=t;){if(i+=t.offsetTop,n||null==t.offsetParent||(i-=t.scrollTop),!n&&h.Browser.Firefox){var r=e.getCurrentStyle(t);"DIV"===t.tagName&&"visible"!==r.overflow&&(i+=e.pxToInt(r.borderTopWidth))}n=!1,t=t.offsetParent}return i}(t):h.Browser.WebKitFamily||h.Browser.Edge?i(t):function(e){for(var t=0,i=!0;null!=e;)t+=e.offsetTop,i||null==e.offsetParent||(t-=e.scrollTop),i=!1,e=e.offsetParent;return t}(t):0},e.getAbsolutePositionX=function(t){function i(t){return Math.round(t.getBoundingClientRect().left+e.getDocumentScrollLeft())}return t?h.Browser.IE?function(t){return h.Browser.IE&&null===t.parentNode?0:t.getBoundingClientRect().left+e.getDocumentScrollLeft()}(t):h.Browser.Firefox&&h.Browser.Version>=3?i(t):h.Browser.Opera&&h.Browser.Version<=12?function(e){for(var t=!0,i=s(e,!0);null!=e;)i+=e.offsetLeft,t||(i-=e.scrollLeft),e=e.offsetParent,t=!1;return i+=document.body.scrollLeft}(t):h.Browser.NetscapeFamily&&(!h.Browser.Firefox||h.Browser.Version<3)?function(t){for(var i=s(t,!0),n=!0;null!=t;){if(i+=t.offsetLeft,n||null==t.offsetParent||(i-=t.scrollLeft),!n&&h.Browser.Firefox){var r=e.getCurrentStyle(t);"DIV"===t.tagName&&"visible"!==r.overflow&&(i+=e.pxToInt(r.borderLeftWidth))}n=!1,t=t.offsetParent}return i}(t):h.Browser.WebKitFamily||h.Browser.Edge?i(t):function(e){for(var t=0,i=!0;null!=e;)t+=e.offsetLeft,i||null==e.offsetParent||(t-=e.scrollLeft),i=!1,e=e.offsetParent;return t}(t):0},e.isInteractiveControl=function(e){return["A","INPUT","SELECT","OPTION","TEXTAREA","BUTTON","IFRAME"].indexOf(e.tagName)>-1},e.getClearClientHeight=function(t){return t.offsetHeight-(e.getTopBottomPaddings(t)+e.getVerticalBordersWidth(t))},e.getTopBottomPaddings=function(t,i){var n=i||e.getCurrentStyle(t);return e.pxToInt(n.paddingTop)+e.pxToInt(n.paddingBottom)},e.getVerticalBordersWidth=function(t,i){p.isDefined(i)||(i=h.Browser.IE&&9!==h.Browser.MajorVersion&&window.getComputedStyle?window.getComputedStyle(t):e.getCurrentStyle(t));var n=0;return"none"!==i.borderTopStyle&&(n+=e.pxToFloat(i.borderTopWidth)),"none"!==i.borderBottomStyle&&(n+=e.pxToFloat(i.borderBottomWidth)),n},e.getNodes=function(e,t){for(var i=e.all||e.getElementsByTagName("*"),n=[],s=0;s<i.length;s++){var r=i[s];t(r)&&n.push(r)}return n},e.getChildNodes=function(e,t){for(var i=e.childNodes,n=[],s=0;s<i.length;s++){var r=i[s];t(r)&&n.push(r)}return n},e.getNodesByClassName=function(t,i){if(t.querySelectorAll){var n=t.querySelectorAll("."+i),s=[];return n.forEach((function(e){return s.push(e)})),s}return e.getNodes(t,(function(t){return e.hasClassName(t,i)}))},e.getChildNodesByClassName=function(t,i){return t.querySelectorAll?function(e,t){for(var i=[],n=0;n<e.length;n++){var s=e[n];t(s)&&i.push(s)}return i}(t.querySelectorAll("."+i),(function(e){return e.parentNode===t})):e.getChildNodes(t,(function(t){return!!e.isElementNode(t)&&(p.isNonNullString(t.className)&&e.hasClassName(t,t.className))}))},e.getVerticalScrollBarWidth=function(){if(void 0===e.verticalScrollBarWidth){var t=document.createElement("DIV");t.style.cssText="position: absolute; top: 0px; left: 0px; visibility: hidden; width: 200px; height: 150px; overflow: hidden; box-sizing: content-box",document.body.appendChild(t);var i=document.createElement("P");t.appendChild(i),i.style.cssText="width: 100%; height: 200px;";var n=i.offsetWidth;t.style.overflow="scroll";var s=i.offsetWidth;n===s&&(s=t.clientWidth),e.verticalScrollBarWidth=n-s,document.body.removeChild(t)}return e.verticalScrollBarWidth},e.getHorizontalBordersWidth=function(t,i){p.isDefined(i)||(i=h.Browser.IE&&window.getComputedStyle?window.getComputedStyle(t):e.getCurrentStyle(t));var n=0;return"none"!==i.borderLeftStyle&&(n+=e.pxToFloat(i.borderLeftWidth)),"none"!==i.borderRightStyle&&(n+=e.pxToFloat(i.borderRightWidth)),n},e.getFontFamiliesFromCssString=function(e){return e.split(",").map((function(e){return u.StringUtils.trim(e.replace(/'|"/gi,""))}))},e.getInnerText=function(t){if(h.Browser.Safari&&h.Browser.MajorVersion<=5){null===e.html2PlainTextFilter&&((e.html2PlainTextFilter=document.createElement("DIV")).style.width="0",e.html2PlainTextFilter.style.height="0",e.html2PlainTextFilter.style.overflow="visible",e.html2PlainTextFilter.style.display="none",document.body.appendChild(e.html2PlainTextFilter));var i=e.html2PlainTextFilter;i.innerHTML=t.innerHTML,i.style.display="";var n=i.innerText;return i.style.display="none",n}return h.Browser.NetscapeFamily||h.Browser.WebKitFamily||h.Browser.IE&&h.Browser.Version>=9||h.Browser.Edge?t.textContent:t.innerText},e.html2PlainTextFilter=null,e.verticalScrollBarWidth=void 0,e}();function n(e,t){var i=0;if(p.isDefined(e)&&""!==e)try{var n=e.indexOf("px");n>-1&&(i=t(e.substr(0,n)))}catch(e){}return i}function s(e,t){for(var n=0,s=!0;null!=e&&"BODY"!==e.tagName;){var r=i.getCurrentStyle(e);if("absolute"===r.position)break;s||"DIV"!==e.tagName||""!==r.position&&"static"!==r.position||(n-=t?e.scrollLeft:e.scrollTop),e=e.parentNode,s=!1}return n}t.DomUtils=i}));t(T);class H{static markHandled(e,t=!0){e.cancelable&&e.preventDefault(),e.stopPropagation(),t&&e.stopImmediatePropagation()}static stopPropagation(e){e.stopPropagation(),e.stopImmediatePropagation()}static getOriginalSource(e){return e.composedPath()[0]}static containsInComposedPath(e,t){const i=e.composedPath();for(const e in i)if(t(i[e]))return!0;return!1}static getEventSource(e){var t;return null!==(t=e.srcElement)&&void 0!==t?t:e.target}}class U{}U.visible="visible",U.hidden="hidden",U.collapse="collapse";class P{}P.block="block",P.inline="inline",P.inlineBlock="inline-block",P.inlineTable="inline-table",P.listItem="list-item",P.none="none",P.runIn="run-in",P.table="table",P.tableCaption="table-caption",P.tableCell="table-cell",P.tableColumnGroup="table-column-group",P.tableColumn="table-column",P.tableFooterGroup="table-footer-group",P.tableHeaderGroup="table-header-group",P.tableRow="table-row",P.tableRowGroup="table-row-group",P.flex="flex";class Q{}Q.input="INPUT",Q.textarea="TEXTAREA",Q.video="VIDEO",Q.audio="AUDIO",Q.details="DETAILS",Q.textArea="TEXTAREA",Q.table="table",Q.tableCell="td",Q.tableHeaderCell="th",Q.mark="mark";class N{}F=N,N.aria="aria",N.ariaExpanded=`${F.aria}-expanded`,N.ariaLevel=`${F.aria}-level`,N.ariaChecked=`${F.aria}-checked`,N.ariaSelected=`${F.aria}-selected`,N.ariaLabel=`${F.aria}-label`,N.ariaValuenow=`${F.aria}-valuenow`,N.ariaValuetext=`${F.aria}-valuetext`;class R{}R.hidden="hidden";class L{}L.textTrimmed="text-trimmed",L.title="title";class M{}M.ellipsis="ellipsis";const k="a[href], input:not([disabled]), button:not([disabled]), textarea:not([disabled]), select:not([disabled]), area[href], iframe, object, embed, [tabindex]:not([tabindex='-1'])";class K{static containsInComposedPath(e,t){const i=e.composedPath();for(const e in i)if(i[e]===t)return!0;return!1}}const O=function(e,t,i=null){return!(!e||!e.matches(t))&&(getComputedStyle(e).textOverflow===M.ellipsis&&(!!_(e,i)&&!(!e.hasAttribute(L.textTrimmed)&&e.getAttribute(L.title))))},_=function(e,t=null){for(let i=0;i<e.children.length;i++)if(!(getComputedStyle(e.children[i]).display===P.inline||t&&e.children[i].matches(t)))return!1;return!0};class V{static isHoverableDevice(){return window.matchMedia("(hover: hover) and (pointer: fine)").matches}}class z{constructor(e,t,i,n=!1){this.isMobileDevice=!1,this.hasAccurateInput=!1,this.isMac=!1,this.isTouchDevice=!1,this.clientMinutesOffset=-(new Date).getTimezoneOffset(),this.isMobileDevice=e,this.hasAccurateInput=t,this.isMac=i,this.isTouchDevice=n}}class W{constructor(e,t){this.useUAData=null,this.useNativeDetection=null,this.useUAData=e,this.useNativeDetection=t}getInfo(){return new z(this.isMobile(),window.matchMedia("(pointer:fine)").matches,/Mac/.test(navigator.userAgent),window.navigator.maxTouchPoints>0)}isMobile(){const e=window.navigator.userAgentData;if(this.useUAData&&e)return!!e.mobile;const t=this.isMobileByUserAgent(window.navigator.userAgent);if(this.useNativeDetection){const e=window.navigator.maxTouchPoints>0&&window.matchMedia("(pointer:coarse)").matches;return t||e}return t}isMobileByUserAgent(e){return/Mobi|Android|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(e)}}function $(e=!0,t=!0){return new W(e,t).getInfo()}const G={DeviceInfo:z,DeviceInfoService:W,DeviceHelper:V,getDeviceInfo:$};class q{constructor(e){this.boundOnPointerDownHandler=this.onPointerDown.bind(this),this.boundOnPointerMoveHandler=this.onPointerMove.bind(this),this.boundOnPointerUpHandler=this.onPointerUp.bind(this),this.boundOnPointerCancelHandler=this.onPointerCancel.bind(this),this.boundOnDraggingKeyDownHandler=this.onDraggingKeyDown.bind(this),this.boundOnDraggingWindowBlurHandler=this.onDraggingWindowBlur.bind(this),this.boundOnDraggingContextMenuHandler=this.onDraggingContextMenu.bind(this),this.boundOnGotPointerCaptureHandler=this.onGotPointerCapture.bind(this),this.boundOnPointerClickHandler=this.onPointerClick.bind(this),this.boundOnPointerDblClickHandler=this.onPointerDblClick.bind(this),this.activePointers=new Set,this.element=e,this.state=o.Stopped;const t=e.hoverTitleElementsSelector,i=e.bypassNonInlineHoverTitleElementChildSelector;t&&V.isHoverableDevice()&&(this.boundOnPointerOverHandler=e=>function(e,t,i=null){const n=e.target;O(n,t,i)&&(n.offsetWidth<n.scrollWidth?(n.setAttribute(L.title,n.innerText),n.setAttribute(L.textTrimmed,"")):(n.removeAttribute(L.title),n.removeAttribute(L.textTrimmed)))}(e,t,i))}initialize(){this.addPointerEventsSubscriptions()}dispose(){this.removePointerEventsSubscriptions()}reinitialize(e){this.removePointerEventsSubscriptions(),this.element=e,this.addPointerEventsSubscriptions()}static preventDefaultBrowserBehaviour(e){e.cancelable&&e.preventDefault()}onGotPointerCapture(e){if(!this.shouldProcessPointerEvent(e))return;if(!this.pointerDownContext||!this.pointerDownContext.isLongTap&&this.state!==o.WaitingForDragging)return;const t=e.target;t&&t.hasPointerCapture(e.pointerId)&&t.releasePointerCapture(e.pointerId)}get handlePointerEventsMode(){return this.element.handlePointerEventsMode}get handlePointerEventsTarget(){var e;return null===(e=this.element)||void 0===e?void 0:e.handlePointerEventsTarget}handlePointerEventsDelay(e){const t=this.element.handlePointerEventsDelay(e);return t!==s.Default?t:e===r.Dragging?s.Dragging:s.None}shouldProcessPointerEvent(e){return H.containsInComposedPath(e,(e=>e===this.handlePointerEventsTarget))&&this.element.shouldProcessPointerEvent(e)}addPointerEventsSubscriptions(){const e=this.handlePointerEventsTarget;if(e){if(this.element!==e&&this.element.contains(e))throw new Error("Specify the handlePointerEventsTarget property as web component or it parent.");e.addEventListener("click",this.boundOnPointerClickHandler),e.addEventListener("dblclick",this.boundOnPointerDblClickHandler),e.addEventListener("pointerdown",this.boundOnPointerDownHandler),e.addEventListener("gotpointercapture",this.boundOnGotPointerCaptureHandler),this.boundOnPointerOverHandler&&e.addEventListener("pointerover",this.boundOnPointerOverHandler)}}removePointerEventsSubscriptions(){this.activePointers.clear();const e=this.handlePointerEventsTarget;e&&(e.removeEventListener("click",this.boundOnPointerClickHandler),e.removeEventListener("dblclick",this.boundOnPointerDblClickHandler),e.removeEventListener("pointerdown",this.boundOnPointerDownHandler),e.removeEventListener("gotpointercapture",this.boundOnGotPointerCaptureHandler),this.boundOnPointerOverHandler&&e.removeEventListener("pointerover",this.boundOnPointerOverHandler))}onPointerDown(e){var t;if(q.preventClickEvent=!1,this.activePointers.add(e.pointerId),!this.shouldProcessPointerEvent(e))return;const i="touch"===e.pointerType;i&&this.state===o.Dragging||(this.pointerDownContext={source:e,isTouch:i,isLongTap:!1},0!=(this.handlePointerEventsMode&r.Dragging)?0===e.button&&(this.state=o.WaitingForDragging,i&&(this.touchDeviceInteractionTimer=setTimeout(this.onTouchDeviceInteractionTimerTimeout.bind(this),this.handlePointerEventsDelay(r.Dragging))),document.addEventListener("pointermove",this.boundOnPointerMoveHandler),document.addEventListener("pointerup",this.boundOnPointerUpHandler),document.addEventListener("pointercancel",this.boundOnPointerCancelHandler),document.addEventListener("keydown",this.boundOnDraggingKeyDownHandler),document.addEventListener("contextmenu",this.boundOnDraggingContextMenuHandler),window.addEventListener("blur",this.boundOnDraggingWindowBlurHandler),1===this.activePointers.size&&T.DomUtils.addClassName(document.body,"dx-prevent-selection")):e.shiftKey&&(null===(t=null===document||void 0===document?void 0:document.getSelection())||void 0===t||t.removeAllRanges()))}onPointerMove(e){var t;if(this.state===o.Stopped)return;this.activePointers.clear();if(0===e.buttons)return this.state===o.Dragging&&this.stopPointerDrag(e,!1),this.stopPointerInteraction(),void this.element.releasePointerCapture(e.pointerId);this.state===o.WaitingForDragging&&this.isDistanceExceedLimit(e)&&((null===(t=this.pointerDownContext)||void 0===t?void 0:t.isTouch)?this.handlePointerEventsDelay(r.Dragging)>0&&this.stopPointerInteraction():this.tryStartPointerInteraction())}stopPointerDrag(e,t){if(this.pointerDownContext){const t=new l({source:e,isTouch:this.pointerDownContext.isTouch,isLongTap:this.pointerDownContext.isLongTap});this.element.dispatchEvent(t),this.pointerDownContext.isTouch||(q.preventClickEvent=!0)}}onPointerCancel(e){if(this.activePointers.clear(),this.state===o.Stopped)return;this.stopPointerInteraction();const t=new A;this.element.dispatchEvent(t)}onDraggingKeyDown(e){if(this.activePointers.clear(),this.state!==o.Stopped&&"Escape"===e.key){this.stopPointerInteraction();const e=new A;this.element.dispatchEvent(e)}}onDraggingWindowBlur(e){if(this.activePointers.clear(),this.state===o.Stopped)return;this.stopPointerInteraction();const t=new A;this.element.dispatchEvent(t)}onDraggingContextMenu(e){this.state!==o.Stopped&&(e.preventDefault(),e.stopPropagation())}onPointerUp(e){this.activePointers.clear(),this.state===o.Dragging&&this.stopPointerDrag(e,!0),this.stopPointerInteraction(),this.element.releasePointerCapture(e.pointerId)}onPointerClick(e){this.activePointers.clear(),0!=(this.handlePointerEventsMode&r.Click)&&this.shouldProcessPointerEvent(e)&&(q.preventClickEvent||0!==e.button||this.isDistanceExceedLimit(e)?e.stopPropagation():(this.raiseDxPointerEvent(e,new d({source:e,isTouch:!!this.pointerDownContext&&this.pointerDownContext.isTouch}),d.eventName),delete this.pointerDownContext))}onPointerDblClick(e){this.activePointers.clear(),0!=(this.handlePointerEventsMode&r.DblClick)&&this.shouldProcessPointerEvent(e)&&(0!==e.button||this.isDistanceExceedLimit(e)?e.stopPropagation():this.raiseDxPointerEvent(e,new c({source:e,isTouch:!!this.pointerDownContext&&this.pointerDownContext.isTouch}),c.eventName))}raiseDxPointerEvent(e,t,i){e[i]||(this.element.dispatchEvent(t),e[i]=!0)}tryStartPointerInteraction(){q.pointerInteractionElement?this.state=o.Stopped:this.startPointerInteraction()}startPointerInteraction(){this.state=o.Dragging,q.pointerInteractionElement=this.element,document.addEventListener("touchmove",q.preventDefaultBrowserBehaviour,{passive:!1}),this.raisePointerDragStartEvent()}stopPointerInteraction(){this.clearTouchDeviceInteractionTimer(),this.state===o.Dragging&&(delete q.pointerInteractionElement,this.state=o.Stopped),document.removeEventListener("touchmove",q.preventDefaultBrowserBehaviour),document.removeEventListener("pointermove",this.boundOnPointerMoveHandler),document.removeEventListener("pointerup",this.boundOnPointerUpHandler),document.removeEventListener("pointercancel",this.boundOnPointerCancelHandler),document.removeEventListener("keydown",this.boundOnDraggingKeyDownHandler),document.removeEventListener("contextmenu",this.boundOnDraggingContextMenuHandler),window.removeEventListener("blur",this.boundOnDraggingWindowBlurHandler),T.DomUtils.removeClassName(document.body,"dx-prevent-selection"),delete this.pointerDownContext}clearTouchDeviceInteractionTimer(){this.touchDeviceInteractionTimer&&(clearTimeout(this.touchDeviceInteractionTimer),delete this.touchDeviceInteractionTimer)}onTouchDeviceInteractionTimerTimeout(){this.state===o.WaitingForDragging&&this.pointerDownContext&&this.pointerDownContext.isTouch&&(this.pointerDownContext.isLongTap=!0,this.tryStartPointerInteraction(),this.clearTouchDeviceInteractionTimer())}isDistanceExceedLimit(e){return!!this.pointerDownContext&&(Math.abs(this.pointerDownContext.source.clientX-e.clientX)>4||Math.abs(this.pointerDownContext.source.clientY-e.clientY)>4)}raisePointerDragStartEvent(){if(!this.pointerDownContext)return;const e=new a({source:this.pointerDownContext.source,isTouch:this.pointerDownContext.isTouch,isLongTap:this.pointerDownContext.isLongTap});this.element.dispatchEvent(e)}}q.preventClickEvent=!1;const Y="undefined"!=typeof HTMLElement&&"undefined"!=typeof customElements?HTMLElement:class{},X="dx-license-trigger",J=X,j="dx-license",Z={buyNow:"buy-now",licensingDoc:"licensing-doc",version:"version",subscriptions:"subscriptions"},ee={opacity:"1",visibility:"visible","clip-path":"none",filter:"none"},te={...ee,width:"100%",height:"auto","line-height":"normal",display:"block","z-index":"1500",position:"static",transform:"translate(0px, 0px)","background-color":"#FF7200",border:"none",margin:"auto","box-sizing":"border-box","text-align":"center"},ie={...te,display:"flex","align-items":"center","flex-direction":"row",position:"relative",top:"0px",left:"0px",padding:"0.5rem"},ne={width:"1rem",cursor:"pointer",height:"1rem"},se={...ee,display:"inline",position:"static",padding:"0px",margin:"0px",color:"white","font-family":'"Segoe UI","Open Sans Condensed",-apple-system,BlinkMacSystemFont,avenir next,avenir,helvetica neue,helvetica,Cantarell,Ubuntu,roboto,noto,arial,sans-serif',"font-size":"0.875rem","font-wight":"600"};function re(e,t){const i=t?{...e,...t}:e;return Object.keys(i).reduce(((e,t)=>`${e}${[t,`${i[t]} !important;`].join(": ")}`),"")}class oe extends Y{_getSubscriptionsArray(e){var t;return null!==(t=null==e?void 0:e.split(",").map((e=>e.trim())))&&void 0!==t?t:[]}updateSubscriptions(e){if(!this._subscriptionsSpan||!e)return;const t=this._getSubscriptionsArray(this.getAttribute(Z.subscriptions));if(!t.length)return void this._updateSubscriptionsText(e);const i=this._getSubscriptionsArray(e),n=[];for(let e=0;e<i.length;e++)t.some((t=>t===i[e]))&&n.push(i[e]);this._updateSubscriptionsText(0!==n.length?n.join(", "):[...t,...i].join(", "))}constructor(){var e,t,i,n,s;super(),this._observer=null,this._inReassign=!1,this._spanStyles=re(se,null===(e=oe.customStyles)||void 0===e?void 0:e.textStyles),this._linkStyles=re(se,null===(t=oe.customStyles)||void 0===t?void 0:t.linkStyles),this._containerStyles=re(ie,null===(i=oe.customStyles)||void 0===i?void 0:i.containerStyles),this._contentStyles=re(te,null===(n=oe.customStyles)||void 0===n?void 0:n.contentStyles),this._buttonStyles=re(ne,null===(s=oe.customStyles)||void 0===s?void 0:s.contentStyles)}_createSpan(e){const t=document.createElement("span");return t.innerText=e,t.style.cssText=this._spanStyles,t}_updateSubscriptionsText(e){e&&(this.setAttribute(Z.subscriptions,e),this._subscriptionsSpan.innerText=` Included in Subscriptions: ${e}`)}_createSubsctionSpan(){return this._subscriptionsSpan=this._createSpan(""),this._updateSubscriptionsText(this.getAttribute(Z.subscriptions)),this._subscriptionsSpan}_createLink(e,t){const i=document.createElement("a");return i.innerText=e,i.style.cssText=this._linkStyles,i.href=t,i.target="_blank",i}_createButton(){const e=document.createElement("div");e.style.cssText=this._buttonStyles;const t=document.createElementNS("http://www.w3.org/2000/svg","polygon"),i=document.createElementNS("http://www.w3.org/2000/svg","svg");return t.setAttribute("points","13.4 12.7 8.7 8 13.4 3.4 12.6 2.6 8 7.3 3.4 2.6 2.6 3.4 7.3 8 2.6 12.6 3.4 13.4 8 8.7 12.7 13.4 13.4 12.7"),t.style.cssText=re({fill:"#fff",opacity:".5","stroke-width":"0px"}),i.setAttribute("id","Layer_1"),i.setAttribute("data-name","Layer 1"),i.setAttribute("version","1.1"),i.setAttribute("viewBox","0 0 16 16"),i.style.cssText=re({"vertical-align":"baseline"}),i.appendChild(t),e.appendChild(i),e.onclick=()=>{oe.closed=!0,this.style.cssText=re({display:"none"})},e}_createContentContainer(){const e=document.createElement("div");return e.style.cssText=this._contentStyles,e.append(this._createSpan("For evaluation purposes only. Redistribution prohibited. Please "),this._createLink("register",this.getAttribute(Z.licensingDoc)),this._createSpan(" an existing license or "),this._createLink("purchase a new license",this.getAttribute(Z.buyNow)),this._createSpan(` to continue use of DevExpress product libraries (v${this.getAttribute(Z.version)}).`),this._createSubsctionSpan()),e}_reassignComponent(){this.innerHTML="",this.style.cssText=this._containerStyles,this.append(this._createContentContainer(),this._createButton())}connectedCallback(){this._reassignComponent(),this._observer||(this._observer=new MutationObserver((()=>{var e;oe.closed?null===(e=this._observer)||void 0===e||e.disconnect():this._inReassign?this._inReassign=!1:(this._inReassign=!0,this._reassignComponent())})),this._observer.observe(this,{childList:!0,attributes:!0,subtree:!0}))}disconnectedCallback(){oe.closed||Promise.resolve().then((()=>{if(void 0===document)return;document.getElementsByTagName(j).length||document.body.prepend(this)}))}}oe.customStyles=void 0,oe.closed=!1;class ae extends Y{connectedCallback(){this.style.cssText=re({display:"none"});const e=document.getElementsByTagName(j);if(!oe.closed)if(e.length)e[0].updateSubscriptions(this.getAttribute(Z.subscriptions));else{const e=document.createElement(j);Object.values(Z).forEach((t=>{this.hasAttribute(t)&&e.setAttribute(t,this.getAttribute(t))})),e.setAttribute("data-permanent",""),document.body.prepend(e)}}}function le(e){customElements.get(J)||(oe.customStyles=e,customElements.define(j,oe),customElements.define(J,ae))}window.DevExpress=window.DevExpress||{},window.DevExpress.config?window.DevExpress.config(JSON.parse(atob("eyJsaWNlbnNlS2V5IjoiZXdvZ0lDSm1iM0p0WVhRaU9pQXhMQW9nSUNKcGJuUmxjbTVoYkZWellXZGxTV1FpT2lBaWJtRjZUREkwYlc5TVRrNW9aM0pPVFVocVdETlhlU0lLZlE9PS5kaVQyYjBLalpZMm9KWlo0QXhVTXRYRlQxc3ZFaG45OW5PMWZrSHQxS09TKzgzMnFzODREbENreWJub3pNVER1clB6UFpiWjRHbCtMQnBzcnhhUXd5NzB6dHY2blVNd21MeExKVjJHdFhKV2lVWWl3R2R6bEg0UkxrcGZreERGK0FYdEVUZz09In0="))):window.DevExpress.config=JSON.parse(atob("eyJsaWNlbnNlS2V5IjoiZXdvZ0lDSm1iM0p0WVhRaU9pQXhMQW9nSUNKcGJuUmxjbTVoYkZWellXZGxTV1FpT2lBaWJtRjZUREkwYlc5TVRrNW9aM0pPVFVocVdETlhlU0lLZlE9PS5kaVQyYjBLalpZMm9KWlo0QXhVTXRYRlQxc3ZFaG45OW5PMWZrSHQxS09TKzgzMnFzODREbENreWJub3pNVER1clB6UFpiWjRHbCtMQnBzcnhhUXd5NzB6dHY2blVNd21MeExKVjJHdFhKV2lVWWl3R2R6bEg0UkxrcGZreERGK0FYdEVUZz09In0=")),le();const Ae=document.createElement("template");Ae.innerHTML="<slot />";class de extends HTMLElement{constructor(){super(),this._handlePointerEventsMode=r.None,this._isInitialized=!1,this._isDisconnected=!1,this.pointerEventsHelper=new q(this),this.contentChangedObserver=null,this.prepareComponent()}get isInitialized(){return this._isInitialized}get useShadowDom(){return!0}connectedCallback(){!this.useShadowDom&&this.childElementCount>0&&this.componentContentChanged(),this.useShadowDom&&this._isDisconnected&&this.componentContentChanged(),this.pointerEventsHelper.initialize(),n.setLoaded(this),this._isDisconnected=!1}disconnectedCallback(){n.removeLoaded(this),this.pointerEventsHelper.dispose(),this.disposeComponent(),this._isDisconnected=!0}initializeComponent(){}afterInitialize(){}disposeComponent(){var e;null===(e=this.contentChangedObserver)||void 0===e||e.disconnect()}getContentTemplate(){return Ae}componentContentChanged(){this.initializeComponent(),this._isInitialized=!0,this.afterInitialize()}prepareComponent(){this.useShadowDom?this.prepareShadowDom():(this.contentChangedObserver=new MutationObserver(this.componentContentChanged.bind(this)),this.contentChangedObserver.observe(this,{childList:!0}))}prepareShadowDom(){const e=this.attachShadow({mode:"open"});e.appendChild(this.getContentTemplate().content.cloneNode(!0));e.querySelector("slot").addEventListener("slotchange",this.componentContentChanged.bind(this))}get handlePointerEventsMode(){return this._handlePointerEventsMode}set handlePointerEventsMode(e){this._handlePointerEventsMode=e}get handlePointerEventsTarget(){return this}get hoverTitleElementsSelector(){return null}get bypassNonInlineHoverTitleElementChildSelector(){return null}shouldProcessPointerEvent(e){return!0}handlePointerEventsDelay(e){return s.Default}}var ce;class he{}ce=he,he.Prefix="dxbl",he.Focused=he.Prefix+"-focused",he.Disabled=he.Prefix+"-disabled",he.ReadOnly=he.Prefix+"-readonly",he.Active=he.Prefix+"-active",he.Touch=he.Prefix+"-touch",he.GrabbingCursor=he.Prefix+"-grabbing-cursor",he.ResizeCursor=he.Prefix+"-resize-cursor",he.Image=he.Prefix+"-image",he.Text=he.Prefix+"-text",he.Button=he.Prefix+"-btn",he.DisplayNone=he.Prefix+"-display-none",he.Invisible=he.Prefix+"-invisible",he.InvisibleOffScreen=he.Invisible+"-off-screen",he.Visible=he.Prefix+"-visible",he.Loaded=he.Prefix+"-loaded",he.SkeletonBaseClassName=he.Prefix+"-skeleton",he.SkeletonAnimateClassName=ce.SkeletonBaseClassName+"-animate",he.VirtualSpacerPatternClassName=he.Prefix+"-virtual-items-container-pattern",he.Dragging=he.Prefix+"-dragging",he.DropTargetIndicator=he.Prefix+"-drop-target-indicator";class ue{}ue.ClassName=he.Prefix+"-grid",ue.DataTableClassName=ue.ClassName+"-table",ue.DataTableNoScrollClassName=ue.DataTableClassName+"-no-scroll",ue.TopPanelClassName=ue.ClassName+"-top-panel",ue.BottomPanelClassName=ue.ClassName+"-bottom-panel",ue.ToolbarContainerClassName=ue.ClassName+"-toolbar-container",ue.PagerPanelClassName="dxbl-pager-container",ue.GroupPanelContentContainerClassName=ue.ClassName+"-group-panel-container",ue.SearchBoxContainerClassName=ue.ClassName+"-search-box-container",ue.SearchBoxClassName=ue.ClassName+"-search-box",ue.EmptyHeaderCellContentContainerClassName=ue.ClassName+"-empty-header",ue.GroupContentFreeSpaceClassName=ue.ClassName+"-group-panel-free-space",ue.HeaderRowClassName=ue.ClassName+"-header-row",ue.EditRowClassName=ue.ClassName+"-edit-row",ue.FilterRowClassName=ue.ClassName+"-filter-row",ue.GroupRowClassName=ue.ClassName+"-group-row",ue.FooterRowClassName=ue.ClassName+"-footer-row",ue.GroupFooterRowClassName=ue.ClassName+"-group-footer-row",ue.PagerRowClassName=ue.ClassName+"-pager-row",ue.EmptyRowClassName=ue.ClassName+"-empty-row",ue.ArmRowClassName=ue.ClassName+"-arm-row",ue.HeaderElementClassName=ue.ClassName+"-header",ue.HeaderContentClassName=ue.ClassName+"-header-content",ue.AllowDragClassName=ue.ClassName+"-action",ue.DraggableHeaderClassName=ue.ClassName+"-draggable-header",ue.SelectionCellClassName=ue.ClassName+"-selection-cell",ue.CommandCellClassName=ue.ClassName+"-command-cell",ue.FixedCellClassName=ue.ClassName+"-fixed-cell",ue.LastLeftFixedCellClassName=ue.ClassName+"-last-fixed-left-cell",ue.IndentCellClassName=ue.ClassName+"-indent-cell",ue.HeaderIndentCellClassName=ue.ClassName+"-header-indent-cell",ue.GroupFooterIndentCellClassName=ue.ClassName+"-group-footer-indent-cell",ue.ExpandButtonCellClassName=ue.ClassName+"-expand-button-cell",ue.DetailCellClassName=ue.ClassName+"-detail-cell",ue.EmptyDataRowCellClassName=ue.ClassName+"-empty-data-area",ue.EmptyCellClassName=ue.ClassName+"-empty-cell",ue.EditFormClassName=ue.ClassName+"-edit-form",ue.EditNewItemRowClassName=ue.ClassName+"-edit-new-item-row",ue.EditNewItemRowInplaceClassName=ue.ClassName+"-edit-new-item-row-inplace",ue.TopFixedBodyClassName=ue.ClassName+"-top-fixed-body",ue.SelectedRowClassName=ue.ClassName+"-selected-row",ue.TouchSelectionClassName=ue.ClassName+"-touch-selection",ue.TouchSelectionEdgeClassName=ue.ClassName+"-touch-selection-edge",ue.MoveCursorCssClassName=ue.ClassName+"-move-cursor",ue.DraggingDownTargetClassName=ue.ClassName+"-dragging-down-target",ue.DraggingUpTargetClassName=ue.ClassName+"-dragging-up-target",ue.ColumnsResizeAnchorClassName=ue.ClassName+"-column-resize-anchor",ue.ColumnsSeparatorClassName=ue.ClassName+"-columns-separator",ue.HiddenEmptyCellClassName=ue.ClassName+"-hidden-empty-cell",ue.RowDragHintClassName=ue.ClassName+"-row-drag-hint",ue.RowDragHintPortalClassName=ue.ClassName+"-row-drag-hint-portal",ue.RowDragAnchorClassName=ue.ClassName+"-row-drag-anchor-cell",ue.DropTargetIndicatorClassName=ue.ClassName+"-drop-target-indicator",ue.ColumnChooserItemClassName=ue.ClassName+"-column-chooser-item",ue.ColumnChooserDraggingItemClassName=ue.ClassName+"-column-chooser-dragging-item",ue.ColumnChooserDraggingItemNextSiblingClassName=ue.ClassName+"-column-chooser-dragging-item-next-sibling",ue.ColumnChooserItemDragAnchorClassName=ue.ClassName+"-column-chooser-item-drag-anchor",ue.ColumnChooserItemDragLockClassName=ue.ClassName+"-column-chooser-item-drag-lock",ue.HighlightedTextClassName=ue.ClassName+"-highlighted-text",ue.CalculateContentWidthsClassName=ue.DataTableClassName+"-content-fit-calc";const pe="dxbl-grid-header-content";const me="dxbl-ui-handlers-bridge";class ge{constructor(e,t){this.id=e,this.result=t}processedBy(e){return this.id===e}}class Ce extends HTMLElement{constructor(){super(),this.pendingCommands=new Map,this._value=null}disposeComponent(){this.pendingCommands.clear()}get value(){return this._value}send(e,t,i=null){try{const n=this.nextCommandId();return this.pendingCommands.set(n,i),this._value=JSON.stringify([n.toString(),e,t]),this.dispatchEvent(new Event("change",{bubbles:!0})),n}finally{this._value=null}}static get observedAttributes(){return["command-results"]}attributeChangedCallback(e,t,i){if("command-results"===e)setTimeout((()=>this.processCommandResults(i)),0)}processCommandResults(e){const t=this.parseCommandResults(e);for(const e of t){const t=this.pendingCommands.get(e.id);this.pendingCommands.delete(e.id),t&&t(e)}}parseCommandResults(e){const t=new Array,i=JSON.parse(e);for(const e of i.CommandResults)t.push(new ge(parseInt(e.Id),e.Result));return t.sort(((e,t)=>e.id===t.id?0:e.id>t.id?1:-1))}nextCommandId(){if(0===this.pendingCommands.size)return 0;let e=0;for(const t of this.pendingCommands.keys())t>e&&(e=t);return e+1}}customElements.define(me,Ce);class fe{get previousColumnUid(){return this._previousColumnUid}get nextColumnUid(){return this._nextColumnUid}get nextVisibleColumnUid(){return this._nextVisibleColumnUid}constructor(e,t,i){this._previousColumnUid=e,this._nextColumnUid=t,this._nextVisibleColumnUid=i}}class ve{get uID(){return this._uID}get parentUID(){return this._parentUID}get allowGroup(){return this._allowGroup}get allowReorder(){return this._allowReorder}get dragRestrictions(){return this._dragRestrictions}get width(){return this._width}get minWidth(){return this._minWidth}get hasWidth(){return!!this._width}get isFreeWidth(){return!this.width&&!this.isIndent&&!this.isEmpty}get isPercentWidth(){return this.hasWidth&&-1!==this.width.indexOf("%")}get isAbsoluteWidth(){return this.hasWidth&&!this.isPercentWidth||this.isIndent}get colElementWidth(){return this._colElementWidth}set colElementWidth(e){this._colElementWidth=e}get isIndent(){return this._isIndent}get isEmpty(){return this._isEmpty}get isDetail(){return this._isDetail}get isEditable(){return this._isEditable}get fixedPosition(){return this._fixedPosition}get headerRowIndex(){return this._headerRowIndex}get headerCellIndex(){return this._headerCellIndex}get leafIndex(){return this._leafIndex}get parent(){return this._parent}get parentPath(){return this._parentPath}get isRoot(){return this.parentUID<0}get hasLeafs(){return this._leafs.length>0}constructor(e,t,i,n,s,r,o=!1,a=!1,l=!1,A=!1,d=!0,c=null){this._parent=null,this._parentPath=[],this._leafs=[],this._leafIndex=-1,this._headerRowIndex=-1,this._headerCellIndex=-1,this._uID=e,this._parentUID=t,this._allowGroup=i,this._allowReorder=d,this._dragRestrictions=c,this._width=n,this._colElementWidth=n,this._minWidth=s,this._isIndent=o,this._isEmpty=a,this._isDetail=l,this._isEditable=A,this._fixedPosition=r}getPercents(){return this.isPercentWidth?parseFloat(this.width.replace("%","")):0}updateWidth(e){this._width=e,this._colElementWidth=e}updateHeaderLayoutInfo(e,t){this._headerRowIndex=e,this._headerCellIndex=t}attachParent(e){var t,i;this._parent=e,this._parentPath=[...null!==(i=null===(t=this.parent)||void 0===t?void 0:t.parentPath)&&void 0!==i?i:[],e]}attachLeaf(e){this._leafs.push(e)}updateLeafIndex(e){this._leafIndex=e}containsLeaf(e){return this.hasLeafs?this._leafs.findIndex((t=>t.uID===e))>=0:this.uID===e}getLeftLeaf(){return this.hasLeafs?this._leafs[0]:null}getRightLeaf(){return this.hasLeafs?this._leafs[this._leafs.length-1]:null}}const be="dxbl-drop-restrictions-info",we="data";customElements.define(be,class extends de{constructor(){super(...arguments),this._dataCache=null,this._allowedComponentsCache=null,this._reorderDeniedRangesCache=null}get allowedComponents(){var e;return this._allowedComponentsCache||(this._allowedComponentsCache=null!==(e=this.data["allowed-components"])&&void 0!==e?e:[]),this._allowedComponentsCache}get reorderDeniedRanges(){var e;return this._reorderDeniedRangesCache||(this._reorderDeniedRangesCache=null!==(e=this.data["reorder-denied-ranges"])&&void 0!==e?e:[]),this._reorderDeniedRangesCache}get data(){if(!this._dataCache){const e=this.getAttribute(we);this._dataCache=e?JSON.parse(e):{}}return this._dataCache}invalidateCaches(){this._dataCache=null,this._allowedComponentsCache=null,this._reorderDeniedRangesCache=null}static get observedAttributes(){return[we]}attributeChangedCallback(e,t,i){this.invalidateCaches()}});var ye=e((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.EncodeUtils=void 0;var i=function(){function e(){}return e.encodeHtml=function(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},e.decodeHtml=function(e){return e.replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">")},e.prepareTextForRequest=function(e){return e.replace(/%/g,"%25").replace(/&/g,"%26amp;").replace(/\+/g,"%2B").replace(/</g,"%26lt;").replace(/>/g,"%26gt;").replace(/"/g,"%26quot;")},e.prepareTextForCallBackRequest=function(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},e.decodeViaTextArea=function(e){var t=document.createElement("TEXTAREA");return t.innerHTML=e,t.value},e}();t.EncodeUtils=i}));t(ye);var Be=e((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.KeyCode=t.ModifierKey=t.KeyUtils=void 0;var i,n,s=function(){function e(){}return e.getKeyModifiers=function(e){var t=0;return e.altKey&&(t|=i.Alt),e.ctrlKey&&(t|=i.Ctrl),e.shiftKey&&(t|=i.Shift),e.metaKey&&(t|=i.Meta),t},e.getShortcutCode=function(e,t,n,s,r){var o=e;return o|=t?i.Ctrl:0,o|=n?i.Shift:0,o|=s?i.Alt:0,o|=r?i.Meta:0},e.getShortcutCodeByEvent=function(t){return e.getShortcutCode(e.getEventKeyCode(t),t.ctrlKey,t.shiftKey,t.altKey,!!h.Browser.MacOSPlatform&&t.metaKey)},e.getEventKeyCode=function(e){return h.Browser.NetscapeFamily||h.Browser.Opera?e.which:e.keyCode},e.parseShortcutString=function(t){if(!t)return 0;var i=!1,s=!1,r=!1,o=!1,a=null,l=t.toString().split("+");if(l.length>0)for(var A=0;A<l.length;A++){var d=u.StringUtils.trim(l[A].toUpperCase());switch(d){case"CONTROL":case"CONTROLKEY":case"CTRL":i=!0;break;case"SHIFT":case"SHIFTKEY":s=!0;break;case"ALT":r=!0;break;case"CMD":o=!0;break;case"F1":a=n.F1;break;case"F2":a=n.F2;break;case"F3":a=n.F3;break;case"F4":a=n.F4;break;case"F5":a=n.F5;break;case"F6":a=n.F6;break;case"F7":a=n.F7;break;case"F8":a=n.F8;break;case"F9":a=n.F9;break;case"F10":a=n.F10;break;case"F11":a=n.F11;break;case"F12":a=n.F12;break;case"RETURN":case"ENTER":a=n.Enter;break;case"HOME":a=n.Home;break;case"END":a=n.End;break;case"LEFT":a=n.Left;break;case"RIGHT":a=n.Right;break;case"UP":a=n.Up;break;case"DOWN":a=n.Down;break;case"PAGEUP":a=n.PageUp;break;case"PAGEDOWN":a=n.PageDown;break;case"SPACE":a=n.Space;break;case"TAB":a=n.Tab;break;case"BACKSPACE":case"BACK":a=n.Backspace;break;case"CONTEXT":a=n.ContextMenu;break;case"ESCAPE":case"ESC":a=n.Esc;break;case"DELETE":case"DEL":a=n.Delete;break;case"INSERT":case"INS":a=n.Insert;break;case"PLUS":a="+".charCodeAt(0);break;default:a=d.charCodeAt(0)}}else alert(ye.EncodeUtils.decodeViaTextArea("Invalid shortcut"));return e.getShortcutCode(a,i,s,r,o)},e}();t.KeyUtils=s,function(e){e[e.None=0]="None",e[e.Ctrl=65536]="Ctrl",e[e.Shift=262144]="Shift",e[e.Alt=1048576]="Alt",e[e.Meta=16777216]="Meta"}(i=t.ModifierKey||(t.ModifierKey={})),function(e){e[e.Backspace=8]="Backspace",e[e.Tab=9]="Tab",e[e.Enter=13]="Enter",e[e.Pause=19]="Pause",e[e.CapsLock=20]="CapsLock",e[e.Esc=27]="Esc",e[e.Space=32]="Space",e[e.PageUp=33]="PageUp",e[e.PageDown=34]="PageDown",e[e.End=35]="End",e[e.Home=36]="Home",e[e.Left=37]="Left",e[e.Up=38]="Up",e[e.Right=39]="Right",e[e.Down=40]="Down",e[e.Insert=45]="Insert",e[e.Delete=46]="Delete",e[e.Key_0=48]="Key_0",e[e.Key_1=49]="Key_1",e[e.Key_2=50]="Key_2",e[e.Key_3=51]="Key_3",e[e.Key_4=52]="Key_4",e[e.Key_5=53]="Key_5",e[e.Key_6=54]="Key_6",e[e.Key_7=55]="Key_7",e[e.Key_8=56]="Key_8",e[e.Key_9=57]="Key_9",e[e.Key_a=65]="Key_a",e[e.Key_b=66]="Key_b",e[e.Key_c=67]="Key_c",e[e.Key_d=68]="Key_d",e[e.Key_e=69]="Key_e",e[e.Key_f=70]="Key_f",e[e.Key_g=71]="Key_g",e[e.Key_h=72]="Key_h",e[e.Key_i=73]="Key_i",e[e.Key_j=74]="Key_j",e[e.Key_k=75]="Key_k",e[e.Key_l=76]="Key_l",e[e.Key_m=77]="Key_m",e[e.Key_n=78]="Key_n",e[e.Key_o=79]="Key_o",e[e.Key_p=80]="Key_p",e[e.Key_q=81]="Key_q",e[e.Key_r=82]="Key_r",e[e.Key_s=83]="Key_s",e[e.Key_t=84]="Key_t",e[e.Key_u=85]="Key_u",e[e.Key_v=86]="Key_v",e[e.Key_w=87]="Key_w",e[e.Key_x=88]="Key_x",e[e.Key_y=89]="Key_y",e[e.Key_z=90]="Key_z",e[e.Windows=91]="Windows",e[e.ContextMenu=93]="ContextMenu",e[e.Numpad_0=96]="Numpad_0",e[e.Numpad_1=97]="Numpad_1",e[e.Numpad_2=98]="Numpad_2",e[e.Numpad_3=99]="Numpad_3",e[e.Numpad_4=100]="Numpad_4",e[e.Numpad_5=101]="Numpad_5",e[e.Numpad_6=102]="Numpad_6",e[e.Numpad_7=103]="Numpad_7",e[e.Numpad_8=104]="Numpad_8",e[e.Numpad_9=105]="Numpad_9",e[e.Multiply=106]="Multiply",e[e.Add=107]="Add",e[e.Subtract=109]="Subtract",e[e.Decimal=110]="Decimal",e[e.Divide=111]="Divide",e[e.F1=112]="F1",e[e.F2=113]="F2",e[e.F3=114]="F3",e[e.F4=115]="F4",e[e.F5=116]="F5",e[e.F6=117]="F6",e[e.F7=118]="F7",e[e.F8=119]="F8",e[e.F9=120]="F9",e[e.F10=121]="F10",e[e.F11=122]="F11",e[e.F12=123]="F12",e[e.NumLock=144]="NumLock",e[e.ScrollLock=145]="ScrollLock",e[e.Semicolon=186]="Semicolon",e[e.Equals=187]="Equals",e[e.Comma=188]="Comma",e[e.Dash=189]="Dash",e[e.Period=190]="Period",e[e.ForwardSlash=191]="ForwardSlash",e[e.GraveAccent=192]="GraveAccent",e[e.OpenBracket=219]="OpenBracket",e[e.BackSlash=220]="BackSlash",e[e.CloseBracket=221]="CloseBracket",e[e.SingleQuote=222]="SingleQuote"}(n=t.KeyCode||(t.KeyCode={}))}));t(Be);class Ee{constructor(){this._visible=!1,this._contentElementInfo={scrollStart:0,clientSize:0,scrollSize:0},this._scrollBarStart=0,this._scrollBarEnd=0,this._scrollBarOffset=0,this._scrollBarThickness=0,this._thumbStart=0,this._thumbEnd=0}get visible(){return this._visible}set visible(e){this._visible=e}get contentElementInfo(){return this._contentElementInfo}set contentElementInfo(e){this._contentElementInfo=e}get scrollBarStart(){return this._scrollBarStart}set scrollBarStart(e){this._scrollBarStart=e}get scrollBarEnd(){return this._scrollBarEnd}set scrollBarEnd(e){this._scrollBarEnd=e}get scrollBarOffset(){return this._scrollBarOffset}set scrollBarOffset(e){this._scrollBarOffset=e}get scrollBarThickness(){return this._scrollBarThickness}set scrollBarThickness(e){this._scrollBarThickness=e}get thumbStart(){return this._thumbStart}set thumbStart(e){this._thumbStart=e}get thumbEnd(){return this._thumbEnd}set thumbEnd(e){this._thumbEnd=e}}class Ie{get scrollBarInfo(){return this._scrollBarInfo}get contentElementInfo(){return this.scrollBarInfo.contentElementInfo}constructor(e){this._scrollBarInfo=e,this.thumbSize=20,this._scrollBarInfo.scrollBarEnd=this._scrollBarInfo.contentElementInfo.clientSize,this.recalculate()}scrollByPointerClick(e){const t=this.contentElementInfo.scrollSize-this.contentElementInfo.clientSize;this.contentElementInfo.scrollStart=t*e/this.getScrollBarSize(),this.contentElementInfo.scrollStart=Math.max(0,this.contentElementInfo.scrollStart),this.contentElementInfo.scrollStart=Math.min(t,this.contentElementInfo.scrollStart),this.recalculate()}scrollByPointerMove(e){const t=this.contentElementInfo.scrollSize-this.contentElementInfo.clientSize,i=t/(this.getScrollBarSize()-this.thumbSize);this.contentElementInfo.scrollStart=this.contentElementInfo.scrollStart+e*i,this.contentElementInfo.scrollStart=Math.max(0,this.contentElementInfo.scrollStart),this.contentElementInfo.scrollStart=Math.min(t,this.contentElementInfo.scrollStart),this.recalculate()}recalculate(){this.recalculateThumb()}recalculateThumb(){this.thumbSize=this.calculateThumbSize(),this._scrollBarInfo.visible=this.scrollBarInfo.contentElementInfo.scrollSize>this.scrollBarInfo.contentElementInfo.clientSize,this._scrollBarInfo.thumbStart=this.calculateThumbStart(),this._scrollBarInfo.thumbEnd=this._scrollBarInfo.thumbStart+this.thumbSize}calculateThumbSize(){const e=this.getScrollBarSize(),t=e*this.scrollBarInfo.contentElementInfo.clientSize/this.scrollBarInfo.contentElementInfo.scrollSize;return e>20?Math.max(t,20):t}calculateThumbStart(){const e=(this.getScrollBarSize()-this.thumbSize)/(this.scrollBarInfo.contentElementInfo.scrollSize-this.scrollBarInfo.contentElementInfo.clientSize);return this.scrollBarInfo.contentElementInfo.scrollStart*e}getScrollBarSize(){return this._scrollBarInfo.scrollBarEnd-this._scrollBarInfo.scrollBarStart}}class Se{constructor(e){this._offsets={left:0,right:0,top:0,bottom:0},this._verticalScrollBarInfo=new Ee,this._horizontalScrollBarInfo=new Ee,this._verticalThumbCalculator=new Ie(this._verticalScrollBarInfo),this._horizontalThumbCalculator=new Ie(this._horizontalScrollBarInfo),this.updateScrollableElementInfo(e)}get verticalScrollBarInfo(){return this._verticalScrollBarInfo}get horizontalScrollBarInfo(){return this._horizontalScrollBarInfo}updateScrollableElementInfo(e){this._verticalScrollBarInfo.contentElementInfo.scrollStart=e.scrollTop||0,this._verticalScrollBarInfo.contentElementInfo.scrollSize=e.scrollHeight||0;const t=e.getBoundingClientRect();this._verticalScrollBarInfo.contentElementInfo.clientSize=Math.ceil(t.height),this._horizontalScrollBarInfo.contentElementInfo.scrollStart=e.scrollLeft||0,this._horizontalScrollBarInfo.contentElementInfo.scrollSize=e.scrollWidth||0,this._horizontalScrollBarInfo.contentElementInfo.clientSize=e.clientWidth||0,this.recalculate()}initScrollBarsThickness(e,t){this._verticalScrollBarInfo.scrollBarThickness=e,this._horizontalScrollBarInfo.scrollBarThickness=t}updateTopPanelHeight(e){this._offsets.top=e,this.recalculate()}updateBottomPanelHeight(e){this._offsets.bottom=e,this.recalculate()}updateLeftPanelWidth(e){this._offsets.left=e,this.recalculate()}updateRightPanelWidth(e){this._offsets.right=e,this.recalculate()}vertScrollByPointerMove(e){this._verticalThumbCalculator.scrollByPointerMove(e),this.recalculate()}vertScrollByPointerClick(e){this._verticalThumbCalculator.scrollByPointerClick(e),this.recalculate()}horScrollByPointerMove(e){this._horizontalThumbCalculator.scrollByPointerMove(e),this.recalculate()}horScrollByPointerClick(e){this._horizontalThumbCalculator.scrollByPointerClick(e),this.recalculate()}recalculate(){this._verticalScrollBarInfo.scrollBarStart=this._offsets.top,this._verticalScrollBarInfo.scrollBarEnd=this._verticalScrollBarInfo.contentElementInfo.clientSize-this._offsets.bottom,this._horizontalScrollBarInfo.scrollBarStart=this._offsets.left,this._horizontalScrollBarInfo.scrollBarEnd=this._horizontalScrollBarInfo.contentElementInfo.clientSize-this._offsets.right,this._verticalScrollBarInfo.scrollBarOffset=this._offsets.right,this._horizontalScrollBarInfo.scrollBarOffset=this._offsets.bottom,this._verticalThumbCalculator.recalculate(),this._horizontalThumbCalculator.recalculate(),this._horizontalScrollBarInfo.visible&&(this._verticalScrollBarInfo.thumbEnd-=this._horizontalScrollBarInfo.scrollBarThickness)}}class xe{}var De;xe.ClassName=he.Prefix+"-scroll-viewer",xe.ContentContainerClassName=xe.ClassName+"-content",xe.VerticalScrollBarClassName=xe.ClassName+"-vert-scroll-bar",xe.HorizontalScrollBarClassName=xe.ClassName+"-hor-scroll-bar",xe.ScrollBarThumbClassName=xe.ClassName+"-scroll-thumb",xe.ScrollBarActiveClassName=he.Active,function(e){e[e.Vertical=0]="Vertical",e[e.Horizontal=1]="Horizontal"}(De||(De={}));class Fe extends de{constructor(){super(),this.thumbElement=null,this._mode=De.Vertical,this._info=null}initializeComponent(){super.initializeComponent(),this.thumbElement=this.getThumbElement(),this.thumbElement.addEventListener("click",Fe.onThumbElementClick)}disposeComponent(){super.disposeComponent(),this.thumbElement&&this.thumbElement.removeEventListener("click",Fe.onThumbElementClick)}get mode(){return this._mode}set mode(e){this._mode=e}get info(){return this._info}set info(e){this._info=e,this.applyUIChanges()}getThumbThickness(){if(!this.thumbElement)return 0;const e=T.DomUtils.getCurrentStyle(this.thumbElement);return parseInt(this.mode===De.Vertical?e.width:e.height)}applyUIChanges(){if(!this.isInitialized)return;if(!this.info||!this.info.visible)return void T.DomUtils.removeClassName(this,xe.ScrollBarActiveClassName);const e=this.info.thumbEnd-this.info.thumbStart+"px";this.mode===De.Vertical?this.applyVerticalScrollUIChanges(e):this.applyHorizontalScrollUIChanges(e),T.DomUtils.addClassName(this,xe.ScrollBarActiveClassName)}applyVerticalScrollUIChanges(e){this.thumbElement&&this.info&&(this.thumbElement.style.height=e,this.thumbElement.style.transform=`translateY(${this.info.thumbStart}px)`,this.style.top=this.info.scrollBarStart+"px",this.style.bottom=this.info.contentElementInfo.clientSize-this.info.scrollBarEnd+"px",this.style.right=this.info.scrollBarOffset+"px")}applyHorizontalScrollUIChanges(e){this.thumbElement&&this.info&&(this.thumbElement.style.width=e,this.thumbElement.style.transform=`translateX(${this.info.thumbStart}px)`,this.style.left=this.info.scrollBarStart+"px",this.style.right=this.info.contentElementInfo.clientSize-this.info.scrollBarEnd+"px",this.style.bottom=this.info.scrollBarOffset+"px")}getThumbElement(){return this.querySelector(`.${xe.ScrollBarThumbClassName}`)}static onThumbElementClick(e){e.stopPropagation()}}class Te{static isAbsolutePositioning(e){return"absolute"===window.getComputedStyle(e).getPropertyValue("position")}static isFixedPositioning(e){return"fixed"===window.getComputedStyle(e).getPropertyValue("position")}static isScrollable(e){const{overflow:t,overflowX:i,overflowY:n}=window.getComputedStyle(e);return/auto|scroll|overlay|hidden/.test(t+i+n)}static setBooleanAttribute(e,t,i){i?e.setAttribute(t,""):e.removeAttribute(t)}static isOverflown(e){return e.scrollHeight>e.clientHeight||e.scrollWidth>e.clientWidth}static isTableElement(e){var t;return[Q.table,Q.tableCell,Q.tableHeaderCell].indexOf(null!==(t=Te.getNodeName(e))&&void 0!==t?t:"")>=0}static isTextInput(e){return e.tagName===Q.input||e.tagName===Q.textArea}static isMultipleRowInput(e){const t=e.getAttribute("contenteditable");return t?"false"!==t.toLowerCase():e.tagName===Q.textArea}static toPx(e){return Math.floor(e)+"px"}static getNodeName(e){return e?(e.nodeName||"").toLowerCase():null}static getVerticalScrollbarWidth(e=null){return null==e?window.innerWidth-document.body.getBoundingClientRect().width:e.offsetWidth-e.clientWidth}static matches(e,t){return e.matches(t)}static isHidden(e,t){const i=getComputedStyle(e).visibility;if(i===U.hidden||i===U.collapse||e.closest('[inert="true"]'))return!0;let n=e;for(;n&&n!==t;){if(getComputedStyle(n).display===P.none)return!0;n=n.parentElement}return!1}static getAttributeIntValue(e,t,i){return Te.getAttributeParsedNumberValue(e,t,parseInt,i)}static getAttributeParsedNumberValue(e,t,i,n){const s=e.getAttribute(t);return s?i(s):n}}const He="data-required-visible-element-id",Ue=40;var Pe,Qe,Ne,Re,Le,Me,ke;!function(e){e[e.None=0]="None",e[e.Top=1]="Top",e[e.Bottom=2]="Bottom"}(Pe||(Pe={})),function(e){e[e.None=0]="None",e[e.Left=1]="Left",e[e.Right=2]="Right"}(Qe||(Qe={})),function(e){e[e.All=0]="All",e[e.ScrollBars=1]="ScrollBars",e[e.ScrollPosition=2]="ScrollPosition"}(Ne||(Ne={})),function(e){e[e.Horizontal=0]="Horizontal",e[e.Vertical=1]="Vertical",e[e.Both=2]="Both"}(Re||(Re={}));class Ke extends CustomEvent{constructor(){super(Ke.eventName,{bubbles:!0,composed:!1,cancelable:!0})}}Ke.eventName="dxscrollviewerupdate";class Oe extends CustomEvent{constructor(e,t){super(Oe.eventName,{detail:{element:e,isFocusRequired:t},bubbles:!0,composed:!1})}}Oe.eventName="dxscrollviewervisibleelementchanged";class _e extends de{constructor(){super(),this.scrollAttributeLifespanTimeoutId=null,this.pendingRefreshUi=null,this.autoScrollingMode=null,this.autoScrollingRect=null,this.autoScrollingRafID=-1,this.autoScrollingCallback=null,this.contentContainerScrollingCallback=null,this.boundOnContentScrollHandler=this.onContentScroll.bind(this),this.boundOnVerticalScrollBarClickHandler=this.onVerticalScrollBarClick.bind(this),this.boundOnVerticalScrollThumbMoveHandler=this.onVerticalScrollThumbMove.bind(this),this.boundOnHorizontalScrollBarClickHandler=this.onHorizontalScrollBarClick.bind(this),this.boundOnHorizontalScrollThumbMoveHandler=this.onHorizontalScrollThumbMove.bind(this),this.boundOnDocumentMouseMoveHandler=this.onDocumentMouseMove.bind(this),this.makeElementVisibleObserver=null,this.pendingMakeElementVisibleInfo=null,this.pendingMakeElementVisibleTimeoutId=-1,this.preventScrollEvent=!1,this.contentContainerElement=null,this.verticalScrollBarElement=null,this.horizontalScrollBarElement=null,this.scrollController=null,this.contentResizeObserver=new ResizeObserver(this.onContentSizeChanged.bind(this)),this.headerResizeObserver=new ResizeObserver(this.onHeaderSizeChanged.bind(this)),this.footerResizeObserver=new ResizeObserver(this.onFooterSizeChanged.bind(this)),this.leftResizeObserver=new ResizeObserver(this.onLeftSizeChanged.bind(this)),this.rightResizeObserver=new ResizeObserver(this.onRightSizeChanged.bind(this)),this.initalizeMakeElementVisibleObserver()}get useShadowDom(){return!1}get headerSelector(){return this.getAttribute("header-selector")}get footerSelector(){return this.getAttribute("footer-selector")}get leftSelector(){return this.getAttribute("left-selector")}get rightSelector(){return this.getAttribute("right-selector")}getContentContainerElement(){return this.contentContainerElement}getVerticalScrollBarElement(){return this.verticalScrollBarElement}getHorizontalScrollBarElement(){return this.horizontalScrollBarElement}get isRefreshUIRequested(){return!!this.pendingRefreshUi}get hasHorizontalScrollBar(){var e,t;return!!(null===(t=null===(e=this.getHorizontalScrollBarElement())||void 0===e?void 0:e.info)||void 0===t?void 0:t.visible)}get hasVerticalScrollBar(){var e,t;return!!(null===(t=null===(e=this.getVerticalScrollBarElement())||void 0===e?void 0:e.info)||void 0===t?void 0:t.visible)}initializeComponent(){super.initializeComponent(),this.initializeInnerHTMLElements(),this.initializeScrollController(),this.connectResizeObservers(),this.initalizeMakeElementVisibleObserver()}afterInitialize(){super.afterInitialize(),this.refreshScrollPosition()}disposeComponent(){var e;super.disposeComponent(),this.releaseInnerHTMLElements(),this.scrollController=null,this.contentResizeObserver.disconnect(),this.headerResizeObserver.disconnect(),this.footerResizeObserver.disconnect(),this.leftResizeObserver.disconnect(),this.rightResizeObserver.disconnect(),null===(e=this.makeElementVisibleObserver)||void 0===e||e.disconnect(),this.makeElementVisibleObserver=null}initalizeMakeElementVisibleObserver(){this.makeElementVisibleObserver||(this.makeElementVisibleObserver=new MutationObserver(this.onMakeElementVisibleChanged.bind(this)),this.makeElementVisibleObserver.observe(this,{attributeFilter:[He],childList:!0,subtree:!0}))}getRectangle(){const{left:e,top:t,width:i,height:n}=this.getBoundingClientRect();return{x:e,y:t,width:i,height:n}}getDataAreaRectangle(){const e=this.getRectangle(),t=this.getElementsRectangle(this.getHeaderElements());if(t){const i=t.height;e.height-=i,e.y+=i}const i=this.getElementsRectangle(this.getLeftElements());if(i){const t=i.width;e.width-=t,e.x+=t}const n=this.getElementsRectangle(this.getRightElements());n&&(e.width-=n.width);const s=this.getElementsRectangle(this.getFooterElements());return s&&(e.height-=s.height),e}static calculateBoundingRectangle(e){if(1===e.length)return e[0];let t=-1,i=-1,n=-1,s=-1;return e.forEach((function(e){(e.x<t||-1===t)&&(t=e.x),(e.y<i||-1===i)&&(i=e.y),(e.x+e.width>n||-1===n)&&(n=e.x+e.width),(e.y+e.height>s||-1===s)&&(s=e.y+e.height)})),{x:t,y:i,width:n-t,height:s-i}}onDocumentMouseMove(e){this.performAutoScrolling(e)}startAutoScrolling(e,t=null,i=null){this.autoScrollingMode=e,this.autoScrollingCallback=t;const n=this.getRectangle();i&&i(n),this.autoScrollingRect=n,document.addEventListener("pointermove",this.boundOnDocumentMouseMoveHandler)}stopAutoScrolling(){document.removeEventListener("pointermove",this.boundOnDocumentMouseMoveHandler),this.stopAutoScrollingTimer(),this.autoScrollingCallback=null,this.autoScrollingRect=null,this.autoScrollingMode=null}subscribeToScroll(e=null){this.contentContainerScrollingCallback=e}unsubscribeFromScroll(){this.contentContainerScrollingCallback=null}get isHorizontalAutoScrollingEnabled(){return this.autoScrollingMode===Re.Horizontal||this.autoScrollingMode===Re.Both}get isVerticalAutoScrollingEnabled(){return this.autoScrollingMode===Re.Vertical||this.autoScrollingMode===Re.Both}performAutoScrolling(e){if(this.stopAutoScrollingTimer(),void 0!==this.autoScrollingMode&&this.autoScrollingRect){const t=this.autoScrollingRect,i=t.x<=e.pageX&&e.pageX<=t.x+t.width,n=t.y<=e.pageY&&e.pageY<=t.y+t.height;let s=0,r=0;if(this.isHorizontalAutoScrollingEnabled&&i&&n){const i=e.pageX-t.x;0<=i&&i<=Ue&&(s=-(Ue-i)/2);const n=t.x+t.width-e.pageX;0<=n&&n<=Ue&&(s=(Ue-n)/2)}if(this.isVerticalAutoScrollingEnabled&&i&&n){const i=e.pageY-t.y;0<=i&&i<=Ue&&(r=-(Ue-i)/2);const n=t.y+t.height-e.pageY;0<=n&&n<=Ue&&(r=(Ue-n)/2)}0===s&&0===r||this.startAutoScrollingTimer(e,s,r)}}startAutoScrollingTimer(e,t,i){this.autoScrollingRafID=requestAnimationFrame((()=>{this.contentContainerElement&&(this.contentContainerElement.scrollBy(t,i),this.refresh(Ne.ScrollBars)),this.autoScrollingCallback&&this.autoScrollingCallback(e),this.performAutoScrolling(e)}))}stopAutoScrollingTimer(){this.autoScrollingRafID>-1&&(cancelAnimationFrame(this.autoScrollingRafID),this.autoScrollingRafID=-1)}releaseInnerHTMLElements(){this.contentContainerElement&&this.contentContainerElement.removeEventListener("scroll",this.boundOnContentScrollHandler),this.verticalScrollBarElement&&this.unsubscribeEvents(this.verticalScrollBarElement,this.boundOnVerticalScrollBarClickHandler,this.boundOnVerticalScrollThumbMoveHandler),this.horizontalScrollBarElement&&this.unsubscribeEvents(this.horizontalScrollBarElement,this.boundOnHorizontalScrollBarClickHandler,this.boundOnHorizontalScrollThumbMoveHandler),this.contentContainerElement=null,this.verticalScrollBarElement=null,this.horizontalScrollBarElement=null}getHeaderElements(){return this.getElements(this.headerSelector)}getFooterElements(){return this.getElements(this.footerSelector)}getLeftElements(){return this.getElements(this.leftSelector)}getRightElements(){return this.getElements(this.rightSelector)}getElementsRectangle(e){if(null===e||0===e.length)return null;const t=Array.from(e);return _e.calculateBoundingRectangle(t.map((e=>e.getBoundingClientRect())))}getElements(e){return e&&this.contentContainerElement?this.contentContainerElement.querySelectorAll(e):null}subscribeEvents(e,t,i){e.addEventListener("click",t),e.addEventListener("dxthumbdragdelta",i)}unsubscribeEvents(e,t,i){e.removeEventListener("click",t),e.removeEventListener("dxthumbdragdelta",i)}refreshUI(){this.refresh(Ne.All),this.dispatchEvent(new Ke)}refreshScrollPosition(){this.refresh(Ne.ScrollPosition),this.dispatchEvent(new Ke)}refresh(e){if(!this.isHidden())if(this.pendingRefreshUi){e===Ne.ScrollBars&&e!==this.pendingRefreshUi.refreshType&&this.contentContainerElement&&(this.pendingRefreshUi.scrollTop=this.contentContainerElement.scrollTop,this.pendingRefreshUi.scrollLeft=this.contentContainerElement.scrollLeft,this.pendingRefreshUi.refreshType===Ne.ScrollPosition&&(this.pendingRefreshUi.refreshType=Ne.All))}else this.pendingRefreshUi={refreshType:e},requestAnimationFrame((()=>{const{refreshType:e,scrollTop:t,scrollLeft:i}=this.pendingRefreshUi;if(this.pendingRefreshUi=null,!this.scrollController)return;const n=this.scrollController.verticalScrollBarInfo,s=this.scrollController.horizontalScrollBarInfo;this.contentContainerElement&&(e!==Ne.All&&e!==Ne.ScrollPosition||(this.contentContainerElement.scrollTop=null!=t?t:n.contentElementInfo.scrollStart,this.contentContainerElement.scrollLeft=null!=i?i:s.contentElementInfo.scrollStart),e!==Ne.All&&e!==Ne.ScrollBars||this.updateScrollableElementInfo(this.contentContainerElement)),this.verticalScrollBarElement&&(this.verticalScrollBarElement.info=n),this.horizontalScrollBarElement&&(this.horizontalScrollBarElement.info=s),this.contentContainerElement&&this.onRefresh(this.contentContainerElement.scrollTop,this.contentContainerElement.scrollLeft),this.preventScrollEvent=!1}))}onRefresh(e,t){this.contentContainerScrollingCallback&&this.contentContainerScrollingCallback(e,t)}isHidden(){return Te.isHidden(this)}initializeInnerHTMLElements(){this.contentContainerElement=this.querySelector(`.${xe.ContentContainerClassName}`),this.contentContainerElement.addEventListener("scroll",this.boundOnContentScrollHandler),this.verticalScrollBarElement=this.getScrollElement(xe.VerticalScrollBarClassName),this.verticalScrollBarElement.mode=De.Vertical,this.subscribeEvents(this.verticalScrollBarElement,this.boundOnVerticalScrollBarClickHandler,this.boundOnVerticalScrollThumbMoveHandler),this.horizontalScrollBarElement=this.getScrollElement(xe.HorizontalScrollBarClassName),this.horizontalScrollBarElement.mode=De.Horizontal,this.subscribeEvents(this.horizontalScrollBarElement,this.boundOnHorizontalScrollBarClickHandler,this.boundOnHorizontalScrollThumbMoveHandler)}initializeScrollController(){if(this.contentContainerElement&&this.verticalScrollBarElement&&this.horizontalScrollBarElement&&(this.scrollController=new Se(this.contentContainerElement),this.verticalScrollBarElement instanceof Fe&&this.horizontalScrollBarElement instanceof Fe)){const e=this.verticalScrollBarElement.getThumbThickness(),t=this.horizontalScrollBarElement.getThumbThickness();this.scrollController.initScrollBarsThickness(e,t)}}updateScrollableElementInfo(e){this.scrollController&&e&&this.scrollController.updateScrollableElementInfo(e)}connectResizeObservers(){if(this.contentContainerElement){this.contentResizeObserver.observe(this);for(let e=0;e<this.contentContainerElement.children.length;e++)this.contentResizeObserver.observe(this.contentContainerElement.children[e]);this.connectHeaderResizeObserver(),this.connectFooterResizeObserver(),this.connectLeftResizeObserver(),this.connectRightResizeObserver()}}connectHeaderResizeObserver(){const e=this.getHeaderElements();e&&e.forEach((e=>{this.headerResizeObserver.observe(e)}))}connectFooterResizeObserver(){const e=this.getFooterElements();e&&e.forEach((e=>{this.footerResizeObserver.observe(e)}))}connectLeftResizeObserver(){const e=this.getLeftElements();e&&e.forEach((e=>{this.leftResizeObserver.observe(e)}))}connectRightResizeObserver(){const e=this.getRightElements();e&&e.forEach((e=>{this.rightResizeObserver.observe(e)}))}reconnectResizeObservers(){this.reconnectLeftResizeObserver(),this.reconnectRightResizeObserver(),this.reconnectHeaderResizeObserver(),this.reconnectFooterResizeObserver()}reconnectHeaderResizeObserver(){this.headerResizeObserver.disconnect(),this.connectHeaderResizeObserver()}reconnectFooterResizeObserver(){this.footerResizeObserver.disconnect(),this.connectFooterResizeObserver()}reconnectLeftResizeObserver(){this.leftResizeObserver.disconnect(),this.connectLeftResizeObserver()}reconnectRightResizeObserver(){this.rightResizeObserver.disconnect(),this.connectRightResizeObserver()}onContentScroll(e){this.preventScrollEvent||(this.refresh(Ne.ScrollBars),this.setScrollAttribute())}setScrollAttribute(){const e="scrolling";n.setAttribute(this,e),this.scrollAttributeLifespanTimeoutId&&clearTimeout(this.scrollAttributeLifespanTimeoutId),this.scrollAttributeLifespanTimeoutId=setTimeout((()=>{n.removeAttribute(this,e)}),2e3)}onVerticalScrollBarClick(e){this.scrollController&&(this.scrollController.vertScrollByPointerClick(e.offsetY),this.refreshScrollPosition())}onHorizontalScrollBarClick(e){this.scrollController&&(this.scrollController.horScrollByPointerClick(e.offsetX),this.refreshScrollPosition())}onVerticalScrollThumbMove(e){this.preventScrollEvent=!0,this.scrollController&&(this.scrollController.vertScrollByPointerMove(e.detail.deltaY),this.refreshScrollPosition())}onHorizontalScrollThumbMove(e){this.preventScrollEvent=!0,this.scrollController&&(this.scrollController.horScrollByPointerMove(e.detail.deltaX),this.refreshScrollPosition())}getScrollElement(e){return this.querySelector(`:scope > .${e}`)}onContentSizeChanged(e,t){this.refreshUI()}onHeaderSizeChanged(e,t){if(e.length<1||!this.scrollController)return;if(!e[0].target.isConnected)return void this.reconnectHeaderResizeObserver();const i=this.getElementsRectangle(this.getHeaderElements());i&&this.scrollController.updateTopPanelHeight(i.height),this.refreshScrollPosition()}onFooterSizeChanged(e,t){if(e.length<1||!this.scrollController)return;if(!e[0].target.isConnected)return void this.reconnectFooterResizeObserver();const i=this.getElementsRectangle(this.getFooterElements());i&&this.scrollController.updateBottomPanelHeight(i.height),this.refreshScrollPosition()}onLeftSizeChanged(e,t){if(e.length<1||!this.scrollController)return;if(!e[0].target.isConnected)return void this.reconnectLeftResizeObserver();const i=this.getElementsRectangle(this.getLeftElements());i&&this.scrollController.updateLeftPanelWidth(i.width),this.refreshScrollPosition()}onRightSizeChanged(e,t){if(e.length<1||!this.scrollController)return;if(!e[0].target.isConnected)return void this.reconnectRightResizeObserver();const i=this.getElementsRectangle(this.getRightElements());i&&this.scrollController.updateRightPanelWidth(i.width),this.refreshScrollPosition()}requestMakeElementVisible(e){this.pendingMakeElementVisibleInfo=null;const[t,i,n]=JSON.parse(e||"");t&&(this.pendingMakeElementVisibleInfo={visibleElementOid:t,verticalAlign:i,horizontalAlign:n},clearTimeout(this.pendingMakeElementVisibleTimeoutId),this.beforeMakeElementVisible())}beforeMakeElementVisible(){}onMakeElementVisibleChanged(e){if(!this.pendingMakeElementVisibleInfo)return;const{visibleElementOid:t,verticalAlign:i,horizontalAlign:n}=this.pendingMakeElementVisibleInfo;e.some((e=>{const s=e.target;if(s.getAttribute(He)===t)return this.scheduleMakeElementVisible(s,i,n),!0}))}afterMakeElementVisible(){}scheduleMakeElementVisible(e,t,i){clearTimeout(this.pendingMakeElementVisibleTimeoutId),this.pendingMakeElementVisibleTimeoutId=setTimeout((()=>{e.isConnected&&!this.isRefreshUIRequested?this.makeElementVisible(e,t,i):this.scheduleMakeElementVisible(e,t,i)}))}makeElementVisible(e,t,i){_e.scrollToElementRelyOnStickyDescendants(e,t,i,this),this.dispatchEvent(new Oe(e,!0)),this.afterMakeElementVisible()}static scrollToElementRelyOnStickyDescendants(e,t,i,n){if(n.contentContainerElement){const s=n.getDataAreaRectangle(),r=s.y,o=s.x,a=s.y+s.height,l=s.x+s.width,A=e.getBoundingClientRect(),d=this.calcScrollOffset(r,a,A.top,A.bottom,t),c=this.calcScrollOffset(o,l,A.left,A.right,i),h=n.contentContainerElement.scrollTop,u=n.contentContainerElement.scrollLeft,p=Math.round(h+d),m=Math.round(u+c);p===Math.round(h)&&m===Math.round(u)||(n.contentContainerElement.scrollTo(m,p),n.refresh(Ne.ScrollBars))}const s=_e.findClosestViewer(n);s&&_e.scrollToElementRelyOnStickyDescendants(e,null,null,s)}static calcScrollOffset(e,t,i,n,s){switch(s){case Pe.Top||Qe.Left:return i-e;case Pe.Bottom||Qe.Right:return n-t;case Pe.None||Qe.None:return 0}return e>i?i-e:t<n?Math.min(n-t,i-e):0}static findClosestViewer(e){return e.parentElement?e.parentElement.closest(`.${xe.ClassName}`):null}static get observedAttributes(){return["reset-v-scroll-guid","reset-h-scroll-guid","request-make-element-visible","header-selector","footer-selector","left-selector","right-selector"]}attributeChangedCallback(e,t,i){switch(e){case"reset-v-scroll-guid":this.contentContainerElement&&i&&(this.contentContainerElement.scrollTop=0,this.refresh(Ne.ScrollBars));break;case"reset-h-scroll-guid":this.contentContainerElement&&i&&(this.contentContainerElement.scrollLeft=0,this.refresh(Ne.ScrollBars));break;case"header-selector":this.contentContainerElement&&setTimeout((()=>this.reconnectHeaderResizeObserver()));break;case"footer-selector":this.contentContainerElement&&setTimeout((()=>this.reconnectFooterResizeObserver()));break;case"left-selector":this.contentContainerElement&&setTimeout((()=>this.reconnectLeftResizeObserver()));break;case"right-selector":this.contentContainerElement&&setTimeout((()=>this.reconnectRightResizeObserver()));break;case"request-make-element-visible":this.requestMakeElementVisible(i)}}}customElements.define("dxbl-scroll-bar",Fe),customElements.define("dxbl-scroll-viewer",_e),function(e){e[e.ColumnsChanged=0]="ColumnsChanged",e[e.GridResize=1]="GridResize"}(Le||(Le={}));class Ve{constructor(e){this.grid=e}correctWidths(e){if(0===this.grid.columnsInfo.length)return!1;const t=this.grid.getDataTable();return!!t&&("fixed"===window.getComputedStyle(t).tableLayout&&(requestAnimationFrame((()=>{const t=this.grid.columnsInfo,i=this.grid.getColElements();if(e===Le.ColumnsChanged&&Ve.resetColumnWidths(t,i),!Ve.canAcquireAbsoluteColumnWidths(this.grid))return;this.updateEmptyColumnVisibility();const n=new Map;for(let e=0;e<this.grid.columnsInfo.length;++e){const t=this.grid.columnsInfo[e];if(t.isAbsoluteWidth){const i=this.grid.getColElementOffsetWidth(e);null!==i&&n.set(t,Math.round(i))}}const s={columnsInfo:this.grid.columnsInfo,columnCurrentWidths:new Map,tableWidth:this.grid.getTableContainerWidth(),absoluteColumnWidths:n,percentColumns:this.grid.columnsInfo.filter((e=>e.isPercentWidth)),freeColumns:this.grid.columnsInfo.filter((e=>e.isFreeWidth)),emptyColumn:this.grid.columnsInfo.filter((e=>e.isEmpty))[0]};Ve.doDistributionWaves(s),Ve.applyColumnWidths(s,i),this.updateEmptyColumnVisibility(),this.grid.styleGenerator.updateFixedCellsStyle()})),!0))}autoFitColumnWidths(){const e=Ve.calculateContentWidths(this.grid);let t=0,i=0;for(const[n,s]of e)n.isIndent||(t+=s,n.isAbsoluteWidth&&(i+=s));const n=t-i,s=[],r=[];for(const[t,i]of e){const e=t.isPercentWidth||t.isFreeWidth?i/n*100+"%":`${i}px`;t.updateWidth(e),s.push(t.uID),r.push(e)}this.grid.notifyColumnsChanged(this.grid.columnsInfo,this.grid.headerLayout),this.grid.onColumnWidthsChanged(s,r)}autoFitColumnWidthsLegacy(e=!1){const t=Ve.calculateContentWidths(this.grid);let i=0;for(const[e,n]of t)e.isIndent||(i+=n);const n=[],s=[];for(const[r,o]of t){const t=e?o/i*100+"%":`${o}px`;r.updateWidth(t),n.push(r.uID),s.push(t)}this.grid.notifyColumnsChanged(this.grid.columnsInfo,this.grid.headerLayout),this.grid.onColumnWidthsChanged(n,s)}static calculateContentWidths(e){const t=new Map,i=e.getDataTable();if(i){i.classList.add(ue.CalculateContentWidthsClassName);const n=e.getColElements();for(let i=0;i<n.length;i++){const n=e.columnsInfo[i];if(n&&-1!==n.uID){const s=e.getColElementOffsetWidth(i),r=s?Math.ceil(s)+1:0;t.set(n,r)}}i.classList.remove(ue.CalculateContentWidthsClassName)}return t}updateEmptyColumnVisibility(){const e=this.grid.getColElements(),t=e[e.length-1];Ve.hasAnyDataColumnWithEmptyWidth(this.grid.columnsInfo,e)?t.classList.add(ue.HiddenEmptyCellClassName):t.classList.remove(ue.HiddenEmptyCellClassName)}static resetColumnWidths(e,t){for(let i=0;i<t.length;i++){const n=e[i];!n||n.isIndent||n.isEmpty||(t[i].style.width=n.width)}}static doDistributionWaves(e){let t=!1,i=0;do{Ve.performAllColumnsRealWidthCalculation(e),t=Ve.evaluateColumnMinWidthCorrection(e)}while(t&&++i<=e.columnsInfo.length)}static performAllColumnsRealWidthCalculation(e){e.columnCurrentWidths=new Map;const t=Ve.calculateAbsoluteColumnWidths(e);let i=Math.max(0,e.tableWidth-t);i=Ve.calculatePercentColumnWidths(e,i),i=Ve.calculateFreeColumnWidths(e,i),Ve.calculateEmptyColumnWidth(e,i)}static calculateAbsoluteColumnWidths(e){let t=0;for(const i of e.absoluteColumnWidths.keys()){const n=e.absoluteColumnWidths.get(i);t+=n,e.columnCurrentWidths.set(i,n)}return t}static calculatePercentColumnWidths(e,t){let i=0;for(const t of e.percentColumns)i+=t.getPercents();let n=e.tableWidth;const s=i>100?100/i:1,r=n*(i*s)/100;n*=t<r?t/r:1;let o=0;for(const t of e.percentColumns){const i=n*(t.getPercents()*s/100);e.columnCurrentWidths.set(t,i),o+=i}return t-o}static calculateFreeColumnWidths(e,t){if(e.freeColumns.length>0){const i=t/e.freeColumns.length;for(const t of e.freeColumns)e.columnCurrentWidths.set(t,i);return 0}return t}static calculateEmptyColumnWidth(e,t){e.emptyColumn&&e.columnCurrentWidths.set(e.emptyColumn,t)}static evaluateColumnMinWidthCorrection(e){const t=e.absoluteColumnWidths.size;for(const t of e.columnCurrentWidths.keys())Math.round(e.columnCurrentWidths.get(t))>t.minWidth||0===t.minWidth||e.absoluteColumnWidths.set(t,t.minWidth);return e.percentColumns=e.percentColumns.filter((t=>!e.absoluteColumnWidths.has(t))),e.freeColumns=e.freeColumns.filter((t=>!e.absoluteColumnWidths.has(t))),t!==e.absoluteColumnWidths.size}static applyColumnWidths(e,t){for(let i=0;i<e.columnsInfo.length;++i){const n=e.columnsInfo[i];if(n.isIndent)continue;const s=e.absoluteColumnWidths.has(n)?`${e.absoluteColumnWidths.get(n)}px`:n.width;e.columnsInfo[i].colElementWidth=s,t[i].style.width=s}}static hasAnyDataColumnWithEmptyWidth(e,t){let i=0;for(let n=0;n<e.length;n++){const s=e[n];if(!s.isIndent&&!s.isEmpty&&(++i,!t[n].style.width))return!0}return 0===i}static canAcquireAbsoluteColumnWidths(e){for(let t=0;t<e.columnsInfo.length;++t){if(e.columnsInfo[t].isAbsoluteWidth&&null===e.getColElementOffsetWidth(t))return!1}return!0}}!function(e){e[e.Mouse=1]="Mouse",e[e.Keyboard=2]="Keyboard",e[e.DblClick=3]="DblClick"}(Me||(Me={})),function(e){e[e.Left=0]="Left",e[e.Right=1]="Right"}(ke||(ke={}));class ze{get isResizing(){return!!this.resizeReason}get columnIndex(){return this._columnIndex}get columnsInfo(){return this.grid.columnsInfo}get tableContainerWidth(){return this._tableContainerWidth}get currentColumnInfo(){return this.columnsInfo[this.columnIndex]}constructor(e){this.startMousePosition=-1,this.startHeaderCellPosition=-1,this.timeoutId=null,this.initialColumnWidths=new Map,this.boundOnDocumentPointerMoveHandler=this.onPointerMove.bind(this),this.getColumnOffsetWidth=e=>this.grid.getColElementOffsetWidth(e),this.setColumnWidth=(e,t)=>{this.grid.getColElements()[e].style.width=t},this.grid=e,this.columnResizeSeparator=e.getColumnResizeSeparator()}startDrag(e,t){var i;this.initializeResizing(e),this.resizeReason=Me.Mouse,this.startMousePosition=t,this.startHeaderCellPosition=this.getHeaderCellPosition(this.columnIndex),document.addEventListener("pointermove",this.boundOnDocumentPointerMoveHandler),document.body.classList.add(he.ResizeCursor),null===(i=this.grid.getScrollViewer())||void 0===i||i.startAutoScrolling(Re.Horizontal,this.boundOnDocumentPointerMoveHandler)}autoFitColumnWidth(e){if(this.isResizing)return;const t=Ve.calculateContentWidths(this.grid).get(this.columnsInfo[e]);if(void 0!==t){this.resizeReason=Me.DblClick,this.initializeResizing(e);const i=t-this.getColumnOffsetWidth(e),n=i>1?Math.ceil(i):Math.floor(i);this.performResize(n),requestAnimationFrame((()=>setTimeout((()=>this.finalizeResizing(!1)))))}}anchorFocused(e){this.resizeReason=Me.Keyboard,this.initializeResizing(e)}anchorUnfocused(){this.finalizeResizing(!1)}stopDrag(){this.finalizeResizing(!1)}cancelDrag(){this.timeoutId&&clearTimeout(this.timeoutId),this.finalizeResizing(!0)}performMoveStep(e){if(this.resizeReason===Me.Mouse)return;let t=e===ke.Right?1:-1;this.isReverseResizing&&(t*=-1);const i=this.calculateDiffByMoveStep(t);this.performResize(i),this.timeoutId&&clearTimeout(this.timeoutId),this.timeoutId=setTimeout((()=>this.createNotificationAction()()),500)}initializeResizing(e){var t;this._tableContainerWidth=this.grid.getTableContainerWidth(),this.columnResizeSeparator=this.grid.getColumnResizeSeparator(),e=this.calculateResizingColumnIndex(e),this._columnIndex=e,this.initialColumnWidths.clear();const i=this.grid.getColElements();for(let e=0;e<i.length;++e)this.initialColumnWidths.set(e,i[e].style.width);this.initializeResizingCore();const n=this.columnsInfo[e],s=null!==(t=n.parentPath.find((e=>e.getRightLeaf()===n)))&&void 0!==t?t:n,r=this.grid.getHeaderCell(s.headerRowIndex,s.headerCellIndex);r&&this.columnResizeSeparator.show(r,this.isReverseResizing),this.grid.updateEmptyColumnVisibility()}performResize(e){var t;e=Math.round(e),this.performResizeCore(e),requestAnimationFrame((()=>this.grid.styleGenerator.updateFixedCellsStyle())),null===(t=this.columnResizeSeparator)||void 0===t||t.render()}finalizeResizing(e){var t,i;if(!this.resizeReason)return;this.resizeReason===Me.Mouse&&(document.removeEventListener("pointermove",this.boundOnDocumentPointerMoveHandler),document.body.classList.remove(he.ResizeCursor),null===(t=this.grid.getScrollViewer())||void 0===t||t.stopAutoScrolling(),this.startMousePosition=-1,this.startHeaderCellPosition=-1),null===(i=this.columnResizeSeparator)||void 0===i||i.hide();let n=null;if(e){this.cancelResizeCore();const e=this.grid.getColElements();this.initialColumnWidths.forEach(((t,i)=>{t!==e[i].style.width&&(e[i].style.width=t)})),this.initialColumnWidths.clear(),requestAnimationFrame((()=>this.grid.styleGenerator.updateFixedCellsStyle()))}else n=this.createNotificationAction(),this.finalizeResizeCore();this.grid.updateEmptyColumnVisibility(),this.resizeReason=void 0,this._columnIndex=void 0,this._tableContainerWidth=void 0,this.timeoutId&&clearTimeout(this.timeoutId),n&&n()}createNotificationAction(){const e=this.applyResizingAndGetChangedColumns(),t=e.map((e=>e.uID)),i=e.map((e=>e.width));return()=>{this.grid.onColumnWidthsChanged(t,i)}}getHeaderCellPosition(e){var t;const i=this.grid.findHeaderCellByColumnIndex(e);return null!==(t=null==i?void 0:i.getBoundingClientRect().x)&&void 0!==t?t:-1}onPointerMove(e){const t=this.getHeaderCellPosition(this.columnIndex);let i=e.pageX-this.startMousePosition;if(this.isReverseResizing)i*=-1;else{i+=this.startHeaderCellPosition-t}this.performResize(i)}calculateResizingColumnIndex(e){return e}}class We extends ze{constructor(){super(...arguments),this.columnInitialWidth=-1,this.columnNewWidth=-1,this.nextColumnInitialWidth=-1,this.nextColumnNewWidth=-1,this.nextColumnIndex=-1,this.totalPercents=0,this.totalFreeWidth=0}get nextColumnInfo(){return this.columnsInfo[this.nextColumnIndex]}get isReverseResizing(){return!1}calculateDiffByMoveStep(e){return this.columnNewWidth-this.columnInitialWidth+Math.min(5,Math.ceil((this.columnInitialWidth+this.nextColumnInitialWidth)/100))*e}initializeResizingCore(){this.columnInitialWidth=this.getColumnOffsetWidth(this.columnIndex),this.columnNewWidth=this.columnInitialWidth,this.nextColumnIndex=this.columnIndex+1,this.nextColumnInitialWidth=this.getColumnOffsetWidth(this.nextColumnIndex),this.nextColumnNewWidth=this.nextColumnInitialWidth;for(let e=0;e<this.columnsInfo.length;++e){const t=this.columnsInfo[e];t.isPercentWidth&&(this.totalPercents+=t.getPercents()),t.isFreeWidth&&(this.totalFreeWidth+=this.getColumnOffsetWidth(e))}}performResizeCore(e){this.columnNewWidth=this.columnInitialWidth+e,this.columnNewWidth<this.currentColumnInfo.minWidth&&(this.columnNewWidth=this.currentColumnInfo.minWidth),this.nextColumnNewWidth=this.columnInitialWidth+this.nextColumnInitialWidth-this.columnNewWidth;const t=this.columnInitialWidth+this.nextColumnInitialWidth-this.nextColumnInfo.minWidth;this.columnNewWidth>t&&(this.columnNewWidth=t,this.nextColumnNewWidth=this.nextColumnInfo.minWidth),requestAnimationFrame((()=>{this.isResizing&&(this.setColumnWidth(this.columnIndex,`${this.columnNewWidth}px`),this.setColumnWidth(this.nextColumnIndex,`${this.nextColumnNewWidth}px`))}))}cancelResizeCore(){this.reset()}applyResizingAndGetChangedColumns(){const e=[];if(this.currentColumnInfo.isPercentWidth||this.nextColumnInfo.isPercentWidth)return this.currentColumnInfo.isPercentWidth?this.calculateNewWidthsForPercentColumn(this.currentColumnInfo,this.columnNewWidth,this.columnInitialWidth,this.nextColumnInfo,this.nextColumnNewWidth,this.nextColumnInitialWidth):this.calculateNewWidthsForPercentColumn(this.nextColumnInfo,this.nextColumnNewWidth,this.nextColumnInitialWidth,this.currentColumnInfo,this.columnNewWidth,this.columnInitialWidth);{const t=0!==this.totalPercents,i=(this.currentColumnInfo.isFreeWidth||this.nextColumnInfo.isFreeWidth)&&!t;if((this.currentColumnInfo.isAbsoluteWidth||this.currentColumnInfo.isFreeWidth&&t)&&(this.currentColumnInfo.updateWidth(`${this.columnNewWidth}px`),e.push(this.currentColumnInfo)),i){const t=this.totalFreeWidth+(this.currentColumnInfo.isFreeWidth?this.columnNewWidth-this.columnInitialWidth:0)+(this.nextColumnInfo.isFreeWidth?this.nextColumnNewWidth-this.nextColumnInitialWidth:0);for(let i=0;i<this.columnsInfo.length;++i){const n=this.columnsInfo[i];n.isFreeWidth&&(n.updateWidth(100*this.getColumnOffsetWidth(i)/t+"%"),e.push(n))}}}return e.includes(this.nextColumnInfo)||(this.nextColumnInfo.updateWidth(`${this.nextColumnNewWidth}px`),e.push(this.nextColumnInfo)),e}calculateNewWidthsForPercentColumn(e,t,i,n,s,r){const o=[],a=(e,t,i)=>e*t/i,l=e.getPercents(),A=a(l,t,i);if(e.updateWidth(e.colElementWidth===e.width?`${A}%`:`${t}px`),o.push(e),n.isPercentWidth)n.updateWidth(`${a(n.getPercents(),s,r)}%`),o.push(n);else{n.updateWidth(`${s}px`),o.push(n);const t=this.totalPercents-l+A;if(t>100){const i=t/this.totalPercents;for(let t=0;t<this.columnsInfo.length;++t){const n=this.columnsInfo[t];n.isPercentWidth&&(n.updateWidth(n.getPercents()/i+"%"),n!==e&&o.push(n))}}}return o}finalizeResizeCore(){this.reset()}reset(){this.columnInitialWidth=-1,this.columnNewWidth=-1,this.nextColumnInitialWidth=-1,this.nextColumnNewWidth=-1,this.nextColumnIndex=-1,this.totalFreeWidth=0,this.totalPercents=0}}class $e extends ze{constructor(){super(...arguments),this.enforcedColumnWidths=new Map,this.columnInitialWidth=-1,this.columnsInitialTotalWidth=-1,this.columnNewWidth=-1}get isReverseResizing(){return"right"===this.currentColumnInfo.fixedPosition}calculateDiffByMoveStep(e){return this.columnNewWidth-this.columnInitialWidth+Math.min(5,Math.ceil(2*this.columnInitialWidth/100))*e}initializeResizingCore(){if(this.columnInitialWidth=this.getColumnOffsetWidth(this.columnIndex),this.columnNewWidth=this.columnInitialWidth,this.currentColumnInfo.fixedPosition){let e=this.tableContainerWidth;for(let t=0;t<this.columnsInfo.length;++t){const i=this.columnsInfo[t];i!==this.currentColumnInfo&&i.fixedPosition&&(e-=this.getColumnOffsetWidth(t))}this.columnMaxWidth=Math.max(this.columnInitialWidth,e)}this.enforcedColumnWidths.clear();for(let e=0;e<this.columnsInfo.length;++e){const t=this.columnsInfo[e];if(!t.isIndent&&!t.isEmpty&&!t.isAbsoluteWidth){const t=`${this.getColumnOffsetWidth(e)}px`;this.setColumnWidth(e,t),this.enforcedColumnWidths.set(e,t)}}}performResizeCore(e){let t=this.columnInitialWidth+e;if(t<this.currentColumnInfo.minWidth&&(t=this.currentColumnInfo.minWidth),this.columnMaxWidth&&t>this.columnMaxWidth&&(t=this.columnMaxWidth),this.isReverseResizing){const e=this.columnsInitialTotalWidth-this.columnInitialWidth;e+t<this.tableContainerWidth&&(t=this.tableContainerWidth-e)}this.columnNewWidth=t;const i=this.columnIndex;requestAnimationFrame((()=>{this.isResizing&&this.setColumnWidth(i,`${t}px`)}))}cancelResizeCore(){this.reset()}applyResizingAndGetChangedColumns(){const e=[],t=this.columnsInfo,i=t[this.columnIndex];return i.updateWidth(`${this.columnNewWidth}px`),e.push(i),this.enforcedColumnWidths.forEach(((n,s)=>{const r=t[s];r!==i&&(r.updateWidth(n),e.push(r))})),e}calculateResizingColumnIndex(e){if("right"===this.columnsInfo[e].fixedPosition){let t=0;for(let e=0;e<this.columnsInfo.length;++e)this.columnsInfo[e].isEmpty||(t+=this.getColumnOffsetWidth(e));if(this.columnsInitialTotalWidth=t,t<this.tableContainerWidth)return e-1}return e}finalizeResizeCore(){this.reset()}reset(){this.columnInitialWidth=-1,this.columnsInitialTotalWidth=-1,this.columnNewWidth=-1,this.enforcedColumnWidths.clear(),this.columnMaxWidth=void 0}}class Ge extends de{constructor(){super(),this.cell=null,this.leftSide=!1,this.parentWidth=0,this.tableContainerResizeObserver=new ResizeObserver(this.onTableContainerSizeChanged.bind(this)),this.boundOnTableContainerScroll=this.onTableContainerScroll.bind(this)}get tableContainer(){return this._tableContainer}initializeComponent(){super.initializeComponent(),this.initializeTableContainer(),this.tableContainer.addEventListener("scroll",this.boundOnTableContainerScroll),this.tableContainerResizeObserver.observe(this.tableContainer)}initializeTableContainer(){this._tableContainer=this.closest(`.${xe.ContentContainerClassName}`)}disposeComponent(){super.disposeComponent(),this.tableContainer.removeEventListener("scroll",this.boundOnTableContainerScroll),this.tableContainerResizeObserver.unobserve(this.tableContainer)}show(e,t){this.cell=e,this.leftSide=t,this.classList.add(Ge.ActiveColumnResizeSeparator),this.render()}hide(){this.cell=null,this.leftSide=!1,this.classList.remove(Ge.ActiveColumnResizeSeparator),this.style.transform="none"}render(){requestAnimationFrame((()=>{if(!this.cell)return;const e=this.getColumnSeparatorPosition(this.cell),t=this.getBorderWidth(this.cell),i=Ge.getCenteredByBorderPosition(e,this.offsetWidth,t),n=this.getActualHeight(),s=this.cell.offsetTop;this.style.transform=s>0?`translate(${i},${s}px)`:`translateX(${i})`,n>0&&(this.style.height=n-s+"px")}))}onTableContainerScroll(){this.render()}onTableContainerSizeChanged(e){const t=e[0].contentRect.width;this.parentWidth!==t&&(this.parentWidth=t,this.render())}getColumnSeparatorPosition(e){const t=e.offsetLeft-this.tableContainer.scrollLeft;return this.leftSide?t:t+e.offsetWidth}getActualHeight(){const e=this.tableContainer.querySelector(`.${ue.DataTableClassName} > tfoot`);if(!e)return 0;const t=e.getBoundingClientRect().height;return this.tableContainer.getBoundingClientRect().height-t}getBorderWidth(e){var t;const i=Ge.getBorderWidthByElement(e,"border-right-width");if(i>0)return i;const n=null===(t=this.cell)||void 0===t?void 0:t.nextElementSibling;return n&&Ge.getBorderWidthByElement(n,"border-left-width")}static getBorderWidthByElement(e,t){const i=getComputedStyle(e),n=i.getPropertyValue(t);return parseFloat(n)||parseFloat(i.borderWidth)}static getCenteredByBorderPosition(e,t,i){return e-(t-i)/2+"px"}}Ge.ActiveColumnResizeSeparator=he.Active;const qe="data-column-uid",Ye="data-parent-column-uid";var Xe;!function(e){e[e.ItemMoving=0]="ItemMoving",e[e.Stop=1]="Stop",e[e.Cancel=2]="Cancel"}(Xe||(Xe={}));class Je{constructor(e){this.boundOnDocumentMouseMoveHandler=this.onDocumentMouseMove.bind(this),this.reorderContext=null,this.reorderingCallback=e}start(e,t,i){const n=e.map((e=>e.getBoundingClientRect())),s=e.map((e=>e.getAttribute(qe))),r=e.map((e=>e.getAttribute(Ye))),o=e.map((e=>e.getAttribute("data-column-fixed-position"))),a=e.indexOf(t),l=Je.populateItemGroup(a,s,r),A=t.parentElement,d=Je.calcOffsetParentY(A),c=Je.calculateReorderIntervals(n,l,s,r,o),h=Je.findInterval(c,0);this.reorderContext={state:Xe.ItemMoving,startY:i.y,currentY:i.y,offsetParentStartY:d,offsetParent:A,draggingItemIndices:l,draggingItem:t,items:e,intervals:c,initialInterval:h,currentInterval:h},this.refreshUI(),document.addEventListener("pointermove",this.boundOnDocumentMouseMoveHandler)}stop(){this.end(Xe.Stop)}cancel(){this.end(Xe.Cancel)}end(e){null!=this.reorderContext&&(this.reorderContext.state=e,this.refreshUI(),document.removeEventListener("pointermove",this.boundOnDocumentMouseMoveHandler))}onDocumentMouseMove(e){null!=this.reorderContext&&(this.reorderContext.currentY=e.y,this.refreshUI())}refreshUI(){if(null==this.reorderContext)return;const e=this.reorderContext.offsetParentStartY-Je.calcOffsetParentY(this.reorderContext.offsetParent),t=this.reorderContext.currentY-this.reorderContext.startY+e;let i=Je.findInterval(this.reorderContext.intervals,t);this.reorderContext.state===Xe.Cancel&&(i=this.reorderContext.initialInterval),this.reorderContext.currentInterval=i,this.applyTransformations(t)}applyTransformations(e){requestAnimationFrame((()=>{if(null==this.reorderContext)return;const t=this.reorderContext.currentInterval;if(null==t)return;const i=this.reorderContext.state===Xe.ItemMoving&&e>=t.top&&e<=t.bottom;for(let n=0;n<t.transforms.length;n++){let s=t.transforms[n];this.reorderContext.draggingItemIndices.includes(n)&&i&&(s=e),this.reorderContext.items[n].style.transform="translate(0, "+s+"px)"}this.reorderingCallback(this.reorderContext.items,t.itemIndices,this.reorderContext.draggingItemIndices,this.reorderContext.state)}))}static calcOffsetParentY(e){return e.getBoundingClientRect().y-e.scrollTop}static calculateReorderIntervals(e,t,i,n,s){const r=t[0],o=t.length,a=Je.calcIntervalBounds(e,r,i,n,s),l=Array.from(Array(e.length).keys());l.splice(r,o);const A=Math.ceil(Je.calculateTotalGroupHeight(t,e)/o),d=a.map((e=>{const i=Array.from(l),n=e.itemIndex>r?1:0,s=e.itemIndex!==r?i.indexOf(e.itemIndex)+n:e.itemIndex;return i.splice(s,0,...t),{top:e.top,bottom:e.bottom,itemIndices:i,transforms:this.calcItemsTransformations(i,A),itemIndex:e.itemIndex}}));return d}static calcIntervalBounds(e,t,i,n,s){const r=Array.from(Array(e.length).keys()),o=s[t],a=n[t];let l=0!==t?r.slice(0,t).reverse():[],A=t!==r.length-1?r.slice(t+1):[];s.some((e=>null!==e))&&(l=l.filter((e=>s[e]===o)),A=A.filter((e=>s[e]===o))),n.some((e=>null!==e))&&(l=l.filter((e=>n[e]===a)),A=A.filter((e=>n[e]===a)));const d=l.map((e=>Je.populateItemGroup(e,i,n))),c=A.map((e=>Je.populateItemGroup(e,i,n))),h=this.calcIntervalBoundsCore(e,d,!0),u=this.calcIntervalBoundsCore(e,c,!1),p=[];h.reverse();for(let e=0;e<h.length;e++){const t=h[e];p.push({top:-1*t.bottom,bottom:-1*t.top,itemIndex:t.itemIndex})}return p.push({top:p.length>0?p[p.length-1].bottom+1:0,bottom:u.length>0?u[0].top-1:0,itemIndex:t}),p.concat(u)}static calcIntervalBoundsCore(e,t,i=!0){if(0===t.length)return[];let n=0;const s=[];for(let i=0;i<t.length;i++){const r=Je.calculateTotalGroupHeight(t[i],e);s.push(n+Math.ceil(r/2)),n+=r}s.push(n);const r=[];for(let e=0;e<s.length-1;e++){const n=t[e];r.push({top:1+s[e],bottom:s[e+1],itemIndex:n[i?0:n.length-1]})}return r}static calcItemsTransformations(e,t){const i=[];for(let n=0;n<e.length;n++){let s=0;const r=e.indexOf(n)-n;0!==r&&(s=t*r),i.push(s)}return i}static findInterval(e,t){for(let i=0;i<e.length;i++)if(t>=e[i].top&&t<=e[i].bottom)return e[i];return t<e[0].top?e[0]:t>e[e.length-1].bottom?e[e.length-1]:null}static populateItemGroup(e,t,i){const n=[e],s=new Set;s.add(t[e]);for(let r=e+1;r<t.length;r++){const e=i[r];e&&s.has(e)&&(n.push(r),s.add(t[r]))}return n}static calculateTotalGroupHeight(e,t){return e.reduce(((e,i)=>e+t[i].height),0)}}class je{constructor(){this.action=null,this.handle=null}execute(e){this.cancel(),this.action=e,this.handle=setTimeout((()=>{var e;null===(e=this.action)||void 0===e||e.call(this),this.handle=null,this.action=null}),0)}cancel(){this.handle&&(clearTimeout(this.handle),this.action=null,this.handle=null)}}class Ze{static isZero(e){return Math.abs(e)<Number.EPSILON}static areClose(e,t){if(e===t)return!0;const i=(Math.abs(e)+Math.abs(t)+10)*Number.EPSILON,n=e-t;return-i<n&&i>n}static greaterThan(e,t){return e>t&&!Ze.areClose(e,t)}static lessThan(e,t){return e<t&&!Ze.areClose(e,t)}static lessThanOrClose(e,t){return!(e>=t)||Ze.areClose(e,t)}static greaterThanOrClose(e,t){return!(e<=t)||Ze.areClose(e,t)}static toRange(e,t,i){const n=Math.min(t,i),s=Math.max(t,i);return Math.min(Math.max(e,n),s)}static findNumber(e){if(null==e)return null;const t=e.match(/\d+/);return t&&(null==t?void 0:t.length)>0?parseInt(t[0]):null}}class et{get x(){return this._x}get y(){return this._y}constructor(e,t){this._x=e,this._y=t}}et.zero=new et(0,0);class tt{static areClose(e,t){return Ze.areClose(e.x,t.x)&&Ze.areClose(e.y,t.y)}static equals(e,t){return e.x===t.x&&e.y===t.y}static add(e,t){return new et(e.x+t.x,e.y+t.y)}static sub(e,t){return new et(e.x-t.x,e.y-t.y)}}class it{get width(){return this.widthField}get height(){return this.heightField}constructor(e,t){this.widthField=e,this.heightField=t}}it.Empty=new it(0,0);class nt{get end(){return this._end}get start(){return this._start}get size(){return Math.abs(this.end-this.start)}constructor(e,t){this._start=e,this._end=t}static rectToRange(e,t){return t?new nt(e.left,e.right):new nt(e.top,e.bottom)}}class st{get topLeft(){return new et(this.x,this.y)}get topRight(){return new et(this.x+this.width,this.y)}get bottomLeft(){return new et(this.x,this.y+this.height)}get bottomRight(){return new et(this.x+this.width,this.y+this.height)}get x(){return this.xField}get y(){return this.yField}get width(){return this.widthField}get height(){return this.heightField}get isEmpty(){return Ze.lessThanOrClose(this.width,0)||Ze.lessThanOrClose(this.height,0)}get left(){return this.x}get top(){return this.y}get right(){return this.isEmpty?Number.NEGATIVE_INFINITY:this.x+this.width}get bottom(){return this.isEmpty?Number.NEGATIVE_INFINITY:this.y+this.height}get size(){return new it(this.width,this.height)}constructor(e,t,i,n){this.xField=e,this.yField=t,this.widthField=i,this.heightField=n}static create(e,t){return new st(e.x,e.y,t.width,t.height)}static createFromPoints(e,t){return new st(Math.min(e.x,t.x),Math.min(e.y,t.y),Math.abs(e.x-t.x),Math.abs(e.y-t.y))}}st.Empty=new st(0,0,0,0);class rt{static fromDomRect(e){return new st(e.left,e.top,e.width,e.height)}static offset(e,t){return new st(e.x+t.x,e.y+t.y,e.width,e.height)}static areSame(e,t){return Ze.areClose(e.x,t.x)&&Ze.areClose(e.y,t.y)&&Ze.areClose(e.width,t.width)&&Ze.areClose(e.height,t.height)}static intersectsWith(e,t){return!e.isEmpty&&!t.isEmpty&&(t.left<=e.right&&t.right>=e.left&&t.top<=e.bottom&&t.bottom>=e.top)}static intersect(e,t){if(!rt.intersectsWith(e,t))return st.Empty;const i=Math.max(e.left,t.left),n=Math.max(e.top,t.top),s=Math.max(Math.min(e.right,t.right)-i,0),r=Math.max(Math.min(e.bottom,t.bottom)-n,0);return new st(i,n,s,r)}static contains(e,t){return!e.isEmpty&&(t.x>=e.x&&t.x-e.width<=e.x&&t.y>=e.y&&t.y-e.height<=e.y)}static parse(e){const t=e.split(",");if(4!==t.length)throw new Error("incorrect parameters number");return new st(parseFloat(t[0]),parseFloat(t[1]),parseFloat(t[2]),parseFloat(t[3]))}}class ot{static getRelativeElementRect(e,t=null){const i=null!=t?rt.fromDomRect(t.getBoundingClientRect()):st.Empty,n=rt.fromDomRect(e.getBoundingClientRect());return new st(n.x-i.x+window.scrollX,n.y-i.y+window.scrollY,n.width,n.height)}static getParent(e,t){const i=this.getParentCore(e,t);return"html"===(null==i?void 0:i.nodeName.toLowerCase())?null:i}static getParentCore(e,t){if(t){if(e&&e.assignedSlot)return e.assignedSlot}if(e.parentNode)return e.parentNode;return e&&e.host?e.host:null}static findParent(e,t,i=!0){let n=ot.getParent(e,i);for(;n;){if(n&&t(n))return n;n=ot.getParent(n,i)}return null}static*getRootPathAndSelf(e,t=null,i=!0){yield e;for(const n of ot.getRootPath(e,t,i))yield n}static*getRootPath(e,t=null,i=!0){let n=ot.getParent(e,i);for(;n&&n!==t;)yield n,n=ot.getParent(n,i)}static getScrollParent(e){var t;return e?["html","body","#document"].indexOf(null!==(t=Te.getNodeName(e))&&void 0!==t?t:"")>=0?null:e instanceof HTMLElement&&Te.isScrollable(e)?e:ot.getScrollParent(ot.getParent(e,!0)):null}static getRealOffsetParent(e){return e instanceof HTMLElement&&!Te.isFixedPositioning(e)?e.offsetParent:null}static getOffsetParent(e){let t=ot.getRealOffsetParent(e);for(;t&&Te.isTableElement(t)&&"static"===getComputedStyle(t).position;)t=ot.getRealOffsetParent(t);return t}static containsElement(e,t){var i;if(!t)return!1;const n=t.getRootNode();if(e.contains(t))return!0;if(n&&n instanceof ShadowRoot){let n=t;do{if(n&&e.isSameNode(n))return!0;n=null!==(i=null==n?void 0:n.parentNode)&&void 0!==i?i:null}while(n)}return!1}static getScrollParents(e){if(!e)return[];const t=ot.getScrollParent(e);if(!t)return[];const i=new Array(t),n=ot.getParent(t,!0);if(!n)return i;const s=this.getScrollParents(n);return i.concat(s)}static getClippingRoot(e){return ot.findParent(e,(e=>e instanceof HTMLElement&&Te.isFixedPositioning(e)),!0)}static getClippingParents(e){const t=ot.getScrollParents(ot.getParent(e,!0)),i=ot.getClippingRoot(e);return t.filter(i?e=>e instanceof HTMLElement&&e!==i&&!ot.containsElement(e,i):e=>e instanceof HTMLElement)}}function at(e){return ut(e,["popup","addEventListener","removeEventListener"])}function lt(e){return ut(e,["closeAsync","processCapturedPointerAsync","addEventListener","removeEventListener","contains","focus","positionChanged","renderedVisible"])}function At(e){return ut(e,["logicalParent"])}function dt(e){return ut(e,["logicalChildren","addLogicalChild","removeLogicalChild"])}function ct(e){return ut(e,["adaptivityEnabled"])}function ht(e){return ut(e,["processCapturedPointerAsync","processCapturedKeyDownAsync"])}function ut(e,t){if(0===t.length)throw new Error("empty interface");for(const i of t)if(!(i in e))return!1;return!0}class pt{static getParent(e,t){var i;return At(e)&&null!==(i=e.logicalParent)&&void 0!==i?i:ot.getParent(e,t)}static findParent(e,t,i=!0){for(const n of pt.getRootPath(e,null,i)){if(n&&t(n))return n}return null}static containsElement(e,t){return!!t&&null!==pt.findParent(t,(t=>t===e))}static*getRootPath(e,t=null,i=!0){let n=pt.getParent(e,i);for(;n&&n!==t;)yield n,n=pt.getParent(n,i)}}class mt{static isFocused(e){return e===document.activeElement}static isFocusWithin(e,t=!1){return t?pt.containsElement(e,document.activeElement):ot.containsElement(e,document.activeElement)}static restoreFocus(e){e.focus({preventScroll:!1})}static cancelRestoreFocus(){this.restoreFocusAction.cancel()}static unfocus(){mt.cancelRestoreFocus();const e=document.activeElement;e&&e.blur()}}mt.restoreFocusAction=new je;class gt{static register(e,t){var i;null===(i=window.Blazor)||void 0===i||i.registerCustomEventType(e,{createEventArgs:t})}}class Ct extends CustomEvent{constructor(e,t){super(Ct.eventName,{detail:new ft(e,t),bubbles:!0,composed:!0,cancelable:!0})}}Ct.eventName="dxbl-keyboard-navigator.shortcut";class ft{constructor(e,t){this.Event=e,this.Info=JSON.stringify(t)}}gt.register(Ct.eventName,(e=>{const t=e.detail;return{Key:t.Event.key,Code:t.Event.code,CtrlKey:t.Event.ctrlKey,AltKey:t.Event.altKey,ShiftKey:t.Event.shiftKey,MetaKey:t.Event.metaKey,Info:t.Info}}));let vt=-1;function bt(){return function(){if(vt>-1)return vt;const e=document.createElement("DIV");e.style.cssText="position: absolute; top: 0px; left: 0px; visibility: hidden; width: 200px; height: 150px; overflow: hidden; box-sizing: content-box",document.body.appendChild(e);const t=document.createElement("P");e.appendChild(t),t.style.cssText="width: 100%; height: 200px;";const i=t.offsetWidth;e.style.overflow="scroll";let n=t.offsetWidth;return i===n&&(n=e.clientWidth),vt=(i-n)*window.devicePixelRatio,document.body.removeChild(e),vt}()/window.devicePixelRatio}class wt{constructor(e=-1,t=-1){this.width=e,this.height=t}static getDimentionValue(e,t){let i=-1;if(t in e){const n=parseFloat(e[t]);i=Number.isNaN(n)?-1:n}return i}static from(e){if(!e)return new wt;const t=this.getDimentionValue(e,"width"),i=this.getDimentionValue(e,"height");return new wt(t,i)}}function yt(e){return t=e,h.Browser.IE?function(e){return null==e||h.Browser.IE&&null==e.parentNode?0:e.getBoundingClientRect().left+ci()}(t):h.Browser.Firefox&&h.Browser.Version>=3||h.Browser.WebKitFamily||h.Browser.Edge?Et(t):window.getAbsolutePositionX_Other(t);var t}function Bt(e){return function(e){if(h.Browser.IE)return function(e){return null==e||h.Browser.IE&&null==e.parentNode?0:e.getBoundingClientRect().top+hi()}(e);return h.Browser.Firefox&&h.Browser.Version>=3||h.Browser.WebKitFamily||h.Browser.Edge?It(e):window.getAbsolutePositionY_Other(e)}(e)}function Et(e){if(null==e)return 0;return e.getBoundingClientRect().left+ci()}function It(e){if(null==e)return 0;return e.getBoundingClientRect().top+hi()}function St(e,t,i){return e-=function(e,t){return function(e,t){const i=function(e){const t=document.createElement("DIV");return t.style.top="0px",t.style.left="0px",t.visibility="hidden",t.style.position=T.DomUtils.getCurrentStyle(e).position,t}(e);"static"===i.style.position&&(i.style.position="absolute");e.parentNode.appendChild(i);const n=t?yt(i):Bt(i);return e.parentNode.removeChild(i),n}(e,t)}(t,i),e}function xt(e,t){try{let i;const n=Dt(e);if(!n){const t=Ft(e);if(!t)return!1;i=t.split(" ")}const s=t.split(" ");for(let e=s.length-1;e>=0;e--)if(n){if(-1===n.indexOf(s[e]))return!1}else if(i.indexOf(s[e])<0)return!1;return!0}catch(e){return!1}}function Dt(e){return e.classList?[].slice.call(e.classList):Ft(e).replace(/^\s+|\s+$/g,"").split(/\s+/)}function Ft(e){return"svg"===e.tagName?e.className.baseVal:e.className}function Tt(e,t){return t||(t=0),null!=e&&e.length>t?e[t]:null}function Ht(e,t,i){if(null!=e){const n=function(e,t){const i=t.toUpperCase();let n=null;return e&&(e.getElementsByTagName?(n=e.getElementsByTagName(i),0===n.length&&(n=e.getElementsByTagName(t))):e.all&&void 0!==e.all.tags&&(n=h.Browser.Netscape?e.all.tags[i]:e.all.tags(i))),n}(e,t);return Tt(n,i)}return null}let Ut=null;function Pt(){return Ut&&![...document.styleSheets].every((e=>e!==Ut))||(Ut=function(e){if(!e.createStyleSheet){const t=e.createElement("STYLE");return Ht(e,"HEAD",0).appendChild(t),t.sheet}try{return e.createStyleSheet()}catch(e){throw new Error("The CSS link limit (31) has been exceeded. Please enable CSS merging or reduce the number of CSS files on the page. For details, see https://supportcenter.devexpress.com/ticket/details/k18487/.")}}(document)),Ut}function Qt(e,t,i){for(;null!=e;){if("BODY"===e.tagName||"#document"===e.nodeName)return null;if(i(e,t))return e;e=e.parentNode}return null}function Nt(e,t,i){return Qt(e,t,i)}function Rt(e,t){return Qt(e,t,xt)}function Lt(e,t,i){e&&(e[t]=i)}function Mt(e){if(!e)return null;let t=null;if("string"==typeof e){const i=document.querySelector("#"+e);if(i)e=i;else try{const i=JSON.parse(e);i&&i.__internalId&&(t=i.__internalId)}catch(e){}}if(!t&&e.__internalId&&(t=e.__internalId),t){e=document.querySelector("["+("_bl_"+t)+"]")}return e&&e.tagName&&null!==e.parentNode||(e=null),e}function kt(e,t){e.removeAttribute?e.removeAttribute(t):e.removeProperty&&e.removeProperty(t)}function Kt(e,t,i){i?Lt(e,t,i):kt(e,t)}function Ot(e,t){const i=t||T.DomUtils.getCurrentStyle(e);return T.DomUtils.pxToInt(i.marginLeft)+T.DomUtils.pxToInt(i.marginRight)}function _t(e,t){const i=t||T.DomUtils.getCurrentStyle(e);return T.DomUtils.pxToInt(i.marginTop)+T.DomUtils.pxToInt(i.marginBottom)}function Vt(e,t){return function(e,t){const i=t||T.DomUtils.getCurrentStyle(e);return parseInt(i.paddingLeft)+parseInt(i.paddingRight)}(e,t)+Wt(e,t)}function zt(e,t){return function(e,t){const i=t||T.DomUtils.getCurrentStyle(e);return parseInt(i.paddingTop)+parseInt(i.paddingBottom)}(e,t)+function(e,t){t||(t=h.Browser.IE&&9!==h.Browser.MajorVersion&&window.getComputedStyle?window.getComputedStyle(e):T.DomUtils.getCurrentStyle(e));let i=0;"none"!==t.borderTopStyle&&(i+=parseFloat(t.borderTopWidth));"none"!==t.borderBottomStyle&&(i+=parseFloat(t.borderBottomWidth));return i}(e,t)}function Wt(e,t){t||(t=h.Browser.IE&&window.getComputedStyle?window.getComputedStyle(e):T.DomUtils.getCurrentStyle(e));let i=0;return"none"!==t.borderLeftStyle&&(i+=parseFloat(t.borderLeftWidth)),"none"!==t.borderRightStyle&&(i+=parseFloat(t.borderRightWidth)),i}const $t=window.requestAnimationFrame||function(e){e()};function Gt(e){return $t(e)}const qt=function(e){this.requestFrame=e,this.cache=[[]],this.isInFrame=!1,this.frameTimestamp=null,this.isWaiting=!1,this.getBuffer=function(e){return e||(e=0),this.cache.length<=e&&(this.cache[e]=[]),this.cache[e]},this.execute=function(e,t){if(!this.isInFrame)return!1;let i=this.cache[t||0];return null===i?e(Yt,this.frameTimestamp):(i=this.getBuffer(t)).push(e),!0},this.runAll=function(e){this.isWaiting=!1,this.isInFrame=!0,this.frameTimestamp=e;for(let e=0;e<this.cache.length;e++){const t=this.cache[e];if(t)for(this.cache[e]=null;t.length;)t.shift()(Yt,this.frameTimestamp)}this.waitNextFrame()},this.waitNextFrame=function(){this.cache=[[]],this.isInFrame=!1,this.isWaiting=!1},this.requestExecution=function(e,t){const i=this;return new Promise((function(n){function s(t,i){n(e(t,i))}i.execute(s,t)||(i.getBuffer(t).push(s),!1===i.isWaiting&&(i.isWaiting=!0,i.requestFrame(i.runAll.bind(i))))}))}};let Yt=null;function Xt(e){const t=new qt(e);return t.requestExecution.bind(t)}const Jt=Xt((function(e){return Yt=Gt(e)})),jt=Xt((function(e){return Jt((function(){setTimeout(e)}))}));function Zt(e){return Jt(e)}function ei(e){return jt(e)}let ti=[];const ii=50;function ni(e){const t=ti.indexOf(e);t<0||ti.splice(t,1)}function si(e,t){const i=function(e,t,i){return function(){if(e.compareDocumentPosition(document.body)&window.Node.DOCUMENT_POSITION_DISCONNECTED)return!1;const n=T.DomUtils.getCurrentStyle(e);if("auto"===n.width)return!0;const s=Math.ceil(parseFloat(n.width))-Vt(e),r=Math.ceil(parseFloat(n.height))-zt(e);if(i.width!==s||i.height!==r){var o=wt.from(i);i.width=s,i.height=r,t(i,o)}return!0}}(e,t,{width:-1,height:-1});return function(e){0===ti.length?(ti.push(e),ei(ri)):ti.push(e)}(i),i}function ri(){ti=ti.filter((function(e){return e()})),ti.length>0&&setTimeout((function(){ei(ri)}),ii)}function oi(e,t){null===t.inlineStyles?kt(e,"style"):function(e,t){const i=[];for(const e in t)Object.prototype.hasOwnProperty.call(t,e)&&i.push({attr:e,value:t[e]});if(1===i.length)e.style[i[0].attr]=i[0].value;else{let n="";if(e.style.cssText){const i=e.style.cssText.split(";").map((function(e){return e.trim().split(":")}));for(let e=0;e<i.length;e++){const s=i[e];2===s.length&&void 0===t[s[0]]&&(n+=s[0]+":"+s[1].trim()+";")}}for(let e=0;e<i.length;e++){const t=i[e];""!==t.value&&(n+=t.attr+":"+t.value+";")}Kt(e,"style",n)}}(e,t.inlineStyles);for(const i in t.attributes)Object.prototype.hasOwnProperty.call(t,i)&&Kt(e,i,t.attributes[i]);const i=Dt(t);if(i){const n=t.cssClassToggleInfo,s=i.filter((function(e){return!1!==n[e]}));for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&n[e]&&-1===s.indexOf(e)&&s.push(e);const r=s.join(" ");r?function(e,t){"svg"===e.tagName?e.className.baseVal=t.trim():e.className=t.trim()}(e,r):kt(e,"class")}}function ai(e,t){if(void 0!==e.length){for(let i=0;i<e.length;i++)ai(e[i],t);return}const i=e;i._dxCurrentFrameElementStateInfo?t(i._dxCurrentFrameElementStateInfo):(t(i._dxCurrentFrameElementStateInfo=function(e){return{inlineStyles:{},cssClassToggleInfo:{},className:Ft(e),attributes:{}}}(i)),Zt((function(){oi(i,i._dxCurrentFrameElementStateInfo),i._dxCurrentFrameElementStateInfo=null})))}function li(e){ai(e,(function(e){e.inlineStyles=null,e.cssClassToggleInfo[he.InvisibleOffScreen]=!1}))}function Ai(e,t,i){ai(e,(function(e){e.cssClassToggleInfo[t]=i}))}function di(e,t){if(!e)return null;if(e.closest)return e.closest(t);do{if((e.matches||e.msMatchesSelector).call(e,t))return e;e=e.parentElement||e.parentNode}while(e&&"BODY"!==e.tagName);return null}function ci(){return h.Browser.Edge?document.body?document.body.scrollLeft:document.documentElement.scrollLeft:h.Browser.WebKitFamily?document.documentElement.scrollLeft||document.body.scrollLeft:document.documentElement.scrollLeft}function hi(){return h.Browser.WebKitFamily||h.Browser.Edge?h.Browser.MacOSMobilePlatform?window.pageYOffset:h.Browser.WebKitFamily&&document.documentElement.scrollTop||document.body.scrollTop:document.documentElement.scrollTop}function ui(e){return e+"px"}function pi(e){return Boolean(e.compareDocumentPosition(document.body)&window.Node.DOCUMENT_POSITION_DISCONNECTED)}function mi(e){if(!e.style)return!1;return function(e){return"static"!==e.position||function(e){return!("none"===e.transform&&!e["will-change"].includes("transform"))||(!("none"===e.perspective&&!e["will-change"].includes("perspective"))||(!("none"===e.filter&&!e["will-change"].includes("filter"))||!!e.contain?.includes("paint")))}(e)}(window.getComputedStyle(e))}function gi(e){return"svg"===e.tagName?e.getBoundingClientRect().width:e.offsetWidth}const Ci={focusElement:function(e){"string"==typeof e&&(e=document.querySelector(e)),e&&e.focus()},setInputAttribute:function(e,t,i){(e=Mt(e))&&Lt(e,t,i)},setCheckInputIndeterminate:function(e,t){e&&(e.indeterminate=t)}};class fi{static isFocusedElement(e){return e===document.activeElement}static scheduleResetTabIndex(e){fi.resetTabIndexAction.cancel(),fi.elementsToResetTabIndex.push(e),fi.resetTabIndexAction.execute((()=>{fi.elementsToResetTabIndex.forEach((e=>fi.removeTabIndex(e))),fi.elementsToResetTabIndex.splice(0)}))}static focusElement(e,t=!1){e&&e.focus({preventScroll:t})}static makeElementFocusable(e){e.tabIndex<0&&!e.hasAttribute("tabIndex")&&Kt(e,"tabIndex","0")}static removeTabIndex(e){e.tabIndex>=0&&Kt(e,"tabIndex")}static findPrevFocusableElement(e){const t=fi.findFocusableElements(document),i=t.findIndex((t=>t===e)),n=i-1;return n>=0?t[n]:null}static findNextFocusableNotChildElement(e){const t=fi.findFocusableElements(document),i=fi.findFocusableElements(e),n=t.findIndex((t=>t===e)),s=n+i.length+1;return s<t.length?t[s]:null}static findFocusableElementInRootPath(e){var t;return null!==(t=[...ot.getRootPathAndSelf(e)].find((e=>e.tabIndex>-1||this.isRootWidget(e))))&&void 0!==t?t:null}static isRootWidget(e){return"string"==typeof e.className&&e.className.includes("dxbl-kbn-root-widget")}static findFocusableElements(e){return Array.from(e.querySelectorAll(k)).filter(((e,t,i)=>fi.isElementFocusable(e,i)))}static isElementFocusable(e,t){if(e.tabIndex>-1&&fi.isElementVisible(e)&&!Te.isHidden(e)){const i=e;return"radio"!==(null==i?void 0:i.type)||fi.isRadioButtonFocusable(i,t)}return!1}static isElementVisible(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)}static isRadioButtonFocusable(e,t){return!!e.checked||!((t=t.filter((t=>(null==t?void 0:t.name)===e.name))).findIndex((t=>e!==t&&t.checked))>0)&&e===t[0]}static findItemElementIndexByChild(e,t){const i=e.findIndex((e=>e===t));return i>-1?i:e.findIndex((e=>ot.containsElement(e,t)))}}function vi(e,t){return function(e,t){const i=[];for(let n=0;n<e.length;n++){const s=e[n];if(t.has(s)){const e=t.get(s);e&&i.push(e)}}return i}([...ot.getRootPathAndSelf(e)],t)}fi.elementsToResetTabIndex=[],fi.resetTabIndexAction=new je;class bi{constructor(...e){this.dispose=()=>{this.dispose=()=>{},e.forEach((e=>{"function"==typeof e?e():e&&e.dispose()}))}}}const wi=new WeakMap;function yi(e){const t=wi.get(e);t&&(wi.delete(e),t())}function Bi(e,t){return wi.set(e,t),new bi((()=>yi(e)))}const Ei="data-dx-focus-hidden";function Ii(e){e.setAttribute(Ei,"")}function Si(e){e.removeAttribute(Ei)}function xi(e){return null!==e.getAttribute(Ei)}function Di(e){let t=e;function i(e){const i="mousedown"===e.type&&0===e.detail,n=null==t?void 0:t.hasAttribute(Ei);i||!t||n||pt.containsElement(t,e.target)&&Ii(t)}function n(e){if(!t)return;const i=e.relatedTarget;i&&!pt.containsElement(t,i)&&document.hasFocus()&&Si(t)}function s(e){t&&Be.KeyUtils.getEventKeyCode(e)===Be.KeyCode.Tab&&Si(t)}const r=document.documentElement;return r.addEventListener("touchstart",i),r.addEventListener("mousedown",i),t.addEventListener("keydown",s),t.addEventListener("focusout",n),()=>{r.removeEventListener("touchstart",i),r.removeEventListener("mousedown",i),null==t||t.removeEventListener("keydown",s),null==t||t.removeEventListener("focusout",n),t=null}}function Fi(e){if(!e)return;yi(e);Bi(e,Di(e))}function Ti(e){return null!==e&&e.matches(k)}var Hi;!function(e){e[e.MouseDown=0]="MouseDown",e[e.KeyDown=1]="KeyDown",e[e.KeyUp=2]="KeyUp"}(Hi||(Hi={}));function Ui(e){return"getPortal"in e}const Pi=new class{get keyboardEventProcessed(){return this._keyboardEventProcessed}get processingKeyCode(){return this._processingKeyCode}constructor(){this.lastInputMethod=null,this.boundOnKeyDownHandler=this.handleKeyDown.bind(this),this.boundOnKeyUpHandler=this.handleKeyUp.bind(this),this.boundOnMouseDownHandler=this.handleMouseDown.bind(this),this.boundOnFocusInHandler=this.handleFocusIn.bind(this),this.navigators=new Map,this.lockTreeLineActivation=!1,this.leavingToDocument=!1,this._keyboardEventProcessed=!1,this._processingKeyCode=null,setTimeout(this.addEventSubscriptions.bind(this))}register(e){const t=e.targetElement;this.navigators.has(t)||this.navigators.set(t,e)}remove(e){const t=e.targetElement;this.navigators.has(t)&&this.navigators.delete(t)}addFocusHiddenAttributes(e){this.forEachNavigatorInTreeLine(e,(e=>e.addFocusHiddenAttribute()))}removeFocusHiddenAttributes(e){this.forEachNavigatorInTreeLine(e,(e=>!e.removeFocusHiddenAttribute()))}addEventSubscriptions(){document.addEventListener("keydown",this.boundOnKeyDownHandler,{capture:!0}),document.addEventListener("keyup",this.boundOnKeyUpHandler,{capture:!0}),document.addEventListener("mousedown",this.boundOnMouseDownHandler,{capture:!0}),document.addEventListener("focusin",this.boundOnFocusInHandler,{capture:!0})}handleKeyDown(e){this.lastInputMethod=Hi.KeyDown,this._processingKeyCode=Be.KeyUtils.getEventKeyCode(e),this.handleKeyboardEvent(e,((t,i)=>t.onKeyDown(e,i)))}handleKeyUp(e){this.lastInputMethod=Hi.KeyUp,this.handleKeyboardEvent(e,((t,i)=>t.onKeyUp(e,i))),this._processingKeyCode=null}handleKeyboardEvent(e,t){this._keyboardEventProcessed=!0,this.forEachNavigatorInTreeLine(e.target,((i,n,s,r)=>{if(t(i,n)){let t=!0;if(i.leaveDirection!==Ni.None){t=this.leaveFromNavigator(i,s<r.length-1?r[s+1]:null)}return t&&H.markHandled(e,!1),this.removeFocusHiddenAttributes(n),!0}return i.getIsNestedContentSelected(n)}))}handleMouseDown(e){this.lastInputMethod=Hi.MouseDown,this.activateTreeLine(e,!1),function(e){const t=e.target;return!!t&&(t.scrollHeight>t.clientHeight&&e.offsetX>=t.clientWidth||t.scrollWidth>t.clientWidth&&e.offsetY>=t.clientHeight)}(e)||this.updateActiveState(e.target)}handleFocusIn(e){this.leavingToDocument||(this.updateActiveState(e.target),this.activateTreeLine(e,!0),this._keyboardEventProcessed=!1)}getNavigatorsTreeLine(e){return function(e,t){let i=[];do{const n=vi(e,t),s=n[n.length-1];i=i.concat(...n),e=s&&Ui(s)?s.getPortal():null}while(e);return i}(e,this.navigators)}activateTreeLine(e,t){if(this.lockTreeLineActivation)return;this.lockTreeLineActivation=!0;this.activateTreeLineCore(e,e.target,t),this.lockTreeLineActivation=!1}activateTreeLineCore(e,t,i){this.forEachNavigatorInTreeLine(t,((n,s,r)=>{if(n.updateSelectedItems(s,t,e),0!==r)return!1;n.activateStrategyTreeLine(e,t,i,this.lastInputMethod);const o=n.findLastSelectedStrategy();return!(!o||!o.isTransitContainer||Ui(n))&&(this.lockTreeLineActivation=!1,o.switchToNestedContent(),!0)}))}forEachNavigatorInTreeLine(e,t){var i;const n=this.getNavigatorsTreeLine(e);for(let s=0;s<n.length;s++){const r=n[s];if(t(r,e,s,n))break;const o=Ui(r)?r:null;o&&(e=null!==(i=o.getPortal())&&void 0!==i?i:e)}}updateActiveState(e){let t=null;if(null!==(i=e)&&null!==i.closest(k)){const i=vi(e,this.navigators);t=i.length>0?i[0]:null}var i;this.navigators.forEach((e=>{e.isActive=e===t}))}leaveFromNavigator(e,t){const i=e.leaveDirection===Ni.Backward,n=(i?fi.findPrevFocusableElement:fi.findNextFocusableNotChildElement)(e.targetElement),s=e.getSelectedItemElement(),r=null==t?void 0:t.getSelectedItemElement(),o=!s||r&&r.contains(s)?r:null;if(n&&(!o||o.contains(n)&&o!==n))fi.focusElement(n);else{if(!t)return this.leaveToDocument(e,i),!1;t.captureFocus(e.leaveDirection)}return!0}leaveToDocument(e,t){const i=fi.findFocusableElements(e.targetElement),n=t||0===i.length?e.targetElement:i[i.length-1];fi.isFocusedElement(n)||(this.leavingToDocument=!0,fi.focusElement(n,!0),this.leavingToDocument=!1)}},Qi="dxbl-keyboard-navigator";var Ni,Ri;!function(e){e[e.None=0]="None",e[e.Backward=1]="Backward",e[e.Forward=2]="Forward"}(Ni||(Ni={})),function(e){e.NearestItem="NearestItem",e.LastActiveItem="LastActiveItem"}(Ri||(Ri={}));class Li extends HTMLElement{constructor(){super(),this._isActive=!1,this._initialized=!1,this._leaveDirection=Ni.None,this._owner=null,this._rootStrategy=null,this.unsubscribeFocusHiding=null,this.strategies=new Map,this._componentReactivateMode=Ri.LastActiveItem,this._focusedFromForwardElement=!1,this.contentChangedObserver=new MutationObserver(this.onContentChanged.bind(this))}get rootStrategy(){return this._rootStrategy}get isActive(){return this._isActive}set isActive(e){this.updateActiveState(e)}get leaveDirection(){return this._leaveDirection}get initialized(){return this._initialized&&!!this._rootStrategy}get targetElement(){return this.owner}get owner(){return this._owner}get focusedFromForwardElement(){return this._focusedFromForwardElement}get preventScrollOnFocus(){return!Pi.keyboardEventProcessed}attributeChangedCallback(e,t,i){"reactivate-mode"===e&&(this._componentReactivateMode=Ri[i])}initialize(e,t,i=null){this._initialized=!1,this._owner=e,this._rootStrategy=t,fi.makeElementFocusable(this.targetElement),this.register(i),this.unsubscribeFocusHiding=Di(this.targetElement),this.attachStrategy(this._rootStrategy),this._rootStrategy.initialize(),mt.isFocusWithin(this.targetElement)&&this.updateSelectedItems(document.activeElement),this._initialized=!0}reinitialize(){this._initialized=!1,this._rootStrategy&&(this._rootStrategy.initialize(),this.isActive&&this._rootStrategy.activate()),this._initialized=!0}disconnectedCallback(){this.disposeComponent()}disposeComponent(){var e;this.disposeStrategies(),this._rootStrategy=null,this.contentChangedObserver.disconnect(),null===(e=this.unsubscribeFocusHiding)||void 0===e||e.call(this),this.removeFocusHiddenAttribute(),Pi.remove(this)}attachStrategy(e){e&&this.strategies.set(e.targetElement,e)}getStrategy(e){var t;return e&&this.strategies.has(e)&&null!==(t=this.strategies.get(e))&&void 0!==t?t:null}getIsNestedContentSelected(e){const t=this.getStrategiesPath(e).findIndex((e=>e.nestedContentSelected));return t>=0}onKeyDown(e,t){return this.handleKeyboardEvent(t,(t=>t.handleKeyDown(e)))}onKeyUp(e,t){return this.handleKeyboardEvent(t,(t=>t.handleKeyUp(e)))}dispatchShortcutEvent(e){const t=this.collectShortcutInfo(e);this.dispatchEvent(new Ct(e,t))}captureFocus(e=Ni.None){var t;null===(t=this.findLastSelectedStrategy())||void 0===t||t.captureFocus(e)}leaveFocus(e){this._leaveDirection=e?Ni.Backward:Ni.Forward}leaveFromNavigator(){Pi.leaveFromNavigator(this,null)}leaveTransitContainer(e){var t;const i=null===(t=this.findLastSelectedStrategy())||void 0===t?void 0:t.targetElement;if(!i)return;const n=this.getStrategiesPath(i),s=n.length>1?n[1]:null;null==s||s.handleTransitNavigation(e)}getSelectedItemElement(){var e;return null===(e=this.findLastSelectedStrategy())||void 0===e?void 0:e.selectedItemElement}addFocusHiddenAttribute(){return Ii(this.targetElement),!0}removeFocusHiddenAttribute(){return this.targetElement&&Si(this.targetElement),!0}passFocusHiddenAttribute(e){Pi.addFocusHiddenAttributes(e)}updateSelectedItems(e,t=e,i=null){const n=this.getStrategiesPath(e);for(let s=0;s<n.length;s++){const r=0===s,o=n[s];o.updateSelectedItemByChildElement(e,i),e===t&&o.canSwitchToNestedContentMode()&&(o.nestedContentSelected=r)}}activateStrategyTreeLine(e,t,i,n){if(i&&this.tryActivateFromPreviousFocusedSibling(e,n))return;const s=this.getStrategiesPath(t);if(0===s.length)return;const r=s[0],o=r===this._rootStrategy;o&&r.activate(),o&&1!==s.length||this.handleSelectedItemFocus(r,t)}tryActivateFromPreviousFocusedSibling(e,t){const i=e.relatedTarget;if(!i||this.targetElement.contains(i))return!1;const n=e.target,s=fi.findPrevFocusableElement(n),r=fi.findNextFocusableNotChildElement(n);if(i!==s&&i!==r)return!1;if(i===r&&(null==s?void 0:s.contains(n))&&t===Hi.MouseDown)return!1;const o=this.getStrategiesPath(n);return 0!==o.length&&(this.updateAndActivateRootStrategy(o[0],i,r),!0)}handleSelectedItemFocus(e,t){var i;let n=e.selectedItemElement===t;if(!n){const s=fi.findFocusableElementInRootPath(t);e.selectedItemElement!==s&&(null===(i=e.selectedItemElement)||void 0===i?void 0:i.contains(s))||(n=!0)}n&&(e.resetNestedContentSelectedRecursive(),e.focusSelectedItem())}updateAndActivateRootStrategy(e,t,i){if(e.resetNestedContentSelectedRecursive(),this._rootStrategy){if(this._focusedFromForwardElement=t===i,this._componentReactivateMode===Ri.NearestItem){this._rootStrategy.updateSelectedItemByIndex(t===i?this._rootStrategy.itemCount-1:0)}this._rootStrategy.activate()}}updateActiveState(e){this._isActive!==e&&(this._isActive=e,this.strategies.forEach((t=>t.onActiveStateChanged(e))))}register(e){const t=["disabled"];e&&t.push(e),this.contentChangedObserver.observe(this.targetElement,{childList:!0,subtree:!0,attributeFilter:t}),Pi.register(this)}onContentChanged(){this.detachDisconnectedStrategies(),this.reinitialize()}getStrategiesPath(e){return vi(e,this.strategies)}findLastSelectedStrategy(){var e,t;return null!==(t=null===(e=this._rootStrategy)||void 0===e?void 0:e.findLastSelectedStrategy())&&void 0!==t?t:null}handleKeyboardEvent(e,t){this._leaveDirection=Ni.None;const i=this.getStrategiesPath(e);for(let e=0;e<i.length;e++){const n=i[e];if(t(n))return!0;if(n.nestedContentSelected)return!1}return!1}detachDisconnectedStrategies(){var e;const t=Array.from(this.strategies.keys()).filter((e=>!e.isConnected));for(const i of t)null===(e=this.strategies.get(i))||void 0===e||e.onDispose(),this.strategies.delete(i)}disposeStrategies(){this.strategies.forEach((e=>e.onDispose()))}collectShortcutInfo(e){const t=this.getStrategiesPath(e.target).map((e=>e.getShortcutContext()));return Object.assign({},...t)}}customElements.define(Qi,Li);class Mi{constructor(e,t,i=!1){this._isTransitContainer=!1,this._nestedContentSelected=!1,this._selectedItemIndex=0,this._savedSelectedItemElement=null,this._leaveDirection=Ni.None,this._navigator=e,this._targetElement=t,this._items=[],this._isTransitContainer=i,this._isMacOSPlatform=$().isMac}get navigator(){return this._navigator}get targetElement(){return this._targetElement}get itemCount(){return this.items.length}get selectedItemElement(){return this.items[this.selectedItemIndex]}get nestedContentSelected(){return this._nestedContentSelected}set nestedContentSelected(e){this._nestedContentSelected=e&&this.canFocusSelectedItem()}get preventScrollOnFocus(){return this._navigator.preventScrollOnFocus}get nearestVisibleSelectedIndex(){const e=this.findVisibleItemIndex(this.selectedItemIndex,!0,!0);return e>=0?e:this.findVisibleItemIndex(this.selectedItemIndex,!1,!1)}get selectedItemIndex(){return this._selectedItemIndex}set selectedItemIndex(e){this._selectedItemIndex=e}get isTransitContainer(){return this._isTransitContainer}get leaveDirection(){return this._leaveDirection}get items(){return this._items}get firstItemSelected(){return this.findVisibleItemIndex(this.selectedItemIndex,!1,!1)<0}get lastItemSelected(){return this.findVisibleItemIndex(this.selectedItemIndex,!0,!1)<0}get isObsolete(){return!1}get isMacOSPlatform(){return this._isMacOSPlatform}getShortcutContext(){return{}}initialize(){this.storeSelection(),this.items.splice(0);const e=this.queryItems().filter((e=>!!e));0===e.length&&e.push(this.targetElement),e.forEach((e=>this.initializeItemStrategy(e))),this.tryRestoreSelection()}activate(){this.selectItem(this.nearestVisibleSelectedIndex)}onDispose(){var e;(null===(e=this.selectedItemElement)||void 0===e?void 0:e.isConnected)&&fi.removeTabIndex(this.selectedItemElement)}getItem(e){return this.items[e]}getSelectedItemStrategy(){return this.navigator.getStrategy(this.selectedItemElement)}focusSelectedItem(){this.canFocusSelectedItem()&&(!this.preventScrollOnFocus&&this.selectedItemElement&&this.selectedItemElement.scrollIntoView({block:"nearest"}),fi.focusElement(this.selectedItemElement,this.preventScrollOnFocus))}isIndexWithinBoundaries(e){return e>=0&&e<this.itemCount}handleKeyDown(e){const t=Be.KeyUtils.getEventKeyCode(e);if(this.nestedContentSelected){if(t===Be.KeyCode.Esc)return this.processEscapeKeyDown();if(t===Be.KeyCode.Tab)return this.processTabKeyDown(e.shiftKey);this.isImmediatelyClickEnabled()&&this.hasSingleFocusableElement()&&this.leaveFromNestedContent()}return!this.nestedContentSelected&&t===Be.KeyCode.Enter&&this.processEnter(e)}handleKeyUp(e){return!1}switchToNestedContent(){if(this.nestedContentSelected&&this.isNestedElementFocused())return!0;if(this.selectedItemElement){const e=this.getNestedContentElement();if(e)return this.nestedContentSelected=!0,fi.focusElement(e,this.preventScrollOnFocus),!0}return!1}leaveFromNestedContent(e=Ni.None){this.nestedContentSelected=!1,this.isTransitContainer?(this._leaveDirection=e,this.navigator.isActive=!0,this.leaveDirection!==Ni.None&&this.leaveTransitContainer(this.leaveDirection),this._leaveDirection=Ni.None):this.focusSelectedItem()}resetNestedContentSelectedRecursive(){this.nestedContentSelected=!1;if(!(this.targetElement===this.selectedItemElement)){const e=this.getSelectedItemStrategy();null==e||e.resetNestedContentSelectedRecursive()}}captureFocus(e=Ni.None){this.nestedContentSelected&&this.leaveFromNestedContent(e)}findLastSelectedStrategy(){const e=this.getSelectedItemStrategy();return e&&e!==this?e.findLastSelectedStrategy():this}updateSelectedItemByIndex(e){const t=this.selectedItemElement;this.selectedItemIndex=this.validateItemIndex(e),t&&this.selectedItemElement!==t&&(this.canManageTabIndex(t)&&fi.scheduleResetTabIndex(t),this.nestedContentSelected=!1),this.selectedItemElement&&this.canFocusSelectedItem()&&this.canManageTabIndex(this.selectedItemElement)&&fi.makeElementFocusable(this.selectedItemElement)}canManageTabIndex(e){return!0}updateSelectedItemByChildElement(e,t=null){const i=this.findItemElementIndexByChild(e);(i>-1||e===this.targetElement)&&this.updateSelectedItemByIndex(i)}canSwitchToNestedContentMode(){return!1}onActiveStateChanged(e){}handleTransitNavigation(e){const t=e===Ni.Backward,i=t?this.moveToPrevItem:this.moveToNextItem;(t?this.firstItemSelected:this.lastItemSelected)?((t?this.leaveBackward:this.leaveForward).call(this),this.navigator.leaveFromNavigator()):i.call(this)}leaveTransitContainer(e){this.navigator.leaveTransitContainer(e)}createItemStrategy(e){return null}getItemStrategy(e){const t=this.validateItemIndex(e);return this.navigator.getStrategy(this.getItem(t))}queryItems(){return new Array}queryItemsBySelector(e){return Array.from(this.targetElement.querySelectorAll(e))}selectItem(e){var t;this.updateSelectedItemByIndex(e),this.canFocusSelectedItem()?this.navigator.isActive&&!this.isNestedElementFocused()&&this.focusSelectedItem():null===(t=this.getItemStrategy(this.nearestVisibleSelectedIndex))||void 0===t||t.activate()}moveToPrevItem(e=!1){const t=this.findVisibleItemIndex(this.selectedItemIndex,!1,!1);t>=0?this.selectItem(t):e&&this.moveToLastItem()}moveToNextItem(e=!1){const t=this.findVisibleItemIndex(this.selectedItemIndex,!0,!1);t>=0?this.selectItem(t):e&&this.moveToFirstItem()}moveToFirstItem(){const e=this.findVisibleItemIndex(0,!0,!0);e>=0&&this.selectItem(e)}moveToLastItem(){const e=this.findVisibleItemIndex(this.itemCount,!1,!1);e>=0&&this.selectItem(e)}isImmediatelyClickEnabled(){return!1}raiseClickEvent(e,t,i,n){const s=new MouseEvent("click",{bubbles:!0,cancelable:!0,ctrlKey:t,metaKey:i,shiftKey:n});e.dispatchEvent(s)}performShortcutEvent(e){this.navigator.dispatchShortcutEvent(e)}validateItemIndex(e){return e=Math.max(e,0),Math.min(e,this.itemCount-1)}leaveBackward(){this.navigator.leaveFocus(!0)}leaveForward(){this.navigator.leaveFocus(!1)}getNestedContentContainer(){return this.selectedItemElement}getNestedContentElement(){const e=this.findFocusableElements();return e.length>0?e[0]:null}findItemElementIndexByChild(e){return fi.findItemElementIndexByChild(this.items,e)}tryRestoreSelectedItem(e){if(e.isConnected){const t=this.items.indexOf(e);t>-1&&(this.selectedItemIndex=t)}}isVisibleItem(e){const t=this.getItem(e);return!!t&&!Te.isHidden(t,this.navigator.targetElement)}findVisibleItemIndex(e,t,i){const n=i?e:e+(t?1:-1);return n<0||n>=this.itemCount?-1:this.isVisibleItem(n)?n:this.findVisibleItemIndex(n,t,!1)}initializeItemStrategy(e){this.items.push(e);let t=this.navigator.getStrategy(e);t&&!t.isObsolete||(null==t||t.onDispose(),t=this.createItemStrategy(e),this.navigator.attachStrategy(t)),t&&t!==this&&t.initialize()}canFocusSelectedItem(){return this.targetElement===this.selectedItemElement||!this.getSelectedItemStrategy()}processEnter(e){return!(!this.isImmediatelyClickEnabled()||!this.processImmediatellyClick(e))||this.switchToNestedContent()}processEscapeKeyDown(){return this.leaveFromNestedContent(Ni.None),!0}processTabKeyDown(e){if(this.selectedItemElement){const t=this.findFocusableElements();if(t.length>0){const i=fi.isFocusedElement(t[0]),n=fi.isFocusedElement(t[t.length-1]);let s=null;if(e&&i&&(s=Ni.Backward),!e&&n&&(s=Ni.Forward),s)return this.leaveFromNestedContent(s),!0}}return!1}findFocusableElements(){return fi.findFocusableElements(this.getNestedContentContainer())}processImmediatellyClick(e){const t=this.getNestedContentElement();return!(!t||!this.hasSingleFocusableElement())&&(this.raiseClickEvent(t,e.ctrlKey,e.metaKey,e.shiftKey),!0)}hasSingleFocusableElement(){return 1===this.findFocusableElements().length}isNestedElementFocused(){if(!document.activeElement||!this.nestedContentSelected)return!1;return fi.findItemElementIndexByChild(this.items,document.activeElement)===this.selectedItemIndex}storeSelection(){this._savedSelectedItemElement=this.selectedItemElement}tryRestoreSelection(){return!!this._savedSelectedItemElement&&(this.tryRestoreSelectedItem(this._savedSelectedItemElement),this._savedSelectedItemElement=null,!0)}}class ki{get x(){return this._x}get y(){return this._y}get source(){return this._source}constructor(e,t,i){this._source=i,this._y=t,this._x=e}}class Ki extends ki{get deltaX(){return this.deltaXField}get deltaY(){return this.deltaYField}constructor(e,t,i,n,s){super(i,n,s),this.deltaXField=e,this.deltaYField=t}}class Oi extends CustomEvent{constructor(e,t){super(e,{detail:t,bubbles:!0,composed:!0,cancelable:!0})}}class _i extends Oi{constructor(e){super(_i.eventName,e)}}_i.eventName="dxthumbdragstarted";class Vi extends Oi{constructor(e){super(Vi.eventName,e)}}Vi.eventName="dxthumbdragdelta";class zi extends Oi{constructor(e){super(zi.eventName,e)}}zi.eventName="dxthumbdragcompleted";class Wi{constructor(e){this.outsideClickHandler=this.handleOutsideClick.bind(this),this.thumbElement=e}preventOutsideClick(e){h.Browser.Firefox&&0===e.button&&document.addEventListener("click",this.outsideClickHandler,{capture:!0,once:!0})}cancelOutsideClickPrevention(){document.removeEventListener("click",this.outsideClickHandler,{capture:!0})}handleOutsideClick(e){document.elementFromPoint(e.clientX,e.clientY)!==this.thumbElement&&H.markHandled(e)}}class $i extends HTMLElement{constructor(){super(...arguments),this.pointerDownHandler=this.handlePointerDown.bind(this),this.pointerUpHandler=this.handlePointerUp.bind(this),this.pointerLostCaptureHandler=this.lostPointerCapture.bind(this),this.pointerGotCaptureHandler=this.pointerGotCapture.bind(this),this.pointerMoveHandler=this.pointerMove.bind(this),this.pointerCancelHandler=this.pointerCancel.bind(this),this.touchStartHandler=this.touchStart.bind(this),this.visibilityChangeHandler=this.handleVisibilityChange.bind(this),this._isDragging=!1,this._isCaptured=!1,this.capturedPointer=null,this.previousPoint=new et(0,0),this.firefoxOutsideClickHandler=new Wi(this)}connectedCallback(){n.setLoaded(this),this.addEventListener("pointerdown",this.pointerDownHandler,{capture:!0}),this.addEventListener("pointerup",this.pointerUpHandler,{capture:!0}),this.addEventListener("lostpointercapture",this.pointerLostCaptureHandler,{capture:!0}),this.addEventListener("gotpointercapture",this.pointerGotCaptureHandler,{capture:!0}),this.addEventListener("pointermove",this.pointerMoveHandler,{capture:!0}),this.addEventListener("pointercancel",this.pointerCancelHandler,{capture:!0}),this.addEventListener("touchstart",this.touchStartHandler,{capture:!0,passive:!1}),document.addEventListener("visibilitychange",this.visibilityChangeHandler)}disconnectedCallback(){n.removeLoaded(this),this.removeEventListener("pointerdown",this.pointerDownHandler),this.removeEventListener("pointerup",this.pointerUpHandler),this.removeEventListener("lostpointercapture",this.pointerLostCaptureHandler),this.removeEventListener("gotpointercapture",this.pointerGotCaptureHandler),this.removeEventListener("pointermove",this.pointerMoveHandler),this.removeEventListener("pointercancel",this.pointerCancelHandler),this.removeEventListener("touchstart",this.touchStartHandler),document.removeEventListener("visibilitychange",this.visibilityChangeHandler),this.firefoxOutsideClickHandler.cancelOutsideClickPrevention()}get isDragging(){return this._isDragging}get isCaptured(){return this._isCaptured}cancelDrag(e=null){if(this.isDragging){this._isDragging=!1,e?this.releaseCapture(e.pointerId):this.capturedPointer&&this.releaseCapture(this.capturedPointer),n.removeAttribute(this,$i.dragging);const t=e?new et(e.pageX,e.pageY):this.previousPoint,i=new zi(new ki(t.x,t.y,e));this.dispatchEvent(i)}}markHandled(e){e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation()}handleVisibilityChange(e){this.isDragging&&"visible"!==document.visibilityState&&this.cancelDrag()}touchStart(e){this.isDragging&&e.cancelable&&e.preventDefault()}pointerGotCapture(e){if(e.target===this)return;if(!this.isDragging)return;const t=e.target;null==t||t.releasePointerCapture(e.pointerId),this._isCaptured=!1,this.pointerCapture(e)}pointerCancel(e){e.target===this&&(this.hasPointerCapture(e.pointerId)||this.cancelDrag(e))}pointerCapture(e){this._isCaptured||(this.setPointerCapture(e.pointerId),this._isCaptured=!0,this.capturedPointer=e.pointerId)}releaseCapture(e){this._isCaptured&&(this.releasePointerCapture(e),this._isCaptured=!1,this.capturedPointer=null)}handlePointerDown(e){if(this.isDragging)return;const t=e.target;(null==t?void 0:t.hasPointerCapture(e.pointerId))&&t.releasePointerCapture(e.pointerId),n.setAttribute(this,$i.dragging),H.markHandled(e),this.focus(),this.pointerCapture(e),this._isDragging=!0,this.previousPoint=new et(e.pageX,e.pageY);const i=new _i(new ki(e.pageX,e.pageY,e));this.dispatchEvent(i),this.firefoxOutsideClickHandler.preventOutsideClick(e)}handlePointerUp(e){this.isDragging&&this.isCaptured&&(H.markHandled(e),this.cancelDrag(e))}lostPointerCapture(e){e.target===this&&(this.hasPointerCapture(e.pointerId)||this.cancelDrag(e))}pointerMove(e){this.isDragging&&e.isPrimary&&this.processMove(e)}processMove(e){const t=new et(e.pageX,e.pageY);if(!tt.areClose(t,this.previousPoint)){H.markHandled(e);const i=new Vi(new Ki(t.x-this.previousPoint.x,t.y-this.previousPoint.y,e.pageX,e.pageY,e));this.dispatchEvent(i),this.previousPoint=t}}}$i.dragging="dragging",customElements.define("dxbl-thumb",$i);const Gi="data-virtual-item-index",qi="dxbl-top-virtual-spacer-element",Yi="dxbl-bottom-virtual-spacer-element",Xi="dxbl-skeleton-with-variants-data-type";class Ji extends CustomEvent{constructor(e){super(Ji.eventName,{detail:new ji(e),bubbles:!0,composed:!0,cancelable:!0})}}Ji.eventName="dxbl-virtual-scroll-viewer.scroll";class ji{constructor(e){this.Position=e}}class Zi extends CustomEvent{constructor(e){super(Zi.eventName,{detail:e,bubbles:!0,composed:!0,cancelable:!0})}}Zi.eventName="dxbl-virtual-scroll-viewer.scrollparamschanged";class en{constructor(e,t,i,n,s,r,o){this.AverageHeight=e,this.Heights=t,this.ViewportHeight=i,this.ContentHeightConstraint=n,this.SkeletonHeight=s,this.HeaderElementHeight=r,this.FooterElementHeight=o}equals(e){return!!e&&(e.AverageHeight===this.AverageHeight&&(e.ViewportHeight===this.ViewportHeight&&(e.ContentHeightConstraint===this.ContentHeightConstraint&&(!!this.sequenceEquals(e.Heights,this.Heights)&&e.SkeletonHeight===this.SkeletonHeight))))}sequenceEquals(e,t){if(!e)return!1;if(!t)return!1;if(e.length!==t.length)return!1;for(let i=0;i<e.length;i++)if(e[i]!==t[i])return!1;return!0}}class tn extends CustomEvent{constructor(e,t,i){super(tn.eventName,{detail:new nn(e,t,i),bubbles:!0,composed:!0,cancelable:!0})}}tn.eventName="dxbl-virtual-scroll-viewer.intersectioncallback";class nn{constructor(e,t,i){this.Position=e,this.SpacerHeight=t,this.RenderStateHashCode=i}}gt.register(Ji.eventName,(e=>e.detail)),gt.register(Zi.eventName,(e=>e.detail)),gt.register(tn.eventName,(e=>e.detail));class sn extends _e{constructor(){super(),this.skeletonScrollContainers=new Set,this.positionUpdateLocked=!1,this._rootMargin="0px",this._renderStateHashCode=-1,this._scrollTop=-1,this._viewportHeight=0,this._isThumbDragging=!1,this._averageItemHeight=-1,this._contentHeightConstraint=-1,this._thumbMoveTimerId=-1,this._scrollParams=null,this._renderTypeChanged=!1,this._requireInitialize=!1,this._totalItemCount=0,this._skeletonViewportItemsCount=0,this._skeletonPatternContainerClasses=null,this._skeletonHeight=0,this._headerElementHeight=0,this._footerElementHeight=0,this._lastExpectedTopVisibleIndex=0,this.boundOnThumbMoveStarted=this.onThumbMoveStarted.bind(this),this.boundOnThumbMove=this.onThumbMove.bind(this),this.boundOnThumbMoveCompleted=this.onThumbMoveCompleted.bind(this)}initializeComponent(){super.initializeComponent(),this.subscribeScrollBarEvents(),this.initialize()&&this.dispatchScrollParams()}disposeComponent(){var e,t,i;super.disposeComponent(),this.unsubscribeScrollBarEvents(),this.reset(),null===(e=this.spacerIntersectionObserver)||void 0===e||e.disconnect(),null===(t=this.spacerResizeObserver)||void 0===t||t.disconnect(),null===(i=this.contentContainerResizeObserver)||void 0===i||i.disconnect()}initialize(){if(this.contentContainer=this.getContentContainerElement(),this.itemsContainer=this.getItemsContainerElement(),this.spacerTop=this.getTopSpacer(),this.spacerBottom=this.getBottomSpacer(),this._headerElementHeight=0,this._footerElementHeight=0,this._averageItemHeight=-1,this.updateHeaderElementHeight(),this.updateFooterElementHeight(),this.contentContainer&&this.spacerTop&&this.spacerBottom){this._viewportHeight=this.contentContainer.getBoundingClientRect().height,this.contentContainerResizeObserver&&(this.contentContainerResizeObserver.disconnect(),this.contentContainerResizeObserver=void 0),this.contentContainerResizeObserver=this.createContentContainerResizeObserver(this.contentContainer),this.spacerIntersectionObserver&&(this.spacerIntersectionObserver.disconnect(),this.spacerIntersectionObserver=void 0);const e={root:this.contentContainer,rootMargin:this._rootMargin};return this.spacerIntersectionObserver=new IntersectionObserver(this.intersectionCallback.bind(this),e),this.spacerIntersectionObserver.observe(this.spacerTop),this.spacerIntersectionObserver.observe(this.spacerBottom),this.spacerResizeObserver&&(this.spacerResizeObserver.disconnect(),this.spacerResizeObserver=void 0),this.spacerResizeObserver=new ResizeObserver(this.resizeObserverCallback.bind(this)),this.spacerResizeObserver.observe(this.spacerTop),this.spacerResizeObserver.observe(this.spacerBottom),!0}return!1}get averageHeight(){return this._averageItemHeight}get skeletonHeight(){return this._skeletonHeight}get viewportHeight(){return this._viewportHeight}get totalItemCount(){return this._totalItemCount}getItemsContainerElement(){return this.querySelector("[data-virtual-items-container]")}getTopSpacer(){return this.querySelector(`[${qi}]`)}getBottomSpacer(){return this.querySelector(`[${Yi}]`)}findContentHeightConstraint(){if(this._contentHeightConstraint<0){const e=document.createElement("div");e.setAttribute("style","overflow: auto; height: 0; visibility: hidden;");const t=document.createElement("div");t.setAttribute("style","position: relative;"),e.appendChild(t),document.body.appendChild(e),this._contentHeightConstraint=this.findElementMaximumHeight(t)/2,document.body.removeChild(e)}return this._contentHeightConstraint}queryElementsSizeArray(){const e=new Array;if(this.itemsContainer){let t=0;const i=this.groupElements(this.itemsContainer.children);let n=0,s=0;for(const[r,o]of i){let a=0;for(let e=0;e<o.length;e++)a+=this.queryElementHeight(o[e]);e.push(r),e.push(a),0!==n&&n!==i.size-1&&(t+=a,s++),n++}this._averageItemHeight<0&&s>0&&t>0&&(this._averageItemHeight=sn.roundHeight(t/s))}return e}queryElementHeight(e){if(!e)return 0;const t=e.getBoundingClientRect().height;return sn.roundHeight(t)}findElementMaximumHeight(e){let t=1e6;const i=h.Browser.Firefox?8e6:Number.MAX_VALUE;for(;;){const n=2*t;e.style.height=`${n}px`;const s=e.getBoundingClientRect().height;if(n>i||s!==n)break;t=n}return t}groupElements(e){const t=new Map;let i=[];for(let n=0;n<e.length;n++){const s=e[n],r=s.getAttribute(Gi);this.skipElement(r)||(r&&(i=[],t.set(parseInt(r),i)),i&&i.push(s))}return t}canDispatchPositionUpdate(){return!this._isThumbDragging&&!this.positionUpdateLocked}skipElement(e){return!!e&&parseInt(e)<0}clearSelection(){if(null!==document.activeElement&&("INPUT"===document.activeElement.tagName||"TEXTAREA"===document.activeElement.tagName))return;const e=window.getSelection?window.getSelection():document.getSelection();e&&e.rangeCount>0&&!e.isCollapsed&&e.collapseToStart()}onRefresh(e,t){super.onRefresh(e,t);const i=Math.ceil(e);Math.abs(this._scrollTop-i)>1&&(this.dispatchScrollEvent(i),this._scrollTop=i,this.clearSelection(),this.shiftSkeletonContainers())}intersectionCallback(e){for(let t=0;t<e.length;t++){const i=e[t];if(i.isIntersecting&&this.canDispatchPositionUpdate()){if(i.target===this.spacerTop){this.dispatchEvent(new tn(0,i.intersectionRect.top-i.boundingClientRect.top,this._renderStateHashCode)),this.clearSelection()}if(i.target===this.spacerBottom){this.dispatchEvent(new tn(1,i.boundingClientRect.bottom-i.intersectionRect.bottom,this._renderStateHashCode)),this.clearSelection()}}}}resizeObserverCallback(e){for(let t=0;t<e.length;t++){const i=e[t].target;i.hasAttribute(qi)&&this.reconnectIntersectionObserver(this.spacerTop),i.hasAttribute(Yi)&&this.reconnectIntersectionObserver(this.spacerBottom)}}reconnectIntersectionObserver(e){e&&this.spacerIntersectionObserver&&(this.spacerIntersectionObserver.unobserve(e),this.spacerIntersectionObserver.observe(e))}reconnectSpacerContentIntersectionObserver(){if(this._spacerContentIntersectionObserver&&(this._spacerContentIntersectionObserver.disconnect(),this._spacerContentIntersectionObserver=void 0,this.skeletonScrollContainers=new Set),!this.contentContainer||!this.itemsContainer)return;const e=this.itemsContainer.getBoundingClientRect().width,t=Math.max(0,this._skeletonHeight-this._headerElementHeight)+1,i=Math.max(0,this._skeletonViewportItemsCount*this._skeletonHeight+this._headerElementHeight-this._viewportHeight)+1,n={root:this.contentContainer,rootMargin:`${t}px ${e}px ${i}px ${e}px`,threshold:.999};this._spacerContentIntersectionObserver=new IntersectionObserver(this.intersectionSkeletonsCallback.bind(this),n),this.observeSkeletonContainers(this.spacerTop),this.observeSkeletonContainers(this.spacerBottom)}observeSkeletonContainers(e){if(e&&this._spacerContentIntersectionObserver){const t=e.querySelectorAll("[dxbl-skeleton-items-container]");for(const e of t)this._spacerContentIntersectionObserver.observe(e)}}lockSpacersIntersection(){this.positionUpdateLocked=!0}unlockSpacersIntersection(){this.positionUpdateLocked=!1,this.reconnectIntersectionObserver(this.spacerTop),this.reconnectIntersectionObserver(this.spacerBottom)}reconnectHeaderResizeObserver(){super.reconnectHeaderResizeObserver(),setTimeout((()=>this.updateHeaderElementHeight()))}reconnectFooterResizeObserver(){super.reconnectFooterResizeObserver(),setTimeout((()=>this.updateFooterElementHeight()))}beforeMakeElementVisible(){this.lockSpacersIntersection()}afterMakeElementVisible(){this.unlockSpacersIntersection()}createContentContainerResizeObserver(e){const t=new ResizeObserver((e=>{this._viewportHeight=e[0].contentRect.height,this.dispatchScrollParams(),this.dispatchScrollEvent(this._scrollTop)}));return t.observe(e),t}subscribeScrollBarEvents(){const e=this.getVerticalScrollBarElement();e&&this.subscribeThumbEvents(e,this.boundOnThumbMoveStarted,this.boundOnThumbMove,this.boundOnThumbMoveCompleted)}unsubscribeScrollBarEvents(){const e=this.getVerticalScrollBarElement();e&&this.unsubscribeThumbEvents(e,this.boundOnThumbMoveStarted,this.boundOnThumbMove,this.boundOnThumbMoveCompleted)}subscribeThumbEvents(e,t,i,n){e.addEventListener(_i.eventName,t),e.addEventListener(Vi.eventName,i),e.addEventListener(zi.eventName,n)}unsubscribeThumbEvents(e,t,i,n){e.removeEventListener(_i.eventName,t),e.removeEventListener(Vi.eventName,i),e.removeEventListener(zi.eventName,n)}onThumbMoveStarted(e){this._isThumbDragging=!0}onThumbMove(e){-1!==this._thumbMoveTimerId&&clearTimeout(this._thumbMoveTimerId);this._thumbMoveTimerId=setTimeout((()=>{this.dispatchPositionUpdate()}).bind(this),700),this._isThumbDragging=!0}onThumbMoveCompleted(e){this.dispatchPositionUpdate()}dispatchPositionUpdate(){this._isThumbDragging=!1,clearTimeout(this._thumbMoveTimerId),this._thumbMoveTimerId=-1,this.dispatchScrollEvent(this._scrollTop),this.reconnectIntersectionObserver(this.spacerTop),this.reconnectIntersectionObserver(this.spacerBottom)}dispatchScrollEvent(e){!this.canDispatchPositionUpdate()||e<0||this.dispatchEvent(new Ji(e))}dispatchScrollParams(){if(this.isHidden())return;const e=this.queryElementsSizeArray(),t=this.findContentHeightConstraint(),i=new en(this._averageItemHeight,e,this._viewportHeight,t,this._skeletonHeight,this._headerElementHeight,this._footerElementHeight);i.equals(this._scrollParams)||(this._scrollParams=i,this.dispatchEvent(new Zi(this._scrollParams)))}onStateChanged(e){e&&(this._renderTypeChanged&&(this._requireInitialize&&this.initialize(),this.calculateSkeletonHeight(),this._renderTypeChanged=!1),this.reconnectSpacerContentIntersectionObserver(),this.rerunSkeletonAnimation(),this.dispatchScrollParams())}rerunSkeletonAnimation(){this.classList.remove(he.SkeletonAnimateClassName),setTimeout((()=>this.classList.add(he.SkeletonAnimateClassName)))}onRenderStateChanged(e){e&&(this._renderStateHashCode=parseInt(e))}reset(){this._scrollParams=null}calculateSkeletonHeight(){if(!this._skeletonPatternContainerClasses)return;const e=document.createElement("div");e.innerHTML="&nbsp;";const t=document.createElement("div");t.appendChild(e);const i=document.createElement("div");i.setAttribute("class",`${he.VirtualSpacerPatternClassName} ${this._skeletonPatternContainerClasses}`),i.appendChild(t),document.body.appendChild(i),this._skeletonHeight=sn.roundHeight(t.getBoundingClientRect().height),document.body.removeChild(i)}updateSkeletonClasses(e,t){if(e.children.length>0){const i=t-this.getSkeletonItemIndex(e.children[0]);for(const t of e.children){const e=this.getSkeletonItemIndex(t)+i,n=t.querySelectorAll(`[${Xi}]`);for(const t of n){const i=t.getAttribute(Xi);t.setAttribute("class",`${he.SkeletonBaseClassName}-${i}-${e%5}`)}}}}shiftSkeletonContainers(){if(!this.itemsContainer)return;const e=this._scrollTop,t=this._headerElementHeight-e%this._skeletonHeight;let i=Math.floor(e/this._skeletonHeight);const n=Math.min(this._totalItemCount-this._skeletonViewportItemsCount,this._totalItemCount-1);this._averageItemHeight===this._skeletonHeight&&n>0&&(i=Math.min(i,n));for(const e of this.skeletonScrollContainers)e.setAttribute("style",`top: ${t}px`),this._lastExpectedTopVisibleIndex!==i&&this.updateSkeletonClasses(e,i);this._lastExpectedTopVisibleIndex=i}getSkeletonItemIndex(e){if(e){const t=e.getAttribute(Gi);if(t)return parseInt(t)}return-1}updateHeaderElementHeight(){this.headerElementRectangle=this.getElementsRectangle(this.getHeaderElements()),this.headerElementRectangle&&(this._headerElementHeight=sn.roundHeight(this.headerElementRectangle.height))}updateFooterElementHeight(){this.footerElementRectangle=this.getElementsRectangle(this.getFooterElements()),this.footerElementRectangle&&(this._footerElementHeight=sn.roundHeight(this.footerElementRectangle.height))}intersectionSkeletonsCallback(e){for(const t of e)t.isIntersecting?this.skeletonScrollContainers.add(t.target):this.skeletonScrollContainers.delete(t.target)}static roundHeight(e){return isNaN(e)?0:parseFloat(e.toFixed(2))}onSkeletonPatternContainerClassesChanged(e){this._requireInitialize=null!==this._skeletonPatternContainerClasses,this._skeletonPatternContainerClasses!==e&&(this._skeletonPatternContainerClasses=e,this._renderTypeChanged=!0)}onSkeletonViewportItemsCountChanged(e){this._requireInitialize=0!==this._skeletonViewportItemsCount;const t=parseInt(e);this._skeletonViewportItemsCount!==t&&(this._skeletonViewportItemsCount=t,this._renderTypeChanged=!0)}static get observedAttributes(){return["reset-v-scroll-guid","reset-h-scroll-guid","request-make-element-visible","state-has-changed","render-state-changed","header-selector","footer-selector","left-selector","right-selector","skeleton-pattern-container-classes","total-item-count","skeleton-viewport-items-count"]}attributeChangedCallback(e,t,i){switch(super.attributeChangedCallback(e,t,i),e){case"state-has-changed":setTimeout((()=>this.onStateChanged(i)));break;case"render-state-changed":this.onRenderStateChanged(i);break;case"total-item-count":this._totalItemCount=parseInt(i);break;case"skeleton-pattern-container-classes":this.onSkeletonPatternContainerClassesChanged(i);break;case"skeleton-viewport-items-count":this.onSkeletonViewportItemsCountChanged(i)}}}customElements.define("dxbl-virtual-scroll-viewer",sn);class rn{}rn.VisibleIndexName="data-visible-index",rn.SummaryItem=ue.ClassName+"-summary-item",rn.EditCell="data-edit-cell",rn.FocusedRowHidden="dxbl-grid-focused-row-hidden";const on=e=>t=>"function"==typeof t?((e,t)=>(customElements.define(e,t),t))(e,t):((e,t)=>{const{kind:i,elements:n}=t;return{kind:i,elements:n,finisher(t){customElements.define(e,t)}}})(e,t),an=(e,t)=>"method"===t.kind&&t.descriptor&&!("value"in t.descriptor)?{...t,finisher(i){i.createProperty(t.key,e)}}:{kind:"field",key:Symbol(),placement:"own",descriptor:{},originalKey:t.key,initializer(){"function"==typeof t.initializer&&(this[t.key]=t.initializer.call(this))},finisher(i){i.createProperty(t.key,e)}},ln=(e,t,i)=>{t.constructor.createProperty(i,e)};function An(e){return(t,i)=>void 0!==i?ln(e,t,i):an(e,t)}function dn(e){return An({...e,state:!0})}function cn(e,t){return(({finisher:e,descriptor:t})=>(i,n)=>{var s;if(void 0===n){const n=null!==(s=i.originalKey)&&void 0!==s?s:i.key,r=null!=t?{kind:"method",placement:"prototype",key:n,descriptor:t(i.key)}:{...i,key:n};return null!=e&&(r.finisher=function(t){e(t,n)}),r}{const s=i.constructor;void 0!==t&&Object.defineProperty(i,n,t(n)),null==e||e(s,n)}})({descriptor:i=>{const n={get(){var t,i;return null!==(i=null===(t=this.renderRoot)||void 0===t?void 0:t.querySelector(e))&&void 0!==i?i:null},enumerable:!0,configurable:!0};if(t){const t="symbol"==typeof i?Symbol():"__"+i;n.get=function(){var i,n;return void 0===this[t]&&(this[t]=null!==(n=null===(i=this.renderRoot)||void 0===i?void 0:i.querySelector(e))&&void 0!==n?n:null),this[t]}}return n}})}class hn{}hn.renderGuidAttributeName="dxbl-render-guid",hn.virtualElementAttributeName="dxbl-virtual-el";const un=window,pn=un.ShadowRoot&&(void 0===un.ShadyCSS||un.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,mn=Symbol(),gn=new WeakMap;class Cn{constructor(e,t,i){if(this._$cssResult$=!0,i!==mn)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e,this.t=t}get styleSheet(){let e=this.o;const t=this.t;if(pn&&void 0===e){const i=void 0!==t&&1===t.length;i&&(e=gn.get(t)),void 0===e&&((this.o=e=new CSSStyleSheet).replaceSync(this.cssText),i&&gn.set(t,e))}return e}toString(){return this.cssText}}const fn=(e,...t)=>{const i=1===e.length?e[0]:t.reduce(((t,i,n)=>t+(e=>{if(!0===e._$cssResult$)return e.cssText;if("number"==typeof e)return e;throw Error("Value passed to 'css' function must be a 'css' function result: "+e+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(i)+e[n+1]),e[0]);return new Cn(i,e,mn)},vn=pn?e=>e:e=>e instanceof CSSStyleSheet?(e=>{let t="";for(const i of e.cssRules)t+=i.cssText;return(e=>new Cn("string"==typeof e?e:e+"",void 0,mn))(t)})(e):e;var bn;const wn=window,yn=wn.trustedTypes,Bn=yn?yn.emptyScript:"",En=wn.reactiveElementPolyfillSupport,In={toAttribute(e,t){switch(t){case Boolean:e=e?Bn:null;break;case Object:case Array:e=null==e?e:JSON.stringify(e)}return e},fromAttribute(e,t){let i=e;switch(t){case Boolean:i=null!==e;break;case Number:i=null===e?null:Number(e);break;case Object:case Array:try{i=JSON.parse(e)}catch(e){i=null}}return i}},Sn=(e,t)=>t!==e&&(t==t||e==e),xn={attribute:!0,type:String,converter:In,reflect:!1,hasChanged:Sn},Dn="finalized";class Fn extends HTMLElement{constructor(){super(),this._$Ei=new Map,this.isUpdatePending=!1,this.hasUpdated=!1,this._$El=null,this._$Eu()}static addInitializer(e){var t;this.finalize(),(null!==(t=this.h)&&void 0!==t?t:this.h=[]).push(e)}static get observedAttributes(){this.finalize();const e=[];return this.elementProperties.forEach(((t,i)=>{const n=this._$Ep(i,t);void 0!==n&&(this._$Ev.set(n,i),e.push(n))})),e}static createProperty(e,t=xn){if(t.state&&(t.attribute=!1),this.finalize(),this.elementProperties.set(e,t),!t.noAccessor&&!this.prototype.hasOwnProperty(e)){const i="symbol"==typeof e?Symbol():"__"+e,n=this.getPropertyDescriptor(e,i,t);void 0!==n&&Object.defineProperty(this.prototype,e,n)}}static getPropertyDescriptor(e,t,i){return{get(){return this[t]},set(n){const s=this[e];this[t]=n,this.requestUpdate(e,s,i)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this.elementProperties.get(e)||xn}static finalize(){if(this.hasOwnProperty(Dn))return!1;this[Dn]=!0;const e=Object.getPrototypeOf(this);if(e.finalize(),void 0!==e.h&&(this.h=[...e.h]),this.elementProperties=new Map(e.elementProperties),this._$Ev=new Map,this.hasOwnProperty("properties")){const e=this.properties,t=[...Object.getOwnPropertyNames(e),...Object.getOwnPropertySymbols(e)];for(const i of t)this.createProperty(i,e[i])}return this.elementStyles=this.finalizeStyles(this.styles),!0}static finalizeStyles(e){const t=[];if(Array.isArray(e)){const i=new Set(e.flat(1/0).reverse());for(const e of i)t.unshift(vn(e))}else void 0!==e&&t.push(vn(e));return t}static _$Ep(e,t){const i=t.attribute;return!1===i?void 0:"string"==typeof i?i:"string"==typeof e?e.toLowerCase():void 0}_$Eu(){var e;this._$E_=new Promise((e=>this.enableUpdating=e)),this._$AL=new Map,this._$Eg(),this.requestUpdate(),null===(e=this.constructor.h)||void 0===e||e.forEach((e=>e(this)))}addController(e){var t,i;(null!==(t=this._$ES)&&void 0!==t?t:this._$ES=[]).push(e),void 0!==this.renderRoot&&this.isConnected&&(null===(i=e.hostConnected)||void 0===i||i.call(e))}removeController(e){var t;null===(t=this._$ES)||void 0===t||t.splice(this._$ES.indexOf(e)>>>0,1)}_$Eg(){this.constructor.elementProperties.forEach(((e,t)=>{this.hasOwnProperty(t)&&(this._$Ei.set(t,this[t]),delete this[t])}))}createRenderRoot(){var e;const t=null!==(e=this.shadowRoot)&&void 0!==e?e:this.attachShadow(this.constructor.shadowRootOptions);return((e,t)=>{pn?e.adoptedStyleSheets=t.map((e=>e instanceof CSSStyleSheet?e:e.styleSheet)):t.forEach((t=>{const i=document.createElement("style"),n=un.litNonce;void 0!==n&&i.setAttribute("nonce",n),i.textContent=t.cssText,e.appendChild(i)}))})(t,this.constructor.elementStyles),t}connectedCallback(){var e;void 0===this.renderRoot&&(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),null===(e=this._$ES)||void 0===e||e.forEach((e=>{var t;return null===(t=e.hostConnected)||void 0===t?void 0:t.call(e)}))}enableUpdating(e){}disconnectedCallback(){var e;null===(e=this._$ES)||void 0===e||e.forEach((e=>{var t;return null===(t=e.hostDisconnected)||void 0===t?void 0:t.call(e)}))}attributeChangedCallback(e,t,i){this._$AK(e,i)}_$EO(e,t,i=xn){var n;const s=this.constructor._$Ep(e,i);if(void 0!==s&&!0===i.reflect){const r=(void 0!==(null===(n=i.converter)||void 0===n?void 0:n.toAttribute)?i.converter:In).toAttribute(t,i.type);this._$El=e,null==r?this.removeAttribute(s):this.setAttribute(s,r),this._$El=null}}_$AK(e,t){var i;const n=this.constructor,s=n._$Ev.get(e);if(void 0!==s&&this._$El!==s){const e=n.getPropertyOptions(s),r="function"==typeof e.converter?{fromAttribute:e.converter}:void 0!==(null===(i=e.converter)||void 0===i?void 0:i.fromAttribute)?e.converter:In;this._$El=s,this[s]=r.fromAttribute(t,e.type),this._$El=null}}requestUpdate(e,t,i){let n=!0;void 0!==e&&(((i=i||this.constructor.getPropertyOptions(e)).hasChanged||Sn)(this[e],t)?(this._$AL.has(e)||this._$AL.set(e,t),!0===i.reflect&&this._$El!==e&&(void 0===this._$EC&&(this._$EC=new Map),this._$EC.set(e,i))):n=!1),!this.isUpdatePending&&n&&(this._$E_=this._$Ej())}async _$Ej(){this.isUpdatePending=!0;try{await this._$E_}catch(e){Promise.reject(e)}const e=this.scheduleUpdate();return null!=e&&await e,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var e;if(!this.isUpdatePending)return;this._$Ei&&(this._$Ei.forEach(((e,t)=>this[t]=e)),this._$Ei=void 0);let t=!1;const i=this._$AL;try{t=this.shouldUpdate(i),t?(this.willUpdate(i),null===(e=this._$ES)||void 0===e||e.forEach((e=>{var t;return null===(t=e.hostUpdate)||void 0===t?void 0:t.call(e)})),this.update(i)):this._$Ek()}catch(e){throw t=!1,this._$Ek(),e}t&&this._$AE(i)}willUpdate(e){}_$AE(e){var t;null===(t=this._$ES)||void 0===t||t.forEach((e=>{var t;return null===(t=e.hostUpdated)||void 0===t?void 0:t.call(e)})),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}_$Ek(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$E_}shouldUpdate(e){return!0}update(e){void 0!==this._$EC&&(this._$EC.forEach(((e,t)=>this._$EO(t,this[t],e))),this._$EC=void 0),this._$Ek()}updated(e){}firstUpdated(e){}}var Tn;Fn[Dn]=!0,Fn.elementProperties=new Map,Fn.elementStyles=[],Fn.shadowRootOptions={mode:"open"},null==En||En({ReactiveElement:Fn}),(null!==(bn=wn.reactiveElementVersions)&&void 0!==bn?bn:wn.reactiveElementVersions=[]).push("1.6.3");const Hn=window,Un=Hn.trustedTypes,Pn=Un?Un.createPolicy("lit-html",{createHTML:e=>e}):void 0,Qn="$lit$",Nn=`lit$${(Math.random()+"").slice(9)}$`,Rn="?"+Nn,Ln=`<${Rn}>`,Mn=document,kn=()=>Mn.createComment(""),Kn=e=>null===e||"object"!=typeof e&&"function"!=typeof e,On=Array.isArray,_n="[ \t\n\f\r]",Vn=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,zn=/-->/g,Wn=/>/g,$n=RegExp(`>|${_n}(?:([^\\s"'>=/]+)(${_n}*=${_n}*(?:[^ \t\n\f\r"'\`<>=]|("|')|))|$)`,"g"),Gn=/'/g,qn=/"/g,Yn=/^(?:script|style|textarea|title)$/i,Xn=(e=>(t,...i)=>({_$litType$:e,strings:t,values:i}))(1),Jn=Symbol.for("lit-noChange"),jn=Symbol.for("lit-nothing"),Zn=new WeakMap,es=Mn.createTreeWalker(Mn,129,null,!1);function ts(e,t){if(!Array.isArray(e)||!e.hasOwnProperty("raw"))throw Error("invalid template strings array");return void 0!==Pn?Pn.createHTML(t):t}const is=(e,t)=>{const i=e.length-1,n=[];let s,r=2===t?"<svg>":"",o=Vn;for(let t=0;t<i;t++){const i=e[t];let a,l,A=-1,d=0;for(;d<i.length&&(o.lastIndex=d,l=o.exec(i),null!==l);)d=o.lastIndex,o===Vn?"!--"===l[1]?o=zn:void 0!==l[1]?o=Wn:void 0!==l[2]?(Yn.test(l[2])&&(s=RegExp("</"+l[2],"g")),o=$n):void 0!==l[3]&&(o=$n):o===$n?">"===l[0]?(o=null!=s?s:Vn,A=-1):void 0===l[1]?A=-2:(A=o.lastIndex-l[2].length,a=l[1],o=void 0===l[3]?$n:'"'===l[3]?qn:Gn):o===qn||o===Gn?o=$n:o===zn||o===Wn?o=Vn:(o=$n,s=void 0);const c=o===$n&&e[t+1].startsWith("/>")?" ":"";r+=o===Vn?i+Ln:A>=0?(n.push(a),i.slice(0,A)+Qn+i.slice(A)+Nn+c):i+Nn+(-2===A?(n.push(void 0),t):c)}return[ts(e,r+(e[i]||"<?>")+(2===t?"</svg>":"")),n]};class ns{constructor({strings:e,_$litType$:t},i){let n;this.parts=[];let s=0,r=0;const o=e.length-1,a=this.parts,[l,A]=is(e,t);if(this.el=ns.createElement(l,i),es.currentNode=this.el.content,2===t){const e=this.el.content,t=e.firstChild;t.remove(),e.append(...t.childNodes)}for(;null!==(n=es.nextNode())&&a.length<o;){if(1===n.nodeType){if(n.hasAttributes()){const e=[];for(const t of n.getAttributeNames())if(t.endsWith(Qn)||t.startsWith(Nn)){const i=A[r++];if(e.push(t),void 0!==i){const e=n.getAttribute(i.toLowerCase()+Qn).split(Nn),t=/([.?@])?(.*)/.exec(i);a.push({type:1,index:s,name:t[2],strings:e,ctor:"."===t[1]?ls:"?"===t[1]?ds:"@"===t[1]?cs:as})}else a.push({type:6,index:s})}for(const t of e)n.removeAttribute(t)}if(Yn.test(n.tagName)){const e=n.textContent.split(Nn),t=e.length-1;if(t>0){n.textContent=Un?Un.emptyScript:"";for(let i=0;i<t;i++)n.append(e[i],kn()),es.nextNode(),a.push({type:2,index:++s});n.append(e[t],kn())}}}else if(8===n.nodeType)if(n.data===Rn)a.push({type:2,index:s});else{let e=-1;for(;-1!==(e=n.data.indexOf(Nn,e+1));)a.push({type:7,index:s}),e+=Nn.length-1}s++}}static createElement(e,t){const i=Mn.createElement("template");return i.innerHTML=e,i}}function ss(e,t,i=e,n){var s,r,o,a;if(t===Jn)return t;let l=void 0!==n?null===(s=i._$Co)||void 0===s?void 0:s[n]:i._$Cl;const A=Kn(t)?void 0:t._$litDirective$;return(null==l?void 0:l.constructor)!==A&&(null===(r=null==l?void 0:l._$AO)||void 0===r||r.call(l,!1),void 0===A?l=void 0:(l=new A(e),l._$AT(e,i,n)),void 0!==n?(null!==(o=(a=i)._$Co)&&void 0!==o?o:a._$Co=[])[n]=l:i._$Cl=l),void 0!==l&&(t=ss(e,l._$AS(e,t.values),l,n)),t}class rs{constructor(e,t){this._$AV=[],this._$AN=void 0,this._$AD=e,this._$AM=t}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(e){var t;const{el:{content:i},parts:n}=this._$AD,s=(null!==(t=null==e?void 0:e.creationScope)&&void 0!==t?t:Mn).importNode(i,!0);es.currentNode=s;let r=es.nextNode(),o=0,a=0,l=n[0];for(;void 0!==l;){if(o===l.index){let t;2===l.type?t=new os(r,r.nextSibling,this,e):1===l.type?t=new l.ctor(r,l.name,l.strings,this,e):6===l.type&&(t=new hs(r,this,e)),this._$AV.push(t),l=n[++a]}o!==(null==l?void 0:l.index)&&(r=es.nextNode(),o++)}return es.currentNode=Mn,s}v(e){let t=0;for(const i of this._$AV)void 0!==i&&(void 0!==i.strings?(i._$AI(e,i,t),t+=i.strings.length-2):i._$AI(e[t])),t++}}class os{constructor(e,t,i,n){var s;this.type=2,this._$AH=jn,this._$AN=void 0,this._$AA=e,this._$AB=t,this._$AM=i,this.options=n,this._$Cp=null===(s=null==n?void 0:n.isConnected)||void 0===s||s}get _$AU(){var e,t;return null!==(t=null===(e=this._$AM)||void 0===e?void 0:e._$AU)&&void 0!==t?t:this._$Cp}get parentNode(){let e=this._$AA.parentNode;const t=this._$AM;return void 0!==t&&11===(null==e?void 0:e.nodeType)&&(e=t.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,t=this){e=ss(this,e,t),Kn(e)?e===jn||null==e||""===e?(this._$AH!==jn&&this._$AR(),this._$AH=jn):e!==this._$AH&&e!==Jn&&this._(e):void 0!==e._$litType$?this.g(e):void 0!==e.nodeType?this.$(e):(e=>On(e)||"function"==typeof(null==e?void 0:e[Symbol.iterator]))(e)?this.T(e):this._(e)}k(e){return this._$AA.parentNode.insertBefore(e,this._$AB)}$(e){this._$AH!==e&&(this._$AR(),this._$AH=this.k(e))}_(e){this._$AH!==jn&&Kn(this._$AH)?this._$AA.nextSibling.data=e:this.$(Mn.createTextNode(e)),this._$AH=e}g(e){var t;const{values:i,_$litType$:n}=e,s="number"==typeof n?this._$AC(e):(void 0===n.el&&(n.el=ns.createElement(ts(n.h,n.h[0]),this.options)),n);if((null===(t=this._$AH)||void 0===t?void 0:t._$AD)===s)this._$AH.v(i);else{const e=new rs(s,this),t=e.u(this.options);e.v(i),this.$(t),this._$AH=e}}_$AC(e){let t=Zn.get(e.strings);return void 0===t&&Zn.set(e.strings,t=new ns(e)),t}T(e){On(this._$AH)||(this._$AH=[],this._$AR());const t=this._$AH;let i,n=0;for(const s of e)n===t.length?t.push(i=new os(this.k(kn()),this.k(kn()),this,this.options)):i=t[n],i._$AI(s),n++;n<t.length&&(this._$AR(i&&i._$AB.nextSibling,n),t.length=n)}_$AR(e=this._$AA.nextSibling,t){var i;for(null===(i=this._$AP)||void 0===i||i.call(this,!1,!0,t);e&&e!==this._$AB;){const t=e.nextSibling;e.remove(),e=t}}setConnected(e){var t;void 0===this._$AM&&(this._$Cp=e,null===(t=this._$AP)||void 0===t||t.call(this,e))}}class as{constructor(e,t,i,n,s){this.type=1,this._$AH=jn,this._$AN=void 0,this.element=e,this.name=t,this._$AM=n,this.options=s,i.length>2||""!==i[0]||""!==i[1]?(this._$AH=Array(i.length-1).fill(new String),this.strings=i):this._$AH=jn}get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}_$AI(e,t=this,i,n){const s=this.strings;let r=!1;if(void 0===s)e=ss(this,e,t,0),r=!Kn(e)||e!==this._$AH&&e!==Jn,r&&(this._$AH=e);else{const n=e;let o,a;for(e=s[0],o=0;o<s.length-1;o++)a=ss(this,n[i+o],t,o),a===Jn&&(a=this._$AH[o]),r||(r=!Kn(a)||a!==this._$AH[o]),a===jn?e=jn:e!==jn&&(e+=(null!=a?a:"")+s[o+1]),this._$AH[o]=a}r&&!n&&this.j(e)}j(e){e===jn?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,null!=e?e:"")}}class ls extends as{constructor(){super(...arguments),this.type=3}j(e){this.element[this.name]=e===jn?void 0:e}}const As=Un?Un.emptyScript:"";class ds extends as{constructor(){super(...arguments),this.type=4}j(e){e&&e!==jn?this.element.setAttribute(this.name,As):this.element.removeAttribute(this.name)}}class cs extends as{constructor(e,t,i,n,s){super(e,t,i,n,s),this.type=5}_$AI(e,t=this){var i;if((e=null!==(i=ss(this,e,t,0))&&void 0!==i?i:jn)===Jn)return;const n=this._$AH,s=e===jn&&n!==jn||e.capture!==n.capture||e.once!==n.once||e.passive!==n.passive,r=e!==jn&&(n===jn||s);s&&this.element.removeEventListener(this.name,this,n),r&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){var t,i;"function"==typeof this._$AH?this._$AH.call(null!==(i=null===(t=this.options)||void 0===t?void 0:t.host)&&void 0!==i?i:this.element,e):this._$AH.handleEvent(e)}}class hs{constructor(e,t,i){this.element=e,this.type=6,this._$AN=void 0,this._$AM=t,this.options=i}get _$AU(){return this._$AM._$AU}_$AI(e){ss(this,e)}}const us=Hn.litHtmlPolyfillSupport;null==us||us(ns,os),(null!==(Tn=Hn.litHtmlVersions)&&void 0!==Tn?Tn:Hn.litHtmlVersions=[]).push("2.8.0");var ps,ms;class gs extends Fn{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){var e,t;const i=super.createRenderRoot();return null!==(e=(t=this.renderOptions).renderBefore)&&void 0!==e||(t.renderBefore=i.firstChild),i}update(e){const t=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(e),this._$Do=((e,t,i)=>{var n,s;const r=null!==(n=null==i?void 0:i.renderBefore)&&void 0!==n?n:t;let o=r._$litPart$;if(void 0===o){const e=null!==(s=null==i?void 0:i.renderBefore)&&void 0!==s?s:null;r._$litPart$=o=new os(t.insertBefore(kn(),e),e,void 0,null!=i?i:{})}return o._$AI(e),o})(t,this.renderRoot,this.renderOptions)}connectedCallback(){var e;super.connectedCallback(),null===(e=this._$Do)||void 0===e||e.setConnected(!0)}disconnectedCallback(){var e;super.disconnectedCallback(),null===(e=this._$Do)||void 0===e||e.setConnected(!1)}render(){return Jn}}gs.finalized=!0,gs._$litElement$=!0,null===(ps=globalThis.litElementHydrateSupport)||void 0===ps||ps.call(globalThis,{LitElement:gs});const Cs=globalThis.litElementPolyfillSupport;null==Cs||Cs({LitElement:gs}),(null!==(ms=globalThis.litElementVersions)&&void 0!==ms?ms:globalThis.litElementVersions=[]).push("3.3.3"),le();class fs{constructor(e){this.element=e}}class vs extends CustomEvent{constructor(e){super(vs.eventName,{detail:e,bubbles:!1,composed:!1,cancelable:!1})}static create(e){return new vs(new fs(e))}}vs.eventName="dxbl-element-connected";class bs extends CustomEvent{constructor(e){super(bs.eventName,{detail:e,bubbles:!1,composed:!1,cancelable:!1})}static create(e){return new vs(new fs(e))}}bs.eventName="dxbl-element-disconnected";class ws extends gs{constructor(){super(...arguments),this._isDOMAttached=!1}get isDOMAttached(){return this._isDOMAttached}connectedCallback(){super.connectedCallback(),this._isDOMAttached=!0,this.readyOnConnectedCallback&&n.setLoaded(this),this.dispatchEvent(vs.create(this))}disconnectedCallback(){super.disconnectedCallback(),this._isDOMAttached=!1,this.readyOnConnectedCallback&&n.removeLoaded(this),this.dispatchEvent(bs.create(this))}get readyOnConnectedCallback(){return!0}}class ys extends ws{constructor(){super(),this._logicalParent=null,this._logicalChildren=new Array}get hasLogicalParent(){return!!this.logicalParent}get logicalParent(){return this._logicalParent}set logicalParent(e){this._logicalParent=e}get logicalChildren(){return this._logicalChildren}addLogicalChild(e){if(e.logicalParent)throw new Error("Child element already added.");this._logicalChildren.push(e),e.logicalParent=this}removeLogicalChild(e){e.logicalParent=null;const t=this._logicalChildren.indexOf(e);t>-1&&this._logicalChildren.splice(t,1)}async processCapturedKeyDownAsync(e,t){t.handled||this.logicalParent&&!t.nextInteractionHandled&&ht(this.logicalParent)&&await this.logicalParent.processCapturedKeyDownAsync(e,t)}async processCapturedPointerAsync(e,t){if(t.handled)return;const i=pt.findParent(this,(e=>ht(e)));i&&ht(i)&&await i.processCapturedPointerAsync(e,t)}isPointedCaptured(e){const t=pt.findParent(this,(e=>ht(e)));return null!=t}}let Bs=!1;class Es extends ys{constructor(){super(...arguments),this.boundSlotChangedHandler=this.onSlotChanged.bind(this),this.renderGuid="",this._removeEnchancedNavigationSubscription=()=>{}}contentChanged(){}connectedOrContentChanged(){}needReasignAttributes(){return!0}connectedCallback(){super.connectedCallback(),this.connectedOrContentChanged()}restoreState(){this.needReasignAttributes()&&this.constructor.observedAttributes.forEach((e=>{if(e!==hn.renderGuidAttributeName&&this.hasAttribute(e)){const t=this.getAttribute(e);this.setAttribute(e,""),this.setAttribute(e,t)}}))}attributeChangedCallback(e,t,i){var n;e===hn.renderGuidAttributeName&&t&&(null===(n=window.Blazor)||void 0===n?void 0:n.addEventListener)?this._removeEnchancedNavigationSubscription=(e=>{var t;const i=()=>{var t;Bs=!0,e(),null===(t=window.Blazor)||void 0===t||t.removeEventListener("enhancedload",i),Bs=!1};return null===(t=window.Blazor)||void 0===t||t.addEventListener("enhancedload",i),()=>{var e;Bs||null===(e=window.Blazor)||void 0===e||e.removeEventListener("enhancedload",i)}})((()=>this.restoreState())):super.attributeChangedCallback(e,t,i)}disconnectedCallback(){super.disconnectedCallback(),this._removeEnchancedNavigationSubscription()}onSlotChanged(e){this.connectedOrContentChanged(),this.contentChanged(),this.setLoadedSelector()}setLoadedSelector(){this.readyOnConnectedCallback||n.setLoaded(this)}createRenderRoot(){const e=super.createRenderRoot(),t=document.createElement("slot");return e.appendChild(t),t.addEventListener("slotchange",this.boundSlotChangedHandler),e}}C([An({type:String,attribute:hn.renderGuidAttributeName})],Es.prototype,"renderGuid",void 0);const Is=he.Prefix+"-pager-page-size-selector",Ss="dxbl-pager-page-btn",xs=`:scope > button.${Ss}`,Ds="-1";var Fs;customElements.define("dxbl-pager",class extends Es{constructor(){super(),this.boundOnFocusIn=this.focusInHandler.bind(this),this.boundOnFocusOut=this.focusOutHandler.bind(this),this.activeButtonNumber=Ds,this.contentChangedObserver=new MutationObserver(this.restoreFocus.bind(this))}connectedCallback(){n.setLoaded(this),this.contentChangedObserver.observe(this,{childList:!0}),this.addEventListener("focusin",this.boundOnFocusIn),this.addEventListener("focusout",this.boundOnFocusOut)}disconnectedCallback(){n.removeLoaded(this),this.contentChangedObserver.disconnect(),this.removeEventListener("focusin",this.boundOnFocusIn),this.removeEventListener("focusout",this.boundOnFocusOut)}isPageButton(e){return e.classList.contains(Ss)}focusInHandler(e){this.activeButtonNumber=this.getPageNumber(e.target)}focusOutHandler(e){this.activeButtonNumber=Ds}restoreFocus(){[...this.querySelectorAll(xs)].some((e=>this.tryToRestoreFocusForScrolledButton(e)))}getPageNumber(e){return this.isPageButton(e)?e.getAttribute("data-page-number"):Ds}tryToRestoreFocusForScrolledButton(e){const t=this.getPageNumber(e);return t!==Ds&&t===this.activeButtonNumber&&(e.focus(),!0)}}),function(e){e[e.Indeterminate=0]="Indeterminate",e[e.Checked=1]="Checked",e[e.Unchecked=2]="Unchecked"}(Fs||(Fs={}));const Ts="dxbl-check";var Hs,Us;!function(e){e.checkState="check-state",e.allowIndeterminateStateByClick="allow-indeterminate-state-by-click",e.isReadOnly="is-read-only"}(Hs||(Hs={}));customElements.define(Ts,class extends de{constructor(){super(...arguments),this._checkState=Fs.Unchecked,this._allowIndeterminateStateByClick=!1,this._isReadOnly=!1,this.boundOnInputChangeHandler=this.onInputChange.bind(this),this.boundOnInputClickHandler=this.onInputClick.bind(this)}get checkState(){return this._checkState}set checkState(e){this._checkState=e,this.applyCheckStateToInputElement()}get allowIndeterminateStateByClick(){return this._allowIndeterminateStateByClick}set allowIndeterminateStateByClick(e){this._allowIndeterminateStateByClick=e}get isReadOnly(){return this._isReadOnly}set isReadOnly(e){this._isReadOnly=e}initializeComponent(){super.initializeComponent(),this.getInputElement().addEventListener("change",this.boundOnInputChangeHandler),this.getInputElement().addEventListener("click",this.boundOnInputClickHandler),this.applyCheckStateToInputElement()}disposeComponent(){var e,t;null===(e=this.getInputElement())||void 0===e||e.removeEventListener("change",this.boundOnInputChangeHandler),null===(t=this.getInputElement())||void 0===t||t.removeEventListener("click",this.boundOnInputClickHandler),super.disposeComponent()}getInputElement(){return this.querySelector("input")}get value(){return this.checkState===Fs.Indeterminate?"":Boolean(this.checkState===Fs.Checked).toString()}getNextCheckState(){let e=this.checkState+1;return e>Fs.Unchecked&&(e=this.allowIndeterminateStateByClick?Fs.Indeterminate:Fs.Checked),e}onInputChange(e){this.isReadOnly?e.stopImmediatePropagation():(this.checkState=this.getNextCheckState(),this.applyCheckStateToInputElement(),this.dispatchEvent(new Event("change",{bubbles:!0})))}onInputClick(e){this.isReadOnly&&e.preventDefault()}applyCheckStateToInputElement(){const e=this.getInputElement();e&&(e.indeterminate=this.checkState===Fs.Indeterminate,e.checked=this.checkState===Fs.Checked)}static get observedAttributes(){return[Hs.checkState,Hs.allowIndeterminateStateByClick,Hs.isReadOnly]}attributeChangedCallback(e,t,i){switch(e){case Hs.checkState:this.checkState=Number(i);break;case Hs.allowIndeterminateStateByClick:this.allowIndeterminateStateByClick=null!==i;break;case Hs.isReadOnly:this.isReadOnly=null!==i}}}),function(e){e.Modal="modal",e.DropDown="dropdown",e.Flyout="flyout",e.Window="window",e.Root="root",e.DragHint="draghint"}(Us||(Us={}));class Ps{get type(){return this._type}get children(){return Array.from(this._children)}get hasChildren(){return this._children.size>0}get id(){return this._id}get parentId(){return this._parentId}constructor(e,t,i){this._children=new Set,this._id=e,this._parentId=t,this._type=i}add(e){this._children.add(e)}remove(e){this._children.delete(e)}}class Qs{constructor(){this.idToNode=new Map,this.idToParentId=new Map,this.idToNode.set(Qs.root,new Ps(Qs.root,Qs.root,Us.Root))}add(e,t,i){const n=new Ps(e,t=null!=t?t:Qs.root,i);this.idToParentId.set(e,t),this.idToNode.set(e,n);this.idToNode.get(t).add(n)}remove(e){if(!this.idToNode.has(e))return;const t=this.idToParentId.get(e),i=this.idToNode.get(t),n=this.idToNode.get(e);this.idToParentId.delete(e),this.idToNode.delete(e),i.remove(n)}getParentId(e){return this.idToParentId.get(e)}getBranchNode(e){var t;return null!==(t=this.idToNode.get(e))&&void 0!==t?t:null}findRoot(e){let t=e;for(;;){const e=this.idToParentId.get(t);if(e===Qs.root)return t;t=e}}}Qs.baseIndex=1050,Qs.root="";class Ns{get type(){return this.branchNode.type}get index(){return this._index}set index(e){this._index=e}get children(){return this._children}get hasChildren(){return this._children.length>0}get id(){return this.branchNode.id}constructor(e){this._children=new Array,this._index=0,this.branchNode=e}add(e){this._children.push(e)}remove(e){this._children=this._children.filter((t=>t!==e))}peek(){return this._children[this._children.length-1]}activate(e){return this.peek()!==e&&(this.remove(e),this.add(e),!0)}}const Rs=new Qs,Ls=new class{constructor(){this.idToNode=new Map,this.rootNode=new Ns(Rs.getBranchNode("")),this.idToNode.set("",this.rootNode)}getIndex(e){const t=this.idToNode.get(e);return t?t.index:0}register(e){const t=Rs.findRoot(e),i=Rs.getBranchNode(e),n=new Ns(i);if(this.idToNode.set(e,n),e===t)this.rootNode.add(n);else{const t=Rs.getParentId(e),i=this.idToNode.get(t);if(!i)return;i.add(n)}this.checkUnregisteredChildren(e,n),this.refresh()}checkUnregisteredChildren(e,t){const i=[...this.idToNode.values()].map((e=>e.branchNode)).filter((t=>t.parentId===e));for(const e of i)t.children.indexOf(e)<0&&t.add(e)}unregister(e){var t;const i=null!==(t=this.idToNode.get(e))&&void 0!==t?t:null;if(!i)return;const n=Rs.getParentId(i.id),s=this.idToNode.get(n);if(s){s.remove(i);for(const t of this.iterateBranch(e))this.idToNode.delete(t);this.idToNode.delete(e),this.refresh()}}activate(e){var t,i,n;let s=null!==(t=this.idToNode.get(e))&&void 0!==t?t:null;if(!s)return!1;let r=!1;for(;s;){const e=Rs.getParentId(s.id),t=null!==(i=this.idToNode.get(e))&&void 0!==i?i:null;r=r||null!==(n=null==t?void 0:t.activate(s))&&void 0!==n&&n,s=t}return r}iterateBranch(e){let t=new Array;const i=this.idToNode.get(e);if(!(null==i?void 0:i.hasChildren))return t;for(const e of i.children)t.push(e.id),t=t.concat(this.iterateBranch(e.id));return t.sort(((e,t)=>this.idToNode.get(t).index-this.idToNode.get(e).index))}refresh(){let e=!1,t=Qs.baseIndex;for(const i in this.rootNode.children){const n=this.rootNode.children[i];e?t+=this.incrementByType(n.type):e=!0,t=this.calculateZIndices(n,t)}}calculateZIndices(e,t){if(e.index=t,e.hasChildren)for(const i of e.children)t+=this.incrementByType(i.type),t=this.calculateZIndices(i,t);return t}incrementByType(e){switch(e){case Us.Flyout:case Us.DropDown:return 10;case Us.Modal:return 100}return 10}setTopMostBranch(e){let t=this.idToNode.get(e)||null;for(;t&&t.type!==Us.Modal;){const e=Rs.getParentId(t.id);if(e){const i=this.idToNode.get(e);if(!i)return;i.activate(t),t=i}else this.rootNode.activate(t),t=null}this.refresh()}};class Ms{get parentId(){return this._parentId}get id(){return this._id}get type(){return this._type}constructor(e,t,i){this._id=e,this._parentId=t,this._type=i}}class ks{get id(){return this._id}constructor(e){this._id=e}}class Ks extends CustomEvent{constructor(e){super(Ks.eventName,{detail:e,bubbles:!0,composed:!0})}}Ks.eventName="dxbranchrefreshed";class Os extends CustomEvent{constructor(e){super(Os.eventName,{detail:e,bubbles:!0,composed:!0})}}Os.eventName="dxbranchactivated";class _s extends CustomEvent{constructor(e){super(_s.eventName,{detail:e,bubbles:!0,composed:!0})}}_s.eventName="dxbranchupdated";class Vs extends CustomEvent{constructor(e){super(Vs.eventName,{detail:e,bubbles:!0,composed:!0})}}Vs.eventName="dxbranchremoved";class zs extends CustomEvent{constructor(e){super(zs.eventName,{detail:e,bubbles:!0,composed:!0})}}zs.eventName="dxbranchcreated";let Ws=class extends gs{constructor(){super(...arguments),this.parentBranchId=null}createRenderRoot(){return this}updated(e){this.branchId&&(e.get("branchId")||e.get("parentBranchId")||e.get("branchType"))&&this.raiseUpdated()}raiseUpdated(){const e=new Ms(this.branchId,this.parentBranchId,this.branchType),t=new _s(e);this.dispatchEvent(t)}connectedCallback(){super.connectedCallback(),this.raiseCreated()}raiseCreated(){if(!this.branchId)return;const e=new Ms(this.branchId,this.parentBranchId,this.branchType),t=new zs(e);this.dispatchEvent(t)}disconnectedCallback(){super.disconnectedCallback(),this.raiseRemoved()}raiseRemoved(){if(!this.branchId)return;const e=new Ms(this.branchId,this.parentBranchId,this.branchType),t=new Vs(e);this.dispatchEvent(t)}};C([An({type:String,attribute:"branch-id"})],Ws.prototype,"branchId",void 0),C([An({type:String,attribute:"parent-branch-id"})],Ws.prototype,"parentBranchId",void 0),C([An({type:String,attribute:"type"})],Ws.prototype,"branchType",void 0),Ws=C([on("dxbl-branch")],Ws);const $s="dxbl-drag-hint";customElements.define($s,class extends de{get branchId(){return this.getAttribute("branch-id")}show(){Ls.register(this.branchId),this.refresh(),this.classList.add(he.Visible)}hide(){Ls.unregister(this.branchId),this.refresh(),this.classList.remove(he.Visible)}initializeComponent(){super.initializeComponent();const e=new zs(new Ms(this.branchId,null,Us.DragHint));this.dispatchEvent(e)}disposeComponent(){super.disposeComponent();const e=new Vs(new Ms(this.branchId,null,Us.DragHint));this.dispatchEvent(e)}refresh(){const e=new Ks(new ks(this.branchId));this.dispatchEvent(e)}});class Gs{static getBodyCellsSelector(e,t){return this.getDataTableBodySelector(e,t)+" > tr > td"}static getBodyEditRowSelector(e,t){return this.getDataTableBodySelector(e,t)+` > .${ue.EditRowClassName}`}static getBodyEditCellSelector(e,t){return this.getBodyEditRowSelector(e,t)+`> td[${rn.EditCell}]`}static getDataTableBodySelector(e,t){return`${null!=t?t:GA}[${qA}="${e}"] > .${xe.ClassName} > .${xe.ContentContainerClassName} > .${ue.DataTableClassName} > tbody`}}var qs,Ys,Xs,Js;Gs.DataTableSelector=`.${ue.DataTableClassName}`,Gs.TableBodyRows=`.${ue.DataTableClassName} > tbody > tr`,Gs.TableCell=`${Gs.TableBodyRows} > td`,Gs.TableHeader=`.${ue.DataTableClassName} > thead > tr > th`,Gs.TableHeaderCell=`${Gs.TableHeader} > ${ue.HeaderContentClassName}`,Gs.TableHeaderCellContent=`${Gs.TableHeaderCell} span`,Gs.TableGroupFooterCell=`${Gs.TableBodyRows}.${ue.GroupFooterRowClassName} > td`,Gs.TableGroupFooterCellContent=`${Gs.TableGroupFooterCell} > div[${rn.SummaryItem}]`,Gs.TableFooterCell=`.${ue.DataTableClassName} > tfoot > tr > td`,Gs.TableFooterCellContent=`${Gs.TableFooterCell} > div[${rn.SummaryItem}]`,Gs.TableCellSelector=`.${ue.DataTableClassName} > * > tr > td`,Gs.TitleElementsSelector=[Gs.TableCellSelector,Gs.TableHeaderCellContent,Gs.TableHeader,Gs.TableFooterCellContent,Gs.TableGroupFooterCellContent,Gs.TableFooterCell].join(", "),Gs.DataTablePartsSelector=":scope > *:not(colgroup)",Gs.ColElementSelector=`:scope > .${xe.ClassName} > .${xe.ContentContainerClassName} > .${ue.DataTableClassName} > colgroup > col`,Gs.RowSelector=`:scope > tr:not(.${ue.EmptyRowClassName}):not(.${ue.ArmRowClassName}):not([${qi}]):not([${Yi}])`,Gs.HeaderRowSelector=`.${ue.HeaderRowClassName}`,Gs.FilterRowSelector=`.${ue.FilterRowClassName}`,Gs.EditRowSelector=`.${ue.EditRowClassName}`,Gs.EditFormRowCellSelector=`:scope > .${ue.EditFormClassName}`,Gs.EditNewItemRowSelector=`.${ue.EditNewItemRowClassName}`,Gs.GroupRowSelector=`.${ue.GroupRowClassName}`,Gs.DataRowSelector=`tr[${rn.VisibleIndexName}]:not(.${ue.EditRowClassName}):not(.${ue.GroupRowClassName})`,Gs.EmptyDataRowCellSelector=`:scope > .${ue.EmptyDataRowCellClassName}`,Gs.DetailRowCellSelector=`:scope > .${ue.DetailCellClassName}`,Gs.FooterRowSelector=`.${ue.FooterRowClassName}`,Gs.GroupFooterRowSelector=`.${ue.GroupFooterRowClassName}`,Gs.RowDragHintSelector=`${$s}.${ue.RowDragHintClassName}`,Gs.KeyboardNavigatorSelector=`:scope > ${Qi}`,Gs.ToolbarContainerSelector=`.${ue.ToolbarContainerClassName}`,Gs.TopPanelSelector=`.${ue.TopPanelClassName}`,Gs.PagerPanelSelector=`.${ue.PagerPanelClassName}`,Gs.PagerSizeSelector=`:scope > .${Is}`,Gs.CellCheckBoxDisplayViewSelector="td .dxbl-checkbox-display-view-unchecked, td .dxbl-checkbox-display-view-checked, td .dxbl-checkbox-display-view-indeterminate",Gs.CellCheckBoxEditViewInputSelector=`:scope > ${Ts} input, :scope > .dxbl-checkbox-container > ${Ts} input`,function(e){e[e.None=0]="None",e[e.Column=1]="Column",e[e.Row=2]="Row"}(qs||(qs={}));class js extends Mi{constructor(e,t,i=!1){super(e.getKeyboardNavigator(),t,i),this.grid=e}canSwitchToNestedContentMode(){return!0}get editorManager(){return this.grid.editorManager}get isEditing(){return this.grid.isEditing}get isInplaceEditingEnabled(){return this.grid.enableInplaceEditing}get enterKeyDirection(){return this.grid.enterKeyDirection}get isFocusedRowEnabled(){return this.grid.enableFocusedRow}get isSelectionRowEnabled(){return this.grid.allowSelectRowByClick}get hasRowClickEvent(){return this.grid.hasRowClickEvent}getToolbarContainer(){return this.grid.getToolbarContainer()}getDataTable(){return this.grid.getDataTable()}getPagerPanel(e){return this.grid.getPagerPanel(e)}getGroupPanelContentContainer(){return this.grid.getGroupPanelContentContainer()}getSearchBoxContainer(){return this.grid.getSearchBoxContainer()}getScrollViewer(){return this.grid.getScrollViewer()}getScrollViewerContent(){return this.grid.getScrollViewerContent()}getColumnUID(e){return this.grid.getColumnUID(e)}getHeaderColumnInfo(e){return this.grid.getColumnInfo(e)}getColumnInfoByCell(e){return this.grid.getColumnInfoByCell(e)}findHeaderCellByColumnIndex(e){return this.grid.findHeaderCellByColumnIndex(e)}isPrintableCharacterKey(e){var t;return!(e.ctrlKey||e.altKey||e.metaKey)&&1===(null===(t=e.key)||void 0===t?void 0:t.length)}handleTabKeyDown(e,t=!1,i=!1){if(!t&&e.altKey)return!1;if(e.shiftKey){if(this.firstItemSelected&&!i)return!1;this.moveToPrevItem(i)}else{if(this.lastItemSelected&&!i)return!1;this.moveToNextItem(i)}return!0}isEditingOnTypeEnabled(){return this.grid.enableEditOnKeypress}}!function(e){e[e.None=0]="None",e[e.GroupPanel=1]="GroupPanel",e[e.DataTable=2]="DataTable",e[e.Pager=3]="Pager",e[e.ColumnChooser=4]="ColumnChooser",e[e.ToolbarContainer=5]="ToolbarContainer",e[e.SearchBox=6]="SearchBox"}(Ys||(Ys={})),function(e){e[e.None=0]="None",e[e.Header=1]="Header",e[e.Filter=2]="Filter",e[e.Edit=3]="Edit",e[e.EditForm=4]="EditForm",e[e.Group=5]="Group",e[e.Data=6]="Data",e[e.EmptyData=7]="EmptyData",e[e.Detail=8]="Detail",e[e.Footer=9]="Footer",e[e.GroupFooter=10]="GroupFooter",e[e.EmptyRow=11]="EmptyRow",e[e.EditNewItemRow=12]="EditNewItemRow"}(Xs||(Xs={})),function(e){e[e.Data=0]="Data",e[e.Edit=1]="Edit",e[e.Selection=2]="Selection",e[e.Command=3]="Command",e[e.Indent=4]="Indent",e[e.ExpandButton=5]="ExpandButton",e[e.EditNewItemRowCell=6]="EditNewItemRowCell"}(Js||(Js={}));class Zs{static getNavigationAreaType(e){return e.matches(Gs.ToolbarContainerSelector)?Ys.ToolbarContainer:e.matches(Gs.DataTableSelector)?Ys.DataTable:e.matches(Gs.PagerPanelSelector)?Ys.Pager:e.matches(Gs.TopPanelSelector)?Ys.GroupPanel:Ys.None}static getRowType(e){return e.matches(Gs.HeaderRowSelector)?Xs.Header:e.matches(Gs.FilterRowSelector)?Xs.Filter:e.matches(Gs.EditRowSelector)?Xs.Edit:e.querySelector(Gs.EditFormRowCellSelector)?Xs.EditForm:e.matches(Gs.GroupRowSelector)?Xs.Group:e.matches(Gs.EditNewItemRowSelector)?Xs.EditNewItemRow:e.matches(Gs.DataRowSelector)?Xs.Data:e.querySelector(Gs.EmptyDataRowCellSelector)?Xs.EmptyData:e.querySelector(Gs.DetailRowCellSelector)?Xs.Detail:e.matches(Gs.FooterRowSelector)?Xs.Footer:e.matches(Gs.GroupFooterRowSelector)?Xs.GroupFooter:e.matches(`.${ue.EmptyRowClassName}`)?Xs.EmptyRow:Xs.None}static getCellType(e){return void 0!==e.dataset.editCell?Js.Edit:Zs.isSelectionCell(e)?Js.Selection:Zs.isCommandCell(e)?Js.Command:Zs.isExpandButtonCell(e)?Js.ExpandButton:Zs.isIndentCell(e)?Js.Indent:Zs.isEditNewItemRowCell(e)?Js.EditNewItemRowCell:Js.Data}static isIndentCell(e){return null==e?void 0:e.matches(`.${ue.IndentCellClassName}, .${ue.GroupFooterIndentCellClassName}`)}static isCommandCell(e){var t;return null!==(t=null==e?void 0:e.matches(`.${ue.CommandCellClassName}`))&&void 0!==t&&t}static isExpandButtonCell(e){var t;return null!==(t=null==e?void 0:e.matches(`.${ue.ExpandButtonCellClassName}`))&&void 0!==t&&t}static isSelectionCell(e){var t;return null!==(t=null==e?void 0:e.matches(`.${ue.SelectionCellClassName}`))&&void 0!==t&&t}static isFixedCell(e){var t;return null!==(t=null==e?void 0:e.matches(`.${ue.FixedCellClassName}`))&&void 0!==t&&t}static isEditNewItemRowCell(e){var t,i;return null!==(i=null===(t=null==e?void 0:e.parentElement)||void 0===t?void 0:t.matches(`.${ue.EditNewItemRowClassName}`))&&void 0!==i&&i}static isSearchBoxContainer(e){return null==e?void 0:e.matches(`.${ue.SearchBoxContainerClassName}`)}}class er{constructor(){this.root=new tr(null,!1)}get hasCapture(){return this.root.hasChildren}get captured(){var e,t;return null!==(t=null===(e=this.root.searchCaptured())||void 0===e?void 0:e.element)&&void 0!==t?t:null}get count(){return this.root.count()}add(e){var t;const i=this.root.searchCaptured();i&&i.element!==e&&(i.captured=!1,null===(t=i.element)||void 0===t||t.lostCapture());this.root.tryAdd(new tr(e,!0))&&e.gotCapture()}remove(e){this.root.tryRemove(new tr(e,!1))&&e.lostCapture()}isChild(e,t){const i=this.root.search(e);return null!==i&&null!==i.search(t)}nextCapture(e){var t,i;if(null===this.captured)if(e.parentBranchId){const n=this.root.search(e.parentBranchId);if(n){const s=n.getNextChild(e);s?(s.captured=!0,null===(t=s.element)||void 0===t||t.gotCapture()):(n.captured=!0,null===(i=n.element)||void 0===i||i.gotCapture())}}else{const t=this.root.getNextChild(e);t&&(t.captured=!0)}}getParent(e){if(e.parentBranchId){return this.root.search(e.parentBranchId).element}return null}}class tr{constructor(e,t){this.element=e,this.captured=t,this.children=[]}get isRoot(){return null===this.element}get hasChildren(){return this.children.length>0}get branchId(){var e,t;return null!==(t=null===(e=this.element)||void 0===e?void 0:e.branchId)&&void 0!==t?t:""}get parentBranchId(){var e,t;return null!==(t=null===(e=this.element)||void 0===e?void 0:e.parentBranchId)&&void 0!==t?t:null}tryAdd(e){if(!e.parentBranchId&&this.isRoot||e.parentBranchId===this.branchId){const t=this.children.find((t=>t.branchId===e.branchId));return t?t.captured=!0:this.children.push(e),!0}for(const t of this.children){if(t.tryAdd(e))return!0}return!1}tryRemove(e){const t=this.children.find((t=>t.branchId===e.branchId));if(t){const e=this.children.indexOf(t);return this.children.splice(e,1),!0}for(const t of this.children){if(t.tryRemove(e))return!0}return!1}count(){let e=0;if(this.children.length>0)for(const t of this.children)e+=t.count();return this.isRoot||(e+=1),e}search(e){if(this.branchId===e)return this;for(let t=0;t<this.children.length;t++){const i=this.children[t].search(e);if(i)return i}return null}searchCaptured(){if(this.captured)return this;for(let e=0;e<this.children.length;e++){const t=this.children[e].searchCaptured();if(t)return t}return null}getNextChild(e){if(0===this.children.length)return null;for(let t=this.children.length-1;t>=0;t--){const i=this.children[t];if(i.element!==e)return i}return null}}class ir{constructor(){this.lockCount=0}get IsLocked(){return this.lockCount>0}lock(){this.lockCount+=1}unlock(){this.IsLocked&&(this.lockCount-=1)}reset(){this.lockCount=0}lockOnce(){this.IsLocked||this.lock()}doLockedAction(e){this.lock();try{e()}finally{this.unlock()}}async doLockedAsyncAction(e){this.lock();try{await e()}finally{this.unlock()}}doIfNotLocked(e){this.IsLocked||e()}doLockedActionIfNotLocked(e){this.doIfNotLocked((()=>this.doLockedAction(e)))}async doLockedAsyncActionIfNotLocked(e){this.doIfNotLocked((async()=>await this.doLockedAsyncAction(e)))}}class nr extends CustomEvent{constructor(){super(nr.eventName)}}nr.eventName="capture-interaction-prevent-ended";class sr extends EventTarget{constructor(){super(...arguments),this.preventNextPointerInteraction=!1}reset(){this.preventNextPointerInteraction=!1,this.dispatchEvent(new nr)}get isPreventing(){return this.preventNextPointerInteraction}prevent(){this.preventNextPointerInteraction=!0}}class rr{constructor(){this._globalLocker=new ir,this.preventNextPointerInteraction=new sr}get isInteractionPreventing(){return this.preventNextPointerInteraction.isPreventing}subscribeInteractionPreventEnd(e){this.preventNextPointerInteraction.addEventListener(nr.eventName,e)}unsubscribeInteractionPreventEnd(e){this.preventNextPointerInteraction.removeEventListener(nr.eventName,e)}async processCapturedElementPointer(e,t){const i=this.getCapturedInteractionLocker(e),n=new or(e);await i.doLockedAsyncActionIfNotLocked((async()=>{this.preventNextPointerInteraction.reset(),this.capturedProcessPromise=t(n),await this.capturedProcessPromise,this.capturedProcessPromise=void 0})),n.handled&&n.nextInteractionHandled&&this.preventNextPointerInteraction.prevent()}async processCapturedElementKeyboard(e,t){const i=this.getCapturedInteractionLocker(e);await i.doLockedAsyncActionIfNotLocked((async()=>{const i=new or(e);await t(i)}))}checkInteractionsPreventing(e,t,i,n=!1){const s=this.getCapturedInteractionLocker(e),r=this.preventEventIfLocked(s,t);return s.doIfNotLocked((()=>{this.preventNextPointerInteraction.isPreventing&&(n&&this.preventNextPointerInteraction.reset(),i())})),r||this.preventNextPointerInteraction.isPreventing}async waitForCaptureProcessing(){this.capturedProcessPromise&&await this.capturedProcessPromise}endInteractionIfNotLocked(e){this.getCapturedInteractionLocker(e).doIfNotLocked((()=>this.preventNextPointerInteraction.reset()))}getCapturedInteractionLocker(e){return e?e.locker:this._globalLocker}preventEventIfLocked(e,t){return!!e.IsLocked&&(H.markHandled(t,!1),!0)}}class or{constructor(e){this.caller=e,this.nextInteractionHandled=!1,this.handled=!1}}class ar{constructor(){this.captureTree=new er,this.captureProcessor=new rr,this.restoreFocusOnPreventNextPointerInteractionElement=null,this.capturedInPointerUp=!1,this.capturedInPointerDown=!1,this.focusHandler=this.handleFocus.bind(this),this.pointerDownHandler=this.handlePointerDown.bind(this),this.pointerUpHandler=this.handlePointerUp.bind(this),this.clickHandler=this.handleClick.bind(this),this.keyDownHandler=this.handleKeyDown.bind(this),this.disposeCheckHandler=this.checkDispose.bind(this)}get hasCapture(){return this.captureTree.hasCapture}get lastCaptured(){return this.captureTree.captured}get captureStackCount(){return this.captureTree.count}checkInitialize(){this.hasCapture||this.initialize()}checkDispose(){this.hasCapture||this.captureProcessor.isInteractionPreventing||this.dispose()}capture(e){this.checkInitialize(),this.captureTree.add(e)}releaseCapture(e){this.captureTree.remove(e),this.captureTree.nextCapture(e),this.checkDispose()}initialize(){document.addEventListener("focus",this.focusHandler,{capture:!0}),document.addEventListener("pointerdown",this.pointerDownHandler,{capture:!0}),document.addEventListener("pointerup",this.pointerUpHandler,{capture:!0}),document.addEventListener("click",this.clickHandler,{capture:!0}),document.addEventListener("keydown",this.keyDownHandler,{capture:!0}),this.captureProcessor.subscribeInteractionPreventEnd(this.disposeCheckHandler)}dispose(){document.removeEventListener("focus",this.focusHandler,{capture:!0}),document.removeEventListener("pointerdown",this.pointerDownHandler,{capture:!0}),document.removeEventListener("pointerup",this.pointerUpHandler,{capture:!0}),document.removeEventListener("click",this.clickHandler,{capture:!0}),document.removeEventListener("keydown",this.keyDownHandler,{capture:!0}),this.captureProcessor.unsubscribeInteractionPreventEnd(this.disposeCheckHandler)}async handleFocus(e){const t=this.captureTree.captured;if(!t)return;const i=this.getProcessingElement(t,e);if(!i||t===i)return;if(this.capturedInPointerDown=t.isPointedCaptured(e),this.capturedInPointerDown||t.isCloseOnPointerUp)return;await this.captureProcessor.processCapturedElementPointer(t,(i=>t.processCapturedPointerAsync(e,i)))}async handlePointerDown(e){const t=this.captureTree.captured;if(!t)return;this.captureProcessor.endInteractionIfNotLocked(t);const i=this.getProcessingStack(t,e,[]);for(const t of i){if(this.capturedInPointerDown=t.isPointedCaptured(e),this.capturedInPointerDown||t.isCloseOnPointerUp)return;const i=i=>t.processCapturedPointerAsync(e,i);await this.captureProcessor.processCapturedElementPointer(t,i)}}async handlePointerUp(e){const t=this.captureTree.captured;if(this.capturedInPointerUp=(null==t?void 0:t.isPointedCaptured(e))||!0,!t||this.capturedInPointerUp&&this.capturedInPointerDown||!t.isCloseOnPointerUp)return;const i=this.getProcessingStack(t,e,[]);for(const t of i){const i=i=>t.processCapturedPointerAsync(e,i);await this.captureProcessor.processCapturedElementPointer(t,i)}}async handleClick(e){await this.captureProcessor.waitForCaptureProcessing();this.captureProcessor.checkInteractionsPreventing(this.captureTree.captured,e,(()=>{H.markHandled(e,!1),this.restoreFocusOnPreventNextPointerInteractionElement&&mt.isFocused(this.restoreFocusOnPreventNextPointerInteractionElement)||mt.unfocus()}),!0)}async handleKeyDown(e){const t=this.captureTree.captured;if(!t)return;await this.captureProcessor.processCapturedElementKeyboard(t,(i=>t.processCapturedKeyDownAsync(e,i)))}getProcessingElement(e,t){if(e.isPointedCaptured(t)||e.isPreventPropagation)return e;const i=this.captureTree.getParent(e);return i?this.getProcessingElement(i,t):null}getProcessingStack(e,t,i){const n=e.isPointedCaptured(t);if(i.push(e),n||e.isPreventPropagation)return i;const s=this.captureTree.getParent(e);return s?this.getProcessingStack(s,t,i):i}}class lr{constructor(){this.action=null,this.rafHandle=null}execute(e){this.cancel(),this.action=e,this.rafHandle=requestAnimationFrame((()=>{var e;null===(e=this.action)||void 0===e||e.call(this),this.rafHandle=null,this.action=null}))}cancel(){this.rafHandle&&(cancelAnimationFrame(this.rafHandle),this.action=null,this.rafHandle=null)}}const Ar="dxbl-popup-root",dr="dxbl-window",cr=dr+"-root",hr=dr+"-dialog",ur="dxbl-popup-keyboard-navigator";const pr=new class{_doWithElementCheck(e){const t=document.querySelector(Ar);return e(null!=t?t:this._createPopupElement())}_createPopupElement(){const e=document.createElement(Ar);return document.body.appendChild(e),e}constructor(){this._rootElementPromise=customElements.whenDefined(Ar)}assign(e){this._rootElementPromise.then((()=>this._doWithElementCheck((t=>t.assign(e)))))}getPopup(e){return this._rootElementPromise.then((()=>this._doWithElementCheck((t=>t.getPopup(e)))))}release(e){this._rootElementPromise.then((()=>this._doWithElementCheck((t=>t.release(e)))))}async subscribeCaptureManager(e){return await this._rootElementPromise,this._doWithElementCheck((t=>t.subscribe(e)))}};function mr(){return pr}class gr{constructor(e){this.elements=e}}class Cr extends CustomEvent{constructor(e){super(Cr.eventName,{detail:e,bubbles:!0})}}Cr.eventName="dxbl-portable-elements-changed";let fr=class extends gs{constructor(){super(...arguments),this._portable=null,this._elementsPorted=!1,this.slotChangedHandler=this.handleSlotChange.bind(this),this.boundOnFocusInHandler=this.handleFocusIn.bind(this),this._reassignPortal=()=>mr().assign(this)}get portable(){return this._portable}createRenderRoot(){const e=super.createRenderRoot(),t=document.createElement("slot");return e.appendChild(t),t.addEventListener("slotchange",this.slotChangedHandler),e}handleSlotChange(e){const t=e.target.assignedNodes();this._elementsPorted&&0===t.length||(this.assignElements(t),this._elementsPorted=!0)}assignElements(e){this._portable=e,this.raiseElementsChanged(e)}connectedCallback(){var e;super.connectedCallback(),n.setLoaded(this),mr().assign(this),(null===(e=window.Blazor)||void 0===e?void 0:e.addEventListener)&&window.Blazor.addEventListener("enhancedload",this._reassignPortal),this.addEventListener("focusin",this.boundOnFocusInHandler,{capture:!0})}handleFocusIn(e){const t=document.querySelector(`:not(.dxbl-popup-portal)[branch-id=${this.branchId}]`);t&&t.activatePopupContent()}disconnectedCallback(){var e;super.disconnectedCallback(),mr().release(this),n.removeLoaded(this),(null===(e=window.Blazor)||void 0===e?void 0:e.removeEventListener)&&window.Blazor.removeEventListener("enhancedload",this._reassignPortal),this.removeEventListener("focusin",this.boundOnFocusInHandler,{capture:!0})}raiseElementsChanged(e){const t=new Cr(new gr(e));this.dispatchEvent(t)}updated(e){if(!this.branchId&&!this.hasAttribute(hn.virtualElementAttributeName))throw new Error("branch-id must be specified")}};C([An({type:String,attribute:"branch-id"})],fr.prototype,"branchId",void 0),fr=C([on("dxbl-portal")],fr);const vr=new class{constructor(){this._x=0,this._y=0,this.handlePointerDown=this.pointerEventHandler.bind(this)}get x(){return this._x}get y(){return this._y}subscribe(){window.addEventListener("pointerdown",this.handlePointerDown,{capture:!0,passive:!0}),window.addEventListener("pointermove",this.handlePointerDown,{capture:!0,passive:!0}),window.addEventListener("pointerup",this.handlePointerDown,{capture:!0,passive:!0})}unsubscribe(){window.removeEventListener("pointerdown",this.handlePointerDown),window.removeEventListener("pointermove",this.handlePointerDown),window.removeEventListener("pointerup",this.handlePointerDown)}pointerEventHandler(e){this._x=e.pageX,this._y=e.pageY}};vr.subscribe();class br{get x(){return this.xField}get y(){return this.yField}constructor(e,t){this.xField=e,this.yField=t}}br.zero=new br(0,0);class wr{static add(e,t){return new br(e.x+t.x,e.y+t.y)}static multiply(e,t){return new br(e.x*t,e.y*(1/t))}static divide(e,t){return new br(e.x*(1/t),e.y*(1/t))}static getLength(e){return Math.sqrt(e.x*e.x+e.y*e.y)}static normalize(e){const t=Math.max(Math.abs(e.x),Math.max(e.y)),i=wr.divide(e,t);return wr.divide(i,wr.getLength(i))}}class yr{static viewport(){return new st(window.scrollX,window.scrollY,document.documentElement.clientWidth,document.documentElement.clientHeight)}static page(){return new st(0,0,document.body.clientWidth,document.body.clientHeight)}}class Br{static translate(e,t){return`translate(${Math.floor(e)}px, ${Math.floor(t)}px)`}static translateWithoutFloor(e,t){return`translate(${e}px, ${t}px)`}static translateByPoint(e){return`translate(${Math.floor(e.x)}px, ${Math.floor(e.y)}px)`}}class Er extends CustomEvent{constructor(e){super(Er.eventName,{detail:e,bubbles:!0,cancelable:!0})}}Er.eventName="dxbl-position-changing";class Ir extends CustomEvent{constructor(e){super(Ir.eventName,{detail:e,bubbles:!0,cancelable:!0})}}Ir.eventName="dxbl-position-changed";class Sr extends HTMLElement{constructor(){super(...arguments),this.observer=null,this.targetField="",this.listenedIdField="",this.elementScrollHandler=this.handleElementScroll.bind(this),this.resizeHandler=this.handleResize.bind(this),this.mutationObserver=new MutationObserver(this.handleMutations.bind(this)),this.overflows=[],this.resizing=[],this.targetElement=null,this.rafAction=new lr}get target(){return this.targetField}set target(e){this.targetField=e}get listenerId(){return this.listenedIdField}set listenerId(e){this.listenedIdField=e}connectedCallback(){this.initializeObserver(),this.subscribeToOverflows()}getTargetBoundingClientRect(){return this.targetElement?rt.fromDomRect(this.targetElement.getBoundingClientRect()):st.Empty}initializeObserver(){this.destroyObserver();const e=this.querySelector(this.target);if(!e)return void this.mutationObserver.observe(this,{childList:!0,subtree:!0});this.observer=new IntersectionObserver((function(e,t){}),{root:e,rootMargin:"0px",threshold:0}),this.observer.observe(this),this.targetElement=e}disconnectedCallback(){this.destroyObserver()}destroyObserver(){var e;this.mutationObserver.disconnect(),null===(e=this.observer)||void 0===e||e.disconnect(),this.observer=null}static get observedAttributes(){return["target","listener-id"]}attributeChangedCallback(e,t,i){switch(e){case"target":this.targetChanged(i);break;case"listener-id":this.listenerIdChanged(i)}}handleMutations(e){const t=this.querySelector(this.target);t&&(this.targetElement=t,this.mutationObserver.disconnect(),this.initializeObserver(),this.subscribeToOverflows())}handleResize(e,t){this.raisePositionChanging(),this.rafAction.execute((()=>this.raisePositionChanged()))}targetChanged(e){this.target=e,this.initializeObserver()}listenerIdChanged(e){this.listenerId=e}raisePositionChanging(){const e=new Er({Tracker:this});this.dispatchEvent(e)}raisePositionChanged(){const e=new Ir({Tracker:this});this.dispatchEvent(e)}subscribeToOverflows(){if(!this.targetElement)return;const e=[],t=[];for(const i of ot.getRootPath(this.targetElement)){const n=i;if(!n)return;new ResizeObserver(this.resizeHandler).observe(n,{box:"border-box"}),t.push(),Te.isScrollable(n)&&(n.addEventListener("scroll",this.elementScrollHandler,{capture:!0}),e.push(n))}this.overflows=e,this.resizing=t}unsubscribeFromOverflows(){this.overflows.forEach((e=>{e.removeEventListener("scroll",this.elementScrollHandler)})),this.resizing.forEach((e=>{e.disconnect()}))}handleElementScroll(e){this.raisePositionChanging(),this.rafAction.execute((()=>this.raisePositionChanged()))}}customElements.define("dxbl-position-tracker",Sr);class xr{get position(){return this.callback(this.target)}constructor(e,t){this.target=e,this.callback=t}}class Dr{get raf(){return this.options.raf}constructor(e,t){this.observer=null,this.elementScrollHandler=this.handleElementScroll.bind(this),this.resizeHandler=this.handleResize.bind(this),this.overflows=[],this.resizing=[],this.targetElement=null,this.rafAction=new lr,this.callback=e,this.options=t}observe(e){this.disconnect(),this.targetElement=e,this.subscribeEvents()}disconnect(){var e;this.unsubscribeEvents(),this.rafAction.cancel(),null===(e=this.observer)||void 0===e||e.disconnect(),this.observer=null}getTargetBoundingClientRect(){return this.targetElement?ot.getRelativeElementRect(this.targetElement):st.Empty}subscribeEvents(){if(!this.targetElement)return;window.addEventListener("scroll",this.elementScrollHandler);const e=[],t=[];for(const i of ot.getRootPathAndSelf(this.targetElement)){const n=i;if(!n)return;if(this.isInShadowDom(n))continue;new ResizeObserver(this.resizeHandler).observe(n,{box:"border-box"}),t.push(),Te.isScrollable(n)&&(n.addEventListener("scroll",this.elementScrollHandler,{capture:!0}),e.push(n))}this.overflows=e,this.resizing=t}isInShadowDom(e){return e.getRootNode()instanceof ShadowRoot}unsubscribeEvents(){window.removeEventListener("scroll",this.elementScrollHandler),this.overflows.forEach((e=>{e.removeEventListener("scroll",this.elementScrollHandler)})),this.resizing.forEach((e=>{e.disconnect()}))}handleResize(e,t){this.raisePositionChanged()}handleElementScroll(e){this.raisePositionChanged()}raisePositionChanged(){this.raf?this.rafAction.execute((()=>this.raisePositionChangedCore())):this.raisePositionChangedCore()}raisePositionChangedCore(){this.callback(new xr(this.targetElement,this.getTargetBoundingClientRect),this)}}class Fr{get hasObservedElement(){return null!==this.observedElement}constructor(e,t){this.target=null,this.targetMutationObserver=new MutationObserver((e=>this.handleTargetMutations.bind(this))),this.observedElement=null,this.selector=e,this.callback=t}observe(e=null){this.disconnect(),this.target=e;const t=null!=e?e:document;this.observedElement=t.querySelector(this.selector),this.observedElement&&this.raiseElementChanged(null,this.observedElement),this.targetMutationObserver.observe(t,{subtree:!0,childList:!0})}disconnect(){this.targetMutationObserver.disconnect()}raiseElementChanged(e,t){this.callback({oldElement:e,element:t},this)}handleTargetMutations(e,t){this.hasObservedElement?this.processRemovedNodes(e):this.processAddedNodes(e)}processRemovedNodes(e){this.processRemovedNodesInternal(e)&&(this.raiseElementChanged(this.observedElement,null),this.observedElement=null)}processRemovedNodesInternal(e){return e.forEach((e=>{e.removedNodes.forEach((e=>{if(this.observedElement===e)return!0}))})),!1}processAddedNodes(e){const[t,i]=this.processAddedNodesInternal(e);t&&(this.raiseElementChanged(this.observedElement,i),this.observedElement=i)}processAddedNodesInternal(e){var t;const i=(null!==(t=this.target)&&void 0!==t?t:document).querySelector(this.selector);return[null!==i,i]}}class Tr{constructor(){this._isResolved=!1,this._isRejected=!1,this._promise=new Promise(((e,t)=>{this._resolve=e,this._reject=t}))}get promise(){return this._promise}resolve(e){this._isResolved=!0,this._resolve(e)}reject(e){this._isRejected=!0,this._reject(e)}tryResolve(e){this._isResolved||this._isRejected||this.resolve(e)}tryReject(e){this._isResolved||this._isRejected||this.reject(e)}}var Hr;!function(e){e.OutsideClick="OutsideClick",e.EscapePress="EscapePress",e.Programmatically="Programmatically"}(Hr||(Hr={}));class Ur{constructor(){this.handlers=[],this.raise=e=>{this.handlers.slice(0).forEach((t=>t(e)))}}subscribe(e){this.handlers.push(e)}unsubscribe(e){this.handlers=this.handlers.filter((t=>t!==e))}}class Pr{constructor(){this.handlers=[]}subscribe(e){this.handlers.push(e)}unsubscribe(e){this.handlers=this.handlers.filter((t=>t!==e))}raise(e,t){this.handlers.slice(0).forEach((i=>i(e,t)))}}class Qr extends ys{constructor(){super(...arguments),this.branchId="",this.parentBranchId=null,this._isCaptured=!1,this._locker=null,this.capturingAction=()=>{},this.releasingCaptureAction=()=>{}}get locker(){return this._locker||(this._locker=new ir)}get isCaptured(){return this._isCaptured}get isPreventPropagation(){return!1}gotCapture(){this._isCaptured||(this._isCaptured=!0,this.capturingAction())}lostCapture(){this._isCaptured&&(this._isCaptured=!1,this.releasingCaptureAction())}get isCloseOnPointerUp(){return!1}}const Nr=["a[href]","audio[controls]","button",'[contenteditable]:not([contenteditable="false"])',"details>summary:first-of-type","details","input","select","textarea","[tabindex]","video[controls]"].join(",");class Rr{static getTabbables(e,t){const i=this.findTabbables(e,t),n=[],s=[];return i.forEach(((e,t)=>{const i=Rr.getTabIndex(e);0===i?n.push(e):s.push({index:t,tabIndex:i,item:e})})),s.sort(((e,t)=>e.tabIndex===t.tabIndex?e.index-t.index:e.tabIndex-t.tabIndex)).map((e=>e.item)).concat(n)}static findTabbables(e,t){const i=Array.from(e.querySelectorAll(Nr));return t&&(e.matches(Nr)||e.webkitMatchesSelector(Nr))&&i.unshift(e),i.filter(Rr.filterTabbable)}static filterTabbable(e){return!e.disabled&&(!Rr.isHiddenInput(e)&&(!Te.isHidden(e)&&!(Rr.getTabIndex(e)<0)))}static getTabIndex(e){const t=e.getAttribute("tabindex");if(t){const e=parseInt(t,10);if(!isNaN(e))return e}return"true"===e.contentEditable||e.nodeName===Q.audio||e.nodeName===Q.video||e.nodeName===Q.details?0:e.tabIndex}static isHiddenInput(e){return e.tagName===Q.input&&e.getAttribute("type")===R.hidden}}class Lr{constructor(e){this.action=null,this.postponeAction=e}executePostpone(e){this.action=null,this.postponeAction()?e():this.action=e}execute(){this.action&&this.postponeAction()&&this.executeForce()}executeForce(){this.action&&this.action(),this.clear()}clear(){this.action=null}}const Mr={subtree:!0,childList:!0,attributeFilter:["disabled","tabindex"]};class kr{constructor(e,t,i,n,s){this.BlockOutsideClick=!1,this.BlockOutsideNavigation=!1,this.NestedOnly=!1,this.BlockOutsideClick=e,this.BlockOutsideNavigation=t,this.Element=i,this.LastFocusedElement=n,this.NestedOnly=s}}const Kr=new class{constructor(){this.documentFocusInHandler=this.documentFocusIn.bind(this),this.documentKeyDownHandler=this.documentKeyDown.bind(this),this.firstInnerElementKeyDownHandler=this.firstInnerElementKeyDown.bind(this),this.lastInnerElementKeyDownHandler=this.lastInnerElementKeyDown.bind(this),this.handleFocusOutHandler=this.handleFocusOut.bind(this),this.documentKeyboardTrackerHandler=this.documentKeyboardTracker.bind(this),this.documentMouseTrackerHandler=this.documentMouseTracker.bind(this),this.tabbables=[],this.mutationObserver=new MutationObserver(this.handleMutations.bind(this)),this.focusPostponedAction=new Lr((()=>{var e,t;return null!==(t=(null===(e=this.tabbables)||void 0===e?void 0:e.length)>0)&&void 0!==t&&t})),this.firstInnerElement=null,this.lastInnerElement=null,this._stack=[],this._lastInputFromPointer=!1,document.addEventListener("keydown",this.documentKeyboardTrackerHandler,!0),document.addEventListener("pointerdown",this.documentMouseTrackerHandler,!0)}documentKeyboardTracker(e){this._lastInputFromPointer=!1}documentMouseTracker(e){this._lastInputFromPointer=!0}get isActivated(){return this._stack.length>0}get info(){return this.isActivated?this._stack[this._stack.length-1]:null}get element(){var e,t;return null!==(t=null===(e=this.info)||void 0===e?void 0:e.Element)&&void 0!==t?t:null}get blockOutsideClick(){var e,t;return null!==(t=null===(e=this.info)||void 0===e?void 0:e.BlockOutsideClick)&&void 0!==t?t:null}get blockOutsideNavigation(){var e,t;return null!==(t=null===(e=this.info)||void 0===e?void 0:e.BlockOutsideNavigation)&&void 0!==t?t:null}get lastFocusedElement(){var e,t;return null!==(t=null===(e=this.info)||void 0===e?void 0:e.LastFocusedElement)&&void 0!==t?t:null}get nestedOnly(){var e,t;return null!==(t=null===(e=this.info)||void 0===e?void 0:e.NestedOnly)&&void 0!==t?t:null}filterStack(e){e&&(this._stack=this._stack.filter((t=>t.Element!==e)))}activate(e,t,i=!1,n=t){if("string"==typeof e&&(e=document.querySelector(e)),null==e)throw"element is null";this.element&&this.deactivateCore();const s=document.activeElement;this.filterStack(e),this._stack.push(new kr(n,t,e,s,i)),this.activateCore()}activateCore(){this.element&&((this.blockOutsideClick||this.blockOutsideNavigation)&&this.subscribe(this.element),this.tabbables=Rr.getTabbables(this.element,!this.nestedOnly),this.updateInnerElements(),this.subscribeInnerElementsKeyDown(),this.focusPostponedAction.executePostpone(this.forceFocusFirstElement.bind(this)),this.mutationObserver.observe(this.element,Mr))}deactivate(e,t){var i;if(!this.isActivated||!e)return;if(this.element!==e)return void this.filterStack(e);this.deactivateCore();const n=null===(i=this._stack.pop())||void 0===i?void 0:i.LastFocusedElement;t&&!pt.containsElement(e,document.activeElement)&&n&&mt.restoreFocus(n)}deactivateCore(){this.element&&(this.focusPostponedAction.clear(),this.mutationObserver.disconnect(),this.unsubscribeDocument(),this.unsubscribe(this.element),this.unsubscribeInnerElementsKeyDown(),clearTimeout(this.updateTabbablesTimerID))}forceFocusFirstElement(){const e=this.tabbables[0];e&&(this.lastFocusedElement&&this.element&&pt.containsElement(this.element,document.activeElement)||mt.restoreFocus(e))}handleMutations(e){clearTimeout(this.updateTabbablesTimerID),this.updateTabbablesTimerID=setTimeout(this.updateSubscriptions.bind(this),50)}updateSubscriptions(){this.tabbables=Rr.getTabbables(this.element,!this.nestedOnly),this.unsubscribeInnerElementsKeyDown(),this.updateInnerElements(),this.subscribeInnerElementsKeyDown(),this.focusPostponedAction.execute()}subscribe(e){this.element.addEventListener("focusout",this.handleFocusOutHandler,!0)}unsubscribe(e){this.element.removeEventListener("focusout",this.handleFocusOutHandler,!0)}handleFocusOut(e){if(this._lastInputFromPointer){if(!this.blockOutsideClick)return}else if(!this.blockOutsideNavigation)return;const t=e.relatedTarget;t?this.element.contains(t)||this.focusPostponedAction.executePostpone(this.forceFocusFirstElement.bind(this)):this.subscribeDocument()}subscribeDocument(){document.addEventListener("focusin",this.documentFocusInHandler),document.addEventListener("keydown",this.documentKeyDownHandler)}unsubscribeDocument(){document.removeEventListener("keydown",this.documentKeyDownHandler),document.removeEventListener("focusin",this.documentFocusInHandler)}documentKeyDown(e){var t;const i=e.target;if(i&&(this.element===i||(null===(t=this.element)||void 0===t?void 0:t.contains(i))))return;const n=this.element;n&&"function"==typeof n.processKeyDown&&n.processKeyDown(e)}documentFocusIn(e){const t=e.target;if(!t)return;this.unsubscribeDocument();const i=e.relatedTarget;(i||this.element.contains(t))&&(!i||this.element.contains(i))||this.focusPostponedAction.executePostpone(this.forceFocusFirstElement.bind(this))}firstInnerElementKeyDown(e){var t;this.firstInnerElement===document.activeElement&&"Tab"===e.key&&e.shiftKey&&(e.preventDefault(),null===(t=this.lastInnerElement)||void 0===t||t.focus({preventScroll:!1}))}lastInnerElementKeyDown(e){var t;this.lastInnerElement!==document.activeElement||"Tab"!==e.key||e.shiftKey||(e.preventDefault(),null===(t=this.firstInnerElement)||void 0===t||t.focus({preventScroll:!1}))}unsubscribeInnerElementsKeyDown(){var e,t;null===(e=this.firstInnerElement)||void 0===e||e.removeEventListener("keydown",this.firstInnerElementKeyDownHandler),null===(t=this.lastInnerElement)||void 0===t||t.removeEventListener("keydown",this.lastInnerElementKeyDownHandler)}subscribeInnerElementsKeyDown(){var e,t;null===(e=this.firstInnerElement)||void 0===e||e.addEventListener("keydown",this.firstInnerElementKeyDownHandler),null===(t=this.lastInnerElement)||void 0===t||t.addEventListener("keydown",this.lastInnerElementKeyDownHandler)}updateInnerElements(){this.tabbables&&(this.firstInnerElement=this.tabbables[0],this.lastInnerElement=this.tabbables[this.tabbables.length-1])}};class Or{constructor(e){this.reinitCallback=e,this.mutationObserver=new MutationObserver((e=>this.checkViability(e,this.reinitCallback))),this.subscribed=!1}checkViability(e,t){for(const i of e)if(!i.target.isConnected){t();break}}subscribe(e){this.subscribed||(this.mutationObserver.observe(e,{attributes:!0}),this.subscribed=!0)}unsubscribe(){this.subscribed&&(this.mutationObserver.disconnect(),this.subscribed=!1)}}var _r;const Vr="dxbl-popup",zr=e=>e;class Wr{constructor(e,t){this.closeReason=e,this.branchId=t}}class $r extends CustomEvent{constructor(e,t){super($r.eventName,{detail:new Wr(e,t),bubbles:!0,composed:!0,cancelable:!0})}}$r.eventName=Vr+".closingRequested",gt.register($r.eventName,(e=>e.detail));class Gr extends CustomEvent{constructor(e,t){super(Gr.eventName,{detail:new Wr(e,t),bubbles:!0,composed:!0,cancelable:!0})}}var qr,Yr,Xr,Jr,jr,Zr,eo;Gr.eventName=Vr+".closingResultRequested",gt.register(Gr.eventName,(e=>e.detail)),function(e){e.Viewport="viewport",e.Page="page",e.Rectangle="rectangle",e.TargetElement="targetelement"}(qr||(qr={})),function(e){e.None="none",e.Hide="hide",e.Close="close"}(Yr||(Yr={})),function(e){e[e.TopLeft=0]="TopLeft",e[e.TopRight=1]="TopRight",e[e.BottomLeft=2]="BottomLeft",e[e.BottomRight=3]="BottomRight",e[e.Center=4]="Center"}(Xr||(Xr={}));class to{constructor(e,t){this.targetInterestPoint=e,this.childInterestPoint=t}}!function(e){e.Absolute="absolute",e.Relative="relative",e.Bottom="bottom",e.Center="center",e.Right="right",e.AbsolutePoint="absolutepoint",e.RelativePoint="relativepoint",e.Mouse="mouse",e.MousePoint="mousepoint",e.Left="left",e.Top="top",e.Custom="custom"}(Jr||(Jr={})),function(e){e.Near="near",e.Far="far"}(jr||(jr={})),function(e){e.top="top",e.bottom="bottom"}(Zr||(Zr={})),function(e){e[e.None=0]="None",e[e.Horizontal=1]="Horizontal",e[e.Vertical=2]="Vertical"}(eo||(eo={}));class io{constructor(e=new et(0,0),t=new it(0,0)){this.childSize=it.Empty,this.mousePosition=null,this.visuallyHidden=!1,this.closingRequested=!1,this.lockPlacement=!1,this.lockedPosition=0,this.topLeft=e,this.size=t}}class no{constructor(e,t,i,n,s){this.dropOpposite=!1,this.dropDirection=jr.Near,this.dropAlignment=Zr.bottom,this.axis=t,this.point=e,this.dropOpposite=i,this.dropAlignment=s,this.dropDirection=n}}class so{get childPoints(){return this._childPoints}get placementTargetPoints(){return this._placementTargetPoints}constructor(e,t){this.customPlacement=null,this._childPoints=e,this._placementTargetPoints=t}}class ro extends CustomEvent{constructor(e){super(ro.eventName,{detail:e,bubbles:!0,composed:!1,cancelable:!0})}}ro.eventName="dxbl-popup-custom-placement";class oo{}class ao extends CustomEvent{constructor(e){super(ao.eventName,{detail:e,bubbles:!0,composed:!1,cancelable:!0})}}ao.eventName="dxbl-popup-shown";class lo extends CustomEvent{constructor(e){super(lo.eventName,{detail:e,bubbles:!0,composed:!1,cancelable:!0})}}lo.eventName="dxbl-popup-closed";class Ao{get zIndex(){return this._zIndex}constructor(e){this._zIndex=null!=e?e:0}}class co extends CustomEvent{constructor(e){super(co.eventName,{detail:e,bubbles:!0,composed:!0})}}co.eventName="dxbl-popup-zindex-delta-change";class ho{get isFocused(){return this._isFocused}get branchId(){return this._branchId}constructor(e,t){this._branchId=e,this._isFocused=t}}class uo extends CustomEvent{constructor(e){super(uo.eventName,{detail:e,bubbles:!0,composed:!0})}}uo.eventName="dxbl-popup-focus-change";class po extends CustomEvent{constructor(e){super(po.eventName,{detail:{visible:e},bubbles:!0,composed:!0})}}po.eventName="dxbl-popup-visible-change";class mo extends CustomEvent{constructor(e){super(mo.eventName,{detail:{visible:e},bubbles:!0,composed:!0})}}mo.eventName="dxbl-popup-kbd-strategy-activate";class go extends CustomEvent{constructor(e){super(go.eventName,{detail:e,bubbles:!0,composed:!0})}}go.eventName="dxbl-popup-focus-loop";class Co extends CustomEvent{constructor(e){super(Co.eventName,{detail:{factory:e},bubbles:!0,composed:!0})}}Co.eventName="dxbl-popup-keyboard-strategy-creating";let fo=_r=class extends Qr{static fromElement(e){for(;null!==e&&!(e instanceof _r);)e=e.parentElement;return e}get branchType(){return Us.DropDown}get positionChanged(){return this._positionChangedEvent}get initialVisibility(){return this._initialVisibility}set initialVisibility(e){this._initialVisibility=e,this._setVisibilityStyles(this._initialVisibility),this.initializeFocusTrap(),this.initializeKeyboardNavigator(),this.dispatchEvent(new po(this._initialVisibility))}_setVisibilitySizing(e){e?null!==this._currentMaxHeight&&(this.style.maxWidth=this._currentMaxWidth,this.style.maxHeight=this._currentMaxHeight,this.style.overflow=this._currentOverflow):(null===this._currentMaxHeight&&(this._currentMaxHeight=this.style.maxHeight,this._currentMaxWidth=this.style.maxWidth,this._currentOverflow=this.style.overflow),this.style.overflow="hidden",this.style.maxWidth="0px",this.style.maxHeight="0px")}_setVisibilityStyles(e){e?(this.style.opacity="1",this.style.pointerEvents="auto"):(this.style.opacity="0",this.style.pointerEvents="none"),this._setVisibilitySizing(e)}enableVisibility(){clearTimeout(this._showingTimeoutId),this._showingTimeoutId=setTimeout((()=>{this.initialVisibility||(this.initialVisibility=!0)}))}static get styles(){return fn`
            :host {
                display: flex;
                flex: 1 1 auto;
                flex-direction: column;
                min-height: 0;
            }
            dxbl-branch {
                display: flex;
                flex: 1 1 auto;
                flex-direction: column;
                min-height: 0;
            }
            .content-holder {
                display: flex;
                flex: 1 0 auto;
                flex-direction: column;
                min-height: 0;
            }
        `}get isCloseOnPointerUp(){return this.closeOnPointerUp}get renderedVisible(){var e,t;return this._renderedVisible&&(null===(t=null===(e=this._parentPopup)||void 0===e?void 0:e.renderedVisible)||void 0===t||t)}updated(e){e.has("closeOnOutsideClick")&&this.processCapture(this.closeOnOutsideClick),this.reposition()}initializeFocusTrap(){this.initialVisibility&&this.isOpen&&this.focusLoop&&Kr.activate(this,!1)}get child(){return this._child}get isOpen(){return this._isOpen}get placementTargetElement(){return this.placementTargetElementField}set placementTargetElement(e){this.unsubscribeFromPlacementTargetPositionObserver(),this.placementTargetElementField=e,this.subscribeToPlacementTargetPositionObserver()}updateTargetElement(){if(!this.placementTarget)return;const e=document.querySelector(this.placementTarget);e&&(this.placementTargetElement=e)}get dropOpposite(){return this._dropOpposite}get autoFocus(){return this._autoFocus}get dropFromRight(){return this._dropFromRight}get offset(){return this._offset}set offset(e){this._offset=e,this.style.transform=Br.translateByPoint(e)}get childSize(){return this.positionInfo.childSize}constructor(){super(),this._renderedVisible=!1,this.hasOwnLogicalParent=!1,this.tolerance=.01,this.repositionAction=new lr,this.positionInfo=new io,this._child=null,this.childResizeObserver=new ResizeObserver(this.handleChildSizeChanged.bind(this)),this._dropOpposite=!1,this._dropFromRight=!1,this._offset=et.zero,this.placementTargetElementField=null,this.focusInHandler=this.handleFocusIn.bind(this),this.focusOutHandler=this.handleFocusOut.bind(this),this.focusLoopHandler=this.handleFocusLoop.bind(this),this.positionChangingHandler=this.handlePositionChanging.bind(this),this.sizeChangedHandler=this.handleSizeChanged.bind(this),this.placementTargetPositionChangedHandler=this.handlePlacementTargetPositionChanged.bind(this),this.placementTargetPositionObserver=new Dr(this.placementTargetPositionChangedHandler,{raf:!1}),this.placementTargetViabilityObserver=new Or((()=>this.updateTargetElement())),this.placementTargetElementChangedHandler=this.handlePlacementTargetElementChanged.bind(this),this.placementTargetObserver=null,this._autoFocus=!1,this._interceptor=null,this.bridgeSlotChangedHandler=this.handleBridgeSlotChange.bind(this),this.closingResultRequestedTcs=new Tr,this._positionChangedEvent=new Pr,this._parentPopup=null,this.positionChangedHandler=this.handleParentPopupPositionChanged.bind(this),this._initialVisibility=!0,this._showingTimeoutId=void 0,this.isAdjustDialogEnabled=!0,this._capturedElementReleaseCallback=null,this._currentMaxHeight=null,this._currentMaxWidth=null,this._currentOverflow=null,this.closeOnOutsideClick=!1,this.closeOnPointerUp=!1,this.preventCloseOnPositionTargetClick=!1,this.closeMode=Yr.Hide,this.fitToRestriction=!1,this.preventInteractions=!1,this.hasServerSideClosing=!1,this.parentBranchId=null,this.rootCssStyle=null,this.placement=Jr.Absolute,this.horizontalOffset=0,this.verticalOffset=0,this.placementTarget=null,this.restrictTarget=null,this.restrict=qr.Viewport,this.width=null,this.maxWidth=null,this.minWidth=null,this.height=null,this.maxHeight=null,this.minHeight=null,this.desiredWidth=null,this.desiredHeight=null,this.minDesiredWidth=null,this.minDesiredHeight=null,this.renderWidth=null,this.renderHeight=null,this.restrictRectangle=st.Empty,this.placementRectangle=st.Empty,this.actualDropDirection=jr.Near,this.actualDropAlignment=Zr.bottom,this.actualDropOpposite=!1,this._isOpen=!1,this.animationEnabled=!1,this.resizing=!1,this.focusLoop=!1,this.zIndex=0,this.releasingCaptureAction=this.releaseFocusTrap,this.capturingAction=this.activate}render(){return this.renderTemplate()}activatePopupContent(){}willUpdate(e){this.renderWidth=this.calcRenderWidth(),this.renderHeight=this.calcRenderHeight(),this.shouldUpdateRootCssStyle(e)&&(this.rootCssStyle=this.composeRootCssStyle()),e.has(zr("placementTarget"))&&this.processPlacementTargetChanged()}composeRootCssStyle(){let e="";return this.shouldCalcWidth()&&(e+=`width: ${this.calcWidth()}; `),this.shouldCalcMinWidth()&&(e+=`min-width: ${this.calcMinWidth()}; `),this.shouldCalcMaxWidth()&&(e+=`max-width: ${this.calcMaxWidth()}; `),this.shouldCalcHeight()&&(e+=`height: ${this.calcHeight()}; `),this.shouldCalcMinHeight()&&(e+=`min-height: ${this.calcMinHeight()}; `),this.shouldCalcMaxHeight()&&(e+=`max-height: ${this.calcMaxHeight()}; `),e}processPlacementTargetChanged(){this.unsubscribeFromPlacementTargetObserver(),this.unsubscribeFromPlacementTargetPositionObserver(),this.subscribeToPlacementTargetObserver(),this.subscribeToPlacementTargetPositionObserver()}calcRenderHeight(){var e;return null!==(e=this.desiredHeight)&&void 0!==e?e:this.height}calcRenderWidth(){var e;return null!==(e=this.desiredWidth)&&void 0!==e?e:this.width}calcMaxWidth(){return this.maxWidth}calcMaxHeight(){return this.maxHeight}calcMinWidth(){var e;return null!==(e=this.minDesiredWidth)&&void 0!==e?e:this.minWidth}calcMinHeight(){var e;return null!==(e=this.minDesiredHeight)&&void 0!==e?e:this.minHeight}shouldCalcMinHeight(){return!!this.minHeight||!!this.minDesiredHeight}shouldCalcMinWidth(){return!!this.minWidth||!!this.minDesiredWidth}shouldCalcMaxWidth(){return!!this.maxWidth}shouldCalcMaxHeight(){return!!this.maxHeight}shouldCalcWidth(){return!!this.renderWidth}shouldCalcHeight(){return!!this.renderHeight}calcWidth(){return this.renderWidth}calcHeight(){return this.renderHeight}shouldUpdateRootCssStyle(e){return e.has("width")||e.has("minWidth")||e.has("maxWidth")||e.has("height")||e.has("minHeight")||e.has("maxHeight")||e.has("desiredWidth")||e.has("desiredHeight")||e.has("renderWidth")||e.has("renderHeight")||e.has("minDesiredWidth")||e.has("minDesiredHeight")}renderTemplate(){return Xn`
            <div class="${this.rootCssStyle}">
                ${this.renderSlot}
            </div>
        `}renderSlot(){return Xn`
            ${this.renderDefaultSlot()}
            ${this.renderAdditionalSlots()}
            ${this.renderBridgeSlot()}
        `}renderDefaultSlot(){return Xn`<slot></slot>`}renderBridgeSlot(){return Xn`
            <slot name="bridge" @slotchange=${this.bridgeSlotChangedHandler}></slot>
        `}renderAdditionalSlots(){return Xn`
            <slot name="top-left" slot="top-left"></slot>
            <slot name="top-right" slot="top-right"></slot>
            <slot name="bottom-left" slot="bottom-left"></slot>
            <slot name="bottom-right" slot="bottom-right"></slot>
        `}firstUpdated(){this.child&&(this.childResizeObserver.observe(this.child),this.reposition())}connectedCallback(){super.connectedCallback(),this.style.display=P.flex}disconnectedCallback(){super.disconnectedCallback(),this.close()}createKeyboardNavigationStrategy(){return null}initializeKeyboardNavigator(){var e,t,i;if(this.keyboardNavigator||(this.keyboardNavigator=this.querySelector(` :scope > ${ur}`)),this.keyboardNavigator&&!this.keyboardNavigator.initialized){const n=new Co({createPopup:this.createKeyboardNavigationStrategy.bind(this)});null===(e=this.getPortal())||void 0===e||e.dispatchEvent(n);const s=null===(i=null===(t=n.detail.factory)||void 0===t?void 0:t.createPopup)||void 0===i?void 0:i.call(t,this.keyboardNavigator,this);s&&this.keyboardNavigator.initialize(this,s)}}handleBridgeSlotChange(e){const t=e.target.assignedNodes();this._interceptor=t[0]}get isPreventPropagation(){return this.preventInteractions}async processCapturedPointerAsync(e,t){t.handled||this.isPointedCaptured(e)||(t.nextInteractionHandled=t.nextInteractionHandled||this.preventInteractions,this.closeOnOutsideClick&&await this.closeAsync(t,Hr.OutsideClick))}isPointedCaptured(e){return!!K.containsInComposedPath(e,this)||(!!(e.target instanceof Node&&this.isSubItem(e.target))||this.shouldCloseOnPlacementTargetClick(e))}isSubItem(e){return!!pt.findParent(e,(e=>e===this))}shouldCloseOnPlacementTargetClick(e){return!(!this.preventCloseOnPositionTargetClick||!this.placementTargetElement)&&H.containsInComposedPath(e,(e=>e===this.placementTargetElement))}async closeAsync(e,t){const i=await this.raiseClosingResultRequestedAsync(t);return this.closingResultRequestedTcs=new Tr,e.nextInteractionHandled=e.nextInteractionHandled||this.preventInteractions,e.handled=!0,Promise.resolve(!!i)}async processCapturedKeyDownAsync(e,t){if(await super.processCapturedKeyDownAsync(e,t),!t.handled&&t.caller===this&&"Escape"===e.key&&this.canProcessEscapeKeyDown()){H.markHandled(e);const i=await this.raiseClosingResultRequestedAsync(Hr.EscapePress);if(this.closingResultRequestedTcs=new Tr,!i)return void(t.handled=!0);this.unsubscribeCapture()}}canProcessEscapeKeyDown(){return!0}releaseFocusTrap(){Kr.deactivate(this,!this.isOpen)}raiseEvent(e,t){var i;null===(i=this._interceptor)||void 0===i||i.raise(e,t)}unsubscribeFromPlacementTargetObserver(){this.placementTargetObserver&&(this.placementTargetObserver.disconnect(),this.placementTargetObserver=null)}subscribeToPlacementTargetObserver(){this.isOpen&&(this.placementTargetObserver=new Fr(this.placementTarget,this.placementTargetElementChangedHandler),this.placementTargetObserver.observe())}unsubscribeFromPlacementTargetPositionObserver(){this.placementTargetPositionObserver.disconnect(),this.placementTargetViabilityObserver.unsubscribe()}subscribeToParentPopup(){const e=pt.findParent(this,(e=>lt(e)));if(e&&lt(e)){const t=e;t.positionChanged.subscribe(this.positionChangedHandler),this._parentPopup=t}}unsubscribeFromParentPopup(){this._parentPopup&&(this._parentPopup.positionChanged.unsubscribe(this.positionChangedHandler),this._parentPopup=null)}handleParentPopupPositionChanged(e,t){this.updatePosition()}subscribeToPlacementTargetPositionObserver(){this.placementTargetElement&&this.isOpen&&(this.placementTargetPositionObserver.observe(this.placementTargetElement),this.placementTargetViabilityObserver.subscribe(this.placementTargetElement))}show(){this.isOpen||(this._isOpen=!0,this.initialVisibility=!1,this._isOpen=!0,this.raiseShown(),this.addToLogicalTree(),this.addToVisibleBranchTree(),this.subscribeEvents(),this.initializeCapture(),this.reposition(),this.canAdjustZIndexOnShow&&this.raiseAdjustZIndexRequest(!0))}get canAdjustZIndexOnShow(){return!0}ensureBranchId(){if(!this.branchId)throw new Error("branchId should not be null")}addToVisibleBranchTree(){this.ensureBranchId(),Ls.register(this.branchId)}removeFromVisibleBranchTree(){this.ensureBranchId(),Ls.unregister(this.branchId)}getPortal(){return _a.getPortal(this.branchId)}raiseShown(){this._setVisibilitySizing(!0);const e=new oo;this.dispatchEvent(new ao(e))}raiseClosed(){const e=new oo;this.dispatchEvent(new lo(e))}close(){var e;this.isOpen&&(this._isOpen=!1,this.raiseClosed(),this.removeFromLogicalTree(),this.removeFromVisibleBranchTree(),this.unsubscribeEvents(),this.releaseCapture(),this.cleanUpAfterClose(),this.reposition(),this.canAdjustZIndexOnShow&&this.raiseAdjustZIndexRequest(!1),null===(e=this.keyboardNavigator)||void 0===e||e.disposeComponent())}notifyCloseCanceled(){this.processClosingRequested(!1),this.positionInfo.closingRequested=!1}cleanUpAfterClose(){this.updateVisibility(!1),this.animationEnabled=!1,this.positionInfo=new io}shouldCapture(){return this.closeOnOutsideClick||this.preventInteractions}async addToLogicalTree(){if(this.hasLogicalParent)return void(this.hasOwnLogicalParent=!0);this.ensureBranchId();const e=Rs.getParentId(this.branchId),t=await mr().getPopup(e);t&&dt(t)&&t.addLogicalChild(this)}removeFromLogicalTree(){if(this.hasOwnLogicalParent)return void(this.hasOwnLogicalParent=!1);const e=pt.getParent(this,!0);e&&dt(e)&&e.removeLogicalChild(this)}initializeCapture(){this.shouldCapture&&this.subscribeCapture()}focusCapture(){}releaseCapture(){this.processClosingRequested(!0),this.unsubscribeCapture()}subscribeCapture(){const e=document.querySelector("dxbl-popup-root");e&&(this._capturedElementReleaseCallback=e.subscribe(this))}unsubscribeCapture(){this._capturedElementReleaseCallback&&(this._capturedElementReleaseCallback(),this._capturedElementReleaseCallback=null)}processClosingRequested(e){this.closingResultRequestedTcs.resolve(e),this.closingResultRequestedTcs=new Tr,this.positionInfo.closingRequested=!1}subscribeToChild(e){e&&this.childResizeObserver.observe(e,{box:"border-box"})}unsubscribeFromChild(e){e&&this.childResizeObserver.unobserve(e)}subscribeEvents(){this.isAdjustDialogEnabled&&(this.addEventListener("focusin",this.focusInHandler),this.addEventListener("focusout",this.focusOutHandler)),this.focusLoop&&this.addEventListener(go.eventName,this.focusLoopHandler),document.addEventListener(Er.eventName,this.positionChangingHandler),this.addEventListener(Er.eventName,this.positionChangingHandler),window.addEventListener("resize",this.sizeChangedHandler),this.subscribeToPlacementTargetObserver(),this.subscribeToPlacementTargetPositionObserver(),this.subscribeToParentPopup()}unsubscribeEvents(){this.isAdjustDialogEnabled&&(this.removeEventListener("focusin",this.focusInHandler),this.removeEventListener("focusout",this.focusOutHandler)),this.focusLoop&&this.removeEventListener(go.eventName,this.focusLoopHandler),document.removeEventListener(Er.eventName,this.positionChangingHandler),this.removeEventListener(Er.eventName,this.positionChangingHandler),this.removeEventListener("resize",this.sizeChangedHandler),this.unsubscribeFromPlacementTargetPositionObserver(),this.unsubscribeFromPlacementTargetObserver(),this.unsubscribeFromParentPopup()}reposition(){this.repositionAction.execute(this.updatePosition.bind(this))}activate(){const e=new Os(new ks(this.branchId));this.dispatchEvent(e)}forceReposition(){this.repositionAction.cancel(),this.updatePosition()}lockPlacement(){this.positionInfo.lockPlacement=!0}unlockPlacement(){this.positionInfo.lockPlacement=!1}handleChildSizeChanged(e,t){this.reposition(),this.contentLoaded()&&this.enableVisibility()}contentLoaded(){return!0}handlePositionChanging(e){this.reposition()}handleSizeChanged(e){this.reposition()}handlePlacementTargetPositionChanged(e,t){this.reposition(),this.enableVisibility()}handlePlacementTargetElementChanged(e,t){this.placementTargetElement=e.element,this.reposition()}handleFocusIn(e){this.raiseAdjustZIndexRequest(!0),this.subscribeCapture()}handleFocusOut(e){this.raiseAdjustZIndexRequest(!1)}handleFocusLoop(){this.initializeFocusTrap()}raiseAdjustZIndexRequest(e){this.dispatchEvent(new uo(new ho(this.branchId,e))),e&&this.focusCapture()}isAbsolutePlacementMode(e){switch(e){case Jr.MousePoint:case Jr.Mouse:case Jr.AbsolutePoint:case Jr.Absolute:return!0}return!1}interestPointsFromRect(e){const t=new Array(5);return t[Xr.TopLeft]=e.topLeft,t[Xr.TopRight]=e.topRight,t[Xr.BottomLeft]=e.bottomLeft,t[Xr.BottomRight]=e.bottomRight,t[Xr.Center]=new et(e.x+e.width/2,e.y+e.height/2),t}getPlacementTargetInterestPoints(e){let t,i=st.Empty;const n=this.placementTargetElement,s=new br(this.horizontalOffset,this.verticalOffset);if(!n||this.isAbsolutePlacementMode(e))e!==Jr.Mouse&&e!==Jr.MousePoint||(this.positionInfo.mousePosition||(this.positionInfo.mousePosition=new et(vr.x,vr.y)),i=st.create(this.positionInfo.mousePosition,it.Empty)),i=rt.offset(i,s),t=this.interestPointsFromRect(i);else{i=this.placementRectangle,rt.areSame(i,st.Empty)&&(i=e!==Jr.Relative&&e!==Jr.RelativePoint?new st(0,0,n.getBoundingClientRect().width,n.getBoundingClientRect().height):st.Empty),i=rt.offset(i,s),t=this.interestPointsFromRect(i);const r=ot.getRelativeElementRect(n).topLeft;for(let e=0;e<5;e++)t[e]=tt.add(t[e],r)}return t}getChildInterestPoints(e){return this.child?(this._setVisibilitySizing(!0),this.interestPointsFromRect(new st(0,0,this.child.offsetWidth,this.child.offsetHeight))):this.interestPointsFromRect(st.Empty)}getBounds(e){let t=e[0].x,i=e[0].x,n=e[0].y,s=e[0].y;return e.forEach((e=>{const r=e.x,o=e.y;r<t&&(t=r),r>i&&(i=r),o<n&&(n=o),o>s&&(s=o)})),new st(t,n,i-t,s-n)}raiseCustomPlacement(e,t){const i=new ro(new so(e,t));return this.dispatchEvent(i),i.detail.customPlacement}getNumberOfCombinations(e){switch(e){case Jr.Mouse:return 2;case Jr.Bottom:case Jr.Top:case Jr.Right:case Jr.Left:case Jr.RelativePoint:case Jr.MousePoint:case Jr.AbsolutePoint:return 4;case Jr.Custom:return 0;default:return 1}}getPointCombination(e,t){const i=this.dropFromRight;switch(e){case Jr.Mouse:if(i){if(0===t)return[new to(Xr.BottomRight,Xr.TopRight),eo.Horizontal,!1,jr.Near,Zr.bottom];if(1===t)return[new to(Xr.TopRight,Xr.BottomRight),eo.Horizontal,!1,jr.Near,Zr.bottom]}else{if(0===t)return[new to(Xr.BottomLeft,Xr.TopLeft),eo.Horizontal,!1,jr.Near,Zr.bottom];if(1===t)return[new to(Xr.TopLeft,Xr.BottomLeft),eo.Horizontal,!1,jr.Near,Zr.bottom]}break;case Jr.Bottom:if(i){if(0===t)return[new to(Xr.BottomRight,Xr.TopRight),eo.Horizontal,!1,jr.Far,Zr.bottom];if(1===t)return[new to(Xr.TopRight,Xr.BottomRight),eo.Horizontal,!0,jr.Far,Zr.top];if(2===t)return[new to(Xr.BottomLeft,Xr.TopLeft),eo.Horizontal,!1,jr.Near,Zr.bottom];if(3===t)return[new to(Xr.TopLeft,Xr.BottomLeft),eo.Horizontal,!0,jr.Near,Zr.top]}else{if(0===t)return[new to(Xr.BottomLeft,Xr.TopLeft),eo.Horizontal,!1,jr.Near,Zr.bottom];if(1===t)return[new to(Xr.TopLeft,Xr.BottomLeft),eo.Horizontal,!0,jr.Near,Zr.top];if(2===t)return[new to(Xr.BottomRight,Xr.TopRight),eo.Horizontal,!1,jr.Far,Zr.bottom];if(3===t)return[new to(Xr.TopRight,Xr.BottomRight),eo.Horizontal,!0,jr.Far,Zr.top]}break;case Jr.Top:if(i){if(0===t)return[new to(Xr.TopRight,Xr.BottomRight),eo.Horizontal,!1,jr.Far,Zr.top];if(1===t)return[new to(Xr.BottomRight,Xr.TopRight),eo.Horizontal,!0,jr.Far,Zr.bottom];if(2===t)return[new to(Xr.TopLeft,Xr.BottomLeft),eo.Horizontal,!1,jr.Near,Zr.top];if(3===t)return[new to(Xr.BottomLeft,Xr.TopLeft),eo.Horizontal,!0,jr.Near,Zr.bottom]}else{if(0===t)return[new to(Xr.TopLeft,Xr.BottomLeft),eo.Horizontal,!1,jr.Near,Zr.top];if(1===t)return[new to(Xr.BottomLeft,Xr.TopLeft),eo.Horizontal,!0,jr.Near,Zr.bottom];if(2===t)return[new to(Xr.TopRight,Xr.BottomRight),eo.Horizontal,!1,jr.Far,Zr.top];if(3===t)return[new to(Xr.BottomRight,Xr.TopRight),eo.Horizontal,!0,jr.Far,Zr.bottom]}break;case Jr.Right:case Jr.Left:if(i&&e===Jr.Right||!i&&e===Jr.Left){if(0===t)return[new to(Xr.TopLeft,Xr.TopRight),eo.Vertical,!1,jr.Near,Zr.bottom];if(1===t)return[new to(Xr.BottomLeft,Xr.BottomRight),eo.Vertical,!0,jr.Near,Zr.top];if(2===t)return[new to(Xr.TopRight,Xr.TopLeft),eo.Vertical,!1,jr.Far,Zr.bottom];if(3===t)return[new to(Xr.BottomRight,Xr.BottomLeft),eo.Vertical,!0,jr.Far,Zr.top]}else{if(0===t)return[new to(Xr.TopRight,Xr.TopLeft),eo.Vertical,!1,jr.Near,Zr.bottom];if(1===t)return[new to(Xr.BottomRight,Xr.BottomLeft),eo.Vertical,!0,jr.Near,Zr.top];if(2===t)return[new to(Xr.TopLeft,Xr.TopRight),eo.Vertical,!1,jr.Far,Zr.bottom];if(3===t)return[new to(Xr.BottomLeft,Xr.BottomRight),eo.Vertical,!0,jr.Far,Zr.top]}break;case Jr.Relative:case Jr.RelativePoint:case Jr.MousePoint:case Jr.AbsolutePoint:if(i){if(0===t)return[new to(Xr.TopLeft,Xr.TopRight),eo.Horizontal,!1,jr.Far,Zr.bottom];if(1===t)return[new to(Xr.TopLeft,Xr.TopLeft),eo.Horizontal,!1,jr.Near,Zr.bottom];if(2===t)return[new to(Xr.TopLeft,Xr.BottomRight),eo.Horizontal,!0,jr.Far,Zr.top];if(3===t)return[new to(Xr.TopLeft,Xr.BottomLeft),eo.Horizontal,!0,jr.Near,Zr.top]}else{if(0===t)return[new to(Xr.TopLeft,Xr.TopLeft),eo.Horizontal,!1,jr.Near,Zr.bottom];if(1===t)return[new to(Xr.TopLeft,Xr.TopRight),eo.Horizontal,!1,jr.Far,Zr.bottom];if(2===t)return[new to(Xr.TopLeft,Xr.BottomLeft),eo.Horizontal,!0,jr.Near,Zr.top];if(3===t)return[new to(Xr.TopLeft,Xr.BottomRight),eo.Horizontal,!0,jr.Far,Zr.top]}break;case Jr.Center:return[new to(Xr.Center,Xr.Center),eo.None,!1,jr.Near,Zr.bottom];default:return[new to(Xr.TopLeft,Xr.TopLeft),eo.None,!1,jr.Near,Zr.bottom]}return[new to(Xr.TopLeft,Xr.TopLeft),eo.None,!1,jr.Near,Zr.bottom]}getRestrictBounds(){switch(this.restrict){case qr.Viewport:return yr.viewport();case qr.Page:return yr.page();case qr.TargetElement:{if(!this.restrictTarget)throw new Error("restrictTarget should be specified if restrictmode is custom");const e=document.querySelector(this.restrictTarget);return ot.getRelativeElementRect(e)}case qr.Rectangle:return this.restrictRectangle}return yr.viewport()}updatePosition(){if(!this.isOpen)return this._renderedVisible=!1,void this._setVisibilityStyles(!1);const e=this.renderedVisible;this._renderedVisible=!0;const t=this.renderedVisible;if(!t)return this.updateVisibility(!0),void(e!==t&&this.raisePositionChanged(this.offset,!1));const i=this.placement,n=this.getPlacementTargetInterestPoints(i),s=this.getChildInterestPoints(i),r=this.getBounds(n);let o=this.getBounds(s);const a=o.width*o.height;let l=-1,A=new br(this.positionInfo.topLeft.x,this.positionInfo.topLeft.y),d=!1,c=-1,h=eo.None,u=0,p=this.actualDropDirection,m=this.actualDropOpposite,g=this.actualDropAlignment,C=null,f=null;i===Jr.Custom?(f=this.processCustomPlacement(s,n),u=f?f.length:0):u=this.getNumberOfCombinations(i);for(let e=0;e<u;e++){if(this.positionInfo.lockPlacement&&this.positionInfo.lockedPosition!==e)continue;let t=new br(0,0),r=eo.None,d=!1,u=jr.Near,v=Zr.bottom,b=null;if(i===Jr.Custom)b=f[e],t=wr.add(n[Xr.TopLeft],b.point),r=b.axis,d=b.dropOpposite,u=b.dropDirection,v=b.dropAlignment;else{const[r,o,a,l,A]=this.getPointCombination(i,e);d=a,u=l,v=A,t=tt.sub(n[r.targetInterestPoint],s[r.childInterestPoint])}const w=rt.offset(o,t),y=this.getRestrictBounds(),B=rt.intersect(y,w),E=B.isEmpty?0:B.width*B.height;if(E-c>this.tolerance&&(l=e,A=t,c=E,h=r,p=u,m=d,g=v,C=b,Math.abs(E-a)<this.tolerance))break}this.actualDropOpposite=m,this.actualDropDirection=p,this.actualDropAlignment=g,o=rt.offset(o,A);const v=this.getRestrictBounds(),b=rt.intersect(v,o);[A,d]=this.calcRestrictedBestTranslation(b,o,n,v,r,A),this.processBestTranslationResults(A,o,r,v,m,p,g,h,C),this.positionInfo.lockedPosition=l,this.positionInfo.childSize=o.size;const w=Math.round(A.x),y=Math.round(A.y);let B=!1;w===this.positionInfo.topLeft.x&&y===this.positionInfo.topLeft.y||(this.positionInfo.topLeft=new et(w,y),this.offset=this.positionInfo.topLeft,B=!0);const E=!t||d,I=this.updateVisibility(E);B=B||I,this.animationEnabled=t&&!d,this._setVisibilityStyles(!E),B&&this.raisePositionChanged(this.offset,E),this.closeMode===Yr.Close&&!this.positionInfo.closingRequested&&E&&(this.positionInfo.closingRequested=!0,this.raiseClosingRequested(Hr.Programmatically))}raisePositionChanged(e,t){this._positionChangedEvent.raise(this,[!t,e])}updateVisibility(e){return this._renderedVisible=!e,this.positionInfo.visuallyHidden!==e&&(this._setVisibilityStyles(!e),this.positionInfo.visuallyHidden=e,!0)}processCustomPlacement(e,t){return this.raiseCustomPlacement(e,t)}raiseClosingRequested(e){this.dispatchEvent(new $r(e,this.branchId))}raiseClosingResultRequested(e){this.dispatchEvent(new Gr(e,this.branchId))}async raiseClosingResultRequestedAsync(e){if(!this.hasServerSideClosing)return this.raiseClosingRequested(e),!0;const t=new Tr;return this.closingResultRequestedTcs=t,this.raiseClosingResultRequested(e),t.promise}calcRestrictedBestTranslation(e,t,i,n,s,r){return[this.fitToRestriction?this.calcRestrictedFitBestTranslation(e,t,i,n,r):r,this.closeMode!==Yr.None&&this.calcRestrictedShouldHide(n,s)]}calcRestrictedShouldHide(e,t){if(!this.placementTargetElement)return!_r.checkTargetEdgesWithin(e,t);let i=e;return ot.getClippingParents(this.placementTargetElement).forEach((e=>{const t=ot.getRelativeElementRect(e);i=rt.intersect(i,t)})),!!i.isEmpty||!_r.checkTargetEdgesWithin(i,t)}static checkTargetEdgesWithin(e,t){return rt.contains(e,t.topLeft)||rt.contains(e,t.topRight)||rt.contains(e,t.bottomLeft)||rt.contains(e,t.bottomRight)}calcRestrictedFitBestTranslation(e,t,i,n,s){if(Math.abs(e.width-t.width)>this.tolerance||Math.abs(e.height-t.height)>this.tolerance){const e=i[Xr.TopLeft],r=tt.sub(i[Xr.TopRight],e),o=wr.normalize(new br(r.x,r.y));Number.isNaN(o.y)||Math.abs(o.y)<this.tolerance?t.right>n.right?s=new br(n.right-t.width,s.y):t.left<n.left&&(s=new br(n.left,s.y)):Math.abs(o.x)<this.tolerance&&(t.bottom>n.bottom?s=new br(s.x,n.bottom-t.bottom):t.top<n.top&&(s=new br(s.x,n.top)));const a=tt.sub(e,i[Xr.BottomLeft]),l=wr.normalize(a);Number.isNaN(l.x)||Math.abs(l.x)<this.tolerance?t.bottom>n.bottom?s=new br(s.x,n.bottom-t.height):t.top<n.top&&(s=new br(s.x,n.top)):Math.abs(l.y)<this.tolerance&&(t.right>n.right?s=new br(n.right-t.width,s.y):t.left<n.left&&(s=new br(n.x,s.y)))}return s}processCapture(e){}processBestTranslationResults(e,t,i,n,s,r,o,a,l){}};C([An({type:Boolean,attribute:"close-on-outside-click"})],fo.prototype,"closeOnOutsideClick",void 0),C([An({type:Boolean,attribute:"close-on-pointer-up"})],fo.prototype,"closeOnPointerUp",void 0),C([An({type:Boolean,attribute:"prevent-close-on-position-target-click"})],fo.prototype,"preventCloseOnPositionTargetClick",void 0),C([An({type:String,attribute:"close-mode"})],fo.prototype,"closeMode",void 0),C([An({type:Boolean,attribute:"fit-to-restriction"})],fo.prototype,"fitToRestriction",void 0),C([An({type:Boolean,attribute:"prevent-interactions"})],fo.prototype,"preventInteractions",void 0),C([An({type:Boolean,attribute:"has-serverside-closing"})],fo.prototype,"hasServerSideClosing",void 0),C([An({type:String,attribute:"branch-id"})],fo.prototype,"branchId",void 0),C([An({type:String,attribute:"parent-branch-id"})],fo.prototype,"parentBranchId",void 0),C([An({type:String,reflect:!1})],fo.prototype,"rootCssStyle",void 0),C([An({type:String,attribute:"placement"})],fo.prototype,"placement",void 0),C([An({type:Number,attribute:"horizontal-offset"})],fo.prototype,"horizontalOffset",void 0),C([An({type:Number,attribute:"vertical-offset"})],fo.prototype,"verticalOffset",void 0),C([An({type:String,attribute:"placement-target"})],fo.prototype,"placementTarget",void 0),C([An({type:String,attribute:"restrict-target"})],fo.prototype,"restrictTarget",void 0),C([An({type:String,attribute:"restrict"})],fo.prototype,"restrict",void 0),C([An({type:String,attribute:"width"})],fo.prototype,"width",void 0),C([An({type:String,attribute:"max-width"})],fo.prototype,"maxWidth",void 0),C([An({type:String,attribute:"min-width"})],fo.prototype,"minWidth",void 0),C([An({type:String,attribute:"height"})],fo.prototype,"height",void 0),C([An({type:String,attribute:"max-height"})],fo.prototype,"maxHeight",void 0),C([An({type:String,attribute:"min-height"})],fo.prototype,"minHeight",void 0),C([An({type:String,attribute:"desired-width"})],fo.prototype,"desiredWidth",void 0),C([An({type:String,attribute:"desired-height"})],fo.prototype,"desiredHeight",void 0),C([An({type:String,attribute:"min-desired-width"})],fo.prototype,"minDesiredWidth",void 0),C([An({type:String,attribute:"min-desired-height"})],fo.prototype,"minDesiredHeight",void 0),C([An({type:String,reflect:!1})],fo.prototype,"renderWidth",void 0),C([An({type:String,reflect:!1})],fo.prototype,"renderHeight",void 0),C([An({type:String,attribute:"restrict-rect",converter:e=>e?rt.parse(e):st.Empty})],fo.prototype,"restrictRectangle",void 0),C([An({type:String,attribute:"placement-rect",converter:e=>e?rt.parse(e):st.Empty})],fo.prototype,"placementRectangle",void 0),C([An({type:String,attribute:"x-drop-direction",reflect:!0})],fo.prototype,"actualDropDirection",void 0),C([An({type:String,attribute:"x-drop-alignment",reflect:!0})],fo.prototype,"actualDropAlignment",void 0),C([An({type:String,attribute:"x-drop-opposite",reflect:!0,converter:{toAttribute:(e,t)=>e?"true":"false"}})],fo.prototype,"actualDropOpposite",void 0),C([An({type:Boolean,attribute:"x-is-open",reflect:!0,converter:{fromAttribute:(e,t)=>{throw new Error("readonly")}}})],fo.prototype,"_isOpen",void 0),C([An({type:Boolean,reflect:!1})],fo.prototype,"animationEnabled",void 0),C([An({type:Boolean,attribute:"resizing"})],fo.prototype,"resizing",void 0),C([An({type:Boolean,attribute:"focus-loop"})],fo.prototype,"focusLoop",void 0),C([An({type:Number,attribute:"z-index"})],fo.prototype,"zIndex",void 0),fo=_r=C([on(Vr)],fo);const vo="dxbl-popup-cell";let bo=class extends gs{constructor(){super(...arguments),this._portal=null,this.elements=null,this.elementsChangedHandler=this.handleElementsChanged.bind(this),this.zIndexDeltaChangeHandler=this.handleZIndexDeltaChange.bind(this),this.baseZIndex=0,this.zIndexDelta=0}get zIndex(){return this.baseZIndex+this.zIndexDelta}createRenderRoot(){return this}get portal(){return this._portal}setPortal(e){this.unsubscribe(),this._portal=e,this.subscribe(),this.updateElements(this.elements,e.portable)}connectedCallback(){super.connectedCallback(),this.subscribe()}subscribe(){this.addEventListener(co.eventName,this.zIndexDeltaChangeHandler),this.portal&&this.portal.addEventListener(Cr.eventName,this.elementsChangedHandler)}unsubscribe(){this.removeEventListener(co.eventName,this.zIndexDeltaChangeHandler),this.portal&&this.portal.removeEventListener(Cr.eventName,this.elementsChangedHandler)}disconnectedCallback(){super.disconnectedCallback(),this.unsubscribe()}handleElementsChanged(e){this.updateElements(this.elements,e.detail.elements)}updateElements(e,t){e&&e.forEach((e=>this.removeChild(e))),this.elements=t,t&&this.append(...t)}handleZIndexDeltaChange(e){this.zIndexDelta=e.detail.zIndex}updated(e){(e.has("zIndex")||e.has("zIndexDelta")||e.has("baseZIndex"))&&(this.style.zIndex=String(this.zIndex))}};C([An({type:Number})],bo.prototype,"baseZIndex",void 0),C([An({type:Number})],bo.prototype,"zIndexDelta",void 0),C([An({type:Number,reflect:!0})],bo.prototype,"zIndex",null),bo=C([on(vo)],bo);const wo=new class{constructor(){this._shadowBranchEvent=new Ur,this._topShadowId=null,this.shadowSet=new Set}get shadowBranchChanged(){return this._shadowBranchEvent}register(e){this.shadowSet.add(e),this.raiseTopShadowStackChanged()}unregister(e){this.shadowSet.delete(e),this.raiseTopShadowStackChanged()}raiseTopShadowStackChanged(){const e=this.getTopShadowModal();if(this._topShadowId===e)return;this._topShadowId=e;this._shadowBranchEvent.raise({branch:e})}getTopShadowModal(){let e=-1,t="";for(const i of Array.from(this.shadowSet)){const n=Ls.getIndex(i);n>e&&(e=n,t=i)}return t}},yo=he.Prefix+"-prevent-safari-scrolling";const Bo=new class{constructor(){this.paddingCoerced=!1,this.bodyScrollTop=0,this.bodyScrollPadding="",this.scrollLocked=!1,this.scrollLockHostSet=new Set}register(e){this.scrollLockHostSet.add(e),this.updateScrollLock()}unregister(e){this.scrollLockHostSet.delete(e),this.updateScrollLock()}updateScrollLock(){this.toggleBodyScroll(document.body,this.scrollLockHostSet.size>0)}toggleBodyScroll(e,t){t!==this.scrollLocked&&(this.scrollLocked=t,this.toggleScrollPadding(e,t),T.DomUtils.toggleClassName(e,"dxbl-modal-open",t),h.Browser.Safari&&this.toggleSafariScroll(e,t))}toggleScrollPadding(e,t){if(t){const t=Te.getVerticalScrollbarWidth();if(0===t)return;this.paddingCoerced=!0;const i=parseInt(getComputedStyle(document.body).getPropertyValue("padding-right"),10);return this.bodyScrollPadding=document.body.style.paddingRight,void(e.style.paddingRight=`${i+t}px`)}this.paddingCoerced&&(e.style.paddingRight=this.bodyScrollPadding,this.paddingCoerced=!1)}toggleSafariScroll(e,t){t?(this.bodyScrollTop=window.pageYOffset,T.DomUtils.toggleClassName(e,yo,t)):(T.DomUtils.toggleClassName(e,yo,t),window.scrollTo(0,this.bodyScrollTop))}};class Eo{}Eo.Window=he.Prefix+"-window",Eo.WindowHeader=Eo.Window+"-header",Eo.WindowHeaderButton=Eo.WindowHeader+"-button";class Io{}Io.Popup=he.Prefix+"-popup",Io.PopupHeader=Io.Popup+"-header",Io.PopupHeaderButton=Io.PopupHeader+"-button",Io.PopupResized=Io.Popup+"-resized";const So=`.${Eo.WindowHeaderButton}, .${Io.PopupHeaderButton}`;class xo{constructor(e,t){this.x=t.x,this.y=t.y}}class Do extends CustomEvent{constructor(e,t){super(Do.eventName,{detail:new xo(e,t),bubbles:!0,composed:!0,cancelable:!1})}}Do.eventName="dxbl:popup-dragcompleted",gt.register(Do.eventName,(e=>e.detail));class Fo{constructor(e){this.x=e.x,this.y=e.y}}class To extends CustomEvent{constructor(e){super(To.eventName,{detail:new Fo(e),bubbles:!0,composed:!0,cancelable:!1})}}To.eventName="dxbl:popup-dragstarted",gt.register(To.eventName,(e=>e.detail));class Ho{constructor(e){this.x=e.x,this.y=e.y}}class Uo extends CustomEvent{constructor(e){super(Uo.eventName,{detail:new Ho(e),bubbles:!0,composed:!0,cancelable:!0})}}Uo.eventName="dxbl-popup.drag";const Po="dxbl-popup-dragging";let Qo=class extends gs{constructor(){super(),this.allowDrag=!1,this.showCloseButton=!1}updated(e){(e.has("showCloseButton")||this.showCloseButton)&&this.preventCloseButtonDragging()}get handlePointerEventsMode(){return r.Dragging}get handlePointerEventsTarget(){return this}get hoverTitleElementsSelector(){return null}get bypassNonInlineHoverTitleElementChildSelector(){return null}shouldProcessPointerEvent(e){return!0}handlePointerEventsDelay(e){return s.Default}render(){return Xn`<slot></slot>`}preventCloseButtonDragging(){const e=this.querySelector(So);e&&e.addEventListener("pointerdown",(e=>{e.stopPropagation()}))}};C([An({type:Boolean,attribute:"allow-drag",reflect:!1})],Qo.prototype,"allowDrag",void 0),C([An({type:Boolean,attribute:"show-close-button",reflect:!1})],Qo.prototype,"showCloseButton",void 0),Qo=C([on("dxbl-popup-header")],Qo);class No{constructor(e,t,i,n){this.min=new et(e,t),this.max=new et(i,n)}}function Ro(e,t,i){const n=i.min,s=i.max;return new et(Lo(n.x,s.x,t.clientX+window.scrollX-e.x),Lo(n.y,s.y,t.clientY+window.scrollY-e.y))}function Lo(e,t,i){return Math.floor(Math.min(t,Math.max(e,i)))}class Mo{constructor(e,t,i,n,s=null){this.mainElement=e,this.onStart=t,this.onMove=i,this.onEnd=n,this.checkPermission=s,this.handlersAdded=!1,this.dragHandler=this.handleDragStart.bind(this)}addHandlers(){this.handlersAdded||(this.mainElement.addEventListener(a.eventName,this.dragHandler),this.handlersAdded=!0)}removeHandlers(){this.mainElement.removeEventListener(a.eventName,this.dragHandler),this.handlersAdded=!1}handleDragStart(e){if(null!==this.checkPermission&&!this.checkPermission())return;const t=e,i=function(e,t){const i=e.getBoundingClientRect();return new et(Math.floor(t.clientX-i.x),Math.floor(t.clientY-i.y))}(this.mainElement,t.detail.source),n=(s=i,new No(window.scrollX-s.x,window.scrollY-s.y,window.scrollX+window.innerWidth-s.x,window.scrollY+window.innerHeight-s.y));var s;const r=Ro(i,t.detail.source,n);let o=r,a=null;const A=e=>{0===e.buttons||(o=Ro(i,e,n),null!==a&&tt.areClose(a,o)||(a=o,this.onMove(a)))};document.addEventListener("pointermove",A,{passive:!0}),this.mainElement.addEventListener(l.eventName,(e=>{document.removeEventListener("pointermove",A);const t=e,s=Ro(i,t.detail.source,n);null!=a||(a=s),this.onEnd(0!==t.detail.source.buttons?s:a,r)}),{once:!0}),this.onStart(r)}}class ko extends gs{static get styles(){return fn`
            :host {
                display: flex;
            }
        `}connectedCallback(){super.connectedCallback(),n.setLoaded(this)}disconnectedCallback(){super.disconnectedCallback(),n.removeLoaded(this)}render(){return Xn`<slot></slot>`}}class Ko extends ko{get draggableElement(){return this.allowDragByHeaderOnly?this.header:this}get canDrag(){return this.allowDrag&&(null!==this.header||!this.allowDragByHeaderOnly)}constructor(){super(),this.allowDrag=!1,this.allowDragByHeaderOnly=!1,this.canDragByBody=!1,this.showHeader=!1,this.pointerEventsHelper=new q(this),this.dragHandler=new Mo(this,(e=>{this.style.cursor="move",this.style.userSelect="none",this.classList.add(Po),this.shadowRoot.dispatchEvent(new To(e))}),(e=>{this.shadowRoot.dispatchEvent(new Uo(e))}),((e,t)=>{this.style.cursor="",this.style.userSelect="",this.classList.remove(Po),this.shadowRoot.dispatchEvent(new Do(t,e))}),(()=>this.canDrag))}disconnectedCallback(){super.disconnectedCallback(),this.disposeDrag()}updated(e){(e.has("allowDrag")||e.has("allowDragByHeaderOnly")||e.has("showHeader"))&&this.updateDragging()}updateDragging(){this.allowDrag&&this.canDragByBody?(this.pointerEventsHelper.reinitialize(this.draggableElement),this.dragHandler.addHandlers()):this.disposeDrag()}disposeDrag(){this.dragHandler.removeHandlers(),this.pointerEventsHelper.dispose()}get handlePointerEventsMode(){return r.Dragging}get handlePointerEventsTarget(){return this}get hoverTitleElementsSelector(){return null}get bypassNonInlineHoverTitleElementChildSelector(){return null}shouldProcessPointerEvent(e){return!0}handlePointerEventsDelay(e){return s.Default}}C([An({type:Boolean,attribute:"allow-drag",reflect:!0})],Ko.prototype,"allowDrag",void 0),C([An({type:Boolean,attribute:"allow-drag-by-header-only",reflect:!0})],Ko.prototype,"allowDragByHeaderOnly",void 0),C([An({type:Boolean,attribute:"can-drag-by-body"})],Ko.prototype,"canDragByBody",void 0),C([An({type:Boolean,attribute:"show-header"})],Ko.prototype,"showHeader",void 0);const Oo=new ResizeObserver((e=>{for(const t of e){t.target.actualSize=new it(Math.round(t.contentRect.width),Math.round(t.contentRect.height))}}));const _o="0.25rem",Vo="--dxbl-popup-resize-container-width",zo="--dxbl-popup-resize-container-height";class Wo{constructor(e){this.width=e.width,this.height=e.height}}class $o extends CustomEvent{constructor(e){super($o.eventName,{detail:new Wo(e),bubbles:!0,composed:!0,cancelable:!1})}}$o.eventName="dxbl:popup-resizestarted",gt.register($o.eventName,(e=>e.detail));class Go{constructor(e){this.width=e.width,this.height=e.height}}class qo extends CustomEvent{constructor(e){super(qo.eventName,{detail:new Go(e),bubbles:!0,composed:!0,cancelable:!1})}}qo.eventName="dxbl:popup-resizecompleted",gt.register(qo.eventName,(e=>e.detail));class Yo{constructor(e,t,i,n,s,r){this.deltaWidth=e,this.deltaHeight=t,this.deltaX=i,this.deltaY=n,this.resizing=s,this.dragging=r}}class Xo extends CustomEvent{constructor(e,t,i,n,s,r){super(Xo.eventName,{detail:new Yo(e,t,i,n,s,r),bubbles:!0,composed:!0,cancelable:!1})}}Xo.eventName="dxbl:popup-layoutchange";class Jo{constructor(e,t){this.width=null,this.height=null,this.x=null,this.y=null,this.resizing=e,this.dragging=t}}class jo extends CustomEvent{constructor(e,t){super(jo.eventName,{detail:new Jo(e,t),bubbles:!0,composed:!0,cancelable:!1})}}jo.eventName="dxbl:popup-layoutchangestart",gt.register(jo.eventName,(e=>e.detail));class Zo{constructor(e,t){this.width=null,this.height=null,this.x=null,this.y=null,this.oldWidth=null,this.oldHeight=null,this.oldX=null,this.oldY=null,this.resizing=e,this.dragging=t}}class ea extends CustomEvent{constructor(e,t){super(ea.eventName,{detail:new Zo(e,t),bubbles:!0,composed:!0,cancelable:!1})}}ea.eventName="dxbl:popup-layoutchangeend",gt.register(ea.eventName,(e=>e.detail));class ta extends CustomEvent{constructor(e){super(ta.eventName,{detail:e,bubbles:!0,composed:!0})}}ta.eventName="dxbl-popup-resizer.onMoving";class ia extends gs{get lastX(){if(null===this.currentPosition)throw new Error("invalid state");return this.currentPosition.x}get lastY(){if(null===this.currentPosition)throw new Error("invalid state");return this.currentPosition.y}get topValue(){throw new Error("should be implemented")}get leftValue(){throw new Error("should be implemented")}get widthValue(){return _o}get heightValue(){return _o}get cursorValue(){throw new Error("should be implemented")}get isDragPossible(){return!1}constructor(){super(),this.currentPosition=null,this.pointerEventsHelper=new q(this),this.dragHandler=new Mo(this,(e=>{this.dispatchEvent(new ta(!0)),this.currentPosition=e,this.shadowRoot.dispatchEvent(new jo(!0,this.isDragPossible))}),(e=>{const t=this.getDeltaWidth(e.x),i=this.getDeltaHeight(e.y),n=this.getDeltaX(e.x),s=this.getDeltaY(e.y);this.currentPosition=e,this.shadowRoot.dispatchEvent(new Xo(t,i,n,s,!0,this.isDragPossible))}),((e,t)=>{this.dispatchEvent(new ta(!1)),this.currentPosition=null,this.shadowRoot.dispatchEvent(new ea(!0,this.isDragPossible))}))}connectedCallback(){super.connectedCallback(),this.pointerEventsHelper.initialize(),this.dragHandler.addHandlers()}disconnectedCallback(){super.disconnectedCallback(),this.pointerEventsHelper.dispose(),this.dragHandler.removeHandlers()}get handlePointerEventsMode(){return r.Dragging}get handlePointerEventsTarget(){return this}get hoverTitleElementsSelector(){return null}get bypassNonInlineHoverTitleElementChildSelector(){return null}shouldProcessPointerEvent(e){return!0}handlePointerEventsDelay(e){return s.Default}getDeltaWidth(e){throw new Error("should be implemented")}getDeltaHeight(e){throw new Error("should be implemented")}getDeltaX(e){throw new Error("should be implemented")}getDeltaY(e){throw new Error("should be implemented")}render(){return Xn`
    <style>
        :host {
            position: absolute;
            top: ${this.topValue};
            left: ${this.leftValue};
            width: 0px;
            height: 0px;
            z-index: 1;
            pointer-events: auto;

        }
        .dxbl-resize-handle {
            width: ${this.widthValue};
            height: ${this.heightValue};
            opacity: 0;
            cursor: ${this.cursorValue};
            z-index: 1;
        }
    </style>
    <div class="dxbl-resize-handle"></div>
`}}let na=class extends ia{get isDragPossible(){return!0}get topValue(){return"0%"}get leftValue(){return _o}get widthValue(){return`calc(var(${Vo}) - ${_o})`}get cursorValue(){return"ns-resize"}getDeltaWidth(e){return 0}getDeltaX(e){return 0}getDeltaHeight(e){return this.lastY-e}getDeltaY(e){return e-this.lastY}};na=C([on("dxbl-resize-top-edge")],na);let sa=class extends ia{get topValue(){return _o}get leftValue(){return"100%"}get heightValue(){return`calc(var(${zo}) - ${_o})`}get cursorValue(){return"ew-resize"}getDeltaWidth(e){return e-this.lastX}getDeltaX(e){return 0}getDeltaHeight(e){return 0}getDeltaY(e){return 0}};sa=C([on("dxbl-resize-right-edge")],sa);let ra=class extends ia{get topValue(){return"100%"}get leftValue(){return _o}get widthValue(){return`calc(var(${Vo}) - ${_o})`}get cursorValue(){return"ns-resize"}getDeltaWidth(e){return 0}getDeltaX(e){return 0}getDeltaHeight(e){return e-this.lastY}getDeltaY(e){return 0}};ra=C([on("dxbl-resize-bottom-edge")],ra);let oa=class extends ia{get isDragPossible(){return!0}get topValue(){return _o}get leftValue(){return"0%"}get heightValue(){return`calc(var(${zo}) - ${_o})`}get cursorValue(){return"ew-resize"}getDeltaWidth(e){return this.lastX-e}getDeltaX(e){return e-this.lastX}getDeltaHeight(e){return 0}getDeltaY(e){return 0}};oa=C([on("dxbl-resize-left-edge")],oa);let aa=class extends ia{get isDragPossible(){return!0}get topValue(){return"0%"}get leftValue(){return"0%"}get cursorValue(){return"se-resize"}getDeltaWidth(e){return this.lastX-e}getDeltaX(e){return e-this.lastX}getDeltaHeight(e){return this.lastY-e}getDeltaY(e){return e-this.lastY}};aa=C([on("dxbl-resize-tl-grip")],aa);let la=class extends ia{get isDragPossible(){return!0}get topValue(){return"0%"}get leftValue(){return"100%"}get cursorValue(){return"ne-resize"}getDeltaWidth(e){return e-this.lastX}getDeltaX(e){return 0}getDeltaHeight(e){return this.lastY-e}getDeltaY(e){return e-this.lastY}};la=C([on("dxbl-resize-tr-grip")],la);let Aa=class extends ia{get topValue(){return"100%"}get leftValue(){return"100%"}get cursorValue(){return"se-resize"}getDeltaWidth(e){return e-this.lastX}getDeltaX(e){return 0}getDeltaHeight(e){return e-this.lastY}getDeltaY(e){return 0}};Aa=C([on("dxbl-resize-br-grip")],Aa);let da=class extends ia{get isDragPossible(){return!0}get topValue(){return"100%"}get leftValue(){return"0%"}get cursorValue(){return"sw-resize"}getDeltaWidth(e){return this.lastX-e}getDeltaX(e){return e-this.lastX}getDeltaHeight(e){return e-this.lastY}getDeltaY(e){return 0}};da=C([on("dxbl-resize-bl-grip")],da);let ca=class extends gs{constructor(){super(...arguments),this._actualSize=null,this.appliedSize=null,this.widthAttrName=Vo,this.heightAttrName=zo,this.resizerMovingHandler=this.resizerMoving.bind(this)}get actualSize(){return this._actualSize}set actualSize(e){this._actualSize=e,requestAnimationFrame((()=>this.tryToUpdateSizeStyle()))}tryToUpdateSizeStyle(){null!==this._actualSize&&(null!==this.appliedSize&&this.appliedSize.width===this._actualSize.width||this.style.setProperty(Vo,`calc(${this._actualSize.width}px - ${_o})`),null!==this.appliedSize&&this.appliedSize.height===this._actualSize.height||this.style.setProperty(zo,`calc(${this._actualSize.height}px - ${_o})`),this.appliedSize=this._actualSize)}connectedCallback(){super.connectedCallback(),Oo.observe(this),this.addEventListener(ta.eventName,this.resizerMovingHandler)}disconnectedCallback(){super.disconnectedCallback(),Oo.unobserve(this),this.removeEventListener(ta.eventName,this.resizerMovingHandler)}resizerMoving(e){this.style.pointerEvents=e.detail?"none":""}render(){return Xn`
<style>
    :host {
        display: flex;
        flex: 1 1 auto;
        min-width: 0px;
        min-height: 0px;

        ${this.widthAttrName}: 0px;
        ${this.heightAttrName}: 0px;
    }
    .dxbl-popup-resizable-container {
        position: absolute;
        width: var(${this.widthAttrName});
        height: var(${this.heightAttrName});
        pointer-events: none;
    }
    .dxbl-popup-resizable-content {
        display: flex;
        flex-flow: column nowrap;
        flex: 1 1 auto;
        overflow: hidden;
        border-radius: var(--dxbl-popup-border-radius);
    }
</style>
<div class="dxbl-popup-resizable-container">
    <dxbl-resize-top-edge></dxbl-resize-top-edge>
    <dxbl-resize-right-edge></dxbl-resize-right-edge>
    <dxbl-resize-bottom-edge></dxbl-resize-bottom-edge>
    <dxbl-resize-left-edge></dxbl-resize-left-edge>
    <dxbl-resize-tl-grip></dxbl-resize-tl-grip>
    <dxbl-resize-tr-grip></dxbl-resize-tr-grip>
    <dxbl-resize-br-grip></dxbl-resize-br-grip>
    <dxbl-resize-bl-grip></dxbl-resize-bl-grip>
</div>
<div class="dxbl-popup-resizable-content">
    <slot></slot>
</div>
`}};ca=C([on("dxbl-popup-resizable-container")],ca);const ha=document.createElement("DIV");function ua(e,t){if(null===e)return 0;const i=ha.cloneNode();i.style.width=e;(t||document.body).appendChild(i);const n=i.offsetWidth;return i.remove(),n}function pa(e){e.addEventListener(Uo.eventName,(t=>{t.stopImmediatePropagation();const i=t;e.positionX=i.detail.x,e.positionY=i.detail.y}),{passive:!0}),e.addEventListener(jo.eventName,(t=>{const i=t,n=e.getBoundingClientRect();e.classList.add(Io.PopupResized),e.sizeDirty=!0,e.actualPosition=new et(window.scrollX+n.x,window.scrollY+n.y),e.actualSize=new it(n.width,n.height),e.initialPosition=e.actualPosition,e.initialSize=e.actualSize,e.actualMinWidth=ua(e.minWidth,e),e.actualMinHeight=ua(e.minHeight,e),e.actualMaxWidth=ua(e.maxWidth,e)||Number.MAX_VALUE,e.actualMaxHeight=ua(e.maxHeight,e)||Number.MAX_VALUE,i.detail.width=e.initialSize.width,i.detail.height=e.initialSize.height,i.detail.x=e.initialPosition.x,i.detail.y=e.initialPosition.y})),e.addEventListener(ea.eventName,(t=>{const i=t;i.detail.width=e.actualSize.width,i.detail.height=e.actualSize.height,i.detail.x=e.actualPosition.x,i.detail.y=e.actualPosition.y,i.detail.oldWidth=e.initialSize.width,i.detail.oldHeight=e.initialSize.height,i.detail.oldX=e.initialPosition.x,i.detail.oldY=e.initialPosition.y})),e.addEventListener(Xo.eventName,(t=>{const i=t.detail,n=e.actualSize;e.actualSize=new it(Math.max(e.actualMinWidth,Math.min(e.actualMaxWidth,e.actualSize.width+i.deltaWidth)),Math.max(e.actualMinHeight,Math.min(e.actualMaxHeight,e.actualSize.height+i.deltaHeight)));e.actualPosition=new et(e.actualPosition.x+(n.width-e.actualSize.width!=0?i.deltaX:0),e.actualPosition.y+(n.height-e.actualSize.height!=0?i.deltaY:0)),e.positionX=e.actualPosition.x,e.positionY=e.actualPosition.y,e.width=e.actualSize.width+"px",e.height=e.actualSize.height+"px"}),{passive:!0})}ha.style.position="absolute",ha.style.top="-1000px",ha.style.left="-1000px",ha.style.visibility="hidden";const ma="dxbl-modal-dialog";let ga=class extends Ko{get header(){return this.querySelector(".dxbl-popup-header")}get actualSize(){return this._actualSize}set actualSize(e){this._actualSize=e}constructor(){super(),this._actualSize=null,this.actualPosition=null,this.initialSize=null,this.initialPosition=null,this.actualMinWidth=null,this.actualMaxWidth=null,this.actualMinHeight=null,this.actualMaxHeight=null,this.sizeDirty=!1,this.cssTextToApply="",this.popup=null,this.positionY=null,this.positionX=null,this.allowResize=!1,this.width=null,this.height=null,this.minWidth=null,this.minHeight=null,this.maxWidth=null,this.maxHeight=null,this.dialogCssStyle="",pa(this)}connectedCallback(){super.connectedCallback(),this.popup=this.closest(Qa),this.popup.notifyDialogConnected(this)}disconnectedCallback(){var e;super.disconnectedCallback(),null===(e=this.popup)||void 0===e||e.notifyDialogDisconnected(),this.popup=null}updated(e){super.updated(e),this.mapCssTextToApply()}render(){return this.allowResize?Xn`<dxbl-popup-resizable-container><slot></slot></dxbl-popup-resizable-container>`:Xn`<slot></slot>`}setSize(e,t){this.width=e,this.height=t,this.mapCssTextToApply()}mapCssTextToApply(){const e=[],t=[];this.dialogCssStyle&&t.push(this.dialogCssStyle),null!==this.positionX&&(e.push(`translateX(${this.positionX}px)`),t.push("margin-left: 0;"),t.push("margin-right: 0;"),t.push("left: 0;")),null!==this.positionY&&(e.push(`translateY(${this.positionY}px)`),t.push("margin-top: 0;"),t.push("margin-bottom: 0;"),t.push("top: 0;")),this.width&&t.push(`width: ${this.width}`),this.height&&t.push(`height: ${this.height}`),e.length>0&&(t.push("position: absolute"),t.push(`transform: ${e.join(" ")}`)),this.cssTextToApply=t.join("; "),requestAnimationFrame((()=>this.style.cssText=this.cssTextToApply))}};C([An({type:Number,attribute:"position-y",reflect:!1})],ga.prototype,"positionY",void 0),C([An({type:Number,attribute:"position-x",reflect:!1})],ga.prototype,"positionX",void 0),C([An({type:Boolean,attribute:"allow-resize",reflect:!1})],ga.prototype,"allowResize",void 0),C([An({type:String,attribute:"width",reflect:!1})],ga.prototype,"width",void 0),C([An({type:String,attribute:"height",reflect:!1})],ga.prototype,"height",void 0),C([An({type:String,attribute:"min-width",reflect:!1})],ga.prototype,"minWidth",void 0),C([An({type:String,attribute:"min-height",reflect:!1})],ga.prototype,"minHeight",void 0),C([An({type:String,attribute:"max-width",reflect:!1})],ga.prototype,"maxWidth",void 0),C([An({type:String,attribute:"max-height",reflect:!1})],ga.prototype,"maxHeight",void 0),C([An({type:String,attribute:"dialog-css-style",reflect:!1})],ga.prototype,"dialogCssStyle",void 0),ga=C([on(ma)],ga);const Ca="dxbl-dropdown-dialog";let fa=class extends ko{createRenderRoot(){return this}};var va;fa=C([on(Ca)],fa);var ba;!function(e){e.top="top",e.bottom="bottom",e.end="end",e.start="start"}(ba||(ba={}));let wa=va=class extends gs{constructor(){super(...arguments),this.slotChangedHandler=this.handleSlotChanged.bind(this),this.arrow=null,this._alignment=ba.bottom,this.position=br.zero,this.serverClass=null,this.clientClass=null,this.cssClass=null}get alignment(){return this._alignment}set alignment(e){const t=this._alignment;this._alignment=e,this.clientClass=this.calcClientCssClass(e),this.requestUpdate("alignment",t)}calcClientCssClass(e){return`dxbl-popover-${e}`}get arrowSize(){return this.arrow?va.calcSizeWithMargins(this.arrow,ot.getRelativeElementRect(this.arrow).size):it.Empty}static calcSizeWithMargins(e,t){const i=window.getComputedStyle(e),n=parseFloat(i.marginLeft),s=parseFloat(i.marginRight),r=parseFloat(i.marginTop),o=parseFloat(i.marginBottom);return new it(t.width+n+s,t.height+r+o)}static get styles(){return fn`
            :host {
                display: block;
            }
        }`}willUpdate(e){if(e.has("serverClass")||e.has("clientClass")){const e=[];this.clientClass&&this.clientClass.split(" ").forEach((t=>e.push(t))),this.serverClass&&this.serverClass.split(" ").forEach((t=>e.push(t))),this.cssClass=e.join(" ")}}updated(e){if(this.arrow&&e.has("position"))switch(this.alignment){case ba.bottom:this.arrow.style.transform=Br.translateWithoutFloor(Math.floor(this.position.x),.5);break;case ba.top:this.arrow.style.transform=Br.translateWithoutFloor(Math.floor(this.position.x),-.5);break;case ba.start:this.arrow.style.transform=Br.translateWithoutFloor(-.5,Math.floor(this.position.y));break;case ba.end:this.arrow.style.transform=Br.translateWithoutFloor(.5,Math.floor(this.position.y))}e.has("cssClass")&&(this.className=this.cssClass?this.cssClass:"")}render(){return Xn`
            <slot @slotchange="${this.slotChangedHandler}"></slot>
        `}handleSlotChanged(e){const t=e.target.assignedNodes();for(const e in t){const i=t[e];if(i instanceof HTMLElement){this.arrow=i;break}}}};C([An({reflect:!1})],wa.prototype,"position",void 0),C([An({type:String,attribute:"server-class"})],wa.prototype,"serverClass",void 0),C([An({reflect:!1})],wa.prototype,"clientClass",void 0),C([An({reflect:!1})],wa.prototype,"cssClass",void 0),C([An({reflect:!1})],wa.prototype,"alignment",null),wa=va=C([on("dxbl-flyout-arrow")],wa);const ya="dxbl-flyout-dialog";var Ba;!function(e){e.Fade="fade",e.None="none"}(Ba||(Ba={}));let Ea=class extends ko{constructor(){super(...arguments),this.arrowSlotChangeHandler=this.handleArrowSlotChange.bind(this),this._arrow=null,this._arrowAlignment=ba.bottom,this.serverClass=null,this.cssClass=null,this.animationType=Ba.Fade,this.animationEnabled=!1}get arrow(){return this._arrow}get arrowAlignment(){return this._arrowAlignment}set arrowAlignment(e){this._arrowAlignment=e}calcAnimationTypeCssClass(){return`dxbl-flyout-dialog-${this.animationType} dxbl-flyout-dialog-show`}willUpdate(e){if(e.has("serverClass")||e.has("animationEnabled")||e.has("animationType")){const e=[];if(this.serverClass&&this.serverClass.split(" ").forEach((t=>e.push(t))),this.animationEnabled&&this.animationType!==Ba.None){const t=e.indexOf(`dxbl-flyout-dialog-${this.animationType}`,0),i=this.calcAnimationTypeCssClass();t>-1?e.splice(t,1,i):e.push(i)}this.cssClass=e.join(" ")}}updated(e){e.has("cssClass")&&(this.className=this.cssClass?this.cssClass:"")}render(){return Xn`
            <slot></slot>
            <slot name="arrow" @slotchange="${this.arrowSlotChangeHandler}"></slot>
        `}handleArrowSlotChange(e){const t=e.target.assignedNodes();this._arrow=t[0]}};C([An({type:String,attribute:"server-class"})],Ea.prototype,"serverClass",void 0),C([An({reflect:!1})],Ea.prototype,"cssClass",void 0),C([An({type:String,attribute:"animation-type"})],Ea.prototype,"animationType",void 0),C([An({type:Boolean,reflect:!1})],Ea.prototype,"animationEnabled",void 0),Ea=C([on(ya)],Ea);class Ia extends Mi{constructor(e,t,i=!1){super(e,t,i),this.portalPath=[],this.closedWithKeyboard=!1,this.addEventSubscriptions()}get popupNavigator(){return super.navigator}get portal(){var e;return null===(e=this.popupNavigator)||void 0===e?void 0:e.getPortal()}canSwitchToNestedContentMode(){return!0}handleKeyDown(e){if(super.handleKeyDown(e))return!0;if(this.nestedContentSelected)return!1;switch(Be.KeyUtils.getEventKeyCode(e)){case Be.KeyCode.Tab:return this.switchToNestedContent();case Be.KeyCode.Esc:return this.closedWithKeyboard=!0,!0}return!1}onPopupShown(){this.handlePopupShown()}handlePopupShown(){this.portal&&(this.portalPath=Array.from(ot.getRootPathAndSelf(this.portal))),this.activatePopupContent()}activatePopupContent(){fi.makeElementFocusable(this.targetElement),this.activate()}onPopupClosed(){this.removeEventSubscriptions(),this.handlePopupClosed(),this.closedWithKeyboard=!1}handlePopupClosed(){this.focusElementInRootPath(!0)}focusElementInRootPath(e=!1,t=null){const i=this.portalPath.filter((e=>e.isConnected&&e.tabIndex>=0&&"dxbl-popup-portal"!==e.tagName.toLowerCase()));if(i.length>0&&this.navigator.isActive){const e=fi.findFocusableElementInRootPath(i[0]);return e&&(this.popupNavigator.syncFocusHiddenStateWithOwner(e),fi.focusElement(e)),!0}return!1}}class Sa extends Ia{constructor(e,t,i=!1){super(e,t,i)}activatePopupContent(){super.activatePopupContent(),this.focusSelectedItem()}onPopupVisibleChanged(e){e.detail.visible&&this.onPopupShown()}addEventSubscriptions(){this.boundOnPopupVisibleChangedHandler&&this.boundOnPopupClosedHandler||(this.boundOnPopupVisibleChangedHandler=this.onPopupVisibleChanged.bind(this),this.boundOnPopupClosedHandler=this.onPopupClosed.bind(this)),this.targetElement.addEventListener(po.eventName,this.boundOnPopupVisibleChangedHandler),this.targetElement.addEventListener(lo.eventName,this.boundOnPopupClosedHandler)}removeEventSubscriptions(){this.targetElement.removeEventListener(po.eventName,this.boundOnPopupVisibleChangedHandler),this.targetElement.removeEventListener(lo.eventName,this.boundOnPopupClosedHandler)}}class xa extends Sa{constructor(e,t){super(e,t)}handleKeyDown(e){return Be.KeyUtils.getEventKeyCode(e)!==Be.KeyCode.Tab&&super.handleKeyDown(e)}onPopupShown(){super.onPopupShown(),this.switchToNestedContent()}onPopupClosed(){this.leaveFromNestedContent(),super.onPopupClosed()}switchToNestedContent(){return!!super.switchToNestedContent()&&(Kr.activate(this.selectedItemElement,!1,!0),!0)}leaveFromNestedContent(){super.leaveFromNestedContent(),Kr.deactivate(this.selectedItemElement,!1)}}class Da extends xa{constructor(e,t){super(e,t)}queryItems(){return this.queryItemsBySelector(Ca)}onPopupShown(){super.onPopupShown(),this.switchToNestedContent()}}class Fa extends Sa{constructor(e,t,i=!1){super(e,t,i)}get windowIsOpened(){return this.targetElement.isOpen}queryItems(){return this.queryItemsBySelector(hr)}getNestedContentElement(){const e=fi.findFocusableElements(this.selectedItemElement);if(e.length>0){const t=e.filter((e=>!e.matches('[data-qa-selector="dx-popup-close-button"]')));return t.length>0?t[0]:e[0]}return null}addEventSubscriptions(){super.addEventSubscriptions(),this.boundOnPopupKeyboardStrategyActivateHandler||(this.boundOnPopupKeyboardStrategyActivateHandler=this.handleWindowKeyboardStrategyActivate.bind(this)),this.boundOnPopupRootBlurHandler||(this.boundOnPopupRootBlurHandler=this.handlePopupRootBlur.bind(this)),this.targetElement.addEventListener(mo.eventName,this.boundOnPopupKeyboardStrategyActivateHandler);const e=document.querySelector(Ar);null==e||e.addEventListener("blur",this.boundOnPopupRootBlurHandler)}handleWindowKeyboardStrategyActivate(e){e.detail.visible&&this.activatePopupContent()}handlePopupRootBlur(){this.windowIsOpened&&(this.targetElement.toggleAttribute("inert"),this.boundOnDocumentFocusInHandler=this.handleDocumentFocusIn.bind(this),document.addEventListener("focusin",this.boundOnDocumentFocusInHandler))}handleDocumentFocusIn(e){this.targetElement.toggleAttribute("inert"),document.removeEventListener("focusin",this.boundOnDocumentFocusInHandler)}removeEventSubscriptions(){super.removeEventSubscriptions(),this.targetElement.removeEventListener(mo.eventName,this.boundOnPopupKeyboardStrategyActivateHandler);const e=document.querySelector(Ar);null==e||e.removeEventListener("blur",this.boundOnPopupRootBlurHandler)}focusElementInRootPath(e=!1,t=null){if(!super.focusElementInRootPath(e,t)&&this.portal){const i=fi.findPrevFocusableElement(this.portal),n=fi.findNextFocusableNotChildElement(this.portal),s=e?null!=i?i:n:t===Ni.Backward?i:n;if(s&&!this.popupNavigator.isFocusHiddenState())return fi.focusElement(s),!0}return!1}handleKeyDown(e){return Be.KeyUtils.getEventKeyCode(e)!==Be.KeyCode.Tab||this.nestedContentSelected?super.handleKeyDown(e):(this.leavePopupContent(e.shiftKey?Ni.Backward:Ni.Forward),!0)}activatePopupContent(){super.activatePopupContent(),this.switchToNestedContent()}onPopupShown(){this.portal&&fi.makeElementFocusable(this.portal),super.onPopupShown()}onPopupClosed(){this.leaveFromNestedContent(),super.onPopupClosed(),this.portal&&fi.removeTabIndex(this.portal)}leaveTransitContainer(e){this.leavePopupContent(e)}leavePopupContent(e){this.popupNavigator.leaveFromNavigator(),fi.removeTabIndex(this.targetElement),this.focusElementInRootPath(!1,e)}}class Ta extends xa{constructor(e,t){super(e,t)}queryItems(){return this.queryItemsBySelector(ya)}onPopupShown(){super.onPopupShown(),this.switchToNestedContent()}}class Ha extends Sa{constructor(e,t){super(e,t)}queryItems(){return this.queryItemsBySelector(Ca)}}class Ua extends Ia{constructor(e,t){super(e,t)}queryItems(){return this.queryItemsBySelector(ma)}activatePopupContent(){super.activatePopupContent(),this.switchToNestedContent()}handleKeyDown(e){return Be.KeyUtils.getEventKeyCode(e)!==Be.KeyCode.Tab&&super.handleKeyDown(e)}onModalFocusChange(e){e.detail.isFocused?this.onPopupShown():this.onPopupClosed()}addEventSubscriptions(){this.boundOnModalFocusChangeHandler||(this.boundOnModalFocusChangeHandler=this.onModalFocusChange.bind(this)),this.targetElement.addEventListener(uo.eventName,this.boundOnModalFocusChangeHandler)}removeEventSubscriptions(){this.targetElement.removeEventListener(uo.eventName,this.boundOnModalFocusChangeHandler)}}var Pa;customElements.define(ur,class extends Li{get popupOwner(){return super.owner}initialize(e,t){super.initialize(e,t)}onContentChanged(){var e;const t="BODY"===(null===(e=document.activeElement)||void 0===e?void 0:e.tagName)&&"DXBL-MODAL"===this.targetElement.tagName&&this.getIsNestedContentSelected(this.targetElement);t&&(this.isActive=!0),super.onContentChanged(),t&&this.rootStrategy&&this.rootStrategy.activatePopupContent()}getPortal(){var e,t;return null!==(t=null===(e=this.popupOwner)||void 0===e?void 0:e.getPortal())&&void 0!==t?t:null}syncFocusHiddenStateWithOwner(e){this.isFocusHiddenState()&&this.passFocusHiddenAttribute(e)}isFocusHiddenState(){return xi(this.targetElement)}});const Qa="dxbl-modal",Na=e=>e;class Ra{constructor(e){this.closeReason=e}}class La extends CustomEvent{constructor(e){super(La.eventName,{detail:new Ra(e),bubbles:!0,composed:!0,cancelable:!0})}}La.eventName=Qa+".closingRequested",gt.register(La.eventName,(e=>e.detail));class Ma extends CustomEvent{constructor(e){super(Ma.eventName,{detail:new Ra(e),bubbles:!0,composed:!0,cancelable:!0})}}Ma.eventName=Qa+".closingResultRequested",gt.register(Ma.eventName,(e=>e.detail));class ka{constructor(){this.callingElement=null}catch(){document.activeElement&&(this.callingElement=document.activeElement)}restore(){this.callingElement&&(mt.restoreFocus(this.callingElement),this.callingElement=null)}}let Ka=Pa=class extends Qr{constructor(){super(...arguments),this.focusReturnState=new ka,this._positionChangedEvent=new Pr,this.shadowSlotChangedHandler=this.handleShadowSlotChange.bind(this),this.topShadowBranchChangedHandler=this.handleTopShadowBranchChanged.bind(this),this.dragStartHandler=this.handleDragStart.bind(this),this.dragEndHandler=this.handleDragEnd.bind(this),this.resizeStartHandler=this.handleResizeStart.bind(this),this.resizeEndHandler=this.handleResizeEnd.bind(this),this.shadow=null,this.closingResultRequestedTcs=new Tr,this.shownCompletedTcs=new Tr,this.popupDialog=null,this._zIndex=0,this.modal=null,this.shadingChangedEvent=new Ur,this._capturedElementReleaseCallback=null,this._isOpen=!1,this.shading=!1,this.closeOnOutsideClick=!1,this.closeOnEscape=!1,this.closeOnPointerUp=!1,this.autoZIndex=!1,this.zIndex=0,this.shadowVisible=!1,this.topShadowBranchId=null,this.hasServerSideClosing=!1,this.disableFocusTrap=!1,this.width="",this.height="",this.isDragging=!1,this.isResizing=!1,this.capturingAction=this.capturing,this.releasingCaptureAction=this.releaseFocusTrap}static fromElement(e){for(;null!==e&&!(e instanceof Pa);)e=e.parentElement;return e}get positionChanged(){return this._positionChangedEvent}get renderedVisible(){return!0}get isOpen(){return this._isOpen}get branchType(){return Us.Modal}get preventInteractions(){return!0}get isCloseOnPointerUp(){return this.closeOnPointerUp}render(){return Xn`
            <dxbl-branch
                id="branch"
                branch-id="${this.branchId}"
                parent-branch-id="${this.parentBranchId}"
                type="${this.branchType}">
                ${this.renderShadow()}
                ${this.renderDefaultSlot()}
            </dxbl-branch>
        `}renderDefaultSlot(){return Xn`<slot></slot>`}renderShadow(){return Xn`<slot name="shadow" @slotchange="${this.shadowSlotChangedHandler}"></slot>`}handleShadowSlotChange(e){const t=e.target.assignedNodes();this.shadow=t.find((e=>e instanceof HTMLElement))}get shadingChanged(){return this.shadingChangedEvent}connectedCallback(){super.connectedCallback(),this.subscribeToEvents(),this.raiseZIndexChange()}disconnectedCallback(){super.disconnectedCallback(),this.unsubscribeFromEvents(),this.close()}show(){return this.isOpen||(this._isOpen=!0,this.initializeCapture(),this.initializeBodyScrollLock(),this.addToVisibleBranchTree(),this.raiseAdjustZIndexRequest(!0),this.raiseShown()),this.shownCompletedTcs.promise}raiseAdjustZIndexRequest(e){this.dispatchEvent(new uo(new ho(this.branchId,e)))}close(){this.isOpen&&(this._isOpen=!1,this.releaseCapture(),this.releaseBodyScrollLock(),this.removeFromVisibleBranchTree(),this.raiseAdjustZIndexRequest(!1),this.raiseClosed())}raiseShown(){const e=new oo;this.dispatchEvent(new ao(e))}raiseClosed(){const e=new oo;this.dispatchEvent(new lo(e))}willUpdate(e){this.shadowVisible=this.shading&&this.isOpen&&!!this.branchId&&this.branchId===this.topShadowBranchId}updated(e){var t;this.shadow&&e.has(Na("shadowVisible"))&&(this.shadow.style.display=this.shadowVisible?P.block:P.none),e.has(Na("zIndex"))&&(this.style.zIndex=this.autoZIndex?"":String(this.zIndex),this.raiseZIndexChange()),(e.has("width")||e.has("height"))&&(null===(t=this.popupDialog)||void 0===t||t.setSize(this.width,this.height))}ensureBranchId(){if(!this.branchId)throw new Error("branchId should not be null")}addToVisibleBranchTree(){this.ensureBranchId(),Ls.register(this.branchId),wo.register(this.branchId),this.raiseBranchRefreshed()}removeFromVisibleBranchTree(){this.ensureBranchId(),Ls.unregister(this.branchId),wo.unregister(this.branchId),this.raiseBranchRefreshed()}initializeBodyScrollLock(){Bo.register(this.branchId)}releaseBodyScrollLock(){Bo.unregister(this.branchId)}subscribeToEvents(){wo.shadowBranchChanged.subscribe(this.topShadowBranchChangedHandler),this.addEventListener(To.eventName,this.dragStartHandler),this.addEventListener(Do.eventName,this.dragEndHandler),this.addEventListener(jo.eventName,this.resizeStartHandler),this.addEventListener(ea.eventName,this.resizeEndHandler)}unsubscribeFromEvents(){wo.shadowBranchChanged.unsubscribe(this.topShadowBranchChangedHandler),this.removeEventListener(To.eventName,this.dragStartHandler),this.removeEventListener(Do.eventName,this.dragEndHandler),this.removeEventListener(jo.eventName,this.resizeStartHandler),this.removeEventListener(ea.eventName,this.resizeEndHandler)}handleTopShadowBranchChanged(e){this.topShadowBranchId=e.branch}handleDragStart(e){this.isDragging=!0}handleDragEnd(e){this.isDragging=!1}handleResizeStart(e){this.isResizing=!0}handleResizeEnd(e){this.isResizing=!1}initializeCapture(){this.focusReturnState.catch();const e=document.querySelector("dxbl-popup-root");e&&(this._capturedElementReleaseCallback=e.subscribe(this))}releaseCapture(){this.processClosingRequested(!0),this._capturedElementReleaseCallback&&(this._capturedElementReleaseCallback(),this._capturedElementReleaseCallback=null),this.focusReturnState.restore()}processClosingRequested(e){this.closingResultRequestedTcs.resolve(e),this.closingResultRequestedTcs=new Tr}notifyDialogConnected(e){this.popupDialog=e,this.initializeKeyboardNavigator(),this.initializeFocusTrap()}notifyRootConnected(){requestAnimationFrame((()=>{setTimeout((()=>{this.shownCompletedTcs.tryResolve()}))}))}notifyDialogDisconnected(){this.disposeKeyboardNavigator(),this.releaseFocusTrap(!0),this.popupDialog=null}notifyRootDisconnected(){this.shownCompletedTcs.tryReject("cancelled"),this.shownCompletedTcs=new Tr}capturing(){this.activate(),this.initializeFocusTrap()}initializeFocusTrap(){this.isOpen&&this.popupDialog&&!this.disableFocusTrap&&Kr.activate(this.popupDialog,!0,!!this.keyboardNavigator)}releaseFocusTrap(e=null){null===e&&(e=!this.isOpen),Kr.deactivate(this.popupDialog,e)}activate(){const e=new Os(new ks(this.branchId));this.dispatchEvent(e)}notifyCloseCanceled(){this.processClosingRequested(!1)}get isPreventPropagation(){return this.preventInteractions}async processCapturedPointerAsync(e,t){t.handled||this.isPointedCaptured(e)||(t.nextInteractionHandled=!0,this.closeOnOutsideClick&&await this.closeAsync(t,Hr.OutsideClick))}isPointedCaptured(e){return!(!this.closeOnPointerUp||!this.isDragging&&!this.isResizing)||K.containsInComposedPath(e,this.popupDialog)}async processCapturedKeyDownAsync(e,t){t.handled||this.closeOnEscape&&"Escape"===e.key&&await this.processEscape(e,t)}async processEscape(e,t){const i=await this.raiseClosingResultRequestedAsync(Hr.EscapePress);this.closingResultRequestedTcs=new Tr,i||(t.handled=!0)}async closeAsync(e,t){const i=await this.raiseClosingResultRequestedAsync(t);return this.closingResultRequestedTcs=new Tr,e.nextInteractionHandled=!0,e.handled=!0,Promise.resolve(!!i)}async closeHierarchyAsync(e,t,i){for(const e of Ls.iterateBranch(this.branchId)){const n=await mr().getPopup(e);await(null==n?void 0:n.closeAsync(t,i))}await this.closeAsync(t,i)}async raiseClosingResultRequestedAsync(e){if(!this.hasServerSideClosing)return this.raiseClosingRequested(e),!0;const t=new Tr;return this.closingResultRequestedTcs=t,this.raiseClosingResultRequested(e),t.promise}raiseClosingRequested(e){setTimeout((()=>{this.dispatchEvent(new La(e))}))}raiseClosingResultRequested(e){this.dispatchEvent(new Ma(e))}raiseBranchRefreshed(){const e=new Ks(new ks(this.branchId));this.dispatchEvent(e)}raiseZIndexChange(){this.updateComplete.then((e=>{this.dispatchEvent(new co(new Ao(this.zIndex)))}))}initializeKeyboardNavigator(){var e,t,i;if(this.keyboardNavigator||(this.keyboardNavigator=this.querySelector(ur)),this.keyboardNavigator&&!this.keyboardNavigator.initialized){const n=new Co({createModal:(e,t)=>new Ua(e,t)});null===(e=this.getPortal())||void 0===e||e.dispatchEvent(n);const s=null===(i=null===(t=n.detail.factory)||void 0===t?void 0:t.createModal)||void 0===i?void 0:i.call(t,this.keyboardNavigator,this);s&&this.keyboardNavigator.initialize(this,s)}}disposeKeyboardNavigator(){var e;null===(e=this.keyboardNavigator)||void 0===e||e.disposeComponent()}getPortal(){return _a.getPortal(this.branchId)}};C([An({type:Boolean,attribute:"x-is-open",reflect:!0,converter:{fromAttribute:(e,t)=>{throw new Error("readonly")}}})],Ka.prototype,"_isOpen",void 0),C([An({type:Boolean,attribute:"shading"})],Ka.prototype,"shading",void 0),C([An({type:Boolean,attribute:"close-on-outside-click"})],Ka.prototype,"closeOnOutsideClick",void 0),C([An({type:Boolean,attribute:"close-on-escape"})],Ka.prototype,"closeOnEscape",void 0),C([An({type:Boolean,attribute:"close-on-pointer-up"})],Ka.prototype,"closeOnPointerUp",void 0),C([An({type:Boolean,attribute:"auto-z-index"})],Ka.prototype,"autoZIndex",void 0),C([An({type:Number,attribute:"z-index"})],Ka.prototype,"zIndex",void 0),C([An({type:String,attribute:"branch-id"})],Ka.prototype,"branchId",void 0),C([An({type:String,attribute:"parent-branch-id"})],Ka.prototype,"parentBranchId",void 0),C([An({reflect:!1})],Ka.prototype,"shadowVisible",void 0),C([An({reflect:!1})],Ka.prototype,"topShadowBranchId",void 0),C([An({type:Boolean,attribute:"has-serverside-closing"})],Ka.prototype,"hasServerSideClosing",void 0),C([An({type:Boolean,attribute:"disable-focus-trap"})],Ka.prototype,"disableFocusTrap",void 0),C([An({type:String,attribute:"width"})],Ka.prototype,"width",void 0),C([An({type:String,attribute:"height"})],Ka.prototype,"height",void 0),Ka=Pa=C([on(Qa)],Ka);const Oa=document.createElement("template");Oa.innerHTML="<"+vo+' class="'+vo+'" />';class _a{static getPortal(e){return Va.getPortal(e)}static getPortalFrom(e){var t,i;const n=(null===(t=fo.fromElement(e))||void 0===t?void 0:t.getPortal())||(null===(i=Ka.fromElement(e))||void 0===i?void 0:i.getPortal());return n||null}}const Va=new class{constructor(){this.portals=new Map}addPortal(e,t){this.portals.set(e,t)}removePortal(e){this.portals.delete(e)}getPortal(e){return this.portals.get(e)}};let za=class extends gs{constructor(){super(...arguments),this.activateLocker=new ir,this.portalsMapping=new Map,this.portals=new Map,this.rafAction=new lr,this.focusInHandler=this.handleFocusIn.bind(this),this.adjustZIndexRequestHandler=this.adjustZIndexRequest.bind(this),this.branchCreatedHandler=this.handleBranchCreated.bind(this),this.branchUpdatedHandler=this.handleBranchUpdated.bind(this),this.branchRemovedHandler=this.handleBranchRemoved.bind(this),this.branchActivatedHandler=this.handleBranchActivated.bind(this),this.branchRefreshedHandler=this.handleBranchRefreshed.bind(this),this.captureManager=new ar}createRenderRoot(){return this}assign(e){if(this.portals.has(e)||!e.branchId)return;const t=this.selectTemplate(e);this.appendChild(t);const i=this.children[this.children.length-1];i.setPortal(e),this.portalsMapping.set(e.branchId,e),this.portals.set(e,i),Va.addPortal(e.branchId,e)}release(e){const t=this.portals.get(e);this.portalsMapping.delete(e.branchId),Va.removePortal(e.branchId),this.portals.delete(e),t&&this.removeChild(t)}connectedCallback(){super.connectedCallback(),this.tabIndex=0,this.addEventListener("focusin",this.focusInHandler,{capture:!0}),this.addEventListener(uo.eventName,this.adjustZIndexRequestHandler),this.addEventListener(zs.eventName,this.branchCreatedHandler),this.addEventListener(_s.eventName,this.branchUpdatedHandler),this.addEventListener(Vs.eventName,this.branchRemovedHandler),this.addEventListener(Os.eventName,this.branchActivatedHandler),this.addEventListener(Ks.eventName,this.branchRefreshedHandler)}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("focusin",this.focusInHandler),this.removeEventListener(uo.eventName,this.adjustZIndexRequestHandler),this.removeEventListener(zs.eventName,this.branchCreatedHandler),this.removeEventListener(_s.eventName,this.branchUpdatedHandler),this.removeEventListener(Vs.eventName,this.branchRemovedHandler),this.removeEventListener(Os.eventName,this.branchActivatedHandler),this.removeEventListener(Ks.eventName,this.branchRefreshedHandler)}handleFocusIn(e){this.rafAction.cancel();e.target===this&&(H.markHandled(e),this.rafAction.execute((()=>this.blur())))}handleBranchCreated(e){Rs.add(e.detail.id,e.detail.parentId,e.detail.type),this.assignZIndices()}handleBranchUpdated(e){Rs.remove(e.detail.id),Rs.add(e.detail.id,e.detail.parentId,e.detail.type),this.assignZIndices()}handleBranchRemoved(e){Rs.remove(e.detail.id),this.assignZIndices()}handleBranchActivated(e){const t=e.detail.id;if(!Ls.activate(t)){const e=this.portalsMapping.get(t);if(!e)return;const i=e.popupBase;return i&&this.captureManager.capture(i),void this.assignZIndices()}const i=[];for(const e of Ls.iterateBranch(t)){const n=this.portalsMapping.get(e);if(i.push(n.popup),e===t)break}if(i.length>0)i.forEach((e=>this.captureManager.releaseCapture(e))),i.forEach((e=>this.captureManager.capture(e)));else{const e=this.portalsMapping.get(t);this.captureManager.capture(e.popupBase)}this.assignZIndices()}handleBranchRefreshed(e){this.assignZIndices()}assignZIndices(){Ls.refresh();for(const e of this.portals.keys()){const t=e.branchId;this.portals.get(e).baseZIndex=Ls.getIndex(t)}}adjustZIndexRequest(e){const t=e.detail.branchId;this.isBranchExistsInDom(t)&&(e.detail.isFocused&&Ls.setTopMostBranch(t),this.assignZIndices())}isBranchExistsInDom(e){const t=this.portalsMapping.get(e);return!!t&&!!this.portals.get(t)}getPopup(e){const t=this.portalsMapping.get(e);return(null==t?void 0:t.popupBase)||null}selectTemplate(e){return Oa.content.cloneNode(!0)}subscribe(e){return this.captureManager.capture(e),()=>{this.captureManager.releaseCapture(e)}}};za=C([on(Ar)],za);class Wa{static isEditRowCell(e){return null!==e&&e.rowType===Xs.Edit}static areIdentical(e,t){return null!==e&&null!==t&&(e.rowIndex===t.rowIndex&&e.columnInfo.uID===t.columnInfo.uID)}static fromElement(e,t){const i=Wa.getCellElement(e,t);if(null!==i){const n=Wa.getHitInnerElement(t),s=Wa.getRowType(i),r=Zs.getCellType(i),o=Wa.getCellRowIndex(i),a=e.getColumnInfoByCell(i);if(null!==s&&null!==r&&null!==o&&null!==a)return new Wa(r,s,o,a,n,i)}return null}static findCellInnerElement(e,t){return null!==e&&t===$a.CheckBox?e.querySelector(Gs.CellCheckBoxEditViewInputSelector):null}static getCellElement(e,t){if(null===e.uId||null==t)return null;const i=t.closest(Gs.getBodyCellsSelector(e.uId,e.getTagName()));if(null!==i)return i;const n=_a.getPortalFrom(t);return null!==n?n.closest(Gs.getBodyCellsSelector(e.uId,e.getTagName())):null}static getRowType(e){if(null===e)return null;const t=e.parentElement;return null===t?null:Zs.getRowType(t)}static getCellRowIndex(e){const t=null==e?void 0:e.parentElement;if(null!=t){const e=t.dataset.visibleIndex;if(void 0!==e)return parseInt(e)}return null}static getHitInnerElement(e){return null!==e&&e.closest(Gs.CellCheckBoxDisplayViewSelector)?$a.CheckBox:null}constructor(e,t,i,n,s,r){this._type=e,this._rowType=t,this._rowIndex=i,this._columnInfo=n,this._hitInnerElement=s,this._element=r}get type(){return this._type}get rowIndex(){return this._rowIndex}get rowType(){return this._rowType}get columnInfo(){return this._columnInfo}get hitInnerElement(){return this._hitInnerElement}get element(){return this._element}}var $a,Ga,qa;!function(e){e[e.CheckBox=0]="CheckBox"}($a||($a={}));class Ya{constructor(){this.activePopup=null,this.boundOnDocumentFocusOutHandler=this.onDocumentFocusOut.bind(this),this.boundOnPopupShownHandler=this.onPopupShown.bind(this),this.boundOnPopupClosingHandler=this.onPopupClosing.bind(this),this.boundOnPopupClosedHandler=this.onPopupClosed.bind(this)}initialize(){document.addEventListener("focusout",this.boundOnDocumentFocusOutHandler),document.addEventListener(ao.eventName,this.boundOnPopupShownHandler)}dispose(){document.removeEventListener("focusout",this.boundOnDocumentFocusOutHandler),document.removeEventListener(ao.eventName,this.boundOnPopupShownHandler)}onPopupClosing(e){if(null===this.activePopup)return;if(this.activePopup.removeEventListener(Gr.eventName,this.boundOnPopupClosingHandler),this.activePopup.removeEventListener($r.eventName,this.boundOnPopupClosingHandler),e.detail.closeReason!==Hr.OutsideClick)return;const t=_a.getPortalFrom(document.activeElement);t&&t.branchId!==e.detail.branchId||(this.activePopup.removeEventListener(lo.eventName,this.boundOnPopupClosedHandler),this.activePopup=null,this.closeEditor())}onPopupClosed(e){null!==this.activePopup&&(this.activePopup.removeEventListener(Gr.eventName,this.boundOnPopupClosingHandler),this.activePopup.removeEventListener($r.eventName,this.boundOnPopupClosingHandler),this.activePopup.removeEventListener(lo.eventName,this.boundOnPopupClosedHandler),setTimeout((()=>this.activePopup=null),0))}onPopupShown(e){(e.target instanceof fo||e.target instanceof Ka)&&this.isPopupFromEditor(e.target)&&(this.activePopup=e.target,this.activePopup.addEventListener(Gr.eventName,this.boundOnPopupClosingHandler),this.activePopup.addEventListener($r.eventName,this.boundOnPopupClosingHandler),this.activePopup.addEventListener(lo.eventName,this.boundOnPopupClosedHandler))}}class Xa extends Ya{constructor(e){super(),this.pendingCommandId=null,this.closingTimerId=null,this.pressedCellInfo=null,this.boundOnDocumentPointerDownHandler=this.onDocumentPointerDown.bind(this),this.boundOnDocumentPointerUpHandler=this.onDocumentPointerUp.bind(this),this.grid=e}get isPendingCommandResult(){return null!==this.pendingCommandId}get isEditorPopupShown(){return null!==this.activePopup}initialize(){document.addEventListener("pointerdown",this.boundOnDocumentPointerDownHandler),document.addEventListener("pointerup",this.boundOnDocumentPointerUpHandler),super.initialize()}dispose(){document.removeEventListener("pointerdown",this.boundOnDocumentPointerDownHandler),document.removeEventListener("pointerup",this.boundOnDocumentPointerUpHandler),super.dispose()}showNewItemRowEditor(e){var t;let i=e;return(i&&i.isEditable||(i=null!==(t=this.grid.columnsInfo.find((e=>e.isEditable)))&&void 0!==t?t:null,i))&&this.sendCommand("showNewItemRowEditor",{columnUid:i.uID})?i.leafIndex:-1}showEditor(e,t,i=null){if(!this.allowInteraction)return!1;const n=this.grid.getCellInfo(e);return null!==n&&(n.type===Js.Data&&(!!n.columnInfo.isEditable&&this.sendCommand("showEditor",{visibleIndex:n.rowIndex,columnUid:n.columnInfo.uID},i,(e=>{e.result&&null!==t&&this.clickToEditCellInnerElement(t,n)}))))}closeEditor(e=Ga.Save,t=null){return!!this.allowInteraction&&this.sendCommand("closeEditor",{action:e},t)}onEndCommand(e,t=null){if(null===t)return;let i=qa.Aborted;e.processedBy(this.pendingCommandId)&&(i=e.result?qa.Completed:qa.Failed),t(i)}notifyPendingEditorShow(e){this.allowInteraction&&(e?this.pendingCommandId=Xa.ServerSideShowCommandId:this.pendingCommandId===Xa.ServerSideShowCommandId&&(this.pendingCommandId=null))}sendCommand(e,t,i=null,n=null){return!!this.uiHandlersBridge&&(this.cancelClosingTimer(),this.pendingCommandId=Xa.InitializationCommandId,document.activeElement instanceof HTMLElement&&document.activeElement.blur(),this.pendingCommandId=this.uiHandlersBridge.send(e,t,(e=>{this.onEndCommand(e,i),e.processedBy(this.pendingCommandId)&&(n&&n(e),this.pendingCommandId=null)})),!0)}get allowInteraction(){return this.grid.enableInplaceEditing}get uiHandlersBridge(){return this.grid.uiHandlersBridge}onDocumentPointerDown(e){this.allowInteraction&&(this.pressedCellInfo=this.grid.getCellInfo(e.target))}onDocumentPointerUp(){this.allowInteraction&&(this.pressedCellInfo=null)}onDocumentFocusOut(e){if(!this.allowInteraction)return;if(!this.grid.isEditing)return;if(this.isPendingCommandResult)return;const t=this.grid.getCellInfo(e.target);if(!Wa.isEditRowCell(t))return;const i=this.grid.getCellInfo(e.relatedTarget)||this.grid.getCellInfo(this.activePopup),n=Wa.areIdentical(t,i);Wa.isEditRowCell(i)?!n&&this.isPressedCell(i)&&this.startClosingTimer(Ga.Hide):this.isPressedDataCell(i)&&!this.isDataCellInteractiveElement(e.relatedTarget)?this.startClosingTimer():this.closeEditor()}isDataCellInteractiveElement(e){return!1}isPopupFromEditor(e){return this.allowInteraction&&this.grid.isEditing&&Wa.isEditRowCell(this.grid.getCellInfo(e))}clickToEditCellInnerElement(e,t){var i;const n=this.getEditCellElement(),s=this.grid.getCellInfo(n);Wa.areIdentical(t,s)&&(null===(i=Wa.findCellInnerElement(n,e))||void 0===i||i.click())}getEditCellElement(){return null===this.grid.uId?null:this.grid.querySelector(Gs.getBodyEditCellSelector(this.grid.uId,this.grid.getTagName()))}isPressedDataCell(e){return(null==e?void 0:e.type)===Js.Data&&this.isPressedCell(e)}isPressedCell(e){return Wa.areIdentical(e,this.pressedCellInfo)}startClosingTimer(e=Ga.Save){this.cancelClosingTimer(),this.closingTimerId=setTimeout((()=>this.closeEditor(e)),Xa.ClosingDelay)}cancelClosingTimer(){null!==this.closingTimerId&&(clearTimeout(this.closingTimerId),this.closingTimerId=null)}}Xa.InitializationCommandId=-1,Xa.ServerSideShowCommandId=-2,Xa.ClosingDelay=150,function(e){e[e.Save=0]="Save",e[e.Cancel=1]="Cancel",e[e.Hide=2]="Hide",e[e.SaveAndStartNewRow=3]="SaveAndStartNewRow"}(Ga||(Ga={})),function(e){e[e.Completed=0]="Completed",e[e.Failed=1]="Failed",e[e.Aborted=2]="Aborted"}(qa||(qa={}));class Ja{static calculateHorizontalScrollCorrection(e,t,i){let n=0;const s=e.getBoundingClientRect();for(const e of t){const t=e.getBoundingClientRect(),r=this.getIntersectionRectangle(s,t);if(!r.isEmpty){const e=i?r.left-t.right:r.right-t.left;s.x-=e,n+=e}}return n}static calculateVerticalScrollCorrection(e,t){const i=this.calculateHeightOffsetValue(e,t,!0),n=this.calculateHeightOffsetValue(e,t,!1);return i<0&&n<0?i:n>0&&i>0?n:0}static calculateBoundaryItemIndex(e,t,i){const n=Math.ceil(this.getDataAreaViewportHeight(t)),s=i?0:e.itemCount-1;let r=i&&e.selectedItemIndex<=s||!i&&e.selectedItemIndex>=s?s:e.selectedItemIndex,o=this.calculateItemHeight(e,t,r,i);const a=this.isVirtualScrollingEnabled(t)?this.calculateItemAverageHeight(e):void 0,l=i?1:-1;let A=r+l;for(;e.isIndexWithinBoundaries(A)&&(o+=this.getElementHeight(e.getItem(A),a),!(o>n&&r!==e.selectedItemIndex));)r=A,A+=l;return r}static isVirtualScrollingEnabled(e){return void 0!==e.totalItemCount}static isElementInView(e,t){const i=t.getBoundingClientRect(),n=e.getBoundingClientRect();return n.bottom>i.top+n.height&&n.top<i.bottom}static bottomAlignmentRequired(e,t){const i=e.getBoundingClientRect();return t.getBoundingClientRect().bottom-i.bottom<i.height}static calculateItemAverageHeight(e){const t=e.getItem(0);return(e.getItem(e.itemCount-1).getBoundingClientRect().bottom-t.getBoundingClientRect().top)/e.itemCount}static calculateItemHeight(e,t,i,n){const s=e.getItem(i);let r=this.getElementHeight(s);if(s&&!this.isOutsideViewportItemRequired(e,t,i,n)){const e=this.calculateHeightOffsetValue(s,t,n);r+=n?e:-e}return r}static isOutsideViewportItemRequired(e,t,i,n){const s=e.getItem(n?i+1:i-1);if(!s)return!0;const r=s.getBoundingClientRect(),o=this.getElementHeight(s);if(!t.hasVerticalScrollBar){const e=yr.viewport(),t=new st(0,0,e.width,e.height);return this.getIntersectionRectangle(r,t).height<o}const a=t.getElementsRectangle(t.getFooterElements());if(n&&a)return!this.getIntersectionRectangle(r,a).isEmpty;const l=t.getElementsRectangle(t.getHeaderElements());if(!n&&l)return!this.getIntersectionRectangle(r,l).isEmpty;return this.getIntersectionRectangle(r,t.getBoundingClientRect()).height<o}static calculateHeightOffsetValue(e,t,i){const n=e.getBoundingClientRect(),s=t.getDataAreaRectangle(),r=!t.hasVerticalScrollBar,o=r?0:s.y,a=r?document.documentElement.clientHeight:o+s.height;return _e.calcScrollOffset(o,a,n.top,n.bottom,i?Pe.Top:Pe.Bottom)}static getDataAreaViewportHeight(e){const t=e.getRectangle(),i=e.hasVerticalScrollBar?e.getDataAreaRectangle():yr.viewport();return e.hasVerticalScrollBar&&t&&t.height<i.height?t.height-this.calcStickyElementsHeight(e):i.height}static calcStickyElementsHeight(e){let t=0;for(const i of this.getStickyElementsRectangles(e))t+=this.getElementRectangleHeight(i);return t}static getStickyElementsRectangles(e){return e?[e.getElementsRectangle(e.getHeaderElements()),e.getElementsRectangle(e.getFooterElements())]:[]}static getElementHeight(e,t=0){return e?e.getBoundingClientRect().height:t}static getElementRectangleHeight(e,t=0){return e?e.height:t}static getIntersectionRectangle(e,t){const i=new st(e.x,e.y,e.width,e.height),n=new st(t.x,t.y,t.width,t.height);return rt.intersect(i,n)}static alignElementVertically(e,t,i){const n=Ja.calculateVerticalScrollCorrection(e,t);i.scrollBy(0,n)}}class ja{get hasAction(){return!!this.handle}constructor(e){this.action=null,this.handle=null,this.timeout=0,this.timeout=e}execute(e){this.cancel(),this.action=e,this.handle=setTimeout((()=>{var e;null===(e=this.action)||void 0===e||e.call(this),this.handle=null,this.action=null}),this.timeout)}forceExecute(){if(!this.hasAction)return;const e=this.action;this.cancel(),e&&e()}cancel(){this.hasAction&&this.handle&&(clearTimeout(this.handle),this.action=null,this.handle=null)}}const Za="dxbl-input-editor",el="dxbl-spinedit",tl="dxbl-calendar",il="dxbl-dropdownbase",nl="dxbl-masked-input",sl="dxbl-custom-color-area",rl="dxbl-hue-area",ol="dxbl-saturation-brightness-area",al="dxbl-list-box",ll="dxbl-combo-box",Al="dxbl-dropdown-listbox";class dl extends CustomEvent{constructor(e){super(dl.eventName,{detail:new pl(e),bubbles:!0,composed:!0,cancelable:!0})}}dl.eventName=Za+".focusin";class cl extends CustomEvent{constructor(e,t){super(cl.eventName,{detail:new ml(e,t),bubbles:!0,composed:!0,cancelable:!0})}}cl.eventName=Za+".focusout";class hl extends CustomEvent{constructor(e){super(hl.eventName,{detail:e,bubbles:!0,composed:!0,cancelable:!0})}}hl.eventName=Za+".keydown";class ul extends CustomEvent{constructor(e){super(ul.eventName,{detail:e,bubbles:!0,composed:!0,cancelable:!0})}}ul.eventName=Za+".beforeinput";class pl{constructor(e){this.NeedSelection=e}}class ml{constructor(e,t){this.Text=e,this.TabKey=t}}class gl{constructor(e){this.Text=e}}class Cl extends gl{constructor(e,t){super(e),this.Version=t}}class fl extends CustomEvent{constructor(e,t){super(fl.eventName,{detail:new Cl(e,t),bubbles:!0,composed:!0,cancelable:!0})}}fl.eventName=Za+".textinput";class vl extends CustomEvent{constructor(e){super(vl.eventName,{detail:new gl(e),bubbles:!0,composed:!0,cancelable:!0})}}var bl,wl,yl;vl.eventName=Za+".textchange",gt.register(fl.eventName,(e=>e.detail)),gt.register(vl.eventName,(e=>e.detail)),gt.register(dl.eventName,(e=>e.detail)),gt.register(cl.eventName,(e=>e.detail)),gt.register(hl.eventName,(e=>{const t=e.detail;return{Key:t.key,Code:t.code,CtrlKey:t.ctrlKey,AltKey:t.altKey,ShiftKey:t.shiftKey,MetaKey:t.metaKey}})),gt.register(ul.eventName,(e=>{const t=e.detail;return{InputType:t.inputType,Text:t.data}})),function(e){e.inputText="field-text",e.inputTextVersion="field-text-version",e.bindValueMode="bind-value-mode",e.fieldInputDelay="field-input-delay",e.customPlaceholder="custom-placeholder"}(bl||(bl={})),function(e){e.OnLostFocus="OnLostFocus",e.OnInput="OnInput",e.OnDelayedInput="OnDelayedInput"}(wl||(wl={})),function(e){e.WithoutTemplate="WithoutTemplate",e.WithTemplate="WithTemplate",e.WithEditableTemplate="WithEditableTemplate"}(yl||(yl={}));class Bl{}Bl.TextEdit=he.Prefix+"-text-edit",Bl.ClearButton=he.Prefix+"-edit-btn-clear",Bl.EditBoxTemplate=he.Prefix+"-text-edit-template",Bl.TextEditInput=he.Prefix+"-text-edit-input",Bl.EditorButton=he.Prefix+"-text-edit-btn";class El extends Es{constructor(){super(),this.fieldText="",this.fieldTextVersion=-1,this.fieldInputDelay=500,this.bindValueMode=wl.OnLostFocus,this.isReadOnly=!1,this.placeholder="",this.boundOnInputInputHandler=this.onTextInput.bind(this),this.boundOnInputChangeHandler=this.onTextChange.bind(this),this.boundOnInputKeyDownHandler=this.onInputKeyDown.bind(this),this.boundOnPointerDownHandler=this.onPointerDown.bind(this),this.inputDelayDeferredAction=new ja(500),this._fieldTextHistory={},this._fieldInitialized=!1,this._fieldTextVersion=-1,this._isMobileDevice=$().isMobileDevice,this.mainElementObserver=new MutationObserver(this.mainElementContentChanged.bind(this))}get useAdaptiveLayout(){return this._isMobileDevice}get inputSelectionStart(){var e,t;return null!==(t=null===(e=this.fieldElement)||void 0===e?void 0:e.selectionStart)&&void 0!==t?t:0}get inputSelectionEnd(){var e,t;return null!==(t=null===(e=this.fieldElement)||void 0===e?void 0:e.selectionEnd)&&void 0!==t?t:0}get selectionLength(){return Math.abs(this.inputSelectionEnd-this.inputSelectionStart)}isAllSelected(){const e=this.fieldElementValue.length;return e>0&&0===this.inputSelectionStart&&this.inputSelectionEnd===e}get enabled(){return this.fieldElement?!this.fieldElement.disabled:!T.DomUtils.hasClassName(this,he.Disabled)}get allowInput(){return this.enabled&&!!this.fieldElement&&!this.fieldElement.readOnly}static isClearButtonElement(e){var t;return!!e&&(null===(t=e.classList)||void 0===t?void 0:t.contains(Bl.ClearButton))}static isEditBoxTemplateElement(e){var t;return!!e&&(null===(t=e.classList)||void 0===t?void 0:t.contains(Bl.EditBoxTemplate))}static isEditorButtonElement(e){var t;return!!e&&(null===(t=e.classList)||void 0===t?void 0:t.contains(Bl.EditorButton))}isFocusableElementInMainElementTemplate(e){return!!this.editBoxTemplateElement&&(this.editBoxTemplateElement!==e&&this.editBoxTemplateElement.contains(e)&&Ti(e))}get fieldElementValue(){var e,t;return null!==(t=null===(e=this.fieldElement)||void 0===e?void 0:e.value)&&void 0!==t?t:""}set fieldElementValue(e){this.fieldElement&&(this.fieldElement.value=e)}get rendered(){return!!this.fieldElement}get focused(){return document.activeElement===this.editBoxElement}get isFieldElementReadonly(){return!!this.fieldElement&&this.fieldElement.readOnly}get editBoxElement(){var e;return null!==(e=this.fieldElement)&&void 0!==e?e:this.editBoxTemplateElement}get editBoxTemplateElement(){return this.querySelector(`:scope > .${Bl.EditBoxTemplate}`)}raiseFieldText(){let e;const t=this.fieldElementValue;this.shouldProcessFieldTextVersion?(e=++this._fieldTextVersion,this._fieldTextHistory[e]=t):e=this._fieldTextVersion,this.dispatchEvent(new fl(t,e))}raiseFieldChange(){this.dispatchEvent(new vl(this.fieldElementValue))}applyTextProperty(){this.shouldProcessFieldTextVersion?this.applyTextPropertyByVersion():(this.applyTextPropertyCore(),this._fieldTextVersion=this.fieldTextVersion)}applyTextPropertyByVersion(){const e=this.fieldTextVersion,t=this.fieldText;let i=this._fieldTextVersion;e>i&&(i=e),-1===i||t!==this.fieldElementValue&&this._fieldTextHistory[e]!==t?(this.applyTextPropertyCore(),this._fieldTextVersion=i+1):delete this._fieldTextHistory[e]}applyTextPropertyCore(){this.fieldElementValue=this.fieldText}onBindValueModeChanged(e){e===wl.OnLostFocus?(this._fieldTextHistory={},this._fieldTextVersion++):this.bindValueMode===wl.OnLostFocus&&(this._fieldTextHistory={},this._fieldTextVersion=-1)}onInputDelayChanged(){this.inputDelayDeferredAction=new ja(this.fieldInputDelay)}get shouldProcessFieldTextVersion(){return this.bindValueMode===wl.OnInput||this.bindValueMode===wl.OnDelayedInput}get shouldForceInputOnEnter(){return!0}onTextInput(e){if(this.shouldRaiseFieldTextEvents)switch(this.bindValueMode){case wl.OnInput:this.raiseFieldText();break;case wl.OnDelayedInput:this.inputDelayDeferredAction.execute((()=>this.raiseFieldText()))}}onTextChange(e){this.shouldRaiseFieldTextEvents&&(this.bindValueMode===wl.OnLostFocus?this.raiseFieldChange():this.bindValueMode===wl.OnDelayedInput&&this.tryForceDelayedInput())}onFieldReady(e,t){e.addEventListener("input",this.boundOnInputInputHandler),e.addEventListener("change",this.boundOnInputChangeHandler),e.addEventListener("keydown",this.boundOnInputKeyDownHandler),t&&(this.applyTextProperty(),this.updatePlaceholder())}onTemplateWithoutInputReady(e){e.addEventListener("keydown",this.boundOnInputKeyDownHandler)}onPointerDown(e){this.processPointerDown(e)}processPointerDown(e){var t;const i=e.target,n=H.containsInComposedPath(e,El.isClearButtonElement),s=H.containsInComposedPath(e,El.isEditorButtonElement),r=this.editBoxTemplateElement&&this.editBoxTemplateElement===i&&!Ti(this.editBoxTemplateElement),o=this.editBoxTemplateElement&&this.editBoxTemplateElement.contains(i)&&!Ti(i),a=!this.focused&&(n||s&&!this.useAdaptiveLayout||r||o),l=n||s||r||o;return s&&this.focused&&this.raiseFieldChange(),l&&e.preventDefault(),a&&(null===(t=this.editBoxElement)||void 0===t||t.focus()),!0}onInputKeyDown(e){this.isReadOnly||this.processKeyDown(e)}processKeyDown(e){return"Enter"===e.key&&this.shouldForceInputOnEnter&&this.tryForceDelayedInput(),!1}tryForceDelayedInput(){this.shouldRaiseFieldTextEvents&&this.bindValueMode===wl.OnDelayedInput&&this.inputDelayDeferredAction.forceExecute()}connectedOrContentChanged(){super.connectedOrContentChanged(),this.mainElementObserver.observe(this,{childList:!0,subtree:!0})}disconnectedCallback(){super.disconnectedCallback(),this.mainElementObserver.disconnect()}contentChanged(){this.fieldElement=this.getFieldElement(),this.editBoxTemplateElement&&this.updateEditBoxTemplateTabIndex(),this.fieldElement?(this.onFieldReady(this.fieldElement,!this._fieldInitialized),this._fieldInitialized=!0):this.editBoxTemplateElement&&this.onTemplateWithoutInputReady(this.editBoxTemplateElement),this.addEventListener("pointerdown",this.boundOnPointerDownHandler)}get shouldRaiseFieldTextEvents(){return!0}get readyOnConnectedCallback(){return!1}updated(e){this.rendered&&(e.has("bindValueMode")&&this.onBindValueModeChanged(e.get("bindValueMode")),(e.has("fieldText")||e.has("fieldTextVersion"))&&this.applyTextProperty(),e.has("placeholder")&&this.updatePlaceholder()),e.has("fieldInputDelay")&&this.onInputDelayChanged(),super.updated(e)}updatePlaceholder(){this.fieldElement&&(this.placeholder&&""!==this.placeholder?this.fieldElement.setAttribute("placeholder",this.placeholder):this.fieldElement.removeAttribute("placeholder"))}updateEditBoxTemplateTabIndex(){var e,t;this.enabled&&!this.fieldElement?null===(e=this.editBoxTemplateElement)||void 0===e||e.setAttribute("tabindex","0"):null===(t=this.editBoxTemplateElement)||void 0===t||t.removeAttribute("tabindex")}mainElementContentChanged(e,t){const i=this.fieldElement;this.contentChanged(),this.fieldElement&&i!==this.fieldElement&&this.applyTextProperty()}}C([An({type:String,attribute:bl.inputText})],El.prototype,"fieldText",void 0),C([An({type:Number,attribute:bl.inputTextVersion})],El.prototype,"fieldTextVersion",void 0),C([An({type:Number,attribute:bl.fieldInputDelay})],El.prototype,"fieldInputDelay",void 0),C([An({type:wl,attribute:bl.bindValueMode})],El.prototype,"bindValueMode",void 0),C([An({type:Boolean,attribute:"is-read-only"})],El.prototype,"isReadOnly",void 0),C([An({type:String,attribute:bl.customPlaceholder})],El.prototype,"placeholder",void 0);class Il extends Event{constructor(){super(Il.eventName,{bubbles:!0,composed:!0,cancelable:!0})}}Il.eventName=il+".opendropdown";class Sl extends Event{constructor(){super(Sl.eventName,{bubbles:!0,composed:!0,cancelable:!0})}}Sl.eventName=il+".closedropdown";class xl extends Event{constructor(){super(xl.eventName,{bubbles:!0,composed:!1,cancelable:!0})}}xl.eventName=il+".pointerdown";class Dl extends Event{constructor(){super(Dl.eventName,{bubbles:!0,composed:!0,cancelable:!0})}}Dl.eventName=il+".trycleareditorvalue",gt.register(Il.eventName,(e=>e.detail)),gt.register(Sl.eventName,(e=>e.detail));class Fl{constructor(e){this.boundOnPopupElementChangedHandler=this.onPopupElementChanged.bind(this),this.boundOnPopupShownHandler=this.onPopupShown.bind(this),this.boundOnPopupClosedHandler=this.onPopupClosed.bind(this),this.boundOnPopupPortalElementsChangedHandler=this.onDropDownPortalElementsChanged.bind(this),this.control=e,this.popupPortal=null,this._popupElement=null,this._adaptiveDropDownElement=null}get popupElement(){return this._popupElement}get useMobileFocusBehaviour(){var e;return(null===(e=this._adaptiveDropDownElement)||void 0===e?void 0:e.adaptivityEnabled)||!1}onConnectedCallback(){this.ensurePopupInfrastructure(),this.control.addEventListener(Cr.eventName,this.boundOnPopupElementChangedHandler)}onDisconnectedCallback(){this.control.removeEventListener(Cr.eventName,this.boundOnPopupElementChangedHandler),this.disposePopupInfrastructure()}onSlotChanged(){this.disposePopupInfrastructure(),this.ensurePopupInfrastructure()}getPopupPortal(){if(!this.control.shadowRoot)return null;const e=this.control.shadowRoot.querySelector("slot");if(!e)return null;return e.assignedNodes().find((e=>at(e)))}onPopupElementChanged(e){H.getOriginalSource(e)===this.popupPortal&&(this.disposePopupElement(),this.ensurePopupElement())}onPopupShown(e){this.popupElement&&At(this.popupElement)&&this.control.addLogicalChild(this.popupElement)}onPopupClosed(e){this.popupElement&&At(this.popupElement)&&this.control.removeLogicalChild(this.popupElement)}onDropDownPortalElementsChanged(e){this.ensurePopupElement()}ensurePopupInfrastructure(){var e;this.popupPortal=this.getPopupPortal(),null===(e=this.popupPortal)||void 0===e||e.addEventListener(Cr.eventName,this.boundOnPopupPortalElementsChangedHandler),this.ensurePopupElement()}ensurePopupElement(){var e,t,i;this.popupPortal&&(this._popupElement=null===(e=this.popupPortal)||void 0===e?void 0:e.popupBase,null===(t=this._popupElement)||void 0===t||t.addEventListener(ao.eventName,this.boundOnPopupShownHandler),null===(i=this._popupElement)||void 0===i||i.addEventListener(lo.eventName,this.boundOnPopupClosedHandler),this._popupElement&&ct(this._popupElement)&&(this._adaptiveDropDownElement=this._popupElement),this.control.ensurePopupElement())}disposePopupInfrastructure(){var e;null===(e=this.popupPortal)||void 0===e||e.removeEventListener(Cr.eventName,this.boundOnPopupPortalElementsChangedHandler),this.popupPortal=null,this._adaptiveDropDownElement=null,this.disposePopupElement()}disposePopupElement(){var e,t;null===(e=this._popupElement)||void 0===e||e.removeEventListener(ao.eventName,this.boundOnPopupShownHandler),null===(t=this._popupElement)||void 0===t||t.removeEventListener(lo.eventName,this.boundOnPopupClosedHandler),this._popupElement=null,this.control.disposePopupElement()}}class Tl extends Mi{constructor(e){super(e.getKeyboardNavigator(),e),this._editor=e}queryItems(){const e=[];this._editor.editBoxElement&&e.push(this._editor.editBoxElement);const t=fi.findFocusableElements(this._editor).filter((e=>e!==this._editor.editBoxElement));return t.forEach((t=>e.push(t))),e}activate(){const e=document.activeElement;e&&this._editor.editBoxElement&&this._editor.editBoxElement.contains(e)||super.activate()}canManageTabIndex(e){return(!this._editor.editBoxTemplateElement||!this._editor.editBoxTemplateElement.contains(e))&&super.canManageTabIndex(e)}}var Hl;!function(e){e.isDisplayFormatDefined="is-display-format-defined",e.isPassword="is-password",e.needSelection="need-selection"}(Hl||(Hl={}));const Ul={...Hl,...bl};let Pl=class extends El{constructor(){super(...arguments),this.selectionRequested=!1,this.boundOnInputFocusHandler=this.onInputFocusIn.bind(this),this.boundOnInputFocusOutHandler=this.onInputFocusOut.bind(this),this.boundOnBeforeInputHandler=this.onBeforeInput.bind(this),this.boundOnInputKeyUpHandler=this.onInputKeyUp.bind(this),this.needSelection=!1,this.isDisplayFormatDefined=!1,this.isPassword=!1}get shouldProcessFocusIn(){return this.isDisplayFormatDefined||this.selectionRequested}get shouldProcessFocusOut(){return this.isDisplayFormatDefined}get shouldProcessEnter(){return!1}get inputElement(){return this.fieldElement}get shouldProcessFieldTextVersion(){return!this.isPassword&&super.shouldProcessFieldTextVersion}onFieldReady(e,t){e.addEventListener("keyup",this.boundOnInputKeyUpHandler),e.addEventListener("beforeinput",this.boundOnBeforeInputHandler),e.addEventListener("focusin",this.boundOnInputFocusHandler),e.addEventListener("focusout",this.boundOnInputFocusOutHandler),this.initializeKeyboardNavigator(),super.onFieldReady(e,t),t&&this.focused&&this.onInputFocusIn()}onTemplateWithoutInputReady(e){super.onTemplateWithoutInputReady(e),e.addEventListener("focusin",this.boundOnInputFocusHandler),e.addEventListener("focusout",this.boundOnInputFocusOutHandler),e.addEventListener("keyup",this.boundOnInputKeyUpHandler),this.initializeKeyboardNavigator()}onInputFocusIn(){this.shouldProcessFocusIn&&this.processFocusIn()}onInputFocusOut(e){this.shouldProcessFocusOut&&this.processFocusOut(e);const t=this.getKeyboardNavigator();t&&(t.isActive=!1)}onInputKeyUp(e){this.isReadOnly||this.processKeyUp(e)}onBeforeInput(e){this.processBeforeInput(e)}processKeyUp(e){return!1}processFocusIn(){if(this.fieldElement){const e=this.selectionRequested||this.focused&&this.isAllSelected();this.raiseFocusIn(e),this.selectionRequested=!1}else this.editBoxTemplateElement&&this.raiseFocusIn(!1)}processFocusOut(e){this.raiseFocusOut(this.fieldElementValue)}processBeforeInput(e){return!1}raiseFocusIn(e){this.dispatchEvent(new dl(e))}raiseFocusOut(e,t){this.dispatchEvent(new cl(e,t))}raiseKeyDown(e){this.dispatchEvent(new hl(e))}getFieldElement(){return this.querySelector(`[parent-id="${this.id}"].${Bl.TextEditInput}`)}selectInputText(e,t){this.fieldElement&&this.fieldElement.setSelectionRange(e,t)}selectAll(){this.fieldElement&&this.focused&&this.fieldElement.select()}onPasswordChanged(){this.isPassword&&(this.fieldElementValue="")}updated(e){super.updated(e),this.rendered&&e.has("isPassword")&&this.onPasswordChanged(),this.rendered&&e.has("needSelection")&&this.needSelection&&this.selectAll()}focusAndSelectAll(){var e;this.selectionRequested=!0,null===(e=this.fieldElement)||void 0===e||e.focus()}initializeKeyboardNavigator(){this.keyboardNavigator=this.querySelector(Qi),this.keyboardNavigator&&!this.keyboardNavigator.initialized&&this.keyboardNavigator.initialize(this,this.createKeyboardStrategy())}createKeyboardStrategy(){return new Tl(this)}getKeyboardNavigator(){return this.keyboardNavigator}focus(e){var t;null===(t=this.fieldElement)||void 0===t||t.focus(e)}};Pl.shadowRootOptions={...gs.shadowRootOptions,delegatesFocus:!0},C([An({type:Boolean,attribute:Hl.needSelection})],Pl.prototype,"needSelection",void 0),C([An({type:Boolean,attribute:Hl.isDisplayFormatDefined})],Pl.prototype,"isDisplayFormatDefined",void 0),C([An({type:Boolean,attribute:Hl.isPassword})],Pl.prototype,"isPassword",void 0),Pl=C([on(Za)],Pl);class Ql{constructor(e){this.deltaY=e}}var Nl,Rl;!function(e){e[e.forward=0]="forward",e[e.backward=1]="backward"}(Nl||(Nl={}));class Ll{constructor(e,t,i,n){this.direction=Nl.backward,this.selectionStart=e,this.selectionEnd=t,this.selectAll=n,this.direction=i}}class Ml extends Event{constructor(){super(Ml.eventName,{bubbles:!0,composed:!0,cancelable:!0})}}Ml.eventName=nl+".applyValue";class kl extends CustomEvent{constructor(e){super(kl.eventName,{detail:new ml(e,!1),bubbles:!0,composed:!0,cancelable:!0})}}kl.eventName=nl+".autofill";class Kl extends CustomEvent{constructor(e){super(Kl.eventName,{detail:new Ql(e),bubbles:!0,composed:!0,cancelable:!0})}}Kl.eventName=nl+".wheel";class Ol extends CustomEvent{constructor(e,t,i,n){super(Ol.eventName,{detail:new Ll(e,t,i,n),bubbles:!0,composed:!0,cancelable:!0})}}Ol.eventName=nl+".selectionchange";class _l extends CustomEvent{constructor(e){super(_l.eventName,{detail:e,bubbles:!0,composed:!0,cancelable:!0})}}_l.eventName=nl+".compositionEnd",gt.register(Ol.eventName,(e=>e.detail)),gt.register(kl.eventName,(e=>e.detail)),gt.register(Ml.eventName,(e=>e.detail)),gt.register(Kl.eventName,(e=>e.detail)),gt.register(_l.eventName,(e=>({Text:e.detail.data})));class Vl{}Vl.CaretSpanElement=Bl.TextEdit+"-caret-element",function(e){e.syncSelectionStart="sync-selection-start",e.syncSelectionEnd="sync-selection-end",e.isMaskDefined="is-mask-defined"}(Rl||(Rl={}));const zl={...Rl,...Ul};class Wl extends Pl{constructor(){super(...arguments),this.wheelTimerId=-1,this._leftPaddingInput=0,this._rightPaddingInput=0,this._isActuallyBackwardSelection=!1,this._shouldApplySelectionOnFocus=!0,this.compositionProcessing=!1,this.compositionEndHandler=this.handleCompositionEnd.bind(this),this.pointerUpHandler=this.handlePointerUp.bind(this),this.clickHandler=this.handleClick.bind(this),this.wheelHandler=this.handleWheel.bind(this),this.syncSelectionStart=null,this.syncSelectionEnd=null,this.isMaskDefined=!1}disconnectedCallback(){super.disconnectedCallback()}get spanCaretElement(){return this.querySelector(`.${Vl.CaretSpanElement}`)}get shouldProcessFocusOut(){return!0}get shouldProcessWheel(){return this.isMaskDefined}get shouldProcessFocusIn(){return!0}get shouldApplySelectionOnFocus(){return this._shouldApplySelectionOnFocus}set shouldApplySelectionOnFocus(e){this._shouldApplySelectionOnFocus=e}get inputSelectionDirection(){var e;return"backward"===(null===(e=this.inputElement)||void 0===e?void 0:e.selectionDirection)?Nl.backward:Nl.forward}handlePointerUp(e){this.allowInput&&this.isMaskDefined&&this.processPointerUp(e)}handleCompositionEnd(e){this.dispatchEvent(new _l(e)),this.inputElement.removeEventListener("compositionend",this.compositionEndHandler),this.compositionProcessing=!1}handleClick(e){this.applyInputSelection()}handleWheel(e){if(this.shouldProcessWheel&&(e.preventDefault(),this.processWheel(e),this.bindValueMode!==wl.OnInput)){-1!==this.wheelTimerId&&clearTimeout(this.wheelTimerId);this.wheelTimerId=window.setTimeout((()=>{this.bindValueMode===wl.OnDelayedInput?this.applyDefferedValue():this.raiseApplyValue()}).bind(this),this.bindValueMode===wl.OnDelayedInput?Math.max(500,this.fieldInputDelay):500)}}onFieldReady(e,t){if(super.onFieldReady(e,t),this.isMaskDefined&&this.fieldElement){const e=window.getComputedStyle(this.fieldElement);this._leftPaddingInput=parseInt(e.paddingLeft),this._rightPaddingInput=parseInt(e.paddingRight)}}getCaretClientPosition(){const e=this.spanCaretElement;return this.fieldElement&&e?(e.textContent=this.fieldElement.value.substring(0,this.getCursorPosition()),e.offsetWidth):0}getCursorPosition(){return this.inputSelectionStart===this.inputSelectionEnd||this.inputSelectionDirection===Nl.backward||this._isActuallyBackwardSelection?this.inputSelectionStart:this.inputSelectionEnd}calculateInputScrollLeft(){if(this.fieldElement){const e=this.getCaretClientPosition(),t=this.fieldElement.scrollLeft,i=this.fieldElement.clientWidth,n=1;e<t&&(this.fieldElement.scrollLeft=e),e>t+i-this._rightPaddingInput-this._leftPaddingInput&&(this.fieldElement.scrollLeft=e-i+this._rightPaddingInput+this._leftPaddingInput+n)}}processWheel(e){this.dispatchEvent(new Kl(e.deltaY))}applyTextPropertyCore(){super.applyTextPropertyCore(),this.applyMaskManagerSelection()}applyMaskManagerSelection(){this.focused&&this.isMaskDefined&&(this.inputSelectionStart===this.syncSelectionStart&&this.inputSelectionEnd===this.syncSelectionEnd||this.selectInputText(this.syncSelectionStart,this.syncSelectionEnd),this.calculateInputScrollLeft())}get shouldProcessFieldTextVersion(){return!this.isMaskDefined&&super.shouldProcessFieldTextVersion}get shouldRaiseFieldTextEvents(){return!this.isMaskDefined}processFocusIn(){var e;super.processFocusIn(),this.allowInput&&this.isMaskDefined&&this.shouldApplySelectionOnFocus&&requestAnimationFrame((()=>this.applyMaskManagerSelection())),this.addEventListener("wheel",this.wheelHandler,{capture:!0,passive:!1}),h.Browser.WebKitTouchUI&&(null===(e=this.inputElement)||void 0===e||e.addEventListener("click",this.clickHandler))}processFocusOut(e){var t;super.processFocusOut(e),this.removeEventListener("wheel",this.wheelHandler,{capture:!0}),h.Browser.WebKitTouchUI&&(null===(t=this.inputElement)||void 0===t||t.removeEventListener("click",this.clickHandler)),this.isMaskDefined&&!this.contains(e.target)&&this.selectInputText(0,0)}processKeyDown(e){var t;if(super.processKeyDown(e),!this.shouldProcessKeyDown(e))return!1;if(H.markHandled(e),this._isActuallyBackwardSelection=e.shiftKey&&Be.KeyUtils.getEventKeyCode(e)===Be.KeyCode.Left,this.raiseKeyDown(e),Be.KeyUtils.getEventKeyCode(e)===Be.KeyCode.Enter){const i=new KeyboardEvent("keydown",{key:e.key,code:e.code,location:e.location,repeat:e.repeat,isComposing:e.isComposing,ctrlKey:e.ctrlKey,shiftKey:e.shiftKey,altKey:e.altKey,metaKey:e.metaKey,bubbles:!0,cancelable:!0,composed:!0});null===(t=this.fieldElement)||void 0===t||t.dispatchEvent(i)}return!0}processPointerDown(e){super.processPointerDown(e);const t=H.containsInComposedPath(e,(e=>e===this.inputElement));return this.isMaskDefined&&!this.focused&&t&&(this.shouldApplySelectionOnFocus=!1),t&&document.addEventListener(Wl.pointerUpEventType,this.pointerUpHandler),!0}processKeyUp(e){if(!this.inputElement||!H.containsInComposedPath(e,(e=>e===this.inputElement)))return!1;this._isActuallyBackwardSelection=!1;const t=this.querySelector("input:-webkit-autofill");return this.isMaskDefined&&t&&t.value&&!this.isOpenDropDownShortcut(e)&&(this.dispatchEvent(new kl(t.value)),H.markHandled(e)),this.shouldProcessKeyUp(e)&&(this.bindValueMode===wl.OnLostFocus?this.raiseApplyValue():this.applyDefferedValue()),!0}applyDefferedValue(){this.bindValueMode===wl.OnDelayedInput&&this.inputDelayDeferredAction.execute((()=>this.raiseApplyValue()))}raiseApplyValue(){this.dispatchEvent(new Ml)}processBeforeInput(e){return!!super.processBeforeInput(e)||!!this.isMaskDefined&&(e.isComposing&&!h.Browser.AndroidMobilePlatform?(this.compositionProcessing||(this.inputElement.addEventListener("compositionend",this.compositionEndHandler),this.compositionProcessing=!0),!0):(H.markHandled(e),this.shouldProcessBeforeInput(e)&&(this.applyInputSelection(),this.dispatchEvent(new ul(e)),this.applyDefferedValue()),!0))}updated(e){super.updated(e)}shouldProcessKeyUp(e){if(!this.isMaskDefined)return!1;switch(Be.KeyUtils.getEventKeyCode(e)){case Be.KeyCode.Up:case Be.KeyCode.Down:return!0;case Be.KeyCode.Delete:return this.bindValueMode!==wl.OnLostFocus;case Be.KeyCode.Key_z:return e.ctrlKey}return!1}shouldProcessKeyDown(e){if(!this.isMaskDefined)return!1;switch(Be.KeyUtils.getEventKeyCode(e)){case Be.KeyCode.Left:case Be.KeyCode.Right:case Be.KeyCode.Up:case Be.KeyCode.Down:case Be.KeyCode.Home:case Be.KeyCode.Delete:case Be.KeyCode.End:case Be.KeyCode.Enter:return!0;case Be.KeyCode.Key_a:case Be.KeyCode.Key_z:return e.ctrlKey}return!1}shouldProcessBeforeInput(e){switch(e.inputType){case"insertText":case"insertReplacementText":case"insertFromPaste":return null!==e.data&&e.data.length>0;case"deleteContentBackward":case"deleteContentForward":case"deleteByCut":return!0;case"insertCompositionText":return h.Browser.AndroidMobilePlatform}return!1}isOpenDropDownShortcut(e){return Be.KeyUtils.getEventKeyCode(e)===Be.KeyCode.Down&&e.altKey}selectAll(){super.selectAll(),this.focused&&this.applyInputSelection()}processPointerUp(e){return this.focused&&setTimeout((()=>this.applyInputSelection()),0),this.shouldApplySelectionOnFocus||(this.shouldApplySelectionOnFocus=!0),document.removeEventListener(Wl.pointerUpEventType,this.pointerUpHandler),!0}applyInputSelection(){if(this.isMaskDefined&&(this.syncSelectionStart!==this.inputSelectionStart||this.syncSelectionEnd!==this.inputSelectionEnd)){const e=this.fieldElementValue.length===Math.abs(this.inputSelectionEnd-this.inputSelectionStart);this.raiseMaskSelectionChanged(this.inputSelectionStart,this.inputSelectionEnd,this.inputSelectionDirection,e)}}raiseMaskSelectionChanged(e,t,i,n){this.dispatchEvent(new Ol(e,t,i,n))}}Wl.pointerUpEventType=h.Browser.WebKitTouchUI?"touchend":"pointerup",C([An({type:Number,attribute:zl.syncSelectionStart})],Wl.prototype,"syncSelectionStart",void 0),C([An({type:Number,attribute:zl.syncSelectionEnd})],Wl.prototype,"syncSelectionEnd",void 0),C([An({type:Boolean,attribute:zl.isMaskDefined})],Wl.prototype,"isMaskDefined",void 0),customElements.define(nl,Wl);class $l extends Ua{constructor(e,t,i){super(e,t),this._parentStrategy=i}get parentStrategy(){return this._parentStrategy}handlePopupShown(){super.handlePopupShown(),xi(this.parentStrategy.dropDownEditor)&&Ii(this.targetElement)}}class Gl extends Tl{constructor(e){super(e)}get dropDownEditor(){return this._editor}handleKeyDown(e){const t=Be.KeyUtils.getEventKeyCode(e);return(e.altKey||e.metaKey)&&t===Be.KeyCode.Down?(this.openDropDown(),!0):(e.altKey||e.metaKey)&&t===Be.KeyCode.Up?(this.closeDropDown(),!0):e.altKey&&t===Be.KeyCode.Delete?(this.tryClearEditorValue(),!0):super.handleKeyDown(e)}closeDropDown(){this.dropDownEditor.closeDropDown()}openDropDown(){this.dropDownEditor.openDropDown()}closeDropDownAndApplyValue(e){this.performShortcutEvent(e)}tryClearEditorValue(){this.dropDownEditor.enabled&&!this.dropDownEditor.isReadOnly&&this.dropDownEditor.dispatchClearEditorValue()}}class ql extends Gl{constructor(e){super(e)}initialize(){super.initialize(),this.subscribeToEvents()}subscribeToEvents(){this.boundOnPopupKeyboardStrategyCreating||(this.boundOnPopupKeyboardStrategyCreating=this.onPopupKeyboardStrategyCreating.bind(this),this.targetElement.addEventListener(Co.eventName,this.boundOnPopupKeyboardStrategyCreating))}onPopupKeyboardStrategyCreating(e){e.detail.factory={createPopup:(e,t)=>this.createPopupStrategy(e,t),createModal:(e,t)=>this.createModalStrategy(e,t)}}onDispose(){this.boundOnPopupKeyboardStrategyCreating&&(this.targetElement.removeEventListener(Co.eventName,this.boundOnPopupKeyboardStrategyCreating),this.boundOnPopupKeyboardStrategyCreating=void 0),super.onDispose()}createModalStrategy(e,t){return new $l(e,t,this)}}class Yl extends Gl{constructor(e){super(e)}handleKeyDown(e){const t=this.dropDownEditor;return t&&t.shouldHandleKeyDown?t.shouldHandleKeyDown(e):super.handleKeyDown(e)}}class Xl{}var Jl;Xl.ClassName=he.Prefix+"-edit-dropdown",Xl.Header=Xl.ClassName+"-header",Xl.Body=he.Prefix+"-body",Xl.DropDownButton=he.Prefix+"-edit-btn-dropdown",function(e){e.ContentOrEditorWidth="ContentOrEditorWidth",e.ContentWidth="ContentWidth",e.EditorWidth="EditorWidth"}(Jl||(Jl={}));class jl extends Wl{constructor(){super(),this.boundOnClickHandler=this.onClick.bind(this),this.isDropDownOpen=!1,this.popupHelper=new Fl(this),this.dropDownWidthMode=Jl.ContentWidth,this._componentResizeObserver=new ResizeObserver(this.onSizeChanged.bind(this))}get useMobileFocusBehaviour(){return this.popupHelper.useMobileFocusBehaviour}get popupElement(){return this.popupHelper.popupElement}get popupDOMElement(){return this.popupElement}get dropDownElement(){return this.popupElement}get shouldProcessFocusOut(){if(!this.enabled||this.isReadOnly)return!1;return!(this.editBoxTemplateElement&&this.inputElement&&!T.DomUtils.isItParent(this.editBoxTemplateElement,this.inputElement))}connectedCallback(){super.connectedCallback(),this.popupHelper.onConnectedCallback(),this._componentResizeObserver.observe(this)}disconnectedCallback(){this.popupHelper.onDisconnectedCallback(),super.disconnectedCallback(),this._componentResizeObserver.disconnect()}contentChanged(){super.contentChanged(),this.popupHelper.onSlotChanged(),this.addEventListener("click",this.boundOnClickHandler)}focusInternal(){var e;this.shouldApplySelectionOnFocus=!1,null===(e=this.editBoxElement)||void 0===e||e.focus({preventScroll:!0}),this.shouldApplySelectionOnFocus=!0}processFocusOut(e){var t,i,n;const s=H.getEventSource(e);if(null===(t=this.popupElement)||void 0===t?void 0:t.contains(s))return;const r=null!==(i=e.relatedTarget)&&void 0!==i?i:document.activeElement;this.contains(r)&&!this.isFocusableElementInMainElementTemplate(r)||(null===(n=this.popupElement)||void 0===n?void 0:n.contains(r))||this.raiseFocusOutInternal()}raiseFocusOutInternal(){this.raiseFocusOut(this.fieldElement?this.fieldElementValue:this.fieldText)}processFocusIn(){this.focused&&super.processFocusIn()}processPointerDown(e){return Ii(this),super.processPointerDown(e)}canHandlePointerDown(e){return this.contains(e.target)&&H.containsInComposedPath(e,this.isDropDownButtonElement.bind(this))||K.containsInComposedPath(e,this.inputElement)}processKeyDownServerCommand(e){return!1}shouldProcessKeyDown(e){return!e.altKey&&super.shouldProcessKeyDown(e)}shouldProcessKeyUp(e){return!e.altKey&&super.shouldProcessKeyUp(e)}ensurePopupElement(){}disposePopupElement(){}openDropDown(){this.dispatchEvent(new Il)}closeDropDown(){this.dispatchEvent(new Sl)}dispatchClearEditorValue(){this.dispatchEvent(new Dl)}async processCapturedPointerAsync(e,t){return this.canHandlePointerDown(e)&&(t.handled=!0),Promise.resolve()}createKeyboardStrategy(){return new Gl(this)}updated(e){super.updated(e),e.has("dropDownWidthMode")&&this.reconnectComponentResizeObserver()}toggleDropDownVisibility(){this.isDropDownOpen?this.closeDropDown():this.enabled&&!this.isReadOnly&&this.openDropDown()}tryOpenDropDown(){this.enabled&&!this.isReadOnly&&this.openDropDown()}tryCloseDropDown(){this.isDropDownOpen&&this.closeDropDown()}onSizeChanged(e,t){if(!this.dropDownElement)return;const i=`${e[0].target.getBoundingClientRect().width}px`;this.dropDownElement.desiredWidth=this.dropDownWidthMode===Jl.EditorWidth?i:null,this.dropDownElement.minDesiredWidth=this.dropDownWidthMode===Jl.ContentOrEditorWidth?i:null}dispatchDropDownEditorPointerDownEvent(){document.dispatchEvent(new xl)}isDropDownButtonElement(e){var t;return!!e&&(null===(t=e.classList)||void 0===t?void 0:t.contains(Xl.DropDownButton))}isEditBoxElement(e){return e===this.fieldElement||e===this.editBoxTemplateElement}isFieldElement(e){return e===this.fieldElement}isEditBoxTemplateElement(e){return e===this.editBoxTemplateElement}reconnectComponentResizeObserver(){this.isDOMAttached&&(this._componentResizeObserver.disconnect(),this.dropDownElement&&(this.dropDownElement.desiredWidth=null,this.dropDownElement.minDesiredWidth=null),this._componentResizeObserver.observe(this))}onClick(e){this.processClick(e)}processClick(e){return H.containsInComposedPath(e,this.isDropDownButtonElement.bind(this))&&(this.toggleDropDownVisibility(),this.focused||(this.focusInternal(),this.dispatchDropDownEditorPointerDownEvent()),H.markHandled(e)),!0}}C([An({type:Boolean,attribute:"is-dropdown-open"})],jl.prototype,"isDropDownOpen",void 0),C([An({type:Jl,attribute:"dropdown-width-mode"})],jl.prototype,"dropDownWidthMode",void 0);class Zl{static selectInputValue(e){null!==e&&e instanceof HTMLInputElement&&Te.isTextInput(e)&&e.select()}static isCheckBoxInput(e){return e instanceof HTMLInputElement&&"checkbox"===e.type}static isDxCheckBoxElement(e){return!!e.closest(Ts)}static isEditableTextElement(e){return(e instanceof HTMLInputElement||e instanceof HTMLTextAreaElement)&&!e.readOnly&&!e.disabled}static findFieldElement(e){return e instanceof El?e.fieldElement:e instanceof HTMLInputElement||e instanceof HTMLTextAreaElement?e:void 0}static isDropDown(e){return e instanceof jl}static openDropDown(e){e.openDropDown()}}const eA=`:scope > *:not(.${[ue.IndentCellClassName,ue.HeaderIndentCellClassName,ue.GroupFooterIndentCellClassName,ue.EmptyCellClassName,ue.HiddenEmptyCellClassName,ue.RowDragAnchorClassName].join(",.")})`;class tA extends js{constructor(e,t,i){super(t,i),this.obsolete=!1,this.tableStrategy=e}get isObsolete(){return this.obsolete}makeObsolete(){this.obsolete=!0}getRowVisibleIndex(e=!1){const t=e?null:this.tableStrategy.hiddenRowVisibleIndex;return null!=t?t:Te.getAttributeIntValue(this.targetElement,rn.VisibleIndexName,-1)}selectFirstCell(){this.firstItemSelected||this.moveToFirstItem()}selectLastCell(){this.lastItemSelected||this.moveToLastItem()}toggleSelectionCell(){const e=this.selectedItemElement.querySelector("input[type=checkbox]");e&&this.raiseClickEvent(e,!1,!1,!1)}getSyncSelectedColumnInfo(){return this.getSelectedColumnInfo()}syncSelectedColumn(e){const t=null!==e?this.findItemElementIndexByColumnUid(e.uID):-1;this.selectedItemIndex=Math.max(t,0)}leaveRow(){fi.removeTabIndex(this.selectedItemElement)}getSelectedColumnInfo(){var e;return null!==(e=this.getColumnInfo(this.selectedItemElement))&&void 0!==e?e:null}getColumnInfo(e){return this.getColumnInfoByCell(e)}findItemElementIndexByColumnUid(e){return this.items.findIndex((t=>this.getColumnUidByCell(t)===e))}get firstItemSelected(){return this.tableStrategy.isFirstCellSelected(this)||super.firstItemSelected}get lastItemSelected(){return this.tableStrategy.isLastCellSelected(this)||super.lastItemSelected}getShortcutContext(){var e,t,i,n;return{RowType:null!==(t=null===(e=this.tableStrategy.selectedHiddenRowStrategy)||void 0===e?void 0:e.getRowType())&&void 0!==t?t:this.getRowType(),ColumnUID:null!==(i=this.getSelectedColumnUid())&&void 0!==i?i:-1,VisibleIndex:null!==(n=this.getRowVisibleIndex())&&void 0!==n?n:-1}}tryRestoreSelection(){return!!super.tryRestoreSelection()||(this.tableStrategy.syncSelectedColumn(this),!1)}queryItems(){return this.queryItemsBySelector(eA)}handleKeyDown(e){const t=this.handleKeyDownForHiddenItem(e);if(null!==t)return t;if(!this.isObsolete&&super.handleKeyDown(e))return!0;if(this.nestedContentSelected)return!1;const i=Be.KeyUtils.getEventKeyCode(e);switch(i){case Be.KeyCode.Left:return this.handleArrowLeftKeyDown(e);case Be.KeyCode.Right:return this.handleArrowRightKeyDown(e);case Be.KeyCode.Tab:return this.handleTabKeyDown(e);case Be.KeyCode.Home:if(!e.ctrlKey)return this.selectFirstCell(),!0;break;case Be.KeyCode.End:if(!e.ctrlKey)return this.selectLastCell(),!0;break;case Be.KeyCode.Space:case Be.KeyCode.Enter:if(this.isSelectionCell())return this.toggleSelectionCell(),!0}return i===Be.KeyCode.Space}selectItem(e){const t=e!==this.selectedItemIndex;t&&this.tableStrategy.trySelectHiddenCell(e)||(super.selectItem(e),t&&this.saveSelectedColumn(),!this.navigator.isActive||!t&&this.preventScrollOnFocus||this.alignRequiredVisibleElement(this.selectedItemElement))}get selectedColumnUidSearchElement(){var e,t;return null!==(t=null===(e=this.tableStrategy.selectedHiddenRowStrategy)||void 0===e?void 0:e.selectedItemElement)&&void 0!==t?t:this.selectedItemElement}get preventScrollOnFocus(){return this.tableStrategy.preventScrollOnFocus}isImmediatelyClickEnabled(){return this.isActiveCommandCell()||this.isActiveExpandButtonCell()||this.isSelectionCell()}handleKeyDownForHiddenItem(e){return this.tableStrategy.handleKeyDownForHiddenRow(this,e)}handleArrowLeftKeyDown(e){return this.moveToPrevItem(),!0}handleArrowRightKeyDown(e){return this.moveToNextItem(),!0}getColumnUidByCell(e){var t;return null===(t=this.getColumnInfo(e))||void 0===t?void 0:t.uID}syncFocusedRowVisibleIndex(){if(!this.isFocusedRowEnabled)return;const e=this.getRowVisibleIndex();this.grid.notifyFocusedRowChanged(e)}isActiveCommandCell(){return Zs.isCommandCell(this.selectedItemElement)}isActiveExpandButtonCell(){return Zs.isExpandButtonCell(this.selectedItemElement)}isSelectionCell(){return Zs.isSelectionCell(this.selectedItemElement)}isStartEditingOnTypeKey(e){const t=Be.KeyUtils.getEventKeyCode(e);return!!(t===Be.KeyCode.Backspace||e.altKey&&t===Be.KeyCode.Down)||this.isPrintableCharacterKey(e)}saveSelectedColumn(){const e=this.getRowType();wA.isColumnSyncRequired(e)&&this.tableStrategy.saveSelectedColumn(this)}getSelectedColumnUid(){const e=this.selectedColumnUidSearchElement;let t;return e&&(t=this.getColumnUidByCell(e)),null!=t?t:null}isFixedCell(e){return Zs.isFixedCell(e)}isFixedTablePart(){return this.tableStrategy.isFixed}alignRequiredVisibleElement(e){const t=this.getScrollViewerContent();t&&(e.scrollIntoView({block:"nearest"}),this.isFixedTablePart()||this.alignElementVertically(e,t),this.isFixedCell(e)||this.alignElementHorizontally(e,t))}alignElementVertically(e,t){const i=this.getScrollViewer();i&&Ja.alignElementVertically(e,i,t)}alignElementHorizontally(e,t){const i=this.findItemElementIndexByChild(e);if(i<0)return;const n=this.getFixedCells(i+1,this.itemCount);if(n.length>0){const i=Ja.calculateHorizontalScrollCorrection(e,n.reverse(),!1);t.scrollBy(i,0)}const s=this.getFixedCells(0,i);if(s.length>0){const i=Ja.calculateHorizontalScrollCorrection(e,s,!0);t.scrollBy(i,0)}}getFixedCells(e,t){const i=[];for(let n=e;n<t;n++){const e=this.getItem(n);e&&this.isFixedCell(e)&&i.push(e)}return i}}class iA extends tA{constructor(e,t,i){super(e,t,i)}getSelectedItemRowSpan(){return this.selectedItemElement.rowSpan}getSelectedItemLeafIndex(e){return this.getLeafIndex(this.selectedItemElement,e)}getRowType(){return Xs.Header}handleKeyDown(e){if(!this.nestedContentSelected)switch(Be.KeyUtils.getEventKeyCode(e)){case Be.KeyCode.Space:if(!this.isSelectionCell())return this.performShortcutEvent(e),!0;break;case Be.KeyCode.Down:return e.altKey&&this.performShortcutEvent(e),e.altKey}return super.handleKeyDown(e)}isImmediatelyClickEnabled(){return!0}getColumnInfo(e){return this.getHeaderColumnInfo(e)}findItemElementIndexByColumnUid(e){let t=super.findItemElementIndexByColumnUid(e);return t<0&&(t=this.items.findIndex((t=>{var i;return null===(i=this.getColumnInfo(t))||void 0===i?void 0:i.containsLeaf(e)}))),t}getSyncSelectedColumnInfo(){const e=super.getSyncSelectedColumnInfo();if(e&&e.hasLeafs){const t=this.tableStrategy.getSavedColumnInfo();return t&&e.containsLeaf(t.uID)?t:e.getLeftLeaf()}return e}handleArrowLeftKeyDown(e){return!!(this.selectedItemIndex-1>=0&&this.isAdjacentColumn(-1))&&super.handleArrowLeftKeyDown(e)}handleArrowRightKeyDown(e){return!!(this.selectedItemIndex+1<this.itemCount&&this.isAdjacentColumn(1))&&super.handleArrowRightKeyDown(e)}isAdjacentColumn(e){const t=e<0,i=this.getSelectedItemLeafIndex(t);return this.getLeafIndex(this.getItem(this.selectedItemIndex+e),!t)===i+e}getLeafIndex(e,t){var i,n,s;const r=this.getColumnInfo(e);if(!r||!r.hasLeafs)return null!==(n=null===(i=this.getColumnInfo(e))||void 0===i?void 0:i.leafIndex)&&void 0!==n?n:-1;const o=t?r.getLeftLeaf():r.getRightLeaf();return null!==(s=null==o?void 0:o.leafIndex)&&void 0!==s?s:-1}}class nA extends tA{constructor(e,t,i){super(e,t,i)}focusNestedEditor(){return this.alignRequiredVisibleElement(this.selectedItemElement),!!this.switchToNestedContent()&&(this.selectFocusedInputValue(),!0)}updateSelectedItemByChildElement(e,t=null){t instanceof FocusEvent&&this.syncFocusedRowVisibleIndex(),super.updateSelectedItemByChildElement(e,t)}selectFocusedInputValue(){Zl.selectInputValue(document.activeElement)}}class sA extends nA{constructor(e,t,i){super(e,t,i)}getNestedContentContainer(){return this.nestedContentSelected?this.targetElement:super.getNestedContentContainer()}activate(){this.nestedContentSelected&&!this.isNestedElementFocused()&&this.leaveFromNestedContent(),super.activate()}switchToNestedContent(){return this.getNestedContentElement()&&fi.scheduleResetTabIndex(this.selectedItemElement),super.switchToNestedContent()}leaveFromNestedContent(e=Ni.None){fi.makeElementFocusable(this.selectedItemElement),super.leaveFromNestedContent(e)}handleKeyDown(e){const t=this.handleKeyDownForHiddenItem(e);if(null!==t)return t;const i=Be.KeyUtils.getEventKeyCode(e);this.nestedContentSelected&&(i===Be.KeyCode.Tab&&this.alignToAdjacentFocusableItem(e.shiftKey),fi.removeTabIndex(this.selectedItemElement));const n=this.nestedContentSelected,s=super.handleKeyDown(e);return!(i===Be.KeyCode.Tab&&s&&n&&!this.nestedContentSelected)&&s}alignToAdjacentFocusableItem(e){e&&fi.makeElementFocusable(this.selectedItemElement);const t=e?fi.findPrevFocusableElement(this.selectedItemElement):fi.findNextFocusableNotChildElement(document.activeElement);if(!t)return;const i=this.findItemElementIndexByChild(t);if(i<0||i===this.selectedItemIndex)return;const n=this.getItem(i);n&&this.alignRequiredVisibleElement(n)}}class rA extends sA{constructor(e,t,i){super(e,t,i)}getRowType(){return Xs.Filter}handleKeyDown(e){if(this.isStartEditingOnTypeKey(e)&&!this.nestedContentSelected){const t=this.getNestedContentElement();this.switchToNestedContent();const i=document.activeElement;if(e.altKey&&Be.KeyUtils.getEventKeyCode(e)===Be.KeyCode.Down&&Zl.isDropDown(t))return Zl.openDropDown(t),!0;i&&Zl.isEditableTextElement(i)&&i.select()}return super.handleKeyDown(e)}isStartEditingOnTypeKey(e){const t=Be.KeyUtils.getEventKeyCode(e);return!(!e.ctrlKey||t!==Be.KeyCode.Key_v)||super.isStartEditingOnTypeKey(e)}}class oA extends sA{constructor(e,t,i){super(e,t,i)}getRowType(){return Xs.Edit}selectItem(e){e!==this.selectedItemIndex&&this.nestedContentSelected&&this.leaveFromNestedContent(),super.selectItem(e),this.switchToNestedContent()}handleKeyDown(e){const t=this.handleKeyDownForHiddenItem(e);if(null!==t)return t;const i=Be.KeyUtils.getEventKeyCode(e);if(this.nestedContentSelected){if(e.ctrlKey&&[Be.KeyCode.Up,Be.KeyCode.Down,Be.KeyCode.Home,Be.KeyCode.End].includes(i)||e.altKey&&i===Be.KeyCode.Tab)return this.leaveFromNestedContent(),!1;if(i===Be.KeyCode.Enter&&this.canSaveOnEnter()||i===Be.KeyCode.Esc)return this.leaveFromNestedContent(),this.saveRowSelectedColumn(),this.performShortcutEvent(e),!0;i!==Be.KeyCode.Space&&i!==Be.KeyCode.Enter||this.saveRowSelectedColumn()}else if(i===Be.KeyCode.Enter&&this.isActiveExpandButtonCell())return this.performShortcutEvent(e),!0;return super.handleKeyDown(e)}saveRowSelectedColumn(){this.tableStrategy.saveRowSelectedColumn(this)}canSaveOnEnter(){if(!document.activeElement)return!1;const e=document.activeElement;return Te.isTextInput(e)&&!Te.isMultipleRowInput(e)}}class aA extends nA{constructor(e,t,i){super(e,t,i)}get tableBodyStrategy(){return this.tableStrategy}getRowType(){return Xs.Edit}handleKeyDown(e){if(this.tableBodyStrategy.isEditPending&&this.isStartEditingOnTypeKey(e)&&!this.isNestedElementFocused())return this.tableBodyStrategy.queuePendingEditEvent(e),!0;const t=this.handleKeyDownForHiddenItem(e);if(null!==t)return t;if(this.editorManager.isPendingCommandResult&&!this.tableBodyStrategy.isEditPending)return!0;const i=Be.KeyUtils.getEventKeyCode(e);if(this.isEditorCell()){if(i===Be.KeyCode.Esc&&this.tableBodyStrategy.endEditRowItem(Ga.Cancel))return!0;if(this.isActiveEditorCell()){if(Be.KeyUtils.getEventKeyCode(e)===Be.KeyCode.Tab){const t=this.isNewItemRow&&!e.shiftKey;if(this.tableBodyStrategy.startEditNearestRowItem(!e.shiftKey,t))return!0;if(this.tableBodyStrategy.endEditRowItem(t?Ga.SaveAndStartNewRow:Ga.Hide))return!0}if(i===Be.KeyCode.Enter&&!this.editorManager.isEditorPopupShown){if(this.handleEnterKeyDownInActiveEditorCell(e))return!0}}else{if(i===Be.KeyCode.Enter&&this.tableBodyStrategy.startEditRowItem(this,this.selectedItemIndex))return!0;if(this.isEditingOnTypeEnabled()&&this.isStartEditingOnTypeKey(e)&&this.tableBodyStrategy.startEditingOnType(this,this.selectedItemIndex))return this.tableBodyStrategy.queuePendingEditEvent(e),!0}}else if(i===Be.KeyCode.Enter&&this.isActiveExpandButtonCell())return this.performShortcutEvent(e),!0;return super.handleKeyDown(e)}handleTabKeyDown(e,t=!1,i=!1){return this.isNewItemRow&&!e.shiftKey&&this.lastItemSelected?!!this.tableBodyStrategy.endEditRowItem(Ga.SaveAndStartNewRow)||super.handleTabKeyDown(e,t,!0):super.handleTabKeyDown(e,t)}handleEnterKeyDownInActiveEditorCell(e){const t=document.activeElement;if(e.shiftKey&&t instanceof HTMLTextAreaElement&&Zl.isEditableTextElement(t))return!1;return this.tableBodyStrategy.endEditRowItem(this.enterKeyDirection===qs.Column||(e.shiftKey?this.firstItemSelected:this.lastItemSelected)&&this.enterKeyDirection===qs.Row?Ga.Save:Ga.Hide,!0,e.shiftKey)}get isNewItemRow(){return this.targetElement.classList.contains(ue.EditNewItemRowInplaceClassName)}isEditorCell(){return!Zs.isCommandCell(this.selectedItemElement)&&!Zs.isExpandButtonCell(this.selectedItemElement)&&!Zs.isSelectionCell(this.selectedItemElement)}isActiveEditorCell(){return Zs.getCellType(this.selectedItemElement)===Js.Edit}}class lA extends nA{constructor(e,t,i){super(e,t,i)}getRowType(){return Xs.EditForm}}class AA extends tA{constructor(e,t,i){super(e,t,i)}getRowType(){return Xs.EditNewItemRow}handleKeyDown(e){if(this.editorManager.isPendingCommandResult)return!0;const t=Be.KeyUtils.getEventKeyCode(e);if(!this.isObsolete&&t===Be.KeyCode.Enter){const e=this.tableStrategy.getSavedColumnInfo();if(this.tableStrategy.startEditNewItemRow(this,e))return!0}return super.handleKeyDown(e)}}class dA extends tA{constructor(e,t,i){super(e,t,i)}get selectedColumnUidSearchElement(){var e;const t=super.selectedColumnUidSearchElement;return null!==(e=null==t?void 0:t.querySelector(`.${ue.ExpandButtonCellClassName}`))&&void 0!==e?e:t}getRowType(){return Xs.Group}queryItems(){return new Array}handleKeyDown(e){const t=this.handleKeyDownForHiddenItem(e);return null!==t?t:this.nestedContentSelected||Be.KeyUtils.getEventKeyCode(e)!==Be.KeyCode.Left&&Be.KeyUtils.getEventKeyCode(e)!==Be.KeyCode.Right?Be.KeyUtils.getEventKeyCode(e)===Be.KeyCode.Enter?(this.switchToNestedContent()||this.performShortcutEvent(e),!0):super.handleKeyDown(e):(this.tableStrategy.trySelectHiddenCell(this.selectedItemIndex,(()=>this.dispatchKeyboardEventToSelectedItemStrategy(e)))||this.performShortcutEvent(e),!0)}isImmediatelyClickEnabled(){return!0}dispatchKeyboardEventToSelectedItemStrategy(e){const t=this.tableStrategy.getSelectedItemStrategy();null==t||t.targetElement.dispatchEvent(e)}}class cA extends tA{constructor(e,t,i){super(e,t,i)}get tableBodyStrategy(){return this.tableStrategy}getRowType(){return Xs.Data}handleKeyDown(e){if(this.tableBodyStrategy.isEditPending&&this.isStartEditingOnTypeKey(e))return this.tableBodyStrategy.queuePendingEditEvent(e),!0;const t=this.handleKeyDownForHiddenItem(e);if(null!==t)return t;if(this.editorManager.isPendingCommandResult)return!0;const i=Be.KeyUtils.getEventKeyCode(e);if(!this.nestedContentSelected){const t=this.isSelectionRowEnabled&&!this.isSelectionCell();if(i===Be.KeyCode.Space&&t)return this.performShortcutEvent(e),!0;if(!this.isObsolete&&i===Be.KeyCode.Enter){if(this.isActiveExpandButtonCell())return this.performShortcutEvent(e),!0;if(this.tableBodyStrategy.startEditRowItem(this,this.selectedItemIndex))return!0}if(this.isEditingOnTypeEnabled()&&this.isStartEditingOnTypeKey(e)&&this.tableBodyStrategy.startEditingOnType(this,this.selectedItemIndex))return this.tableBodyStrategy.queuePendingEditEvent(e),!0}return!!super.handleKeyDown(e)||!(this.nestedContentSelected||i!==Be.KeyCode.Enter||!this.hasRowClickEvent)&&(this.performShortcutEvent(e),!0)}}class hA extends tA{constructor(e,t,i){super(e,t,i)}getRowType(){return Xs.EmptyData}}class uA extends tA{constructor(e,t,i){super(e,t,i)}getRowType(){return Xs.Detail}}class pA extends tA{constructor(e,t,i){super(e,t,i)}getRowType(){return Xs.Footer}}class mA extends tA{constructor(e,t,i){super(e,t,i)}getRowType(){return Xs.GroupFooter}}class gA{constructor(e){this.cellInfo=e}}class CA{constructor(e){this.result=e}}class fA extends CustomEvent{constructor(e){super(fA.eventName,{detail:e,bubbles:!0,composed:!1,cancelable:!1})}}fA.eventName="dxbl-grid-request-start-editing";class vA extends CustomEvent{constructor(e){const t=new CA(e);super(vA.eventName,{detail:t,bubbles:!0,composed:!1,cancelable:!1})}}vA.eventName="dxbl-grid-cell-editor-shown";class bA extends js{constructor(e,t){super(e,t),this.savedColumnInfo=null}getSavedColumnInfo(){return this.savedColumnInfo}saveColumnInfo(e){this.savedColumnInfo=e}syncSelectedColumn(e){const t=this.getSavedColumnInfo();e.syncSelectedColumn(t)}queryItems(){return this.queryItemsBySelector(Gs.DataTablePartsSelector)}createTableBodyItemStrategy(e){return this.isVirtualScrollingEnabled(e)?new EA(this,this.grid,e):new BA(this,this.grid,e)}createItemStrategy(e){return e.matches("thead")?new yA(this,this.grid,e):e.matches("tbody")?this.createTableBodyItemStrategy(e):e.matches("tfoot")?new IA(this,this.grid,e):null}getSelectedItemStrategy(){return super.getSelectedItemStrategy()}selectItem(e,t=-1){var i;const n=this.getStrategy(e),s=this.syncSelectedColumns(n);t>=0&&n.enterTablePartWithNewIndex(t),(t<0||s&&(null===(i=n.getStrategy(t))||void 0===i?void 0:i.getRowType())===Xs.Header)&&(t=n.selectedItemIndex);const r=this.getSelectedItemStrategy();r&&r!==n&&r.leaveTablePart(),n.selectItem(t)}isVisibleItem(e){if(!super.isVisibleItem(e))return!1;const t=this.getStrategy(e);return!!t&&t.nearestVisibleSelectedIndex>-1}handleKeyDown(e){switch(Be.KeyUtils.getEventKeyCode(e)){case Be.KeyCode.Up:return this.handleArrowUpKeyDown(e.ctrlKey);case Be.KeyCode.Down:return this.handleArrowDownKeyDown(e.ctrlKey);case Be.KeyCode.Tab:return this.handleTabKeyDown(e);case Be.KeyCode.PageUp:case Be.KeyCode.PageDown:return this.handleBodyShortcut(e,!0);case Be.KeyCode.Home:case Be.KeyCode.End:return this.handleBodyShortcut(e,!1)}return!1}handleTabKeyDown(e){var t;if(e.altKey)return super.handleTabKeyDown(e,!0);const i=e.shiftKey?-1:1;if(i<0&&this.firstItemSelected||i>0&&this.lastItemSelected)return!1;const n=this.getSelectedItemStrategy();return null===(t=this.getStrategy(this.selectedItemIndex+i))||void 0===t||t.handleTabKeyFromSibling(e,n),!0}isVirtualScrollingEnabled(e){if(e.classList.contains(ue.TopFixedBodyClassName))return!1;const t=this.getScrollViewer();return!!t&&Ja.isVirtualScrollingEnabled(t)}handleArrowUpKeyDown(e){if(0===this.selectedItemIndex)return!1;if(e){if(this.firstItemSelected)return!1;this.moveToPrevItem()}else{const e=this.getStrategy(this.selectedItemIndex-1);this.selectItem(this.selectedItemIndex-1,e.itemCount-1)}return!0}handleArrowDownKeyDown(e){if(this.selectedItemIndex>=this.itemCount-1)return!1;if(e){if(this.lastItemSelected)return!1;this.moveToNextItem()}else this.selectItem(this.selectedItemIndex+1,0);return!0}handleBodyShortcut(e,t){const i=this.items.map(((e,t)=>e.matches("tbody")?t:-1)).filter((e=>e>=0));if(!i.length)return!1;const n=this.getStrategy(i[i.length-1]);return!(!n||n===this.getSelectedItemStrategy())&&(t&&this.syncSelectedColumns(n),n.handleKeyDown(e))}getStrategy(e){return this.getItemStrategy(e)}syncSelectedColumns(e){const t=this.getSelectedItemStrategy();if(t){const i=t.getSelectedItemStrategy(),n=e.getSelectedItemStrategy();if(i&&n)return e.syncSelectedColumns(i,n)}return!1}}class wA extends js{constructor(e,t,i){super(t,i),this.parentTableStrategy=e}get selectedHiddenRowStrategy(){return null}get hiddenRowVisibleIndex(){return null}get isFixed(){return!0}get preventScrollOnFocus(){return!this.navigator.initialized}enterTablePartWithNewIndex(e){}isFirstCellSelected(e){return!1}isLastCellSelected(e){return!1}trySelectHiddenCell(e,t=null){return!1}handleKeyDownForHiddenRow(e,t){return null}leaveTablePart(){}getStrategy(e){const t=this.getItemStrategy(e);return t instanceof tA?t:null}getSavedColumnInfo(){return this.parentTableStrategy.getSavedColumnInfo()}saveRowSelectedColumn(e){this.saveSelectedColumn(e)}saveSelectedColumn(e){const t=e.getSyncSelectedColumnInfo();this.saveColumnInfo(t)}syncSelectedColumn(e){this.isColumnSyncRequired(e)&&this.parentTableStrategy.syncSelectedColumn(e)}syncSelectedColumns(e,t){return t&&e!==t&&(e&&this.isColumnSyncRequired(e)&&this.saveSelectedColumn(e),this.syncSelectedColumn(t)),!1}handleTabKeyFromSibling(e,t){var i;e.shiftKey?this.moveToLastItem():this.moveToFirstItem();const n=null!==(i=null==t?void 0:t.getSelectedItemStrategy())&&void 0!==i?i:null;this.onAfterTabKeyDownHandled(e,n)}getShortcutContext(){return{AreaType:Ys.DataTable}}queryItems(){return this.queryItemsBySelector(Gs.RowSelector)}getSelectedItemStrategy(){const e=super.getSelectedItemStrategy();return e instanceof tA?e:null}selectItem(e){const t=this.getSelectedItemStrategy(),i=this.getStrategy(e);this.syncSelectedColumns(t,i),super.selectItem(e),t&&t!==i&&t.leaveRow()}updateSelectedItemByIndex(e){const t=this.getSelectedItemStrategy();t&&e!==this.selectedItemIndex&&t.leaveRow(),super.updateSelectedItemByIndex(e)}handleKeyDown(e){switch(Be.KeyUtils.getEventKeyCode(e)){case Be.KeyCode.Up:return this.handleArrowUpKeyDown(e.ctrlKey);case Be.KeyCode.Down:return this.handleArrowDownKeyDown(e.ctrlKey);case Be.KeyCode.Tab:return this.handleTabKeyDown(e)}return!1}handleTabKeyDown(e){const t=this.getSelectedItemStrategy(),i=super.handleTabKeyDown(e);return i&&this.onAfterTabKeyDownHandled(e,t),i}onAfterTabKeyDownHandled(e,t){const i=this.getSelectedItemStrategy();i&&(t&&!this.isColumnSyncRequired(i)&&this.isColumnSyncRequired(t)&&this.saveEdgeColumn(t,!e.shiftKey),e.shiftKey?i.selectLastCell():i.selectFirstCell())}saveEdgeColumn(e,t){const i=e.getItem(t?0:e.itemCount-1);if(!i)return;const n=e.getColumnInfo(i);this.saveColumnInfo(n)}saveColumnInfo(e){this.parentTableStrategy.saveColumnInfo(e)}getStrategyByRowVisibleIndex(e){const t=this.items.findIndex(((t,i)=>{var n;return(null===(n=this.getStrategy(i))||void 0===n?void 0:n.getRowVisibleIndex())===e}));return this.getItemStrategy(t)}handleArrowUpKeyDown(e){if(!e){if(this.firstItemSelected)return!1;this.moveToPrevItem()}return!e}handleArrowDownKeyDown(e){if(!e){if(this.lastItemSelected)return!1;this.moveToNextItem()}return!e}isColumnSyncRequired(e){const t=e.getRowType();return wA.isColumnSyncRequired(t)}static isColumnSyncRequired(e){switch(e){case Xs.Header:case Xs.Filter:case Xs.Edit:case Xs.Data:case Xs.Footer:case Xs.GroupFooter:return!0}return!1}}class yA extends wA{constructor(e,t,i){super(e,t,i),this.isTabKeyDownHandling=!1}selectItem(e){const t=this.getSelectedItemStrategy(),i=this.getStrategy(e),n=this.syncSelectedRows(t,i);super.selectItem(n>=0?n:e)}handleKeyDown(e){switch(Be.KeyUtils.getEventKeyCode(e)){case Be.KeyCode.Left:return this.moveHorizontally(!0);case Be.KeyCode.Right:return this.moveHorizontally(!1)}return super.handleKeyDown(e)}createItemStrategy(e){switch(Zs.getRowType(e)){case Xs.Header:return new iA(this,this.grid,e);case Xs.Filter:return new rA(this,this.grid,e)}throw new Error("Not implemented")}syncSelectedColumns(e,t){if(e&&e!==t&&this.isColumnSyncRequired(t)){const i=this.syncSelectedRows(e,t);if(i>=0)return this.selectedItemIndex=i,t=this.getSelectedItemStrategy(),super.syncSelectedColumns(e,t),!0}return super.syncSelectedColumns(e,t)}syncSelectedRows(e,t){if(!this.isTabKeyDownHandling&&e&&!this.isHeaderRowStrategy(e)&&t&&this.isHeaderRowStrategy(t)){const t=this.isColumnSyncRequired(e)?e.getSyncSelectedColumnInfo():this.getSavedColumnInfo();if(t)return t.headerRowIndex}return-1}handleArrowDownKeyDown(e){const t=this.getSelectedItemStrategy();if(!e&&t&&this.isHeaderRowStrategy(t)){const e=t,i=e.getSelectedColumnInfo();if(i&&!i.hasLeafs){const t=i.headerRowIndex+e.getSelectedItemRowSpan();return!(t>=this.itemCount)&&(this.selectItem(t),!0)}}return super.handleArrowDownKeyDown(e)}handleTabKeyDown(e){this.isTabKeyDownHandling=!0;const t=super.handleTabKeyDown(e);return this.isTabKeyDownHandling=!1,t}isHeaderRowStrategy(e){return e.getRowType()===Xs.Header}moveHorizontally(e){const t=this.getSelectedItemStrategy();if(t&&this.isHeaderRowStrategy(t)){const i=t.getSelectedItemLeafIndex(e);return this.selectColumn(i+(e?-1:1))}return!1}selectColumn(e){if(e>=0){const t=this.findHeaderCellByColumnIndex(e);if(t){const e=this.findItemElementIndexByChild(t),i=this.getStrategy(e);if(i){const n=i.getColumnInfo(t);if(n)return i.syncSelectedColumn(n),this.selectedItemIndex=e,this.selectItem(e),!0}}}return!1}}class BA extends wA{constructor(e,t,i){super(e,t,i),this.savedVisibleIndex=-1,this.restoreSelectedColumn=!1,this.expectedFocusedRowFromServer=!1,this.editPending=!1,this.pendingEditEvents=[],this.boundOnVisibleElementChangedHandler=this.onVisibleElementChanged.bind(this),this.boundOnGridRequestStartCellEditingHandle=this.onRequestStartCellEditing.bind(this),this.addEventSubscriptions()}get isEditPending(){return this.editPending}get isFixed(){return this.targetElement.classList.contains(ue.TopFixedBodyClassName)}queuePendingEditEvent(e){Be.KeyUtils.getEventKeyCode(e)===Be.KeyCode.Backspace&&this.pendingEditEvents.pop(),this.pendingEditEvents.push(e)}onDispose(){super.onDispose(),this.removeEventSubscriptions()}createDataRowStrategy(e){return new cA(this,this.grid,e)}createEditRowStrategy(e){return new oA(this,this.grid,e)}createInplaceEditRowStrategy(e){return new aA(this,this.grid,e)}createItemStrategy(e){switch(Zs.getRowType(e)){case Xs.Edit:return this.isInplaceEditingEnabled?this.createInplaceEditRowStrategy(e):this.createEditRowStrategy(e);case Xs.EditForm:return new lA(this,this.grid,e);case Xs.EditNewItemRow:return new AA(this,this.grid,e);case Xs.Group:return new dA(this,this.grid,e);case Xs.Data:return this.createDataRowStrategy(e);case Xs.EmptyData:return new hA(this,this.grid,e);case Xs.Detail:return new uA(this,this.grid,e);case Xs.GroupFooter:return new mA(this,this.grid,e)}throw new Error("Not implemented")}selectItem(e){const t=this.getStrategy(e);this.saveFocusedRowVisibleIndex(t),super.selectItem(e),this.restoreSelectedColumn=!1}saveRowSelectedColumn(e){super.saveRowSelectedColumn(e),this.restoreSelectedColumn=!0}syncSelectedColumns(e,t){const i=super.syncSelectedColumns(e,t);return!i&&this.restoreSelectedColumn&&t&&this.parentTableStrategy.syncSelectedColumn(t),i||this.restoreSelectedColumn}handleKeyDown(e){switch(this.expectedFocusedRowFromServer=!1,Be.KeyUtils.getEventKeyCode(e)){case Be.KeyCode.PageDown:return this.handlePageUpDown(e,!1)||this.performShortcutEvent(e),!0;case Be.KeyCode.PageUp:return this.handlePageUpDown(e,!0)||this.performShortcutEvent(e),!0;case Be.KeyCode.Home:return this.handleHomeKeyDown(e.ctrlKey);case Be.KeyCode.End:return this.handleEndKeyDown(e.ctrlKey)}return super.handleKeyDown(e)}handleKeyUp(e){switch(Be.KeyUtils.getEventKeyCode(e)){case Be.KeyCode.Down:case Be.KeyCode.Up:case Be.KeyCode.PageUp:case Be.KeyCode.PageDown:case Be.KeyCode.Home:case Be.KeyCode.End:case Be.KeyCode.Tab:case Be.KeyCode.Enter:this.notifyFocusedRowChanged()}return!1}moveToPrevItem(){super.moveToPrevItem(),this.scrollToElement(null,Qe.None)}moveToNextItem(){const e=this.getScrollViewer(),t=e&&Ja.bottomAlignmentRequired(this.selectedItemElement,e)?Pe.Bottom:null;super.moveToNextItem(),this.scrollToElement(t,Qe.None)}leaveTablePart(){super.leaveTablePart(),this.notifyFocusedRowChanged()}selectFirstCell(){var e;this.moveToFirstItem(),null===(e=this.getSelectedItemStrategy())||void 0===e||e.selectFirstCell()}selectLastCell(){var e;this.moveToLastItem(),null===(e=this.getSelectedItemStrategy())||void 0===e||e.selectLastCell()}onHandlePageUpDownKey(e,t,i){const n=this.validateItemIndex(e);this.selectItem(n),this.scrollToElement(t,i)}scrollToElement(e,t){const i=this.getScrollViewer();i&&_e.scrollToElementRelyOnStickyDescendants(this.selectedItemElement,e,t,i)}onMakeRowVisible(e){this.selectItem(e)}handlePageUpDown(e,t){this.savedVisibleIndex=-1;const i=t?this.firstItemSelected:this.lastItemSelected,n=this.getSelectedItemStrategy(),s=n&&n.getRowType()===Xs.EmptyData,r=this.targetElement.contains(e.target);if(i&&(s||r))return this.expectedFocusedRowFromServer=this.isFocusedRowEnabled,!1;const o=this.getScrollViewer();if(o){const e=t?Pe.Top:Pe.Bottom,i=Ja.calculateBoundaryItemIndex(this,o,!t);this.onHandlePageUpDownKey(i,e,Qe.None)}return!0}handleHomeKeyDown(e){return e&&this.selectFirstCell(),e}handleEndKeyDown(e){return e&&this.selectLastCell(),e}notifyFocusedRowChanged(){this.isFocusedRowEnabled&&this.savedVisibleIndex>-1&&(this.grid.notifyFocusedRowChanged(this.savedVisibleIndex),this.savedVisibleIndex=-1)}shouldSaveFocusedRowVisibleIndex(e){return!this.expectedFocusedRowFromServer&&this.isFocusableRow(e.getRowType())}saveFocusedRowVisibleIndex(e){e&&this.shouldSaveFocusedRowVisibleIndex(e)&&(this.savedVisibleIndex=e.getRowVisibleIndex())}isFocusableRow(e){switch(e){case Xs.Group:case Xs.Edit:case Xs.Data:return!0}return!1}addEventSubscriptions(){const e=this.getScrollViewer();e&&e.addEventListener(Oe.eventName,this.boundOnVisibleElementChangedHandler),this.grid.addEventListener(fA.eventName,this.boundOnGridRequestStartCellEditingHandle)}removeEventSubscriptions(){const e=this.getScrollViewer();e&&e.removeEventListener(Oe.eventName,this.boundOnVisibleElementChangedHandler),this.grid.removeEventListener(fA.eventName,this.boundOnGridRequestStartCellEditingHandle)}onVisibleElementChanged(e){if(e.detail.isFocusRequired){const t=this.items.indexOf(e.detail.element);this.onMakeRowVisible(t)}}onRequestStartCellEditing(e){let t=!1;const i=e.detail.cellInfo,n=this.findItemElementIndexByChild(i.element);if(n<0)return;const s=this.getStrategy(n);if(!(s instanceof AA)){if(s instanceof tA){this.saveRowSelectedColumn(s);const e=s.findItemElementIndexByColumnUid(i.columnInfo.uID);t=this.startEditRowItem(s,e,i.hitInnerElement,this.raiseStartCellEditingRequestComplete.bind(this))}t||(i.rowType===Xs.Edit&&this.endEditRowItem(Ga.Hide),this.raiseStartCellEditingRequestComplete(!1))}}raiseStartCellEditingRequestComplete(e){this.grid.dispatchEvent(new vA(e))}startEditNewItemRow(e,t){const i=this.editorManager.showNewItemRowEditor(t);return i>=0&&(e.selectItem(i),this.saveRowSelectedColumn(e),!0)}startEditRowItem(e,t,i=null,n=null){if(null===e||!this.isInplaceEditableRow(e))return!1;if(t<0||t>=e.itemCount)return!1;return!!this.editorManager.showEditor(e.getItem(t),i,(e=>{const i=e===qa.Completed;if(i){const e=this.findEditRowStrategy();null!==e&&(e.updateSelectedItemByIndex(t),this.saveRowSelectedColumn(e),e.focusNestedEditor()||e.leaveFromNestedContent())}null!==n&&n(i)}))&&(e.selectItem(t),this.saveRowSelectedColumn(e),!0)}startEditingOnType(e,t){const i=this.startEditRowItem(e,t,null,(e=>{if(e){const e=this.findEditRowStrategy(),t=document.activeElement;(null==e?void 0:e.nestedContentSelected)&&t&&this.applyPendingEditEvents(t)}this.editPending=!1,this.pendingEditEvents.splice(0),this.raiseStartCellEditingRequestComplete(e)}));return this.editPending=i,i}endEditRowItem(e,t=!1,i=!1){const n=this.getSelectedItemStrategy();return null!==n&&n instanceof aA&&(n.leaveFromNestedContent(),e!==Ga.Hide&&this.saveRowSelectedColumn(n),this.editorManager.closeEditor(e,(s=>{e===Ga.Cancel&&s===qa.Failed?n.focusNestedEditor()||n.leaveFromNestedContent():t&&this.enterKeyDirection!==qs.None&&this.selectNextItemByEnterKey(!i,!1)})))}startEditNearestRowItem(e,t=!1){const i=this.findNearestCellPosition(e,!0);if(null===i)return!1;const[n,s]=i;if(t&&n!==this.selectedItemIndex)return!1;const r=this.getSelectedItemStrategy(),o=this.getStrategy(n);return r&&r!==o&&r.updateSelectedItemByIndex(s),this.startEditRowItem(o,s,null,this.raiseStartCellEditingRequestComplete.bind(this))}selectNextItemByEnterKey(e,t){const i=this.findNextPositionForEnterKey(e,t);if(!i)return;const[n,s]=i;if(this.enterKeyDirection===qs.Row){const e=this.getSelectedItemStrategy();null==e||e.updateSelectedItemByIndex(s)}const r=this.selectedItemIndex!==n;this.selectItem(n),r&&this.notifyFocusedRowChanged()}findNextPositionForEnterKey(e,t){if(this.enterKeyDirection===qs.Row)return this.findNearestCellPosition(e,t);const i=this.getSelectedItemStrategy();if(!i||(e?this.lastItemSelected:this.firstItemSelected))return null;const n=e?1:-1;for(let e=this.selectedItemIndex+n;e>=0&&e<this.itemCount;e+=n){const n=this.getStrategy(e);if(!(n&&(!t||this.isInplaceEditableRow(n))))continue;return[e,Math.min(i.selectedItemIndex,n.itemCount-1)]}return null}findNearestCellPosition(e,t){const i=e?1:-1,n=this.itemCount,s=this.selectedItemIndex;for(let r=s;r>=0&&r<n;r+=i){const n=this.getStrategy(r);if(!(n&&(!t||this.isInplaceEditableRow(n))))continue;let o;o=r===s?n.selectedItemIndex+i:e?0:n.itemCount-1;for(let e=o;e>=0&&e<n.itemCount;e+=i){const i=n.getItem(e),s=this.getColumnInfoByCell(i);if(null!==s&&(!t||s.isEditable))return[r,e]}}return null}isInplaceEditableRow(e){if(!this.isInplaceEditingEnabled)return!1;const t=e.getRowType();return t===Xs.Data||t===Xs.Edit}findEditRowStrategy(){for(let e=0;e<this.itemCount;e++){const t=this.getStrategy(e),i=BA.castToEditRowStategy(t);if(i)return i}return null}applyPendingEditEvents(e){for(let t=0;t<this.pendingEditEvents.length;t++){const i=this.pendingEditEvents[t];this.dispatchKeyboardEvent(e,"keydown",i)||(this.dispatchKeyboardEvent(e,"keypress",i)||Zl.isEditableTextElement(e)&&(this.dispatchInputEvent(e,"beforeinput",i.key)||this.processEditorInput(e,i,t)))}this.triggerChangeOnBlurIfNeeded(e)}processEditorInput(e,t,i){if(Zl.isCheckBoxInput(e)&&Be.KeyUtils.getEventKeyCode(t)===Be.KeyCode.Space)return Zl.isDxCheckBoxElement(e)||e.click(),void this.dispatchChangeEvent(e);Zl.isEditableTextElement(e)&&(0===i&&(e.value=""),this.isPrintableCharacterKey(t)&&(e.value+=t.key,this.dispatchInputEvent(e,"input",t.key)))}triggerChangeOnBlurIfNeeded(e){if(Zl.isCheckBoxInput(e))return;let t=!0;e.addEventListener("change",(()=>t=!1),{once:!0,passive:!0}),e.addEventListener("blur",(i=>{t&&e.dispatchEvent(new Event("change",{bubbles:!0}))}),{once:!0,passive:!0})}dispatchChangeEvent(e){const t=new Event("change",{bubbles:!0,cancelable:!0,composed:!0});return e.dispatchEvent(t),t.defaultPrevented}dispatchKeyboardEvent(e,t,i){const n=new KeyboardEvent(t,i);return e.dispatchEvent(n),n.defaultPrevented}dispatchInputEvent(e,t,i=null){const n=new InputEvent(t,{bubbles:!0,cancelable:!0,inputType:"insertText",data:i});return e.dispatchEvent(n),n.defaultPrevented}static castToEditRowStategy(e){return e instanceof nA&&e.getRowType()===Xs.Edit?e:null}}class EA extends BA{constructor(e,t,i){super(e,t,i),this.selectedRowVirtualIndex=-1,this.selectedNonVirtualRowIndexOffset=0,this.selectedHiddenStrategy=null,this.isLastRowSelected=!1,this.rowVirtualIndexToShow=null,this.scrollRequired=!1,this.onRowMadeVisibleCallback=null,this.cellEditingStarted=!1,this.skipIndexCorrectionForIncomingEditRow=!1,this.boundOnScrollHandler=this.onScroll.bind(this),this.boundOnStartCellEditingRequestHandler=this.onStartCellEditingRequest.bind(this),this.addEventListeners()}onDispose(){this.removeEventListeners(),super.onDispose()}get preventScrollOnFocus(){return super.preventScrollOnFocus||this.isFocusHidden||!this.scrollRequired&&!this.isRowInView(this.selectedItemElement)}get firstItemSelected(){return super.firstItemSelected&&0===this.selectedRowVirtualIndex}get lastItemSelected(){return this.isLastRowSelected||!this.totalItemCount}get nearestVisibleSelectedIndex(){return this.selectedItemIndex}get isFocusHidden(){return xi(this.targetElement)}get lastVirtualIndexSelected(){return this.selectedRowVirtualIndex>=this.lastVirtualIndex}get lastVirtualIndex(){const e=this.totalItemCount;return e?e-1:0}get totalItemCount(){return this.getScrollViewer().totalItemCount}get makingRowVisibleStarted(){return null!==this.rowVirtualIndexToShow}initialize(){super.initialize(),this.cellEditingStarted=!1}isFirstCellSelected(e){var t,i;return null!==(i=null===(t=this.getSelectedHiddenStrategyNotEqualTo(e))||void 0===t?void 0:t.firstItemSelected)&&void 0!==i?i:super.isFirstCellSelected(e)}isLastCellSelected(e){var t,i;return null!==(i=null===(t=this.getSelectedHiddenStrategyNotEqualTo(e))||void 0===t?void 0:t.lastItemSelected)&&void 0!==i?i:super.isLastCellSelected(e)}isIndexWithinBoundaries(e){return!0}enterTablePartWithNewIndex(e){this.scrollRequired=!0;const t=0===e;this.updateSelectedVirtualIndex(t?0:this.lastVirtualIndex),this.selectedNonVirtualRowIndexOffset=t?-1:EA.maxOffset}selectItem(e){const t=this.correctSelectionIndex(e);t<0||(super.selectItem(t),this.scrollRequired=!1,this.isFocusHidden||this.updateSelectedVirtualState())}leaveTablePart(){super.leaveTablePart(),this.scrollRequired=!0}updateSelectedItemByChildElement(e,t=null){const i=this.selectedItemIndex;if(super.updateSelectedItemByChildElement(e,t),this.skipIndexCorrectionForIncomingEditRow=!1,t instanceof MouseEvent)return Si(this.targetElement),void this.updateSelectedVirtualState();t instanceof FocusEvent&&this.selectedRowVirtualIndex<0&&this.updateSelectedVirtualIndex();(i!==this.selectedItemIndex||e.parentElement!==this.selectedItemElement)&&this.resetVirtualStateBySelectedStrategy(e)}moveToPrevItem(){this.isFocusHidden?this.moveToSiblingRowByVirtualIndex(-1):super.moveToPrevItem()}moveToNextItem(){this.isFocusHidden?this.moveToSiblingRowByVirtualIndex(1):super.moveToNextItem()}selectFirstCell(){this.selectedNonVirtualRowIndexOffset=-1,this.setOnRowMadeVisibleCallback((()=>{var e;null===(e=this.getSelectedItemStrategy())||void 0===e||e.selectFirstCell()})),this.makeRowVisible(0)}selectLastCell(){this.selectedNonVirtualRowIndexOffset=EA.maxOffset,this.setOnRowMadeVisibleCallback((()=>{var e;null===(e=this.getSelectedItemStrategy())||void 0===e||e.selectLastCell()})),this.makeRowVisible(this.lastVirtualIndex)}get hiddenRowVisibleIndex(){return this.isFocusHidden?this.selectedNonVirtualRowIndexOffset?-1:this.selectedRowVirtualIndex:super.hiddenRowVisibleIndex}get selectedHiddenRowStrategy(){return this.isFocusHidden&&this.selectedHiddenStrategy?this.selectedHiddenStrategy:super.selectedHiddenRowStrategy}handleKeyDownForHiddenRow(e,t){const i=this.getSelectedHiddenStrategyNotEqualTo(e);return i?i.handleKeyDown(t):super.handleKeyDownForHiddenRow(e,t)}trySelectHiddenCell(e,t=null){return!!this.isFocusHidden&&(this.setOnRowMadeVisibleCallback((()=>{var i;null===(i=this.getSelectedItemStrategy())||void 0===i||i.selectItem(e),this.scrollToElement(null,Qe.None),null==t||t()})),this.makeRowVisible(this.selectedRowVirtualIndex),!0)}getSelectedItemStrategy(){var e;const t=null!==(e=super.getSelectedItemStrategy())&&void 0!==e?e:this.selectedHiddenStrategy;return t&&this.selectedHiddenStrategy&&t!==this.selectedHiddenStrategy&&this.syncSelectedColumns(this.selectedHiddenStrategy,t),t}handleTabKeyFromSibling(e,t){e.shiftKey?this.selectLastCell():this.selectFirstCell()}onAfterTabKeyDownHandled(e,t){this.makingRowVisibleStarted?this.setOnRowMadeVisibleCallback((()=>{this.scrollToElement(null,Qe.None),super.onAfterTabKeyDownHandled(e,t)}),!0):super.onAfterTabKeyDownHandled(e,t)}onMakeRowVisible(e){var t;if(this.makingRowVisibleStarted)this.rowVirtualIndexToShow=null,this.scrollRequired=!0,super.onMakeRowVisible(null!==(t=this.findVisibleIndexByVirtualIndex(this.selectedRowVirtualIndex))&&void 0!==t?t:e),this.callOnRowMadeVisibleCallback(),this.notifyFocusedRowChanged();else{const t=this.getStrategy(e);t&&this.resetVirtualStateForIncomingEditRow(t)||this.updateSelectedVirtualIndex(-1),super.onMakeRowVisible(e)}}onHandlePageUpDownKey(e,t,i){if(this.isFocusHidden)return void this.makeRowVisibleWithAlignment(this.selectedRowVirtualIndex,t,i);const n=this.validateItemIndex(e),s=this.findClosestVisibleIndexWithVirtualIndex(n,null!=t?t:void 0),r=s.virtualIndex,o=e-s.visibleIndex;if(n===e)return this.selectedNonVirtualRowIndexOffset=o,void this.makeRowVisibleWithAlignment(r,t,i);this.setOnRowMadeVisibleCallback((()=>{this.selectedNonVirtualRowIndexOffset=o;const e=this.findVisibleIndexByVirtualIndex(r);null!==e&&this.selectItem(e),this.scrollToElement(t,i)}));const a=r+Math.sign(o)*Math.round(Math.abs(o)/2);this.makeRowVisible(a)}shouldSaveFocusedRowVisibleIndex(e){return super.shouldSaveFocusedRowVisibleIndex(e)&&(this.selectedRowVirtualIndex!==e.getRowVisibleIndex()||0!==this.selectedNonVirtualRowIndexOffset||this.scrollRequired)}resetVirtualStateBySelectedStrategy(e){const t=this.getSelectedItemStrategy();t&&this.resetVirtualStateForIncomingEditRow(t)&&(t.updateSelectedItemByChildElement(e),t.switchToNestedContent(),this.saveRowSelectedColumn(t))}addEventListeners(){const e=this.getScrollViewer();e&&(e.addEventListener(Ji.eventName,this.boundOnScrollHandler),this.grid.addEventListener(vA.eventName,this.boundOnStartCellEditingRequestHandler))}removeEventListeners(){const e=this.getScrollViewer();e&&(e.removeEventListener(Ji.eventName,this.boundOnScrollHandler),this.grid.removeEventListener(vA.eventName,this.boundOnStartCellEditingRequestHandler))}onScroll(e){this.cellEditingStarted&&!this.isRowInView(this.selectedItemElement)&&(this.endEditRowItem(Ga.Save),this.cellEditingStarted=!1)}onStartCellEditingRequest(e){this.cellEditingStarted=e.detail.result,this.updateSelectedVirtualState()}correctSelectionIndex(e){var t,i,n;if(this.makingRowVisibleStarted||this.skipIndexCorrectionForIncomingEditRow)return this.skipIndexCorrectionForIncomingEditRow=!1,-1;if(this.selectedRowVirtualIndex<0)return e;if(e===this.selectedItemIndex&&!this.scrollRequired)this.isVirtualIndexRendered(this.selectedRowVirtualIndex)?(e=null!==(t=this.findVisibleIndexByVirtualIndex(this.selectedRowVirtualIndex))&&void 0!==t?t:e,Si(this.targetElement)):(Ii(this.targetElement),null===(i=this.selectedHiddenStrategy)||void 0===i||i.makeObsolete());else if(this.isFocusHidden||this.scrollRequired){if(!this.isVirtualIndexRendered(this.selectedRowVirtualIndex))return this.makeRowVisible(this.selectedRowVirtualIndex),-1;e=null!==(n=this.findVisibleIndexByVirtualIndex(this.selectedRowVirtualIndex))&&void 0!==n?n:e,Si(this.targetElement)}return e}resetVirtualStateForIncomingEditRow(e){if(this.skipIndexCorrectionForIncomingEditRow)return!1;const t=BA.castToEditRowStategy(e);return this.skipIndexCorrectionForIncomingEditRow=!!t&&e!==this.selectedHiddenStrategy&&this.isRowInView(t.targetElement),!!this.skipIndexCorrectionForIncomingEditRow&&(this.selectedRowVirtualIndex>=0&&(Si(this.targetElement),this.updateSelectedVirtualIndex(-1),this.selectedHiddenStrategy=null),!0)}getSelectedHiddenStrategyNotEqualTo(e){return this.isFocusHidden&&this.selectedHiddenStrategy&&e!==this.selectedHiddenStrategy?this.selectedHiddenStrategy:null}callOnRowMadeVisibleCallback(){this.onRowMadeVisibleCallback&&(this.onRowMadeVisibleCallback(),this.onRowMadeVisibleCallback=null)}updateSelectedVirtualState(){this.selectedHiddenStrategy=super.getSelectedItemStrategy(),this.updateSelectedVirtualIndex()}setOnRowMadeVisibleCallback(e,t=!1){this.makingRowVisibleStarted&&!t||(this.onRowMadeVisibleCallback=e)}async makeRowVisible(e){var t;if(this.makingRowVisibleStarted)return;const i=this.getValidVirtualIndex(e);if(this.updateSelectedVirtualIndex(i),this.isVirtualIndexRendered(i))this.scrollRequired=!0,this.selectItem(null!==(t=this.findVisibleIndexByVirtualIndex(i))&&void 0!==t?t:0),this.callOnRowMadeVisibleCallback();else{this.rowVirtualIndexToShow=i,this.grid.makeRowVisible(i);const e=await this.waitForVirtualIndexToShow(i);this.rowVirtualIndexToShow===i&&(e?this.onMakeRowVisible(this.selectedItemIndex):this.rowVirtualIndexToShow=null)}}moveToSiblingRowByVirtualIndex(e){this.selectedNonVirtualRowIndexOffset+=e,this.makeRowVisibleWithAlignment(this.selectedRowVirtualIndex,null,Qe.None)}makeRowVisibleWithAlignment(e,t,i){this.setOnRowMadeVisibleCallback((()=>{this.scrollToElement(t,i)})),this.makeRowVisible(e)}updateSelectedVirtualIndex(e=null){if(null===e){const t=this.findClosestVisibleIndexWithVirtualIndex(this.selectedItemIndex);this.selectedNonVirtualRowIndexOffset=this.selectedItemIndex-t.visibleIndex,e=t.virtualIndex}null!==e&&(this.selectedRowVirtualIndex=e,this.isLastRowSelected=this.lastVirtualIndexSelected&&super.lastItemSelected)}waitForVirtualIndexToShow(e,t=0){return new Promise((i=>{setTimeout((async()=>{try{if(this.rowVirtualIndexToShow!==e)return void i(!1);const n=this.isVirtualIndexRendered(e);if(n||t>1)i(n);else{const n=await this.waitForVirtualIndexToShow(e,++t);i(n)}}catch{i(!1)}}),1e3)}))}getValidVirtualIndex(e){if(e<0)return 0;const t=this.lastVirtualIndex;return e>t?t:e}isVirtualIndexRendered(e){const{virtualIndex:t}=this.findClosestVisibleIndexWithVirtualIndex(0),{virtualIndex:i}=this.findClosestVisibleIndexWithVirtualIndex(super.itemCount-1);return e>=t&&e<=i}findClosestVisibleIndexWithVirtualIndex(e,t=Pe.Top){let i=-1,n=t===Pe.Top?-1:1,s=e,r=!1;for(;super.isIndexWithinBoundaries(s)||!r;){const t=super.getItem(s);if(t){if(i=Te.getAttributeIntValue(t,Gi,-1),i>=0)break;s+=n}else r=!0,n*=-1,s=e+n}return i=i>=0?i:this.selectedRowVirtualIndex,{virtualIndex:i,visibleIndex:s}}findVisibleIndexByVirtualIndex(e){const t=e.toString(),i=super.itemCount;for(let e=0;e<i;++e){const i=super.getItem(e);if(i&&t===i.getAttribute(Gi))return super.validateItemIndex(e+this.selectedNonVirtualRowIndexOffset)}return null}isRowInView(e){const t=this.getScrollViewer();return!!t&&Ja.isElementInView(e,t)}}EA.maxOffset=1e3;class IA extends wA{constructor(e,t,i){super(e,t,i)}createItemStrategy(e){if(Zs.getRowType(e)===Xs.Footer)return new pA(this,this.grid,e);throw new Error("Not implemented")}}class SA extends js{constructor(e){super(e,e),this.searchBoxInputSelector=`.${ue.SearchBoxClassName} > input`}getShortcutContext(){return{IsMacOSPlatform:this.isMacOSPlatform}}queryItems(){return new Array(this.getToolbarContainer(),this.getPagerPanel(!0),this.getTopPanel(),this.getDataTable(),this.getPagerPanel(!1))}createDataTableStrategy(e){return new bA(this.grid,e)}createItemStrategy(e){switch(Zs.getNavigationAreaType(e)){case Ys.ToolbarContainer:return new xA(this.grid,e);case Ys.GroupPanel:case Ys.SearchBox:return new DA(this.grid,e);case Ys.DataTable:return this.createDataTableStrategy(e);case Ys.Pager:return new FA(this.grid,e)}return null}handleKeyDown(e){const t=Be.KeyUtils.getEventKeyCode(e);return t===Be.KeyCode.Tab?this.handleTabKeyDown(e):t===Be.KeyCode.Up&&e.ctrlKey?(this.moveToPrevItem(),!0):t===Be.KeyCode.Down&&e.ctrlKey?(this.moveToNextItem(),!0):!(t!==Be.KeyCode.Key_f||!e.ctrlKey)&&this.tryFocusSearchBox()}handleTabKeyDown(e){return super.handleTabKeyDown(e,e.altKey)||(e.shiftKey?this.leaveBackward():this.leaveForward()),!0}moveToPrevItem(){this.selectedItemIndex>0?super.moveToPrevItem():this.leaveBackward()}moveToNextItem(){this.selectedItemIndex<this.itemCount-1?super.moveToNextItem():this.leaveForward()}getTopPanel(){var e,t;const i=null!==(e=this.getGroupPanelContentContainer())&&void 0!==e?e:this.getSearchBoxContainer();return null!==(t=null==i?void 0:i.closest(Gs.TopPanelSelector))&&void 0!==t?t:null}tryFocusSearchBox(){const e=this.getSearchBoxContainer();if(e){const t=e.querySelector(this.searchBoxInputSelector);return fi.focusElement(null!=t?t:e),!0}return!1}}class xA extends js{constructor(e,t){super(e,t,!0)}getShortcutContext(){return{AreaType:Ys.ToolbarContainer}}}class DA extends js{constructor(e,t){super(e,t),this.itemSelector=`.${ue.HeaderElementClassName}`,this.searchBoxContainer=null,this.searchBoxContainer=this.getSearchBoxContainer()}getShortcutContext(){return{AreaType:this.getAreaType(),ColumnUID:this.getSelectedColumnUID()}}queryItems(){const e=this.queryItemsBySelector(this.itemSelector);return e.push(this.searchBoxContainer),e}handleKeyDown(e){if(e.ctrlKey&&(Be.KeyUtils.getEventKeyCode(e)===Be.KeyCode.Enter||Be.KeyUtils.getEventKeyCode(e)===Be.KeyCode.Space))return!0;if(super.handleKeyDown(e))return!0;if(this.nestedContentSelected)return!1;switch(Be.KeyUtils.getEventKeyCode(e)){case Be.KeyCode.Left:return this.moveToPrevItem(),!0;case Be.KeyCode.Right:return this.moveToNextItem(),!0;case Be.KeyCode.Space:return this.performShortcutEvent(e),!0;case Be.KeyCode.Up:if(!this.isSearchBoxItemSelected()&&this.isSearchBoxInMobileView()){const e=this.items.findIndex((e=>Zs.isSearchBoxContainer(e)));return this.selectItem(e),!0}break;case Be.KeyCode.Down:if(e.altKey&&!this.isSearchBoxItemSelected())return this.performShortcutEvent(e),!0;if(!e.altKey&&this.isSearchBoxItemSelected()&&this.isSearchBoxInMobileView())return this.moveToFirstItem(),!0}return!1}isImmediatelyClickEnabled(){return this.selectedItemElement!==this.searchBoxContainer}getAreaType(){return Zs.isSearchBoxContainer(this.selectedItemElement)?Ys.SearchBox:Ys.GroupPanel}getSelectedColumnUID(){return this.getColumnUID(this.selectedItemElement)}isSearchBoxItemSelected(){return this.getAreaType()===Ys.SearchBox}isSearchBoxInMobileView(){return!!this.searchBoxContainer&&this.searchBoxContainer.offsetWidth===this.targetElement.offsetWidth}}class FA extends js{constructor(e,t){super(e,t)}getShortcutContext(){return{AreaType:Ys.Pager}}handleKeyDown(e){if(super.handleKeyDown(e))return!0;if(this.nestedContentSelected)return!1;switch(Be.KeyUtils.getEventKeyCode(e)){case Be.KeyCode.Left:case Be.KeyCode.Right:case Be.KeyCode.Home:case Be.KeyCode.End:return this.performShortcutEvent(e),!0}return!1}tryRestoreSelectedItem(e){super.tryRestoreSelectedItem(e);const t=this.targetElement.querySelector(Gs.PagerSizeSelector);(null==t?void 0:t.contains(document.activeElement))&&this.targetElement.scrollIntoView({block:"nearest"})}}class TA extends Mi{constructor(e,t){super(t,e),this.itemSelector=`.${ue.ColumnChooserItemClassName}`,this.savedColumnUID=null,this.hasXafActionsContainer=!1,this.boundOnDragStopHandler=this.onDragStop.bind(this),this.columnChooser=e,this.addEventSubscriptions(),this.hasXafActionsContainer=this.targetElement.nextSibling instanceof HTMLElement&&this.targetElement.nextSibling.classList.contains("column-chooser-actions-container")}initialize(){super.initialize(),null!==this.savedColumnUID&&this.restoreSelectedColumn()}queryItems(){return this.queryItemsBySelector(this.itemSelector)}getShortcutContext(){return{AreaType:Ys.ColumnChooser,ColumnUID:this.getSelectedColumnUID()}}isImmediatelyClickEnabled(){return!0}handleKeyDown(e){if(super.handleKeyDown(e))return!0;if(this.nestedContentSelected)return!1;switch(Be.KeyUtils.getEventKeyCode(e)){case Be.KeyCode.Up:return this.moveToPrevItem(),!0;case Be.KeyCode.Down:return this.moveToNextItem(),!0;case Be.KeyCode.Tab:return e.shiftKey?this.moveToPrevItem(!0):this.lastItemSelected&&this.hasXafActionsContainer?this.leaveForward():this.moveToNextItem(!0),!0;case Be.KeyCode.Space:return this.performShortcutEvent(e),!0}return!1}onDispose(){super.onDispose(),this.removeEventSubscriptions()}onDragStop(e){this.savedColumnUID=this.getSelectedColumnUID()}restoreSelectedColumn(){const e=this.findItemByColumnUID(this.savedColumnUID);e>=0&&this.selectItem(e),this.savedColumnUID=null}addEventSubscriptions(){this.columnChooser.addEventListener(l.eventName,this.boundOnDragStopHandler)}removeEventSubscriptions(){this.columnChooser.removeEventListener(l.eventName,this.boundOnDragStopHandler)}findItemByColumnUID(e){return this.items.findIndex((t=>this.getColumnUID(t)===e))}getSelectedColumnUID(){return this.getColumnUID(this.selectedItemElement)}getColumnUID(e){var t;return null!==(t=this.columnChooser.getColumnUid(e))&&void 0!==t?t:-1}}var HA;!function(e){e[e.Append=0]="Append",e[e.Before=1]="Before",e[e.After=2]="After",e[e.Inside=3]="Inside"}(HA||(HA={}));class UA extends de{constructor(){super(),this.tableContainer=null,this.dropTargetElement=null,this.dropPosition=HA.Before,this.lastObservedWidth=0,this.resizeObserver=new ResizeObserver(this.onTableContainerSizeChanged.bind(this)),this.boundOnTableContainerScrollHandler=this.onTableContainerScroll.bind(this)}get isHidden(){return!this.dropTargetElement}show(){this.classList.add(he.Active),this.render()}hide(){this.dropTargetElement=null,this.classList.remove(he.Active),this.removeAttribute("style")}updatePosition(e,t){this.dropTargetElement=e,this.dropPosition=t}initializeComponent(){super.initializeComponent(),this.tableContainer=this.closest(`.${xe.ContentContainerClassName}`),this.tableContainer&&(this.tableContainer.addEventListener("scroll",this.boundOnTableContainerScrollHandler),this.resizeObserver.observe(this.tableContainer))}disposeComponent(){super.disposeComponent(),this.tableContainer&&(this.tableContainer.removeEventListener("scroll",this.boundOnTableContainerScrollHandler),this.resizeObserver.unobserve(this.tableContainer))}onTableContainerScroll(){this.render()}onTableContainerSizeChanged(e){const t=e[0].contentRect.width;this.lastObservedWidth!==t&&(this.lastObservedWidth=t,this.render())}render(){this.isHidden||requestAnimationFrame(this.updateIndicatorStyle.bind(this))}updateIndicatorStyle(){const e=this.getTargetElement();this.style.height=e&&this.shouldFitIntoElement()?`${e.offsetHeight}px`:"";const t=this.calculatePosition();this.style.transform=`translateY(${t})`,this.style.marginLeft=this.calculateLeftOffset(),this.isHidden&&this.removeAttribute("style")}calculatePosition(){const e=this.getTargetElement(),t=this.calculateIndicatorPosition(e),i=this.shouldFitIntoElement()?t:UA.getCenteredPosition(t,this.offsetHeight);return`${Math.ceil(i)}px`}shouldFitIntoElement(){return this.dropPosition===HA.Append||this.dropPosition===HA.Inside}calculateIndicatorPosition(e){if(!e||!this.tableContainer)return 0;const t=e.getBoundingClientRect(),i=this.tableContainer.getBoundingClientRect(),n=t.top-i.top;return this.dropPosition===HA.After?n+e.offsetHeight:n}calculateLeftOffset(){return""}getTargetElement(){return this.dropPosition===HA.Append?this.tableContainer:this.dropTargetElement}static getCenteredPosition(e,t){return e-t/2}}customElements.define("dxbl-drop-target-indicator",UA);class PA{static getPointerPosition(e){return{x:e.pageX,y:e.pageY}}static getDocumentScrollPosition(){return{x:document.documentElement.scrollLeft,y:document.documentElement.scrollTop}}static getElementPosition(e){const{left:t,top:i}=e.getBoundingClientRect();return{x:t,y:i}}static calculateVerticalCenter(e){return e.y+e.height/2}static getDropPositionByCursor(e,t){return e>PA.calculateVerticalCenter(t)?HA.After:HA.Before}}const QA=new class{constructor(){this.draggingHelpersMap=new Map}register(e){this.draggingHelpersMap.set(e.getKey(),e)}remove(e){this.draggingHelpersMap.delete(e)}find(e){var t;return null!==(t=this.draggingHelpersMap.get(e))&&void 0!==t?t:null}getTargets(){return[...this.draggingHelpersMap.values()]}};class NA{constructor(){this.draggableContext=null,this.isRefreshUIRequested=!1,this.boundOnDocumentMouseMoveHandler=this.onDocumentMouseMove.bind(this),this.boundOnDocumentScrollHandler=this.onDocumentScroll.bind(this)}start(e,t){const i=this.getDraggableElement(e);this.draggableContext=this.createDraggableContext(e,i,t),this.addEventSubscriptions(),this.updateDraggableElement(t)}stop(){this.draggableContext&&(this.draggableContext.isStarted=!1),this.isRefreshUIRequested=!1,this.hideDraggableElement(),this.removeEventSubscriptions(),this.draggableContext=null}isStarted(){var e;return!!(null===(e=this.draggableContext)||void 0===e?void 0:e.isStarted)}hideDraggableElement(){this.draggableContext&&(this.draggableContext.dragableElement.style.transform="",this.draggableContext.dragableElement.classList.remove(he.Visible))}addEventSubscriptions(){document.addEventListener("pointermove",this.boundOnDocumentMouseMoveHandler),document.addEventListener("scroll",this.boundOnDocumentScrollHandler)}removeEventSubscriptions(){document.removeEventListener("pointermove",this.boundOnDocumentMouseMoveHandler),document.removeEventListener("scroll",this.boundOnDocumentScrollHandler)}refreshUI(){this.isRefreshUIRequested||(this.isRefreshUIRequested=!0,requestAnimationFrame((()=>this.refreshUICore())))}refreshUICore(){if(this.isRefreshUIRequested=!1,!this.isStarted()||!this.draggableContext)return;const e=this.draggableContext;e.dragableElement.style.transform=`translate(${Math.round(e.draggableElementPosition.x)}px, ${Math.round(e.draggableElementPosition.y)}px)`,e.dragableElement.classList.add(he.Visible)}createDraggableContext(e,t,i){const n=PA.getDocumentScrollPosition(),s=PA.getPointerPosition(i);return{isStarted:!0,srcElement:e,srcElementPosition:PA.getElementPosition(e),dragableElement:t,mouseOverElement:null,mouseOverElementRect:null,isPossibleDropItem:!1,initialCursorPosition:s,currentCursorPosition:{x:0,y:0},draggableElementOffset:PA.getElementPosition(t),draggableElementPosition:s,initialScrollPosition:n,currentScrollPosition:n}}clearMoveStateFromDraggableContext(){this.draggableContext&&(this.draggableContext.mouseOverElement=null,this.draggableContext.mouseOverElementRect=null,this.draggableContext.isPossibleDropItem=!1)}setMouseOverElementInfo(e){if(!this.draggableContext)return;const t=e.getBoundingClientRect(),{currentScrollPosition:i}=this.draggableContext;this.draggableContext.mouseOverElement=e,this.draggableContext.mouseOverElementRect={x:t.left+i.x,y:t.top+i.y,width:t.width,height:t.height}}updateDraggableElementPosition(){if(!this.draggableContext)return;const e=this.draggableContext;e.draggableElementPosition={x:e.currentCursorPosition.x-e.currentScrollPosition.x,y:e.currentCursorPosition.y-e.currentScrollPosition.y}}onElementMouseOut(e){this.clearMoveStateFromDraggableContext(),this.refreshUI()}onDocumentMouseMove(e){this.updateDraggableElement(e)}onDocumentScroll(e){if(!this.draggableContext)return;const t=this.draggableContext;t.currentScrollPosition=PA.getDocumentScrollPosition(),t.srcElementPosition=PA.getElementPosition(t.srcElement),t.mouseOverElement&&this.setMouseOverElementInfo(t.mouseOverElement),this.updateDraggableElementPosition(),this.refreshUI()}updateDraggableElement(e){if(!this.draggableContext)return;const t=this.draggableContext;t.currentCursorPosition={x:e.pageX,y:e.pageY},t.initialScrollPosition=t.currentScrollPosition,this.updateDraggableElementPosition(),this.refreshUI()}}class RA extends NA{constructor(){super(),this.boundOnElementMouseOutHandler=this.onElementMouseOut.bind(this)}get draggableItemContext(){return this.draggableContext}createItemDraggedHandlerArgs(){if(!this.draggableItemContext||!this.draggableItemContext.isPossibleDropItem||!this.draggableItemContext.target)return null;const e=this.draggableItemContext.target;return{sourceInfo:this.createSourceInfo(),targetInfo:e.createTargetInfo()}}createTargetInfo(){return{key:this.getKey()}}activateDropTarget(e){this.isWithinDragging()||(this.draggableContext=e),this.addElementListeners(this.getItemDropArea())}deactivateDropTarget(){this.removeElementListeners(this.getItemDropArea()),this.isWithinDragging()||(this.draggableContext=null)}start(e,t){var i,n;super.start(e,t),null===(n=null===(i=this.getDraggableHintElement())||void 0===i?void 0:i.show)||void 0===n||n.call(i),this.getDroppableTargets().forEach((e=>e.activateDropTarget.bind(e)(this.draggableContext)))}stop(){var e,t;this.getDroppableTargets().forEach((e=>e.deactivateDropTarget.bind(e)())),null===(t=null===(e=this.getDraggableHintElement())||void 0===e?void 0:e.hide)||void 0===t||t.call(e),super.stop()}createDraggableContext(e,t,i){return{...super.createDraggableContext(e,t,i),source:this,target:this,targetKey:null}}getDroppableTargets(){return QA.getTargets()}updateDraggableContext(e){if(!this.draggableItemContext)return;const{isPossibleDropItem:t,target:i}=this.draggableItemContext,n=this.getItemDropArea();i&&t&&RA.isDescendantElement(n,i.getItemDropArea())||(this.clearMoveStateFromDraggableContext(),this.setMouseOverElementInfo(e),this.draggableItemContext.target=this,this.draggableItemContext.targetKey=this.getKey(),this.draggableItemContext.isPossibleDropItem=this.isItemDropPossible(e))}isWithinDragging(){var e;return(null===(e=this.draggableItemContext)||void 0===e?void 0:e.source)===this}createSourceInfo(){return{key:this.getKey()}}addElementListeners(e){e.addEventListener("pointerout",this.boundOnElementMouseOutHandler)}removeElementListeners(e){e.removeEventListener("pointerout",this.boundOnElementMouseOutHandler)}isItemDropPossible(e){return!0}getDraggableHintElement(){var e,t;return null!==(t=null===(e=this.draggableContext)||void 0===e?void 0:e.dragableElement)&&void 0!==t?t:null}static isDescendantElement(e,t){return e!==t&&e.contains(t)}}class LA{static getSvgHtml(e){return`\n<svg class="${he.Image}" role="img" aria-hidden="true">\n    <use class="dxbl-icon-set-default" href="_content/DevExpress.Blazor/dx-blazor.svg#${e}"></use>\n    <use class="dxbl-icon-set-fluent" href="_content/DevExpress.Blazor/dx-blazor.svg#${e}-fluent"></use>\n    <use class="dxbl-icon-set-fluent-small" href="_content/DevExpress.Blazor/dx-blazor.svg#${e}-fluent-small"></use>\n    <use class="dxbl-icon-set-fluent-large" href="_content/DevExpress.Blazor/dx-blazor.svg#${e}-fluent-large"></use>\n</svg>`}}var MA,kA,KA,OA;LA.ArrowUpIconName="dx-arrow-up",LA.ArrowDownIconName="dx-arrow-down",function(e){e[e.Left=0]="Left",e[e.Right=1]="Right"}(MA||(MA={}));class _A{constructor(e,t){this.downTargetCssClass=t,this.upTargetCssClass=e,this.downTargetElement=_A.addTargetToDom(this.downTargetCssClass,LA.ArrowDownIconName),this.upTargetElement=_A.addTargetToDom(this.upTargetCssClass,LA.ArrowUpIconName);const i=this.upTargetElement.getBoundingClientRect();this.targetElementSize={width:i.width,height:i.height},this.upTargetElementPosition=null,this.downTargetElementPosition=null,this.hide()}show(){this.upTargetElementPosition&&this.downTargetElementPosition&&(this.downTargetElement.style.transform=Br.translateByPoint(this.downTargetElementPosition),this.upTargetElement.style.transform=Br.translateByPoint(this.upTargetElementPosition),this.downTargetElement.classList.remove(he.DisplayNone),this.upTargetElement.classList.remove(he.DisplayNone))}hide(){this.downTargetElement.classList.add(he.DisplayNone),this.upTargetElement.classList.add(he.DisplayNone)}setPositionRelativeToElement(e,t){this.setUpTargetPosition(e,t),this.setDownTargetPosition(e,t)}setUpTargetPosition(e,t){this.upTargetElementPosition={x:this.getTargetXCoordinate(e,t),y:e.y+e.height}}setDownTargetPosition(e,t){this.downTargetElementPosition={x:this.getTargetXCoordinate(e,t),y:e.y-this.targetElementSize.height}}getTargetXCoordinate(e,t){let i=e.x-this.targetElementSize.width/2;return t===MA.Right&&(i+=e.width),i}dispose(){_A.removeElementsByClassName(this.downTargetCssClass),_A.removeElementsByClassName(this.upTargetCssClass)}static removeElementsByClassName(e){const t=document.querySelectorAll(`.${e}`);for(let e=0;e<t.length;e++)t[e].remove()}static addTargetToDom(e,t){const i=document.createElement("div");return i.className=e,i.innerHTML=LA.getSvgHtml(t),document.body.appendChild(i),i}}!function(e){e[e.HeaderRow=0]="HeaderRow",e[e.GroupPanel=1]="GroupPanel",e[e.ColumnChooser=2]="ColumnChooser"}(kA||(kA={})),function(e){e[e.Left=0]="Left",e[e.Right=1]="Right"}(KA||(KA={}));class VA extends NA{constructor(e){super(),this.draggableContext=null,this.boundOnDocumentPointerUpHandler=this.onDocumentPointerUp.bind(this),this.boundOnHeaderMouseMoveHandler=this.onHeaderMouseMove.bind(this),this.boundOnElementMouseOutHandler=this.onElementMouseOut.bind(this),this.boundOnGroupPanelMouseMoveHandler=this.onGroupPanelMouseMove.bind(this),this.boundOnEmptyHeaderCellMouseMoveHandler=this.onEmptyHeaderCellMouseMove.bind(this),this.boundOnGroupFreeSpaceMouseMoveHandler=this.onGroupFreeSpaceMouseMove.bind(this),this.grid=e}start(e,t){this.isColumnDraggingAllowed(e)&&(super.start(e,t),this.grid.styleGenerator.notifyColumnDragStarted())}stop(){var e;null===(e=this.draggableContext)||void 0===e||e.targets.dispose(),super.stop(),document.body.classList.remove(ue.MoveCursorCssClassName),this.grid.styleGenerator.notifyColumnDragEnded()}getDraggableElement(e){return VA.addDraggableHeaderToDOM(e)}hideDraggableElement(){VA.removeDraggableHeaderFromDom()}updateDraggableContextByEvent(e){const t=document.elementFromPoint(e.clientX,e.clientY);this.updateDraggableContextByElement(t,e)}onDocumentPointerUp(e){var t;const i=null===(t=this.draggableContext)||void 0===t?void 0:t.srcElement;i&&!i.isConnected&&this.stop()}onHeaderMouseMove(e){this.updateDraggableContextByElement(e.target,e)}onGroupPanelMouseMove(){const e=this.grid.getGroupPanelContentContainer();this.onPanelElementMouseMove(e,kA.GroupPanel)}onEmptyHeaderCellMouseMove(){const e=this.grid.getEmptyHeaderCellContentContainer();this.onPanelElementMouseMove(e,kA.HeaderRow)}onGroupFreeSpaceMouseMove(){const e=this.grid.getGroupContentFreeSpaceElement();this.onPanelElementMouseMove(e,kA.GroupPanel)}isColumnDraggingAllowed(e){const t=this.grid.getColumnInfo(e);return!!t&&(t.allowReorder||t.allowGroup&&!!this.grid.getGroupPanelContentContainer())}onPanelElementMouseMove(e,t){e&&this.draggableContext&&this.draggableContext.mouseOverElement!==e&&this.draggableContext.srcElement!==e.previousElementSibling&&(this.clearMoveStateFromDraggableContext(),this.setMouseOverElementInfo(e),this.draggableContext.dropArea=t,this.isPossibleDropToCurrentArea()&&(this.draggableContext.isPossibleDropItem=!0,this.draggableContext.targets.setPositionRelativeToElement(this.draggableContext.mouseOverElementRect,MA.Left)),this.refreshUI())}isPossibleDropToCurrentArea(){var e,t,i;return(null===(e=this.draggableContext)||void 0===e?void 0:e.allowGroup)||(null===(t=this.draggableContext)||void 0===t?void 0:t.dropArea)===(null===(i=this.draggableContext)||void 0===i?void 0:i.srcArea)}createColumnDraggedHandlerArgs(){var e;if(!this.draggableContext||!this.draggableContext.isPossibleDropItem)return null;const t=this.draggableContext;let i=t.beforeColumnUid;return t.dropArea===kA.HeaderRow&&(i=null!==(e=(e=>{var t;return e.dragRestrictions?null!==(t=e.dragRestrictions.nextColumnUid)&&void 0!==t?t:-1:null})(t.draggedColumn))&&void 0!==e?e:i),{columnUid:t.draggedColumn.uID,beforeColumnUid:i,srcArea:t.srcArea,dropArea:t.dropArea}}getLatestVisibleColumnIndex(){for(let t=this.grid.columnsInfo.length-1;t>=0;t--)if(!(e=this.grid.columnsInfo[t]).isIndent&&!e.isEmpty)return t;var e;return-1}getRestrictedDropHeaderInfo(e){const t=this.getDropColumnArea(e);if(!!(!this.draggableContext||!this.draggableContext.draggedColumn.dragRestrictions||this.draggableContext.srcArea!==kA.GroupPanel||this.draggableContext.dropArea===kA.GroupPanel||t!==kA.HeaderRow))return null;let i,n=KA.Left;const s=this.getLatestVisibleColumnIndex(),r=this.draggableContext.draggedColumn.dragRestrictions;let o=-1;return r&&null!==r.nextVisibleColumnUid?o=this.grid.columnsInfo.findIndex((e=>e.uID===r.nextVisibleColumnUid&&!e.isIndent)):(o=s,n=KA.Right),-1!==o&&(i=this.grid.getHeaderCells()[o]),i?{dropHeaderElement:i,position:n}:null}updateDraggableContextByElement(e,t){let i=this.grid.findHeaderElement(e);const n=this.grid.getColumnInfo(i);i&&n&&this.draggableContext&&this.draggableContext.draggedColumn.parentUID!==n.parentUID&&(i=this.findMatchingParentHeader(i)),i&&(this.updateDraggableContext(i,t),this.refreshUI())}findMatchingParentHeader(e){let t=this.grid.getColumnInfo(e);for(;t;){if(this.draggableContext&&this.draggableContext.draggedColumn.parentUID===t.parentUID)return this.grid.getHeaderCell(t.headerRowIndex,t.headerCellIndex);t=t.parent}return e}updateDraggableContext(e,t){var i;if(this.clearMoveStateFromDraggableContext(),null==this.draggableContext)return;const n=e?this.getRestrictedDropHeaderInfo(e):null;if(n&&(e=n.dropHeaderElement),this.draggableContext.srcElement!==e&&(this.setMouseOverElementInfo(e),this.isPossibleDropToCurrentArea())){const s=void 0!==(null==n?void 0:n.position)?n.position===KA.Left:this.isThereCursorInLeftPart(t),r=this.grid.getColumnInfo(e);if(r&&!r.hasLeafs&&r.uID===this.draggableContext.draggedColumn.parentUID)this.draggableContext.beforeColumnUid=-1,this.draggableContext.isPossibleDropItem=!0;else if(s&&e.previousElementSibling!==this.draggableContext.srcElement||!s&&e.nextElementSibling!==this.draggableContext.srcElement){let t=s?r:this.grid.getColumnInfo(e.nextElementSibling),n=s?this.grid.getColumnInfo(e.previousElementSibling):r;s&&n&&n.parentUID!==(null==t?void 0:t.parentUID)&&(n=null),!s&&t&&t.parentUID!==(null==n?void 0:n.parentUID)&&(t=null);if(!this.canDropBetweenColumns(n,t))return void(this.draggableContext.isPossibleDropItem=!1);this.draggableContext.beforeColumnUid=null!==(i=null==t?void 0:t.uID)&&void 0!==i?i:-1,this.draggableContext.isPossibleDropItem=!0}this.draggableContext.isPossibleDropItem&&this.draggableContext.targets.setPositionRelativeToElement(this.draggableContext.mouseOverElementRect,s?MA.Left:MA.Right)}}static canDropColumnWithDisabledReorderingBetweenColumns(e,t,i,n){var s,r;if(t!==kA.GroupPanel)return!1;const o=e.dragRestrictions;if(o){const e=null!==(s=null==i?void 0:i.uID)&&void 0!==s?s:null,t=null!==(r=null==n?void 0:n.uID)&&void 0!==r?r:null;if(o.previousColumnUid!==e&&o.nextColumnUid!==t&&o.nextVisibleColumnUid!==t)return!1}return!0}canDropBetweenColumns(e,t){if(!this.draggableContext)return!1;if(this.draggableContext.dropArea===kA.GroupPanel)return!0;if(!this.draggableContext.draggedColumn.allowReorder&&!VA.canDropColumnWithDisabledReorderingBetweenColumns(this.draggableContext.draggedColumn,this.draggableContext.srcArea,e,t))return!1;const i=this.draggableContext.draggedColumn.parentUID,n=t&&i===t.parentUID;if(!(!n&&e&&i===e.parentUID)&&!n)return!1;const s=e=>"left"===e?0:"right"===e?2:1,r=[];e&&r.push(s(e.fixedPosition)),r.push(s(this.draggableContext.draggedColumn.fixedPosition)),t&&r.push(s(t.fixedPosition));for(let e=0;e<r.length-1;++e)if(r[e]>r[e+1])return!1;return!0}getDropColumnArea(e){const t=this.grid.getGroupPanelContentContainer();return t&&VA.isThereHeaderInsideGroupPanel(t,e)?kA.GroupPanel:kA.HeaderRow}static isThereHeaderInsideGroupPanel(e,t){const i=e.childNodes.length;for(let n=0;n<i;n++)if(e.childNodes[n]===t)return!0;return!1}refreshUICore(){super.refreshUICore();const e=this.draggableContext;e&&(e.isPossibleDropItem?e.targets.show():e.targets.hide(),document.body.classList.add(ue.MoveCursorCssClassName))}setMouseOverElementInfo(e){if(super.setMouseOverElementInfo(e),!this.draggableContext)return;const t=this.grid.getColumnInfo(e),i=null==t?void 0:t.getRightLeaf();if(i){const t=this.grid.getHeaderCell(i.headerRowIndex,i.headerCellIndex),n=null==t?void 0:t.getBoundingClientRect();if(n&&this.draggableContext.mouseOverElementRect){const t=e.getBoundingClientRect();this.draggableContext.mouseOverElementRect.height=n.height+n.top-t.top}}if(this.draggableContext.scrollViewerRect&&this.draggableContext.mouseOverElementRect){const e=this.draggableContext.scrollViewerRect;this.draggableContext.mouseOverElementRect.x<e.x&&(this.draggableContext.mouseOverElementRect.x=e.x),this.draggableContext.mouseOverElementRect.x+this.draggableContext.mouseOverElementRect.width>e.x+e.width&&(this.draggableContext.mouseOverElementRect.width=e.x+e.width-this.draggableContext.mouseOverElementRect.x)}this.draggableContext.dropArea=this.getDropColumnArea(e)}isThereCursorInLeftPart(e){if(!this.draggableContext||!this.draggableContext.mouseOverElementRect)return!1;const t=this.draggableContext.mouseOverElementRect;return e.pageX<t.x+t.width/2}updateDraggableElementPosition(){if(!this.draggableContext)return;const e=this.draggableContext;e.draggableElementPosition={x:e.srcElementPosition.x+(e.currentCursorPosition.x-e.initialCursorPosition.x)+(e.currentScrollPosition.x-e.initialScrollPosition.x)+e.currentScrollPosition.x,y:e.srcElementPosition.y+(e.currentCursorPosition.y-e.initialCursorPosition.y)+(e.currentScrollPosition.y-e.initialScrollPosition.y)+e.currentScrollPosition.y}}addEventSubscriptions(){super.addEventSubscriptions(),document.addEventListener("pointerup",this.boundOnDocumentPointerUpHandler),this.addHeaderEventSubscriptions(),this.addGroupPanelEventSubscriptions(),this.addEmptyHeaderCellEventSubscriptions(),this.addGroupContentFreeSpaceElementEventSubscriptions()}addHeaderEventSubscriptions(){const e=this.grid.getHeaderCells();for(let t=0;t<e.length;t++){const i=e[t];i.addEventListener("pointermove",this.boundOnHeaderMouseMoveHandler),i.addEventListener("pointerout",this.boundOnElementMouseOutHandler)}}addEmptyHeaderCellEventSubscriptions(){const e=this.grid.getEmptyHeaderCellContentContainer();e&&this.addPanelElementEventSubscriptions(e,this.boundOnEmptyHeaderCellMouseMoveHandler)}addGroupPanelEventSubscriptions(){if(!this.shouldAddEventListenersToGroupPanel())return;const e=this.grid.getGroupPanelContentContainer();this.addPanelElementEventSubscriptions(e,this.boundOnGroupPanelMouseMoveHandler)}addGroupContentFreeSpaceElementEventSubscriptions(){const e=this.grid.getGroupContentFreeSpaceElement();e&&this.addPanelElementEventSubscriptions(e,this.boundOnGroupFreeSpaceMouseMoveHandler)}addPanelElementEventSubscriptions(e,t){e.addEventListener("pointermove",t),e.addEventListener("pointerout",this.boundOnElementMouseOutHandler)}removeEventSubscriptions(){super.removeEventSubscriptions(),document.removeEventListener("pointerup",this.boundOnDocumentPointerUpHandler),this.removeHeaderEventSubscriptions(),this.removeGroupPanelEventSubscriptions(),this.removeEmptyHeaderCellEventSubscriptions(),this.removeGroupContentFreeSpaceElementEventSubscriptions()}removeHeaderEventSubscriptions(){const e=this.grid.getHeaderCells();for(let t=0;t<e.length;t++){const i=e[t];i.removeEventListener("pointermove",this.boundOnHeaderMouseMoveHandler),i.removeEventListener("pointerout",this.boundOnElementMouseOutHandler)}}removeGroupPanelEventSubscriptions(){if(!this.shouldAddEventListenersToGroupPanel())return;const e=this.grid.getGroupPanelContentContainer();this.removePanelElementEventSubscriptions(e,this.boundOnGroupPanelMouseMoveHandler)}removeEmptyHeaderCellEventSubscriptions(){const e=this.grid.getEmptyHeaderCellContentContainer();e&&this.removePanelElementEventSubscriptions(e,this.boundOnEmptyHeaderCellMouseMoveHandler)}removeGroupContentFreeSpaceElementEventSubscriptions(){const e=this.grid.getGroupContentFreeSpaceElement();e&&this.removePanelElementEventSubscriptions(e,this.boundOnGroupFreeSpaceMouseMoveHandler)}removePanelElementEventSubscriptions(e,t){e.removeEventListener("pointermove",t),e.removeEventListener("pointerout",this.boundOnElementMouseOutHandler)}shouldAddEventListenersToGroupPanel(){const e=this.grid.getGroupPanelContentContainer();return!!e&&!(null==e?void 0:e.querySelector(`.${ue.HeaderElementClassName}`))}static addDraggableHeaderToDOM(e){const t=document.createElement("div");t.className=`${ue.DraggableHeaderClassName}`,e.classList.contains(ue.SelectionCellClassName)&&t.classList.add(ue.SelectionCellClassName),e.classList.contains(ue.CommandCellClassName)&&t.classList.add(ue.CommandCellClassName);const i=e.getBoundingClientRect();t.style.width=`${i.width}px`,t.style.height=`${i.height}px`;const n=getComputedStyle(e);t.style.padding=n.padding,t.style.font=n.font,t.style.whiteSpace=n.whiteSpace;const s=this.getContentElement(e).cloneNode(!0);return t.appendChild(s),document.body.appendChild(t),t}static getContentElement(e){return e.querySelector(`.${ue.HeaderContentClassName}`)}static removeDraggableHeaderFromDom(){const e=document.querySelectorAll(`.${ue.DraggableHeaderClassName}`);for(let t=0;t<e.length;t++)e[t].remove()}createDraggableContext(e,t,i){const n=super.createDraggableContext(e,t,i),s=this.grid.getScrollViewer(),r=this.grid.getColumnInfo(e);return{...n,allowGroup:r.allowGroup,scrollViewerRect:s&&s.getRectangle(),draggedColumn:r,beforeColumnUid:null,srcArea:e.closest(`.${ue.GroupPanelContentContainerClassName}`)?kA.GroupPanel:kA.HeaderRow,dropArea:kA.HeaderRow,targets:new _A(ue.DraggingUpTargetClassName,ue.DraggingDownTargetClassName)}}clearMoveStateFromDraggableContext(){super.clearMoveStateFromDraggableContext(),this.draggableContext&&(this.draggableContext.beforeColumnUid=null)}}class zA{constructor(e){this._startSelectionRowIndex=-1,this._endSelectionRowIndex=-1,this.savedSelectedRows=[],this.boundOnRowPointerEnterHandler=this.onRowPointerEnter.bind(this),this.grid=e}get startSelectionRowIndex(){return this._startSelectionRowIndex}get endSelectionRowIndex(){return this._endSelectionRowIndex}start(e,t){this._startSelectionRowIndex=this.grid.getRowVisibleIndexByTarget(e),this._startSelectionRowIndex>-1&&(this._endSelectionRowIndex=this._startSelectionRowIndex,t&&this.storeSelectedRows(),this.addRowEventSubscriptions(),this.updateRowsSelection())}stop(){this._startSelectionRowIndex>-1&&(this.deselectRows(),this.removeRowEventSubscriptions(),this.restoreSelectedRows(),this._startSelectionRowIndex=-1,this._endSelectionRowIndex=-1)}isStarted(){return this._startSelectionRowIndex>-1&&this._endSelectionRowIndex>-1}updateSeletionByEvent(e){const t=document.elementFromPoint(e.clientX,e.clientY);this.updateSeletionByElement(t)}findRowElement(e){return this.grid.getMainElement().querySelector(`tr[${rn.VisibleIndexName}="${e}"]`)}findRowElements(){return this.grid.getMainElement().querySelectorAll(`tr[${rn.VisibleIndexName}]`)}findSelectedRowElements(){return this.grid.getMainElement().querySelectorAll(`tr.${ue.SelectedRowClassName}[${rn.VisibleIndexName}]`)}addRowEventSubscriptions(){const e=this.findRowElements();if(e)for(let t=0;t<e.length;t++)e[t].addEventListener("pointerenter",this.boundOnRowPointerEnterHandler)}removeRowEventSubscriptions(){const e=this.findRowElements();if(e)for(let t=0;t<e.length;t++)e[t].removeEventListener("pointerenter",this.boundOnRowPointerEnterHandler)}updateSeletionByElement(e){const t=this.grid.getRowVisibleIndexByTarget(e,!0);t>-1&&(this._endSelectionRowIndex=t,this.updateRowsSelection())}onRowPointerEnter(e){this.updateSeletionByElement(e.target)}selectRows(e){for(let t=0;t<e.length;t++){const i=this.findRowElement(e[t]);i&&i.classList.add(0===t||t===e.length-1?ue.TouchSelectionEdgeClassName:ue.TouchSelectionClassName)}}deselectRows(){const e=this.findRowElements();if(e)for(let t=0;t<e.length;t++)e[t].classList.remove(ue.TouchSelectionClassName,ue.TouchSelectionEdgeClassName)}updateRowsSelection(){if(-1===this.startSelectionRowIndex||-1===this.endSelectionRowIndex)return;this.deselectRows();const e=Math.min(this.startSelectionRowIndex,this.endSelectionRowIndex),t=Math.max(this.startSelectionRowIndex,this.endSelectionRowIndex),i=Array.from({length:t-e+1},((t,i)=>i+e));this.selectRows(i)}storeSelectedRows(){const e=this.findSelectedRowElements();if(e)for(let t=0;t<e.length;t++)e[t].classList.remove(ue.SelectedRowClassName),this.savedSelectedRows.push(e[t])}restoreSelectedRows(){for(let e=0;e<this.savedSelectedRows.length;e++)this.savedSelectedRows[e].classList.add(ue.SelectedRowClassName);this.savedSelectedRows=[]}}!function(e){e[e.Disabled=0]="Disabled",e[e.LeftBorder=1]="LeftBorder",e[e.BetweenBorders=2]="BetweenBorders",e[e.RightBorder=3]="RightBorder"}(OA||(OA={}));class WA{get highlightLeftBorder(){return this.scrollStatus===OA.BetweenBorders||this.scrollStatus===OA.RightBorder||this.isDragging}get highlightRightBorder(){return this.scrollStatus===OA.BetweenBorders||this.scrollStatus===OA.LeftBorder||this.isDragging}constructor(e){this.grid=e,this.gridUid="",this.lastGeneratedStyle="",this.isDragging=!1,this.scrollStatus=OA.Disabled}notifyColumnDragStarted(){this.hasAnyFixedColumn()&&(this.isDragging=!0,requestAnimationFrame((()=>this.updateFixedCellsStyle())))}notifyColumnDragEnded(){this.hasAnyFixedColumn()&&(this.isDragging=!1,requestAnimationFrame((()=>this.updateFixedCellsStyle())))}scrollPositionUpdated(e){this.hasAnyFixedColumn()&&(this.scrollStatus=this.calcScrollStatus(e),requestAnimationFrame((()=>this.updateFixedCellsStyle())))}updateFixedCellsStyle(){this.gridUid=this.grid.getAttribute(qA);const e=this.grid.querySelector("style");if(!e)return;let t="";this.hasAnyFixedColumn()&&(t+=this.createPositionStyles(),t+=this.createBorderStyles()),this.lastGeneratedStyle!==t&&(e.innerText=t,this.lastGeneratedStyle=t)}createPositionStyles(){const e=this.grid.getColElements(),t=this.getOffsetWidths(e),i=new Array(t.length),n=new Array(t.length);i[0]=0,n[t.length-1]=0;for(let e=1;e<t.length;++e)i[e]=i[e-1]+t[e-1];for(let e=t.length-2;e>=0;--e)n[e]=n[e+1]+t[e+1];const s=this.grid.columnsInfo.some((e=>"left"===e.fixedPosition));let r="";for(const e of this.grid.headerLayout)for(const t of e){let e=t.fixedPosition;if(t.isIndent&&s&&(e="left"),e){let s=t;const o="left"===e;s.hasLeafs&&(s=o?t.getLeftLeaf():t.getRightLeaf());r+=this.createPositionStyle(t,s.leafIndex,e,o?i[s.leafIndex]:n[s.leafIndex])}}return r}hasAnyBandColumn(){return this.grid.headerLayout.length>1}hasAnyFixedColumn(){return this.grid.columnsInfo.some((e=>!!e.fixedPosition))}calcScrollStatus(e){const t=this.grid.getDataTable().clientWidth;return t===e.clientWidth?OA.Disabled:0===e.scrollLeft?OA.LeftBorder:Math.abs(t-e.clientWidth-e.scrollLeft)<1?OA.RightBorder:OA.BetweenBorders}createPositionStyle(e,t,i,n){const s=[],r=this.hasAnyBandColumn();if(r&&(s.push(this.getHeaderRowsSelector(e.headerRowIndex)),s.push(this.createPositionStyleForColumn("th",e.headerCellIndex,i,n))),!e.hasLeafs){const e=r?"td":"";s.push(this.getTableRowsSelector()),s.push(this.createPositionStyleForColumn(e,t,i,n))}return s.join("")}createPositionStyleForColumn(e,t,i,n){return` > ${e}.${ue.FixedCellClassName}:nth-child(${t+1}) { ${i}: ${n}px; }`}createBorderStyles(){const e=[],t=this.hasAnyBandColumn();return this.highlightLeftBorder&&(e.push(this.createLeftBorderStyle("th")),e.push(this.createLeftBorderStyle("td"))),this.highlightRightBorder&&(e.push(t?this.createHeaderRightBorderStyle():this.createRightBorderStyle("th")),e.push(this.createRightBorderStyle("td"))),e.join("")}createLeftBorderStyle(e){return this.getTableRowsSelector()+` > ${e}.${ue.LastLeftFixedCellClassName} { border-right-color: var(--dxbl-grid-fixed-column-border-color); }`}createRightBorderStyle(e){return this.getTableRowsSelector()+` > ${e}:not(.${ue.FixedCellClassName}) + ${e}.${ue.FixedCellClassName} { border-left-color: var(--dxbl-grid-fixed-column-border-color); }`}createHeaderRightBorderStyle(){const e=[];let t;for(let i=0;i<this.grid.headerLayout.length;i++){const n=this.grid.headerLayout[i].find((e=>"right"===e.fixedPosition));if(!n)continue;const s=0===i;s&&(t=n),(s||t&&n.parentPath.includes(t))&&(e.push(this.getHeaderRowsSelector(n.headerRowIndex)),e.push(` > th.${ue.FixedCellClassName}:nth-child(${n.headerCellIndex+1})`),e.push(" { border-left-color: var(--dxbl-grid-fixed-column-border-color); }"))}return e.join("")}getHeaderRowsSelector(e){return this.getTableRowsSelector()+`.${ue.HeaderRowClassName}:nth-child(${e+1})`}getTableRowsSelector(){return[`${this.grid.getTagName()}[${qA}="${this.gridUid}"]`,`.${xe.ClassName}`,`.${xe.ContentContainerClassName}`,`.${ue.DataTableClassName}`,"*","tr"].join(" > ")}getOffsetWidths(e){const t=[];for(let i=0;i<e.length;++i)t.push(this.grid.getColElementOffsetWidth(i));return t}}const $A="dxbl-tree-list",GA="dxbl-grid",qA="data-dx-grid-uid";const YA=document.createElement("template");YA.innerHTML="\n<style></style>\n<slot />";const XA="data-dx-grid-uid";class JA extends de{constructor(){super(),this._columnsInfo=[],this._headerLayout=[],this._cachedColElements=null,this._allowSelectRowByClick=!1,this._enableFocusedRow=!1,this._enableInplaceEditing=!1,this._enableMultiSelect=!1,this._enableRowDrag=!1,this._enableItemDrop=!1,this._enablePositionalItemDrop=!1,this._hasRowClickEvent=!1,this._hasRowDblClickEvent=!1,this._isEditing=!1,this._focusedRowIndex=-1,this._latestAutoFitColumnWidthsRequestGuid=null,this._enableEditOnKeypress=!1,this._enterKeyDirection=0,this.boundOnDragStartHandler=this.onDragStart.bind(this),this.boundOnDragStopHandler=this.onDragStop.bind(this),this.boundOnDragCancelHandler=this.onDragCancel.bind(this),this.boundOnClickHandler=this.onClick.bind(this),this.boundOnDblClickHandler=this.onDblClick.bind(this),this.boundOnScrollViewerUpdateHandler=this.onScrollViewerUpdate.bind(this),this.boundOnStartCellEditingRequestCompleteHandler=this.onStartCellEditingRequestComplete.bind(this),this.boundOnScrollViewerScrollHandler=this.onScrollViewerScroll.bind(this),this.boundOnDocumentKeyDownHandler=this.onDocumentKeyDown.bind(this),this.boundOnMouseDownHandler=this.onMouseDown.bind(this),this.currentWidth=-1,this.focusedRowRestoreVisibilityTimeout=500,this.rowDraggingHelper=this.createRowDraggingHelper(),this.columnDraggingHelper=new VA(this),this.columnWidthsController=new Ve(this),this.selectionHelper=new zA(this),this._editorManager=this.createEditorManager(),this._styleGenerator=null,this.resizeObserver=new ResizeObserver(this.onSizeChanged.bind(this))}initializeComponent(){super.initializeComponent(),this._editorManager.initialize(),this._styleGenerator=new WA(this),this._uiHandlersBridge=this.querySelector(me),this.initializeKeyboardNavigator(),this.ensureColumnResizeStrategy(),this.addEventSubscriptions(),this.resizeObserver.observe(this)}disposeComponent(){this.removeEventSubscriptions(),this.resizeObserver.unobserve(this),this._editorManager.dispose(),delete this._uiHandlersBridge,delete this.keyboardNavigator,super.disposeComponent()}createEditorManager(){return new Xa(this)}get hoverTitleElementsSelector(){return Gs.TitleElementsSelector}get bypassNonInlineHoverTitleElementChildSelector(){return null}getMainElement(){return this}getDataTable(){return this.querySelector(Gs.DataTableSelector)}getHeaderRows(){return this.querySelectorAll(`thead > tr.${ue.HeaderRowClassName}`)}getFilterRow(){return this.querySelector(`thead > tr.${ue.FilterRowClassName}`)}getHeaderCells(){return this.querySelectorAll(`.${ue.HeaderElementClassName}`)}getToolbarContainer(){return this.querySelector(`.${ue.ToolbarContainerClassName}`)}getGroupPanelContentContainer(){return this.querySelector(`.${ue.GroupPanelContentContainerClassName}`)}getSearchBoxContainer(){return this.querySelector(`.${ue.SearchBoxContainerClassName}`)}getEmptyHeaderCellContentContainer(){return this.querySelector(`.${ue.EmptyHeaderCellContentContainerClassName}`)}getGroupContentFreeSpaceElement(){return this.querySelector(`.${ue.GroupContentFreeSpaceClassName}`)}getColElements(){return null==this._cachedColElements&&(this._cachedColElements=this.querySelectorAll(Gs.ColElementSelector),setTimeout((()=>{this._cachedColElements=null}))),this._cachedColElements}getFooterRow(){return this.querySelector(`.${ue.FooterRowClassName}`)}getPagerPanel(e){return this.querySelector(`:scope > ${Gs.PagerPanelSelector}.${e?ue.TopPanelClassName:ue.BottomPanelClassName}`)}getRowDragHint(){var e,t;const i=this.querySelector(`.${ue.RowDragHintPortalClassName}`);return null!==(t=null===(e=null==i?void 0:i.portable)||void 0===e?void 0:e.find((e=>{var t;return null===(t=e.matches)||void 0===t?void 0:t.call(e,Gs.RowDragHintSelector)})))&&void 0!==t?t:null}getDropRestrictions(){return this.querySelector(be)}getScrollViewer(){return this.querySelector(`.${xe.ClassName}`)}getScrollViewerContent(){return this.querySelector(`.${xe.ContentContainerClassName}`)}getTableContainerWidth(){const e=this.getScrollViewerContent();return e?null==e?void 0:e.getBoundingClientRect().width:0}getColumnResizeSeparator(){return this.querySelector(`.${ue.ColumnsSeparatorClassName}`)}getDropTargetIndicator(){return this.querySelector(`.${ue.DropTargetIndicatorClassName}`)}createRootKeyboardNavigationStrategy(){return new SA(this)}initializeKeyboardNavigator(){if(this.keyboardNavigator=this.querySelector(Gs.KeyboardNavigatorSelector),this.keyboardNavigator&&!this.keyboardNavigator.initialized){let e=null;const t=this.getScrollViewer();t&&Ja.isVirtualScrollingEnabled(t)&&(e=Gi),this.keyboardNavigator.initialize(this,this.createRootKeyboardNavigationStrategy(),e)}}getKeyboardNavigator(){return this.keyboardNavigator}getColElementOffsetWidth(e){let t=this.getColElements()[e].getBoundingClientRect().width;if(0===t&&(h.Browser.Safari||h.Browser.MacOSMobilePlatform||h.Browser.WebKitFamily||h.Browser.AndroidDefaultBrowser)){const i=this.findHeaderCellByColumnIndex(e);t=i?i.getBoundingClientRect().width:null}return t}addEventSubscriptions(){var e;this.addEventListener(a.eventName,this.boundOnDragStartHandler),this.addEventListener(l.eventName,this.boundOnDragStopHandler),this.addEventListener(A.eventName,this.boundOnDragCancelHandler),this.addEventListener(d.eventName,this.boundOnClickHandler),this.addEventListener(c.eventName,this.boundOnDblClickHandler),this.addEventListener(Ke.eventName,this.boundOnScrollViewerUpdateHandler),this.addEventListener(vA.eventName,this.boundOnStartCellEditingRequestCompleteHandler),null===(e=this.getScrollViewer())||void 0===e||e.subscribeToScroll(this.boundOnScrollViewerScrollHandler),document.addEventListener("keydown",this.boundOnDocumentKeyDownHandler),h.Browser.Firefox&&this.addEventListener("mousedown",this.boundOnMouseDownHandler)}removeEventSubscriptions(){var e;this.removeEventListener(a.eventName,this.boundOnDragStartHandler),this.removeEventListener(l.eventName,this.boundOnDragStopHandler),this.removeEventListener(A.eventName,this.boundOnDragCancelHandler),this.removeEventListener(d.eventName,this.boundOnClickHandler),this.removeEventListener(c.eventName,this.boundOnDblClickHandler),this.removeEventListener(Ke.eventName,this.boundOnScrollViewerUpdateHandler),this.removeEventListener(vA.eventName,this.boundOnStartCellEditingRequestCompleteHandler),null===(e=this.getScrollViewer())||void 0===e||e.unsubscribeFromScroll(),document.removeEventListener("keydown",this.boundOnDocumentKeyDownHandler),h.Browser.Firefox&&this.removeEventListener("mousedown",this.boundOnMouseDownHandler)}onDragStart(e){var t,i,n;const s=e.target,r=e.detail.source;if(this.isResizeAnchor(s)){const e=this.findHeaderElement(s),i=this.findLeafIndex(e);null===(t=this.columnResizeStrategy)||void 0===t||t.startDrag(i,r.pageX)}else if(this.isHeaderContentElement(s)){const e=this.findHeaderElement(s);e&&(this.columnDraggingHelper.start(e,r),null===(i=this.getScrollViewer())||void 0===i||i.startAutoScrolling(Re.Horizontal,(e=>this.columnDraggingHelper.updateDraggableContextByEvent(e))))}else if(this.enableRowDrag&&this.isRowDragAnchor(r.target)){const e=this.getRowVisibleIndexByTarget(r.target,this.enableInplaceEditing),t=this.getMainElement().querySelector(`tr[${rn.VisibleIndexName}="${e}"]`);t&&this.rowDraggingHelper.start(t,r)}else this.allowSelectRowByClick&&this.enableMultiSelect&&h.Browser.TouchUI&&(this.selectionHelper.start(r.target,!r.ctrlKey&&!r.metaKey&&!e.detail.isLongTap),null===(n=this.getScrollViewer())||void 0===n||n.startAutoScrolling(Re.Vertical,(e=>this.selectionHelper.updateSeletionByEvent(e)),(e=>{const t=this.getDataTable();if(t){const i=t.querySelector("thead");i&&(e.y+=i.offsetHeight,e.height-=i.offsetHeight);const n=t.querySelector("tfoot");n&&(e.height-=n.offsetHeight)}})));e.stopPropagation()}onDragStop(e){var t,i;if(null===(t=this.columnResizeStrategy)||void 0===t?void 0:t.isResizing)this.columnResizeStrategy.stopDrag();else if(this.columnDraggingHelper.isStarted()){const e=this.columnDraggingHelper.createColumnDraggedHandlerArgs();this.columnDraggingHelper.stop(),this.onColumnDragged(e)}else if(this.rowDraggingHelper.isStarted()){const e=this.rowDraggingHelper.createItemDraggedHandlerArgs();this.rowDraggingHelper.stop(),this.onRowDragged(e)}else if(this.selectionHelper.isStarted()){if(this.uiHandlersBridge&&this.selectionHelper.startSelectionRowIndex>-1&&this.selectionHelper.endSelectionRowIndex>-1){this.uiHandlersBridge.send("rowDragged",{startVisibleIndex:this.selectionHelper.startSelectionRowIndex,endVisibleIndex:this.selectionHelper.endSelectionRowIndex,cleanSelection:!e.detail.source.ctrlKey&&!e.detail.source.metaKey&&!e.detail.isLongTap})}this.selectionHelper.stop()}null===(i=this.getScrollViewer())||void 0===i||i.stopAutoScrolling(),e.stopPropagation()}onDragCancel(e){var t,i;(null===(t=this.columnResizeStrategy)||void 0===t?void 0:t.isResizing)?this.columnResizeStrategy.cancelDrag():this.columnDraggingHelper.isStarted()?this.columnDraggingHelper.stop():this.rowDraggingHelper.isStarted()?this.rowDraggingHelper.stop():this.selectionHelper.isStarted()&&this.selectionHelper.stop(),null===(i=this.getScrollViewer())||void 0===i||i.stopAutoScrolling(),e.stopPropagation()}allowInplaceEditingOnCellElementClick(e){return!0}onClick(e){const t=e.detail.source.target,i=0===e.detail.source.button;if(this.isResizeAnchor(e.target))e.detail.source.stopPropagation();else if(i&&this.enableInplaceEditing){const e=this.getCellInfo(t);null!==e&&this.allowInplaceEditingOnCellElementClick(t)&&this.requestStartCellEditing(e)}}requestStartCellEditing(e){if(!this.keyboardNavigator)return;if(null===e||e.type===Js.Edit)return;e.type===Js.Data&&this.setFocusedRowVisible(!1);const t=new gA(e);setTimeout((()=>this.dispatchEvent(new fA(t))),0)}onStartCellEditingRequestComplete(){this.setFocusedRowVisible(!0)}onDblClick(e){var t;const i=e.target;if(this.isResizeAnchor(i)){e.stopPropagation();const n=this.findHeaderElement(i),s=this.findLeafIndex(n);null===(t=this.columnResizeStrategy)||void 0===t||t.autoFitColumnWidth(s)}}onScrollViewerUpdate(e){const t=this.getScrollViewerContent(),i=this.getDataTable();i&&(t&&(i.offsetHeight<t.clientHeight?T.DomUtils.addClassName(i,ue.DataTableNoScrollClassName):i.offsetHeight>t.clientHeight&&T.DomUtils.removeClassName(i,ue.DataTableNoScrollClassName)),this.updateTopFixedBodyPosition(i)),e.stopPropagation()}onScrollViewerScroll(){this.styleGenerator.scrollPositionUpdated(this.getScrollViewerContent())}getRowVisibleIndexByTarget(e,t){let i=e;for(;i&&i!==this&&(t||!i.classList.contains(ue.EditRowClassName));){if("tr"===i.tagName.toLowerCase()&&i.dataset.visibleIndex)return parseInt(i.dataset.visibleIndex);i=i.parentElement}return-1}get allowSelectRowByClick(){return this._allowSelectRowByClick}set allowSelectRowByClick(e){this._allowSelectRowByClick=e,this.updateHandlePointerEventsMode()}get enableMultiSelect(){return this._enableMultiSelect}set enableMultiSelect(e){this._enableMultiSelect=e,this.updateHandlePointerEventsMode()}get enableFocusedRow(){return this._enableFocusedRow}set enableFocusedRow(e){this._enableFocusedRow=e,this.updateHandlePointerEventsMode()}get enableRowDrag(){return this._enableRowDrag}set enableRowDrag(e){this._enableRowDrag=e,this.updateHandlePointerEventsMode()}get enableItemDrop(){return this._enableItemDrop}set enableItemDrop(e){this._enableItemDrop=e,this.onItemDropStateChanged()}get enablePositionalItemDrop(){return this._enablePositionalItemDrop}get enableInplaceEditing(){return this._enableInplaceEditing}set enableInplaceEditing(e){this._enableInplaceEditing=e,this.updateHandlePointerEventsMode()}get isEditing(){return this._isEditing}set isEditing(e){this._isEditing=e}get focusedRowIndex(){return this._focusedRowIndex}set focusedRowIndex(e){this._focusedRowIndex=e}get keyboardNavigationEnabled(){return!!this.keyboardNavigator}get hasRowClickEvent(){return this._hasRowClickEvent}set hasRowClickEvent(e){this._hasRowClickEvent=e,this.updateHandlePointerEventsMode()}get hasRowDblClickEvent(){return this._hasRowDblClickEvent}set hasRowDblClickEvent(e){this._hasRowDblClickEvent=e,this.updateHandlePointerEventsMode()}get columnsInfo(){return this._columnsInfo}get headerLayout(){return this._headerLayout}get styleGenerator(){return this._styleGenerator}get editorManager(){return this._editorManager}get uiHandlersBridge(){return this._uiHandlersBridge}get uId(){return this.getAttribute(XA)}get enableEditOnKeypress(){return this._enableEditOnKeypress}get enterKeyDirection(){return this._enterKeyDirection}updateHandlePointerEventsMode(){this.handlePointerEventsMode=r.None,(this.hasRowClickEvent||this.enableFocusedRow||this.enableInplaceEditing)&&(this.handlePointerEventsMode|=r.Click),this.hasRowDblClickEvent&&(this.handlePointerEventsMode|=r.DblClick),this.enableRowDrag&&(this.handlePointerEventsMode|=r.Dragging),this.allowSelectRowByClick&&(this.handlePointerEventsMode|=r.Click,this.enableMultiSelect&&h.Browser.TouchUI&&(this.handlePointerEventsMode|=r.Dragging))}makeRowVisible(e){if(this.uiHandlersBridge&&e>=0){this.uiHandlersBridge.send("makeRowVisible",{visibleIndex:e})}}notifyFocusedRowChanged(e){if(e!==this.focusedRowIndex&&this.enableFocusedRow&&this.uiHandlersBridge){this.focusedRowIndex=e;this.uiHandlersBridge.send("focusedRowChanged",{visibleIndex:e})}}notifyColumnsInitialized(e,t){this._columnsInfo=e,this._headerLayout=t}notifyColumnsChanged(e,t){this._columnsInfo=e,this._headerLayout=t,this.correctWidths(Le.ColumnsChanged)}notifyColumnResizeAnchorFocus(e){var t;const i=this.findHeaderElement(e),n=this.findLeafIndex(i);null===(t=this.columnResizeStrategy)||void 0===t||t.anchorFocused(n)}notifyColumnResizeAnchorBlur(){var e;null===(e=this.columnResizeStrategy)||void 0===e||e.anchorUnfocused()}notifyColumnResizeAnchorMove(e){var t;null===(t=this.columnResizeStrategy)||void 0===t||t.performMoveStep(e)}updateEmptyColumnVisibility(){this.columnWidthsController.updateEmptyColumnVisibility()}autoFitColumnWidthsLegacy(e=!1){this.columnWidthsController.autoFitColumnWidthsLegacy(e)}autoFitColumnWidths(){this.columnWidthsController.autoFitColumnWidths()}updateTopFixedBodyPosition(e){const t=e.querySelector(":scope > thead"),i=e.querySelector(`:scope > tbody.${ue.TopFixedBodyClassName}`);t&&i&&(i.style.top=window.getComputedStyle(t).height)}correctWidths(e){var t;if(null===(t=this.columnResizeStrategy)||void 0===t?void 0:t.isResizing)return;this.columnWidthsController.correctWidths(e);const i=this.getScrollViewer();i&&i.refreshUI&&i.refreshUI()}getElementIndex(e){if(!e)return-1;if(e instanceof HTMLTableCellElement)return e.cellIndex;if(e&&e.parentElement)for(let t=0;t<e.parentElement.children.length;t++)if(e.parentElement.children[t]===e)return t;return-1}getColumnInfo(e){const t=this.findHeaderElement(e),i=this.getElementIndex(t);if(i>=0){const e=Array.from(this.getHeaderRows()).findIndex((e=>e===t.parentElement));let n=this.columnsInfo;if(e>=0&&(n=this.headerLayout[e]),i<n.length)return n[i]}return null}getCellInfo(e){return Wa.fromElement(this,e)}getCellElement(e){return Wa.getCellElement(this,e)}getColumnInfoByCell(e){if(e instanceof HTMLElement){const t=this.getElementIndex(e);if(t>=0&&t<this.columnsInfo.length)return this.columnsInfo[t]}return null}getColumnUID(e){const t=this.getColumnInfo(e);return t?t.uID:-1}findHeaderElement(e){const t=e;return t?this.isHeaderElement(t)?t:t.closest(`.${ue.HeaderElementClassName}`):null}findHeaderCellByColumnIndex(e){const t=this.columnsInfo[e];return this.getHeaderCell(t.headerRowIndex,t.headerCellIndex)}getHeaderCell(e,t){var i,n;return null!==(n=null===(i=this.getHeaderRow(e))||void 0===i?void 0:i.cells[t])&&void 0!==n?n:null}findLeafIndex(e){let t=this.getColumnInfo(e);return(null==t?void 0:t.hasLeafs)&&(t=t.getRightLeaf()),t?t.leafIndex:-1}getHeaderRow(e){return this.getHeaderRows().item(e)}isHeaderElement(e){return e&&e.classList.contains(ue.HeaderElementClassName)}isHeaderContentElement(e){return e.tagName.toLowerCase()===pe}isResizeAnchor(e){return e.classList.contains(ue.ColumnsResizeAnchorClassName)}isRowDragAnchor(e){return e.classList.contains(ue.RowDragAnchorClassName)}onItemDropStateChanged(){this.rowDraggingHelper.initItemDropTarget(this.enableItemDrop)}onDocumentKeyDown(e){if(!this.keyboardNavigationEnabled&&("Enter"===e.key||" "===e.key)){const t=this.findHeaderElement(e.target);if(t){const i=new MouseEvent("click",{bubbles:!0,cancelable:!0,ctrlKey:e.ctrlKey,metaKey:e.metaKey,shiftKey:e.shiftKey});t.dispatchEvent(i)}}}onMouseDown(e){e.ctrlKey&&e.preventDefault()}onColumnChooserItemDragged(e,t){this.onColumnDragged({columnUid:e,beforeColumnUid:t,srcArea:kA.ColumnChooser,dropArea:kA.ColumnChooser})}onRowDragged(e){e&&this.uiHandlersBridge&&this.uiHandlersBridge.send("rowDropped",e)}onColumnDragged(e){e&&this.uiHandlersBridge&&this.uiHandlersBridge.send("columnHeaderDragged",e)}onColumnWidthsChanged(e,t){this.uiHandlersBridge&&this.uiHandlersBridge.send("columnWidthsChanged",{columnUids:e,widths:t})}onSizeChanged(e){const t=e[0].contentRect.width;this.currentWidth!==t&&t>0&&(this.correctWidths(-1===this.currentWidth?Le.ColumnsChanged:Le.GridResize),this.currentWidth=t)}getContentTemplate(){return YA}static get observedAttributes(){return["allow-select-row-by-click","enable-multi-select","has-row-click-event","has-row-dbl-click-event","resize-mode","enable-focused-row","enable-inplace-editing","is-editing","request-auto-fit-column-widths","focus-pending-editor-column-uid","is-pending-editor-show","focused-row-index","enable-row-drag","enable-item-drop","enable-positional-item-drop","has-fixed-on-top-body","enable-edit-on-keypress","enter-key-direction"]}attributeChangedCallback(e,t,i){var n;switch(e){case"allow-select-row-by-click":this.allowSelectRowByClick=null!==i;break;case"enable-focused-row":this.enableFocusedRow=null!==i;break;case"enable-multi-select":this.enableMultiSelect=null!==i;break;case"enable-inplace-editing":this.enableInplaceEditing=null!=i;break;case"enable-row-drag":this.enableRowDrag=null!==i;break;case"enable-item-drop":this.enableItemDrop=null!==i;break;case"enable-positional-item-drop":this._enablePositionalItemDrop=null!==i;break;case"has-row-click-event":this.hasRowClickEvent=null!==i;break;case"has-row-dbl-click-event":this.hasRowDblClickEvent=null!==i;break;case"is-editing":this.isEditing=null!==i;break;case"focused-row-index":this.focusedRowIndex=parseInt(i);break;case"resize-mode":null===(n=this.columnResizeStrategy)||void 0===n||n.cancelDrag(),this.ensureColumnResizeStrategy();break;case"is-pending-editor-show":this.editorManager.notifyPendingEditorShow(null!==i);break;case"has-fixed-on-top-body":if(null!==i){const e=this.getDataTable();e&&setTimeout((()=>this.updateTopFixedBodyPosition(e)))}break;case"focus-pending-editor-column-uid":null!==i&&this.requestFocusEditor(parseInt(i));break;case"request-auto-fit-column-widths":if(i){const e=JSON.parse(i);if(e[0]&&e[0]!==this._latestAutoFitColumnWidthsRequestGuid)if(this._latestAutoFitColumnWidthsRequestGuid=e[0],2===e.length){const t=e[1];setTimeout((()=>{this.autoFitColumnWidthsLegacy(t)}))}else setTimeout((()=>{this.autoFitColumnWidths()}))}break;case"enable-edit-on-keypress":this._enableEditOnKeypress=null!==i;break;case"enter-key-direction":this._enterKeyDirection=parseInt(i)}}ensureColumnResizeStrategy(){const e=this.getAttribute("resize-mode");this.columnResizeStrategy=e?"next-column"===e?new We(this):new $e(this):void 0}requestFocusEditor(e){setTimeout((()=>this.focusEditor(e)),0)}focusEditor(e){const t=this.uId;if(null===t)return;const i=this.querySelector(Gs.getBodyEditRowSelector(t,this.getTagName()));if(null===i)return;let n=null;for(const t of i.cells){const i=this.getCellInfo(t);if(null!==i&&i.columnInfo.uID===e&&i.type===Js.Edit){n=t;break}}if(null===n)return;const s=fi.findFocusableElements(n),r=s.length>0?s[0]:null;if(!r)return;r.focus();const o=this.getScrollViewer(),a=this.getScrollViewerContent();o&&a&&Ja.alignElementVertically(r,o,a),Zl.selectInputValue(r)}setFocusedRowVisible(e){e?(clearTimeout(this.focusedRowRestoreVisibilityTimerId),this.focusedRowRestoreVisibilityTimerId=void 0,this.hasAttribute(rn.FocusedRowHidden)&&this.removeAttribute(rn.FocusedRowHidden)):(this.enableFocusedRow&&this.setAttribute(rn.FocusedRowHidden,""),clearTimeout(this.focusedRowRestoreVisibilityTimerId),this.focusedRowRestoreVisibilityTimerId=setTimeout((()=>this.setFocusedRowVisible(!0)),this.focusedRowRestoreVisibilityTimeout))}static findGrid(e){let t=document.querySelector(`${GA}[${XA}="${e}"]`);return t||(t=document.querySelector(`${$A}[${XA}="${e}"]`)),t}}customElements.define(pe,class extends de{constructor(){super(),this.handlePointerEventsMode=r.Click|r.Dragging}get handlePointerEventsTarget(){return this.closest(`.${ue.HeaderElementClassName}`)}}),customElements.define("dxbl-grid-columns-info",class extends de{get data(){if(!this._dataCache){const e=this.getAttribute("data");this._dataCache=e?JSON.parse(e):{}}return this._dataCache}get header(){if(!this._headerCache){const e=this.data["header-uids"];this._headerCache=e?this.parseHeaderLayout(e):[]}return this._headerCache}get leafs(){if(!this._leafsCache){const e=this.data["leaf-uids"];this._leafsCache=e?this.parseColumns(e,!0):[],this.attachLeafs(this._leafsCache)}return this._leafsCache}get columns(){if(!this._columnsInfoCache){const e=this.data.columns;this._columnsInfoCache=e?this.parseColumnsInfo(e):{},this.attachParents(this._columnsInfoCache)}return this._columnsInfoCache}get indents(){if(!this._indentsCache){const e=this.data.indents;this._indentsCache=e?this.parseInfoArray(e):[]}return this._indentsCache}get emptyColumn(){if(!this._emptyColumnCache){const e=this.data["empty-column"];this._emptyColumnCache=e?this.parseColumnInfo(e):null}return this._emptyColumnCache}constructor(){super(),this._dataCache=null,this._columnsInfoCache=null,this._headerCache=null,this._leafsCache=null,this._indentsCache=null,this._emptyColumnCache=null,this._gridElementPromise=null}initializeComponent(){super.initializeComponent(),this.grid=this.closest(`.${ue.ClassName}`),this._gridElementPromise=customElements.whenDefined(this.grid.tagName.toLowerCase()),this._gridElementPromise.then(this.notifyColumnsInitialized.bind(this))}invalidateCaches(){this._dataCache=null,this._columnsInfoCache=null,this._headerCache=null,this._leafsCache=null,this._indentsCache=null,this._emptyColumnCache=null}parseHeaderLayout(e){const t=[];for(let i=0;i<e.length;i++){const n=this.parseColumns(e[i],0===i);this.updateHeaderLayoutInfo(n,i),t.push(n)}return t}updateHeaderLayoutInfo(e,t){for(let i=0;i<e.length;i++)e[i].updateHeaderLayoutInfo(t,i)}parseColumns(e,t){const i=t?this.indents.slice():[];for(let t=0;t<e.length;t++){i.push(this.columns[e[t]])}return t&&this.emptyColumn&&i.push(this.emptyColumn),i}parseColumnsInfo(e){const t={};for(let i=0;i<e.length;i++){const n=e[i];t[n.UID]=this.parseColumnInfo(n)}return t}parseInfoArray(e){const t=[];for(let i=0;i<e.length;i++){t.push(this.parseColumnInfo(e[i]))}return t}parseColumnInfo(e){const t=e.DragRestrictions?new fe(e.DragRestrictions.PreviousColumnUid,e.DragRestrictions.NextColumnUid,e.DragRestrictions.NextVisibleColumnUid):null;return new ve(e.UID,e.ParentUID,e.AllowGroup,e.Width,e.MinWidth,e.FixedPosition,e.IsIndent,e.IsEmpty,e.IsDetail,e.IsEditable,e.AllowReorder,t)}attachParents(e){for(const t of Object.values(e)){const i=e[t.parentUID];i&&t.attachParent(i)}}attachLeafs(e){for(let t=0;t<e.length;t++){const i=e[t];i.isIndent||i.isRoot||this.attachLeafRecursive(i.parentUID,i),i.updateLeafIndex(t)}}attachLeafRecursive(e,t){const i=e>=0?this.columns[e]:null;i&&(i.attachLeaf(t),this.attachLeafRecursive(i.parentUID,t))}notifyColumnsInitialized(){var e;null===(e=this.grid)||void 0===e||e.notifyColumnsInitialized(this.leafs,this.header)}notifyColumnsChanged(){var e;null===(e=this.grid)||void 0===e||e.notifyColumnsChanged(this.leafs,this.header)}static get observedAttributes(){return["data"]}attributeChangedCallback(e,t,i){var n;this.invalidateCaches(),null===(n=this._gridElementPromise)||void 0===n||n.then(this.notifyColumnsChanged.bind(this))}}),customElements.define("dxbl-column-resize-anchor",class extends de{constructor(){super(),this.boundOnAnchorFocusHandler=this.onAnchorFocus.bind(this),this.boundOnAnchorBlurHandler=this.onAnchorBlur.bind(this),this.boundOnKeyDownHandler=this.onKeyDown.bind(this),this.handlePointerEventsMode=r.Click|r.DblClick|r.Dragging}handlePointerEventsDelay(e){return s.Default}initializeComponent(){var e,t,i;super.initializeComponent(),h.Browser.TouchUI&&this.classList.add(he.Touch),this.grid=this.closest(`.${ue.ClassName}`),this.focusableElement=this.querySelector("div"),null===(e=this.focusableElement)||void 0===e||e.addEventListener("focus",this.boundOnAnchorFocusHandler),null===(t=this.focusableElement)||void 0===t||t.addEventListener("blur",this.boundOnAnchorBlurHandler),null===(i=this.focusableElement)||void 0===i||i.addEventListener("keydown",this.boundOnKeyDownHandler)}disposeComponent(){var e,t,i;super.disposeComponent(),null===(e=this.focusableElement)||void 0===e||e.removeEventListener("focus",this.boundOnAnchorFocusHandler),null===(t=this.focusableElement)||void 0===t||t.removeEventListener("blur",this.boundOnAnchorBlurHandler),null===(i=this.focusableElement)||void 0===i||i.removeEventListener("keydown",this.boundOnKeyDownHandler)}onAnchorFocus(e){var t;null===(t=this.grid)||void 0===t||t.notifyColumnResizeAnchorFocus(e.target)}onAnchorBlur(){var e;null===(e=this.grid)||void 0===e||e.notifyColumnResizeAnchorBlur()}onKeyDown(e){var t,i;e.keyCode===Be.KeyCode.Left&&(e.preventDefault(),null===(t=this.grid)||void 0===t||t.notifyColumnResizeAnchorMove(ke.Left)),e.keyCode===Be.KeyCode.Right&&(e.preventDefault(),null===(i=this.grid)||void 0===i||i.notifyColumnResizeAnchorMove(ke.Right))}}),customElements.define("dxbl-column-resize-separator",Ge),customElements.define("dxbl-grid-column-chooser",class extends de{constructor(){super(),this.boundOnDragStartHandler=this.onDragStart.bind(this),this.boundOnDragStopHandler=this.onDragStop.bind(this),this.boundOnDragCancelHandler=this.onDragCancel.bind(this),this.grid=null,this.scrollViewer=null,this.itemsReorderHelper=new Je(this.onItemsReording.bind(this)),this.handlePointerEventsMode=r.Dragging}handlePointerEventsDelay(e){return s.Default}get useShadowDom(){return!1}initializeComponent(){super.initializeComponent(),this.addEventSubscriptions(),this.grid=td.findGrid(this.getAttribute(qA)),this.scrollViewer=this.querySelector(`.${xe.ClassName}`),this.initializeKeyboardNavigator()}disposeComponent(){super.disposeComponent(),this.removeEventSubscriptions(),delete this.keyboardNavigator}getColumnUid(e){return parseInt(e.getAttribute(qe))}getColumnParentUid(e){return e.getAttribute(Ye)}addEventSubscriptions(){this.addEventListener(a.eventName,this.boundOnDragStartHandler),this.addEventListener(l.eventName,this.boundOnDragStopHandler),this.addEventListener(A.eventName,this.boundOnDragCancelHandler)}removeEventSubscriptions(){this.removeEventListener(a.eventName,this.boundOnDragStartHandler),this.removeEventListener(l.eventName,this.boundOnDragStopHandler),this.removeEventListener(A.eventName,this.boundOnDragCancelHandler)}initializeKeyboardNavigator(){this.keyboardNavigator=this.querySelector(Qi),this.keyboardNavigator&&!this.keyboardNavigator.initialized&&this.keyboardNavigator.initialize(this,new TA(this,this.keyboardNavigator))}onDragStart(e){var t;const i=e.detail.source,n=i.target,s=n.closest(`.${ue.ColumnChooserItemDragAnchorClassName}`),r=n.closest(`.${ue.ColumnChooserItemClassName}`);if(null!=s&&null!=r){const e=Array.from(this.getElementsByClassName(ue.ColumnChooserItemClassName));this.itemsReorderHelper.start(e,r,i),null===(t=this.scrollViewer)||void 0===t||t.startAutoScrolling(Re.Vertical,(()=>{this.itemsReorderHelper.refreshUI()}))}e.stopPropagation()}onDragStop(e){var t;this.itemsReorderHelper.stop(),null===(t=this.scrollViewer)||void 0===t||t.stopAutoScrolling(),e.stopPropagation()}onDragCancel(e){var t;this.itemsReorderHelper.cancel(),null===(t=this.scrollViewer)||void 0===t||t.stopAutoScrolling(),e.stopPropagation()}onItemsReording(e,t,i,n){const s=i.map((t=>e[t])),r=s[0],o=t.indexOf(i[0])+i.length;let a=null;if(!(o===t.length)){a=e[t[o]];this.getColumnParentUid(a)!==this.getColumnParentUid(r)&&(a=null)}this.applyStyles(e,s,a,n),n===Xe.Stop&&this.onItemsReorded(r,a)}applyStyles(e,t,i,n){for(let t=0;t<e.length;t++){const s=e[t],r=s.classList.contains(ue.ColumnChooserDraggingItemNextSiblingClassName);(n!==Xe.ItemMoving||r&&s!==i)&&s.classList.remove(ue.ColumnChooserDraggingItemNextSiblingClassName)}if(n===Xe.ItemMoving){for(const e of t)e.classList.contains(ue.ColumnChooserDraggingItemClassName)||e.classList.add(ue.ColumnChooserDraggingItemClassName);null==i||i.classList.contains(ue.ColumnChooserDraggingItemNextSiblingClassName)||i.classList.add(ue.ColumnChooserDraggingItemNextSiblingClassName)}else{for(const e of t)e.classList.remove(ue.ColumnChooserDraggingItemClassName);null==i||i.classList.remove(ue.ColumnChooserDraggingItemNextSiblingClassName)}}onItemsReorded(e,t){if(null==this.grid)return;const i=this.getColumnUid(e),n=null!=t?this.getColumnUid(t):null;setTimeout((()=>{var e;return null===(e=this.grid)||void 0===e?void 0:e.onColumnChooserItemDragged(i,n)}),200)}}),customElements.define("dxbl-grid-drop-target-indicator",class extends UA{calculateLeftOffset(){const e=this.getTargetElement();if(!e||Zs.getRowType(e)!==Xs.Data)return"";const t=e.querySelectorAll(`.${ue.IndentCellClassName}`);if(0===t.length)return"";const i=t[t.length-1];return`${i.offsetLeft+i.offsetWidth}px`}});class jA extends RA{constructor(){super(),this.boundOnDroppableMouseMoveHandler=this.onDroppableAreaMove.bind(this)}get draggableRowItemContext(){return this.draggableItemContext}addElementListeners(e){super.addElementListeners(e),e.addEventListener("pointermove",this.boundOnDroppableMouseMoveHandler)}removeElementListeners(e){super.removeElementListeners(e),e.removeEventListener("pointermove",this.boundOnDroppableMouseMoveHandler)}onDroppableAreaMove(e){const t=document.elementFromPoint(e.clientX,e.clientY),i=this.getItemDropArea(),n=this.findItemElementUpToParent(t,i);n&&(this.updateDraggableContext(n),this.refreshUI())}initItemDropTarget(e){e?QA.register(this):QA.remove(this.getKey())}createDraggableContext(e,t,i){return{...super.createDraggableContext(e,t,i),visibleIndex:this.getItemVisibleIndex(e),restrictions:this.getDropRestrictions()}}updateDraggableElementPosition(){if(super.updateDraggableElementPosition(),!this.draggableContext)return;const e=this.draggableContext;e.draggableElementPosition={x:e.draggableElementPosition.x-e.draggableElementOffset.x,y:e.draggableElementPosition.y-e.draggableElementOffset.y}}updateDraggableContext(e){super.updateDraggableContext(e),this.updateIndicator()}updateIndicator(){if(!this.draggableRowItemContext)return;const e=this.getDropTargetIndicator(),t=this.getDropPosition();e&&this.draggableRowItemContext.mouseOverElement&&e.updatePosition(this.draggableRowItemContext.mouseOverElement,t)}refreshUICore(){var e;super.refreshUICore();const t=this.getDropTargetIndicator();this.isStarted()&&(null===(e=this.draggableRowItemContext)||void 0===e?void 0:e.isPossibleDropItem)&&this.draggableRowItemContext.target===this?t.show():null==t||t.hide()}stop(){var e;null===(e=this.getDropTargetIndicator())||void 0===e||e.hide(),super.stop()}createSourceInfo(){return{...super.createSourceInfo(),visibleIndex:this.draggableRowItemContext.visibleIndex}}createTargetInfo(){return{...super.createTargetInfo(),visibleIndex:this.getItemVisibleIndex(this.draggableRowItemContext.mouseOverElement),dropPosition:this.getDropPosition()}}deactivateDropTarget(){var e;super.deactivateDropTarget(),null===(e=this.getDropTargetIndicator())||void 0===e||e.hide()}isWithinDeniedRange(e){var t,i,n;return(null!==(n=null===(i=null===(t=this.draggableRowItemContext)||void 0===t?void 0:t.restrictions)||void 0===i?void 0:i.reorderDeniedRanges)&&void 0!==n?n:[]).some((t=>t.Start<=e&&t.End>=e))}isTopAdjacentDeniedRange(e){var t,i,n;return(null!==(n=null===(i=null===(t=this.draggableRowItemContext)||void 0===t?void 0:t.restrictions)||void 0===i?void 0:i.reorderDeniedRanges)&&void 0!==n?n:[]).some((t=>e===t.Start-1))}isBottomAdjacentDeniedRange(e){var t,i,n;return(null!==(n=null===(i=null===(t=this.draggableRowItemContext)||void 0===t?void 0:t.restrictions)||void 0===i?void 0:i.reorderDeniedRanges)&&void 0!==n?n:[]).some((t=>e===t.End+1))}isRestrictedTopArea(){if(!this.draggableRowItemContext)return!1;const{currentCursorPosition:e,mouseOverElementRect:t,mouseOverElement:i}=this.draggableRowItemContext;if(!i||!t)return!1;const n=this.getItemVisibleIndex(i),s=PA.calculateVerticalCenter(t);return this.isWithinDragging()&&e.y>s&&this.isTopAdjacentDeniedRange(n)}isRestrictedBottomArea(){if(!this.draggableRowItemContext)return!1;const{currentCursorPosition:e,mouseOverElementRect:t,mouseOverElement:i}=this.draggableRowItemContext;if(!i||!t)return!1;const n=this.getItemVisibleIndex(i),s=PA.calculateVerticalCenter(t);return this.isWithinDragging()&&e.y<s&&this.isBottomAdjacentDeniedRange(n)}}class ZA extends jA{constructor(e){super(),this.grid=e}getKey(){return this.grid.uId}getItemDropArea(){return this.grid.getDataTable()}start(e,t){this.isRowDraggingAllowed(e)&&super.start(e,t)}activateDropTarget(e){var t;super.activateDropTarget(e),null===(t=this.grid.getScrollViewer())||void 0===t||t.startAutoScrolling(Re.Vertical)}deactivateDropTarget(){var e;super.deactivateDropTarget(),null===(e=this.grid.getScrollViewer())||void 0===e||e.stopAutoScrolling()}getItemVisibleIndex(e){return this.grid.getRowVisibleIndexByTarget(e,this.grid.enableInplaceEditing)}getDropRestrictions(){return this.grid.getDropRestrictions()}getDraggableElement(e){return this.grid.getRowDragHint()}getDroppableTargets(){const{restrictions:e}=this.draggableRowItemContext||{};return e?e.allowedComponents.map((e=>QA.find(e))):[]}isItemDropPossible(e){return!(!this.draggableRowItemContext||e===this.draggableRowItemContext.srcElement)&&(this.isWithinDragging()?this.isReorderPossible(e):this.isDropPossible(e))}isDropPossible(e){const t=Zs.getRowType(e);return t===Xs.Data||t===Xs.Group||t===Xs.EmptyData||t===Xs.EmptyRow}isReorderPossible(e){const t=Zs.getRowType(e);if(!this.draggableRowItemContext||t!==Xs.Data)return!1;const i=this.getItemDropArea();if(!i||e.closest(i.tagName)!==i)return!1;const n=this.getItemVisibleIndex(e);return!this.isWithinDeniedRange(n)}isPositionalDropAllowed(){return this.grid.enablePositionalItemDrop}findItemElementUpToParent(e,t){return Nt(e,null,(e=>e.matches(Gs.TableBodyRows)&&e.closest(Gs.DataTableSelector)===t))}isRowDraggingAllowed(e){return Zs.getRowType(e)===Xs.Edit?this.grid.enableInplaceEditing:Zs.getRowType(e)===Xs.Data}getDropTargetIndicator(){return this.grid.getDropTargetIndicator()}static isDataRow(e){return Zs.getRowType(e)===Xs.Data}static isEmptyRow(e){const t=Zs.getRowType(e);return t===Xs.EmptyData||t===Xs.EmptyRow}}class ed extends ZA{getDropPosition(){if(!this.draggableRowItemContext)return HA.Append;const{currentCursorPosition:e,mouseOverElementRect:t,mouseOverElement:i}=this.draggableRowItemContext;return i&&t?ZA.isEmptyRow(i)||ZA.isDataRow(i)&&!this.isPositionalDropAllowed()?HA.Append:ZA.isDataRow(i)?this.isRestrictedTopArea()?HA.Before:this.isRestrictedBottomArea()?HA.After:PA.getDropPositionByCursor(e.y,t):HA.Inside:HA.Inside}isReorderPossible(e){return this.isPositionalDropAllowed()&&super.isReorderPossible(e)}isWithinDeniedRange(e){return!(!this.isTopAdjacentDeniedRange(e)||!this.isBottomAdjacentDeniedRange(e))||super.isWithinDeniedRange(e)}}class td extends JA{constructor(){super()}getTagName(){return GA}createRowDraggingHelper(){return new ed(this)}}customElements.define(GA,td);class id{}id.TreeNodeExpandControlsCell=`${Gs.TableCell}.dxbl-grid-tree-node-expand-controls-cell`,id.TreeNodeExpandControlsContainer=`${id.TreeNodeExpandControlsCell} > .dxbl-grid-tree-node-expand-controls-container`,id.TreeNodeExpandButton=`${id.TreeNodeExpandControlsContainer} > .dxbl-grid-tree-node-expand-button`;class nd extends ZA{getDropPosition(){if(!this.draggableRowItemContext)return HA.Append;const{currentCursorPosition:e,mouseOverElementRect:t,mouseOverElement:i}=this.draggableRowItemContext;return i&&t?ZA.isEmptyRow(i)?HA.Append:ZA.isDataRow(i)?this.isRestrictedArea(e.y,t)||nd.isCursorInMiddle(e.y,t)?HA.Inside:this.isPositionalDropAllowed()?PA.getDropPositionByCursor(e.y,t):HA.Append:HA.Inside:HA.Inside}isRestrictedArea(e,t){const{top:i,bottom:n}=nd.getBounds(t);return this.isRestrictedTopArea()&&e>i||this.isRestrictedBottomArea()&&e<n}static isCursorInMiddle(e,t){const{top:i,bottom:n}=nd.getBounds(t);return e>i&&e<n}static getBounds(e){const t=PA.calculateVerticalCenter(e),i=e.height/4;return{top:t-i,bottom:t+i}}}class sd{static isExpandCollapseHotkey(e,t){const i=Be.KeyUtils.getEventKeyCode(e);return(i===Be.KeyCode.Right||i===Be.KeyCode.Left)&&(t?e.metaKey:e.ctrlKey)}}class rd extends cA{constructor(e,t,i){super(e,t,i)}handleArrowLeftKeyDown(e){return sd.isExpandCollapseHotkey(e,this.isMacOSPlatform)?(this.performShortcutEvent(e),!0):super.handleArrowLeftKeyDown(e)}handleArrowRightKeyDown(e){return sd.isExpandCollapseHotkey(e,this.isMacOSPlatform)?(this.performShortcutEvent(e),!0):super.handleArrowRightKeyDown(e)}}class od extends aA{constructor(e,t,i){super(e,t,i)}handleArrowLeftKeyDown(e){return sd.isExpandCollapseHotkey(e,this.isMacOSPlatform)?(this.performShortcutEvent(e),!0):super.handleArrowLeftKeyDown(e)}handleArrowRightKeyDown(e){return sd.isExpandCollapseHotkey(e,this.isMacOSPlatform)?(this.performShortcutEvent(e),!0):super.handleArrowRightKeyDown(e)}}class ad extends bA{constructor(e,t){super(e,t)}createTableBodyItemStrategy(e){return this.isVirtualScrollingEnabled(e)?new Ad(this,this.grid,e):new ld(this,this.grid,e)}}class ld extends BA{constructor(e,t,i){super(e,t,i)}createDataRowStrategy(e){return new rd(this,this.grid,e)}createInplaceEditRowStrategy(e){return new od(this,this.grid,e)}}class Ad extends EA{constructor(e,t,i){super(e,t,i)}createDataRowStrategy(e){return new rd(this,this.grid,e)}createInplaceEditRowStrategy(e){return new od(this,this.grid,e)}}class dd extends SA{constructor(e){super(e)}createDataTableStrategy(e){return new ad(this.grid,e)}}class cd extends Xa{constructor(e){super(e)}isDataCellInteractiveElement(e){return!!e&&(e.matches(id.TreeNodeExpandControlsCell)||e.matches(id.TreeNodeExpandButton))}}customElements.define($A,class extends JA{constructor(){super()}getTagName(){return $A}get bypassNonInlineHoverTitleElementChildSelector(){return id.TreeNodeExpandControlsContainer}allowInplaceEditingOnCellElementClick(e){return!e.matches(`${id.TreeNodeExpandButton} *`)}createRowDraggingHelper(){return new nd(this)}createRootKeyboardNavigationStrategy(){return new dd(this)}createEditorManager(){return new cd(this)}});const hd="dxbl-chart-legend",ud="dxbl-chart-legend-icon",pd="dxbl-chart-legend-def-icon",md="dxbl-chart-legend-item",gd="--dxbl-chart";class Cd{}Cd.axisTitleFontColor=`${gd}-axis-title-font-color`,Cd.axisLineColor=`${gd}-axis-line-color`,Cd.constantLineColor=`${gd}-constant-line-color`,Cd.errorBarColor=`${gd}-error-bar-color`,Cd.annotationColor=`${gd}-annotation-color`,Cd.annotationTextColor=`${gd}-annotation-text-color`,Cd.containerBackgroundColor=`${gd}-container-background-color`,Cd.candlestickInnerColor=`${gd}-candlestick-inner-color`,Cd.zoomAndPanDragBoxColor=`${gd}-zoom-drag-box-color`,Cd.axisLabelFontColor=`${gd}-axis-label-font-color`,Cd.axisLabelFontOpacity=`${gd}-axis-label-font-opacity`;const fd="dxbl-chart-legend-listeners";var vd;function bd(e,t,i,n){var s;const r=e.querySelectorAll("."+md);for(let o=0;o<r.length;o++){const a=r[o];if(a){const r=+(null!==(s=a.getAttribute("data-series"))&&void 0!==s?s:""),o=a.getAttribute("data-point");wd(a,t,r,o,i,n,e)}}}function wd(e,t,i,n,s,r,o){if(!e)return;const a=yd(t,i,n);if(!a)return;const l=e.querySelector("."+ud+" rect");if(l){const e=a.getColor();T.DomUtils.hasClassName(l,pd)&&(l.style.fill=e),l.style.color=e}e.getAttribute(fd)||(Bd(e,t,i,n,["pointerover"],(function(e){const i=t.option("legend.hoverMode");s===vd.series?e.hover(i):"includePoints"===i&&e.hover()})),Bd(e,t,i,n,["pointerout"],(function(e){e.clearHover()})),Bd(e,t,i,n,["click"],(function(e){r.selectLegendItem(e,s),o.onLegendClick(i,n)})),e.setAttribute(fd,"true"))}function yd(e,t,i){const n=e.getSeriesByPos(t);return i&&n?n.getPoints().filter((function(e){return e.tag===i}))[0]:n}function Bd(e,t,i,n,s,r){s.forEach((function(s){const o=function(){const e=yd(t,i,n);e&&r(e)};e.addEventListener(s,o),Bi(e,(()=>{e.removeEventListener(s,o)}))}))}!function(e){e[e.series=0]="series",e[e.point=1]="point"}(vd||(vd={}));const Ed=".dxbl-chart-tooltip";class Id{constructor(e){this.currentPointInfo=null,this._owner=e}onTooltipHidden(e){e.isPointerOut&&this.hideTooltip(!1)}onTooltipShown(e,t){const i=e.target;if(!i||!i.series)return;const n=D.MathUtils.generateGuid();this.currentPointInfo={chartPoint:i,x:e.x,y:e.y,id:n};t({seriesIndex:i.series.index,data:i.data,tag:i.tag,id:n})}hideTooltip(e){var t,i;e&&(null===(i=null===(t=this.currentPointInfo)||void 0===t?void 0:t.chartPoint)||void 0===i?void 0:i.series)&&this.currentPointInfo.chartPoint.clearHover();const n=this._owner.querySelector(Ed);n&&Zt((()=>n.classList.remove("dxbl-visible"))),this.currentPointInfo=null}positionTooltip(){if(!this.currentPointInfo)return;const e=this.currentPointInfo.x,t=this.currentPointInfo.y,i=this._owner,n=i.getWidgetElement(),s=null==i?void 0:i.querySelector(Ed);if(!s)return;const r=s.offsetParent,o=t-T.DomUtils.getAbsolutePositionY(r);let a=e-T.DomUtils.getAbsolutePositionX(r),l=0;const A=this.getCorrectedTooltipLeft(a,s,i,n);null!==A&&(l=a-A,a=A),this.applyTooltipPosition(a,o,l,s)}getCorrectedTooltipLeft(e,t,i,n){let s=null;const r=t.getBoundingClientRect().width/2,o=n.getBoundingClientRect();if(e<r){const e=n.offsetParent,t=(null==e?void 0:e.getBoundingClientRect().left)||0;s=o.left-t+r}else{const t=(i.getBoundingClientRect().width+o.width)/2;e+r>t&&(s=t-r)}return s}applyTooltipPosition(e,t,i,n){const s=n.querySelector(".dxbl-chart-tooltip-pointer"),r=`calc(${t}px - 0.625rem)`,o=`${e}px`,a=n.classList,l=0!==i?`calc(50% + ${i}px)`:"50%";Zt((function(){n.style.top=r,n.style.left=o,s.style.left=l,a.contains("dxbl-visible")||a.add("dxbl-visible")}))}}class Sd{}Sd.pieChartName="dxPieChart",Sd.polarChartName="dxPolarChart",Sd.xyChartName="dxChart";class xd{static compareValues(e,t){return e instanceof Date&&t instanceof Date?e.getTime()===t.getTime():e===t}get seriesIndex(){return this._seriesIndex}get pointArgument(){return this._pointArgument}get pointValue(){return this._pointValue}constructor(e,t,i){this._seriesIndex=e,this._pointArgument=t,this._pointValue=i}}class Dd{get seriesIndex(){return this._seriesIndex}constructor(e){this._seriesIndex=e}}function Fd(e){return e===Sd.pieChartName?new Hd:new Td}class Td{comparePoint(e,t){return e.seriesIndex===t.seriesIndex&&xd.compareValues(e.pointArgument,t.pointArgument)&&xd.compareValues(e.pointValue,t.pointValue)}compareSeries(e,t){return e.seriesIndex===t.seriesIndex}}class Hd extends Td{comparePoint(e,t){return e.seriesIndex===t.seriesIndex&&xd.compareValues(e.pointArgument,t.pointArgument)}}class Ud{constructor(){this._seriesSelectionMode=null,this._pointSelectionMode=null,this._selectedSeries=new Array,this._selectedPoints=new Array,this._hoveredPoint=null,this._hoveredSeries=null,this._compareStrategy=Fd()}get seriesSelectionMode(){return this._seriesSelectionMode}set seriesSelectionMode(e){this._seriesSelectionMode=e}get pointSelectionMode(){return this._pointSelectionMode}set pointSelectionMode(e){this._pointSelectionMode=e}setCompareStrategy(e){this._compareStrategy=e}changePointSelectionState(e,t){const i=this._compareStrategy.comparePoint,n=this._selectedPoints.findIndex((t=>i(t,e))),s=n>-1;t?s||this.appendPoint(e):s&&this._selectedPoints.splice(n,1)}changeSeriesSelectionState(e,t){const i=this._compareStrategy.compareSeries,n=this._selectedSeries.findIndex((t=>i(t,e))),s=n>-1;t?s||this.appendSeries(e):s&&this._selectedSeries.splice(n,1)}changePointHoverState(e,t){this._hoveredPoint=t?e:null}changeSeriesHoverState(e,t){this._hoveredSeries=t?e:null}restoreSelection(e){this._selectedPoints=this._selectedPoints.filter(e.selectPoint),this._selectedSeries=this._selectedSeries.filter(e.selectSeries),null===this._hoveredPoint||e.hoverPoint(this._hoveredPoint)||(this._hoveredPoint=null),null===this._hoveredSeries||e.hoverSeries(this._hoveredSeries)||(this._hoveredSeries=null)}reset(){this.resetSelectedPoints(),this.resetSelectedSeries(),this._hoveredPoint=null,this._hoveredSeries=null}isPointSingleSelectionMode(){return this.pointSelectionMode===Ud.singleSelectionModeKey}isSeriesSingleSelectionMode(){return this.seriesSelectionMode===Ud.singleSelectionModeKey}appendPoint(e){this.isPointSingleSelectionMode()&&this.resetSelectedPoints(),this._selectedPoints.push(e)}appendSeries(e){this.isSeriesSingleSelectionMode()&&this.resetSelectedSeries(),this._selectedSeries.push(e)}resetSelectedPoints(){this._selectedPoints=[]}resetSelectedSeries(){this._selectedSeries=[]}}Ud.singleSelectionModeKey="single";class Pd{constructor(e){this._eventsLocked=!1,this._disposed=!1,this._lastJob=Promise.resolve(),this._state=new Ud,this._owner=e}setSeriesSelectionMode(e){this._state.seriesSelectionMode=e}setPointSelectionMode(e){this._state.pointSelectionMode=e}setChartType(e){const t=Fd(e);this._state.setCompareStrategy(t)}dispose(){this._lastJob=this._lastJob.catch((e=>{e.message!==Pd.disposedErrorKey&&console.error(e)})),this._disposed=!0}selectSeriesAndPoint(e,t){this.pointSelectionEnabled&&t?this.togglePointSelection(t):this.toggleSeriesSelection(e)}selectLegendItem(e,t){t===vd.series?this.toggleSeriesSelection(e):this.togglePointSelection(e)}togglePointSelection(e){this.pointSelectionEnabled&&e&&this.addJobToQueue((()=>this.selectPointInternal(e)))}toggleSeriesSelection(e){this.seriesSelectionEnabled&&e&&this.addJobToQueue((()=>this.selectSeriesInternal(e)))}restoreChartSelection(e){this.addJobToQueue((()=>this.restoreChartSelectionInternal(e)))}seriesSelectionChanged(e){if(!this.eventsAreLocked()){const t=e.target;t&&this.onSelectionChanged(t.index,t.isSelected())}}pointSelectionChanged(e){if(!this.eventsAreLocked()){const t=e.target;t&&this.onSelectionChanged(t.series.index,t.series.isSelected(),t.data,t.tag,t.isSelected())}}pointHoverChanged(e){if(!this.eventsAreLocked()){const t=e.target;if(t&&void 0!==t.originalArgument&&void 0!==t.originalValue){const e=new xd(t.series.index,t.originalArgument,t.originalValue);this._state.changePointHoverState(e,t.isHovered())}}}seriesHoverChanged(e){if(!this.eventsAreLocked()){const t=e.target;if(t){const e=new Dd(t.index);this._state.changeSeriesHoverState(e,t.isHovered())}}}resetSelection(){this._state.reset()}onSelectionChanged(e,t,i=null,n=null,s=!1){this._owner.onSelectionChanged({seriesIndex:e,isSeriesSelected:t,data:i,tag:n,isPointSelected:s})}addJobToQueue(e){return this.disposed||(this._lastJob=this._lastJob.then((()=>{if(this.disposed)throw Error(Pd.disposedErrorKey);e()}))),this._lastJob}get disposed(){return this._disposed}get seriesSelectionEnabled(){return null!=this._state.seriesSelectionMode}get pointSelectionEnabled(){return null!=this._state.pointSelectionMode}eventsAreLocked(){return this._eventsLocked}lockEventsAction(e){this.eventsAreLocked()||(this._eventsLocked=!0,e(),this._eventsLocked=!1)}selectSeriesInternal(e){const t=new Dd(e.index),i=!e.isSelected();this._state.changeSeriesSelectionState(t,i),i?e.select():e.clearSelection()}selectPointInternal(e){if(void 0===e.originalArgument||void 0===e.originalValue)return;const t=new xd(e.series.index,e.originalArgument,e.originalValue),i=!e.isSelected();this._state.changePointSelectionState(t,i),i?e.select():e.clearSelection()}restoreChartSelectionInternal(e){this.lockEventsAction((()=>{const t=this.getSelectedStateRestoreActions(e);this._state.restoreSelection(t)}))}getSelectedStateRestoreActions(e){const t=t=>{const i=e.getSeriesByPos(t.seriesIndex);return(null==i?void 0:i.getPointsByArg(t.pointArgument))||[]},i=t=>e.getSeriesByPos(t.seriesIndex);return{selectPoint(e){const i=t(e);return i.forEach((e=>e.select())),(null==i?void 0:i.length)>0},selectSeries(e){const t=i(e);return null==t||t.select(),!!t},hoverPoint(e){var i;const n=null===(i=t(e))||void 0===i?void 0:i[0];return null==n||n.hover(),!!n},hoverSeries(e){const t=i(e);return null==t||t.hover(),!!t}}}}Pd.disposedErrorKey="Disposed";const Qd="dx-theme-marker",Nd="generic.light",Rd=`.${Qd} { font-family: "dx.${Nd}"; }`;let Ld=!1;class Md{constructor(){this._dxtThemeMarkerLoaded=!1,this._customThemesCache={}}static getInstance(){return Md.instance||(Md.instance=new Md),Md.instance}async initializeWidget(e,t,i,n){return new(await this.getWidgetClass(t,i))(e,n)}async registerCustomTheme(e,t){if(!e)return;const i=e.name,n=JSON.stringify(e);if(this._customThemesCache[i]!==n){const s=await this.getVizModule();s.registerTheme(e,Nd),t&&s.refreshTheme(),this._customThemesCache[i]=n}}ensureDxtThemeMarkerExists(){if(this._dxtThemeMarkerLoaded||(this._dxtThemeMarkerLoaded=this.checkDxtThemeMarkerExists()),this._dxtThemeMarkerLoaded)return;const e=Pt();e&&(e.insertRule(Rd),this._dxtThemeMarkerLoaded=!0)}checkDxtThemeMarkerExists(){const e=document.createElement("div");e.className=Qd,window.document.body.appendChild(e);const t=window.getComputedStyle(e).fontFamily;return e.remove(),t.indexOf("dx.")>-1}async getVizModule(){return await this.getDxtModuleOrClass("viz")}async setLocalization(e){(await this.getDxtModuleOrClass("localization")).locale(e)}async getWidgetClass(e,t){return await this.getDxtModuleOrClass(t,e)}async getDxtModuleOrClass(e,t=""){return this.ensureDxtThemeMarkerExists(),Ld||await this.loadDxtScripts(),this.tryGetDxtModuleOrClass(e,t)}tryGetDxtModuleOrClass(e,t=""){const i=window.DevExpress,n=null==i?void 0:i[e];return t?null==n?void 0:n[t]:n}async loadDxtScripts(){const e=window;try{await function(e,t=100,i=1e4){return new Promise(((n,s)=>{const r=Date.now(),o=setInterval((()=>{const t=e();t?(n(t),clearInterval(o)):Date.now()-r>i&&(s(new Error("Timeout waiting for condition")),clearInterval(o))}),t)}))}((()=>{var t;return!!(null===(t=e.DevExpress)||void 0===t?void 0:t.ui)})),Ld=!0}catch(e){console.error("Failed to load Devextreme scripts")}}}const kd="dxbl-client-component-wrapper";class Kd extends CustomEvent{constructor(e){super(e,{detail:new Vd,bubbles:!0,composed:!0,cancelable:!0})}}class Od extends CustomEvent{constructor(e){super(Od.eventName,{detail:new zd(e),bubbles:!0,composed:!0,cancelable:!0})}}Od.eventName=`${kd}.options-loaded`;class _d extends CustomEvent{constructor(e){super(_d.eventName,{detail:new Wd(e),bubbles:!0,composed:!0,cancelable:!0})}}_d.eventName=`${kd}.loading-panel-visibility-changed`;class Vd{}class zd{constructor(e){this.OptionChunkKeys=e}}class Wd{constructor(e){this.Visible=e}}gt.register(Od.eventName,(e=>e.detail)),gt.register(_d.eventName,(e=>e.detail)),le();const $d=e=>e&&"object"==typeof e&&!Array.isArray(e);class Gd extends Es{constructor(){super(...arguments),this.optionChunks="",this._firstLoading=!0,this._loadedChunks=[]}connectedOrContentChanged(){super.connectedOrContentChanged(),this.createComponentIfRequired()}disconnectedCallback(){super.disconnectedCallback(),this.disposeComponent()}setLoadedSelector(){}get readyOnConnectedCallback(){return!1}firstUpdated(){this._firstLoading=!1}createComponentIfRequired(){if(!this.canCreateComponent())return;const e={};this.deepAssign(e,this.createInitOptions(),this.getServerOptions()),this.createComponent(e)}processSpecialOptions(e){}willUpdate(e){if(!this._firstLoading&&e.has("optionChunks")){const e=this.getServerOptions();e&&this.updateComponent(e)}}parseServerOptions(e){const t=e&&JSON.parse(e);if(!t)return;const i=Object.keys(t).filter((e=>!this._loadedChunks.includes(e))),n=i.map((e=>t[e])),s=this.deepAssign({},...n);return this.processSpecialOptions(s),this.invokeOptionsLoadedEvent(i),this._loadedChunks.push(...i),s}deepAssign(e,...t){if(!t.length)return e;const i=t.shift();if($d(e)&&$d(i))for(const[t,n]of Object.entries(i))$d(n)?(e[t]||(e[t]={}),this.deepAssign(e[t],n)):e[t]=n;return this.deepAssign(e,...t)}resetEmptyOptions(e,t,i=""){if(!t)return;const n=Object.entries(t).filter((([e])=>!this.getSkippedEmptyOptions().includes(i+e)));for(const[s,r]of n){const n=i+s;Array.isArray(r)?r.forEach(((t,i)=>{$d(t)&&this.resetEmptyOptions(e,t,`${n}[${i}].`)})):$d(r)&&this.resetEmptyOptions(e,r,`${n}.`),null===r&&(delete t[s],e(n))}}changeLoadingPanelVisibility(e){n.hasLoaded(this)||n.setLoaded(this),this.dispatchEvent(new _d(e))}invokeOptionsLoadedEvent(e){this.dispatchEvent(new Od(e))}getServerOptions(){return this.parseServerOptions(this.optionChunks)}getSkippedEmptyOptions(){return[]}}C([An({attribute:"option-chunks"})],Gd.prototype,"optionChunks",void 0);const qd={dxBarGauge:"barGauge",dxBullet:"bullet",dxChart:"chart",dxFunnel:"funnel",dxCircularGauge:"gauge",dxLinearGauge:"gauge",dxVectorMap:"map",dxPieChart:"pie",dxPolarChart:"polar",dxRangeSelector:"rangeSelector",dxSankey:"sankey",dxSparkline:"sparkline",dxTreeMap:"treeMap"};function Yd(e,t,i,n){const s=qd[t];if(!e||!s||!i)return null;null!=n||(n=`dx-${s}-blazor-theme`);const r=function(e,t){const i={},n=window.getComputedStyle(t);for(const[t,s]of Object.entries(e)){const e=n.getPropertyValue(s);if(!e)continue;Xd(t.split("."),e,i)}return i}(e,i);return Object.keys(r).length>0?{name:n,[s]:r}:null}function Xd(e,t,i){e.reduce(((i,n,s)=>{var r;return s===e.length-1?i[n]=t:null!==(r=i[n])&&void 0!==r?r:i[n]={}}),i)}const Jd="dxInstance",jd="width",Zd="height",ec="visible",tc="locale";class ic extends Gd{constructor(){super(...arguments),this._containerSizeChanged=!1}canCreateComponent(){return!this._widgetPromise&&!!this.getWidgetElement()}createComponent(e){this._widgetPromise=this.initializeWidget(e)}disposeComponent(){var e;null===(e=this._widgetPromise)||void 0===e||e.then((e=>this.disposeWidget(e))).catch((e=>{pi(this)||console.error(e)}))}afterWidgetResolved(e){if(this._widgetPromise)return this._widgetPromise.then(e).catch((e=>{pi(this)||console.error(e)}))}disposeWidget(e){e.dispose()}updateComponent(e){var t;Object.keys(e).length?null===(t=this._widgetPromise)||void 0===t||t.then((t=>this.updateWidgetOptions(t,e))):this._containerSizeChanged?this.onlyContainerSizeChanged():this.nonWidgetOptionChanged()}createInitOptions(){return{...this.createWidgetDefaultOptions(),...this.createWidgetHandlers()}}createWidgetDefaultOptions(){return{}}createWidgetHandlers(){return{onInitialized:e=>this.onWidgetInitialized(e),onDisposing:e=>this.onWidgetDisposing(e)}}getWidgetCustomTheme(){return Yd(this.getThemeDependentOptionsDict(),this.getWidgetTypeName(),this)}getThemeDependentOptionsDict(){return{}}async initializeWidget(e){const t=this.getWidgetCustomTheme();t&&(await this.widgetLoader.registerCustomTheme(t),e.theme=t.name),this.processLocalization(e),this.resetEmptyOptions((e=>{}),e);const i=this.getWidgetElement(),n=this.getWidgetTypeName(),s=this.getWidgetModuleName();return this.widgetLoader.initializeWidget(i,n,s,e)}async updateWidgetTheme(){const e=this.getWidgetCustomTheme();e&&await this.widgetLoader.registerCustomTheme(e,!0)}get widgetLoader(){var e;return null!==(e=this._loader)&&void 0!==e||(this._loader=Md.getInstance()),this._loader}getWidgetElement(){return this.getElementsByClassName(this.getWidgetElementClassName())[0]}getWidgetElementClassName(){return"dxbl-widget-container"}getWidgetModuleName(){return"viz"}async processLocalization(e){e[tc]&&(await this.widgetLoader.setLocalization(e[tc]),delete e[tc])}updateWidgetOptions(e,t){e.beginUpdate(),this.resetEmptyOptions((t=>{e.resetOption(t)}),t),e.option(t),e.endUpdate()}onWidgetInitialized(e){e.element[Jd]=e.component}onWidgetDisposing(e){delete e.element[Jd]}setStyleOptionForElement(e,t){this.getContainerToSetStyle().style.setProperty(e,t)}processSpecialOptions(e){const t=void 0!==e[jd],i=void 0!==e[Zd];this._containerSizeChanged=t||i,t&&(this.setStyleOptionForElement(jd,this.getCorrectedSizeValue(e[jd])),delete e[jd]),i&&(this.setStyleOptionForElement(Zd,this.getCorrectedSizeValue(e[Zd])),delete e[Zd]),void 0!==e[ec]&&T.DomUtils.toggleClassName(this,he.Invisible,!e[ec])}getCorrectedSizeValue(e){if(/^[0-9]+$/.test(e)){const t=parseFloat(e);return isNaN(t)?e:`${t}px`}return e}getContainerToSetStyle(){return this}onlyContainerSizeChanged(){this.changeLoadingPanelVisibility(!1)}nonWidgetOptionChanged(){}executeClientMethod(e,...t){return this._widgetPromise?this._widgetPromise.then((i=>i[e](...t))).catch((e=>console.error(e))):Promise.resolve()}}function nc(e){let t=-1;return{execute:function(){this.reset(),t=setTimeout(e,100)},reset:function(){-1!==t&&clearTimeout(t)}}}class sc{}sc.argumentAxisKey="argumentAxis",sc.commonAnnotationSettingsKey="commonAnnotationSettings",sc.commonAxisSettingsKey="commonAxisSettings",sc.commonSeriesSettingsKey="commonSeriesSettings",sc.colorKey="color",sc.constantLineStyleKey="constantLineStyle",sc.customizeLabelKey="customizeLabel",sc.customizePointKey="customizePoint",sc.customizeTextKey="customizeText",sc.customLabelTextKey="texts",sc.dataSourceKey="dataSource",sc.dataPrepareSettingsKey="dataPrepareSettings",sc.legendKey="legend",sc.seriesKey="series",sc.seriesDataKey="seriesData",sc.seriesPointsKey="points",sc.seriesTemplateKey="seriesTemplate",sc.titleKey="title",sc.tooltipKey="tooltip",sc.visualRangeKey="visualRange",sc.defaultLegendHoverMode="includePoints",sc.defaultSeriesNameField="seriesId",sc.defaultSeriesArgumentField="argument",sc.defaultSeriesValueField="value",sc.defaultOpenValueField="openValue",sc.defaultHighValueField="highValue",sc.defaultLowValueField="lowValue",sc.defaultCloseValueField="closeValue",sc.defaultRangeValue1Field="startValue",sc.defaultRangeValue2Field="endValue",sc.defaultSizeField="size",sc.seriesTypeRangeBar="rangebar",sc.seriesTypeRangeArea="rangearea",sc.seriesTypeBar="bar",sc.seriesTypeDonut="donut",sc.defaultAxisLabelOverlappingBehavior="rotate",sc.defaultAxisLabelRotationAngle=45,sc.defaultAxisLabelFontOpacity=.75,sc.defaultAnnotationType="text",sc.defaultStripLabelAlignment="auto";class rc{convert(e,t=!1){const i=t?this.createDefaultSettings():{};return this.processServerSettings(i,e),i}createDefaultSettings(){return{dataPrepareSettings:{sortingMethod:!1},adaptiveLayout:{width:0,height:0},pathModified:!1,commonSeriesSettings:this.getDefaultCommonSeriesSettings(),commonAnnotationSettings:this.getDefaultAnnotationSettings(),legend:{visible:!1,hoverMode:sc.defaultLegendHoverMode}}}processServerSettings(e,t){e&&(this.processSettingsInCommon(e,t),this.processSpecialSettings(e,t))}processSettingsInCommon(e,t){const i=this.getSpecialProcessingOptionNames();for(const n in t){Object.prototype.hasOwnProperty.call(t,n)&&!i.includes(n)&&this.addOption(e,n,t[n])}}getSpecialProcessingOptionNames(){return[sc.legendKey,sc.tooltipKey,sc.seriesTemplateKey,sc.dataSourceKey,sc.seriesKey,sc.seriesDataKey,sc.titleKey]}isSeriesDeleted(e){var t;return 0===(null===(t=e.series)||void 0===t?void 0:t.length)&&!e[sc.seriesDataKey]}processSpecialSettings(e,t){var i,n;this.processSeriesSettings(e,t.series),this.processSeriesDataIfNeeded(e,t),(null===(i=t.legend)||void 0===i?void 0:i.hoverMode)&&this.addOption(e,sc.legendKey,{hoverMode:null===(n=t.legend)||void 0===n?void 0:n.hoverMode}),void 0!==t.sorted&&this.addOption(e,sc.dataPrepareSettingsKey,{sortingMethod:t.sorted}),void 0!==t[sc.tooltipKey]&&this.addOption(e,sc.tooltipKey,function(e){var t,i;return{enabled:!1,forceEvents:!!(null===(t=e.tooltip)||void 0===t?void 0:t.enabled),location:(null===(i=e.tooltip)||void 0===i?void 0:i.location)||void 0}}(t),!0)}processSeriesDataIfNeeded(e,t){this.isSeriesDeleted(t)?e[sc.dataSourceKey]=[]:this.processSeriesData(e,t[sc.seriesDataKey])}getDefaultCommonSeriesSettings(){return{argumentField:sc.defaultSeriesArgumentField,valueField:sc.defaultSeriesValueField}}getDefaultAnnotationSettings(){return{type:sc.defaultAnnotationType}}addOption(e,t,i,n=!1){n||!(void 0!==e[t])||!("object"==typeof i)||i instanceof Array?e[t]=i:Object.assign(e[t],i)}processSeriesSettings(e,t){if(t){const i={nameField:sc.defaultSeriesNameField,customizeSeries:function(e){return t.filter((function(t){return t.seriesId===e}))[0]}};this.addOption(e,sc.seriesTemplateKey,i,!0)}}processSeriesData(e,t){if(!t)return;const i=[];let n=!1,s=!1;for(let e=0;e<t.length;e++){const r=t[e],o=r[sc.defaultSeriesNameField],a=r[sc.seriesPointsKey];null==a||a.forEach((e=>{n||(n=!!e.pointLabel),s||(s=!!e.pointAppearance);const t=this.createWidgetDataitem(o,e);i.push(t)}))}e[sc.dataSourceKey]=i,e[sc.customizeLabelKey]=n?e=>this.createWidgetPointLabelSettings(e):null,e[sc.customizePointKey]=s?e=>e.data.pointAppearance:null}createWidgetDataitem(e,t){const i=Object.assign({},t);return i[sc.defaultSeriesNameField]=e,i}createWidgetPointLabelSettings(e){const t={...e.data.pointLabel},i=t[sc.customLabelTextKey];if(i){delete t[sc.customLabelTextKey];const n=e.series,s=n.type===sc.seriesTypeRangeBar||n.type===sc.seriesTypeRangeArea;t[sc.customizeTextKey]=t=>s&&i.length>1?t.value===e.minValue?i[0]:i[1]:i[0]}return t}}class oc extends rc{getDefaultCommonSeriesSettings(){const e={openValueField:sc.defaultOpenValueField,highValueField:sc.defaultHighValueField,lowValueField:sc.defaultLowValueField,closeValueField:sc.defaultCloseValueField,rangeValue1Field:sc.defaultRangeValue1Field,rangeValue2Field:sc.defaultRangeValue2Field,sizeField:sc.defaultSizeField,type:sc.seriesTypeBar};return Object.assign({},super.getDefaultCommonSeriesSettings(),e)}}class ac extends oc{createDefaultSettings(){const e=super.createDefaultSettings();return e.commonAxisSettings=this.getDefaultCommonAxisSettings(),e.resizePanesOnZoom=!0,e}processSpecialSettings(e,t){var i,n;super.processSpecialSettings(e,t),e.argumentAxis&&(null!==(i=(n=e.argumentAxis).categories)&&void 0!==i||(n.categories=[])),this.processStripSettings(e)}processStripSettings(e){var t,i,n;const s=null!==(i=null===(t=e.argumentAxis)||void 0===t?void 0:t.strips)&&void 0!==i?i:[],r=(null!==(n=e.valueAxis)&&void 0!==n?n:[]).reduce(((e,t)=>{var i;return e.concat(null!==(i=t.strips)&&void 0!==i?i:[])}),[]);s.concat(r).forEach((e=>{const t=e.label;(null==t?void 0:t.horizontalAlignment)===sc.defaultStripLabelAlignment&&(t.horizontalAlignment=void 0),(null==t?void 0:t.verticalAlignment)===sc.defaultStripLabelAlignment&&(t.verticalAlignment=void 0)}))}getDefaultCommonAxisSettings(){return{label:{overlappingBehavior:sc.defaultAxisLabelOverlappingBehavior,rotationAngle:sc.defaultAxisLabelRotationAngle}}}}class lc extends rc{getDefaultCommonSeriesSettings(){const e=super.getDefaultCommonSeriesSettings();return e.type=sc.seriesTypeDonut,e}createDefaultSettings(){const e=super.createDefaultSettings();return e.innerRadius=0,e}}class Ac extends rc{getDefaultCommonSeriesSettings(){const e=super.getDefaultCommonSeriesSettings();return e.type=sc.seriesTypeBar,e}}class dc extends oc{processSpecialChartSettings(e,t){this.processSeriesSettings(e.chart,t.series),this.processSeriesDataIfNeeded(e,t),void 0!==t.sorted&&this.addOption(t,sc.dataPrepareSettingsKey,{sortingMethod:t.sorted})}processSeriesSettings(e,t){super.processSeriesSettings(e,t),delete e.series}processSeriesDataIfNeeded(e,t){super.processSeriesDataIfNeeded(e,t),delete e.chart.seriesData,delete e.customizeLabel,delete e.customizePoint}}class cc{constructor(){}static getInstance(){return cc.instance||(cc.instance=new cc),cc.instance}get palette(){return this.getDefaultClientComponentPalette()}getDefaultClientComponentPalette(){const e=[cc.primaryColorKey,cc.successColorKey,cc.dangerColorKey,cc.warningColorKey,cc.infoColorKey],t=window.getComputedStyle(document.body);return e.map((e=>this.getPaletteColor(e,t)))}getPaletteColor(e,t){return t.getPropertyValue(cc.dxblClientComponentPrefix+e)}}cc.dxblPrefix="--dxbl-",cc.dxblClientComponentPrefix=cc.dxblPrefix+"client-component-palette-",cc.primaryColorKey="primary",cc.successColorKey="success",cc.dangerColorKey="danger",cc.warningColorKey="warning",cc.infoColorKey="info";var hc=function(e,t){return hc=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},hc(e,t)};function uc(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}hc(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}var pc=function(){return pc=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var s in t=arguments[i])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e},pc.apply(this,arguments)};function mc(e,t,i,n){return new(i||(i=Promise))((function(s,r){function o(e){try{l(n.next(e))}catch(e){r(e)}}function a(e){try{l(n.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(o,a)}l((n=n.apply(e,t||[])).next())}))}function gc(e,t){var i,n,s,r,o={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(r){return function(a){return function(r){if(i)throw new TypeError("Generator is already executing.");for(;o;)try{if(i=1,n&&(s=2&r[0]?n.return:r[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,r[1])).done)return s;switch(n=0,s&&(r=[2&r[0],s.value]),r[0]){case 0:case 1:s=r;break;case 4:return o.label++,{value:r[1],done:!1};case 5:o.label++,n=r[1],r=[0];continue;case 7:r=o.ops.pop(),o.trys.pop();continue;default:if(!(s=o.trys,(s=s.length>0&&s[s.length-1])||6!==r[0]&&2!==r[0])){o=0;continue}if(3===r[0]&&(!s||r[1]>s[0]&&r[1]<s[3])){o.label=r[1];break}if(6===r[0]&&o.label<s[1]){o.label=s[1],s=r;break}if(s&&o.label<s[2]){o.label=s[2],o.ops.push(r);break}s[2]&&o.ops.pop(),o.trys.pop();continue}r=t.call(e,o)}catch(e){r=[6,e],n=0}finally{i=s=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,a])}}}function Cc(e,t,i){if(i||2===arguments.length)for(var n,s=0,r=t.length;s<r;s++)!n&&s in t||(n||(n=Array.prototype.slice.call(t,0,s)),n[s]=t[s]);return e.concat(n||t)}for(var fc=function(){function e(e,t,i,n){this.left=e,this.top=t,this.width=i,this.height=n}return e.prototype.add=function(t,i,n,s){return new e(this.left+t,this.top+i,this.width+n,this.height+s)},e.fromClientRect=function(t,i){return new e(i.left+t.windowBounds.left,i.top+t.windowBounds.top,i.width,i.height)},e.fromDOMRectList=function(t,i){var n=Array.from(i).find((function(e){return 0!==e.width}));return n?new e(n.left+t.windowBounds.left,n.top+t.windowBounds.top,n.width,n.height):e.EMPTY},e.EMPTY=new e(0,0,0,0),e}(),vc=function(e,t){return fc.fromClientRect(e,t.getBoundingClientRect())},bc=function(e){for(var t=[],i=0,n=e.length;i<n;){var s=e.charCodeAt(i++);if(s>=55296&&s<=56319&&i<n){var r=e.charCodeAt(i++);56320==(64512&r)?t.push(((1023&s)<<10)+(1023&r)+65536):(t.push(s),i--)}else t.push(s)}return t},wc=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(String.fromCodePoint)return String.fromCodePoint.apply(String,e);var i=e.length;if(!i)return"";for(var n=[],s=-1,r="";++s<i;){var o=e[s];o<=65535?n.push(o):n.push(55296+((o-=65536)>>10),o%1024+56320),(s+1===i||n.length>16384)&&(r+=String.fromCharCode.apply(String,n),n.length=0)}return r},yc="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Bc="undefined"==typeof Uint8Array?[]:new Uint8Array(256),Ec=0;Ec<64;Ec++)Bc[yc.charCodeAt(Ec)]=Ec;for(var Ic="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Sc="undefined"==typeof Uint8Array?[]:new Uint8Array(256),xc=0;xc<64;xc++)Sc[Ic.charCodeAt(xc)]=xc;for(var Dc=function(e,t,i){return e.slice?e.slice(t,i):new Uint16Array(Array.prototype.slice.call(e,t,i))},Fc=function(){function e(e,t,i,n,s,r){this.initialValue=e,this.errorValue=t,this.highStart=i,this.highValueIndex=n,this.index=s,this.data=r}return e.prototype.get=function(e){var t;if(e>=0){if(e<55296||e>56319&&e<=65535)return this.data[t=((t=this.index[e>>5])<<2)+(31&e)];if(e<=65535)return this.data[t=((t=this.index[2048+(e-55296>>5)])<<2)+(31&e)];if(e<this.highStart)return t=this.index[t=2080+(e>>11)],this.data[t=((t=this.index[t+=e>>5&63])<<2)+(31&e)];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},e}(),Tc="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Hc="undefined"==typeof Uint8Array?[]:new Uint8Array(256),Uc=0;Uc<64;Uc++)Hc[Tc.charCodeAt(Uc)]=Uc;var Pc=10,Qc=13,Nc=15,Rc=17,Lc=18,Mc=19,kc=20,Kc=21,Oc=22,_c=24,Vc=25,zc=26,Wc=27,$c=28,Gc=30,qc=32,Yc=33,Xc=34,Jc=35,jc=37,Zc=38,eh=39,th=40,ih=42,nh=[9001,65288],sh="",rh="",oh=function(e,t){var i,n,s,r=function(e){var t,i,n,s,r,o=.75*e.length,a=e.length,l=0;"="===e[e.length-1]&&(o--,"="===e[e.length-2]&&o--);var A="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array&&void 0!==Uint8Array.prototype.slice?new ArrayBuffer(o):new Array(o),d=Array.isArray(A)?A:new Uint8Array(A);for(t=0;t<a;t+=4)i=Sc[e.charCodeAt(t)],n=Sc[e.charCodeAt(t+1)],s=Sc[e.charCodeAt(t+2)],r=Sc[e.charCodeAt(t+3)],d[l++]=i<<2|n>>4,d[l++]=(15&n)<<4|s>>2,d[l++]=(3&s)<<6|63&r;return A}(e),o=Array.isArray(r)?function(e){for(var t=e.length,i=[],n=0;n<t;n+=4)i.push(e[n+3]<<24|e[n+2]<<16|e[n+1]<<8|e[n]);return i}(r):new Uint32Array(r),a=Array.isArray(r)?function(e){for(var t=e.length,i=[],n=0;n<t;n+=2)i.push(e[n+1]<<8|e[n]);return i}(r):new Uint16Array(r),l=Dc(a,12,o[4]/2),A=2===o[5]?Dc(a,(24+o[4])/2):(i=o,n=Math.ceil((24+o[4])/4),i.slice?i.slice(n,s):new Uint32Array(Array.prototype.slice.call(i,n,s)));return new Fc(o[0],o[1],o[2],o[3],l,A)}("KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA=="),ah=[Gc,36],lh=[1,2,3,5],Ah=[Pc,8],dh=[Wc,zc],ch=lh.concat(Ah),hh=[Zc,eh,th,Xc,Jc],uh=[Nc,Qc],ph=function(e,t,i,n){var s=n[i];if(Array.isArray(e)?-1!==e.indexOf(s):e===s)for(var r=i;r<=n.length;){if((l=n[++r])===t)return!0;if(l!==Pc)break}if(s===Pc)for(r=i;r>0;){var o=n[--r];if(Array.isArray(e)?-1!==e.indexOf(o):e===o)for(var a=i;a<=n.length;){var l;if((l=n[++a])===t)return!0;if(l!==Pc)break}if(o!==Pc)break}return!1},mh=function(e,t){for(var i=e;i>=0;){var n=t[i];if(n!==Pc)return n;i--}return 0},gh=function(e,t,i,n,s){if(0===i[n])return sh;var r=n-1;if(Array.isArray(s)&&!0===s[r])return sh;var o=r-1,a=r+1,l=t[r],A=o>=0?t[o]:0,d=t[a];if(2===l&&3===d)return sh;if(-1!==lh.indexOf(l))return"!";if(-1!==lh.indexOf(d))return sh;if(-1!==Ah.indexOf(d))return sh;if(8===mh(r,t))return rh;if(11===oh.get(e[r]))return sh;if((l===qc||l===Yc)&&11===oh.get(e[a]))return sh;if(7===l||7===d)return sh;if(9===l)return sh;if(-1===[Pc,Qc,Nc].indexOf(l)&&9===d)return sh;if(-1!==[Rc,Lc,Mc,_c,$c].indexOf(d))return sh;if(mh(r,t)===Oc)return sh;if(ph(23,Oc,r,t))return sh;if(ph([Rc,Lc],Kc,r,t))return sh;if(ph(12,12,r,t))return sh;if(l===Pc)return rh;if(23===l||23===d)return sh;if(16===d||16===l)return rh;if(-1!==[Qc,Nc,Kc].indexOf(d)||14===l)return sh;if(36===A&&-1!==uh.indexOf(l))return sh;if(l===$c&&36===d)return sh;if(d===kc)return sh;if(-1!==ah.indexOf(d)&&l===Vc||-1!==ah.indexOf(l)&&d===Vc)return sh;if(l===Wc&&-1!==[jc,qc,Yc].indexOf(d)||-1!==[jc,qc,Yc].indexOf(l)&&d===zc)return sh;if(-1!==ah.indexOf(l)&&-1!==dh.indexOf(d)||-1!==dh.indexOf(l)&&-1!==ah.indexOf(d))return sh;if(-1!==[Wc,zc].indexOf(l)&&(d===Vc||-1!==[Oc,Nc].indexOf(d)&&t[a+1]===Vc)||-1!==[Oc,Nc].indexOf(l)&&d===Vc||l===Vc&&-1!==[Vc,$c,_c].indexOf(d))return sh;if(-1!==[Vc,$c,_c,Rc,Lc].indexOf(d))for(var c=r;c>=0;){if((h=t[c])===Vc)return sh;if(-1===[$c,_c].indexOf(h))break;c--}if(-1!==[Wc,zc].indexOf(d))for(c=-1!==[Rc,Lc].indexOf(l)?o:r;c>=0;){var h;if((h=t[c])===Vc)return sh;if(-1===[$c,_c].indexOf(h))break;c--}if(Zc===l&&-1!==[Zc,eh,Xc,Jc].indexOf(d)||-1!==[eh,Xc].indexOf(l)&&-1!==[eh,th].indexOf(d)||-1!==[th,Jc].indexOf(l)&&d===th)return sh;if(-1!==hh.indexOf(l)&&-1!==[kc,zc].indexOf(d)||-1!==hh.indexOf(d)&&l===Wc)return sh;if(-1!==ah.indexOf(l)&&-1!==ah.indexOf(d))return sh;if(l===_c&&-1!==ah.indexOf(d))return sh;if(-1!==ah.concat(Vc).indexOf(l)&&d===Oc&&-1===nh.indexOf(e[a])||-1!==ah.concat(Vc).indexOf(d)&&l===Lc)return sh;if(41===l&&41===d){for(var u=i[r],p=1;u>0&&41===t[--u];)p++;if(p%2!=0)return sh}return l===qc&&d===Yc?sh:rh},Ch=function(e,t){t||(t={lineBreak:"normal",wordBreak:"normal"});var i=function(e,t){void 0===t&&(t="strict");var i=[],n=[],s=[];return e.forEach((function(e,r){var o=oh.get(e);if(o>50?(s.push(!0),o-=50):s.push(!1),-1!==["normal","auto","loose"].indexOf(t)&&-1!==[8208,8211,12316,12448].indexOf(e))return n.push(r),i.push(16);if(4===o||11===o){if(0===r)return n.push(r),i.push(Gc);var a=i[r-1];return-1===ch.indexOf(a)?(n.push(n[r-1]),i.push(a)):(n.push(r),i.push(Gc))}return n.push(r),31===o?i.push("strict"===t?Kc:jc):o===ih||29===o?i.push(Gc):43===o?i.push(e>=131072&&e<=196605||e>=196608&&e<=262141?jc:Gc):void i.push(o)})),[n,i,s]}(e,t.lineBreak),n=i[0],s=i[1],r=i[2];"break-all"!==t.wordBreak&&"break-word"!==t.wordBreak||(s=s.map((function(e){return-1!==[Vc,Gc,ih].indexOf(e)?jc:e})));var o="keep-all"===t.wordBreak?r.map((function(t,i){return t&&e[i]>=19968&&e[i]<=40959})):void 0;return[n,s,o]},fh=function(){function e(e,t,i,n){this.codePoints=e,this.required="!"===t,this.start=i,this.end=n}return e.prototype.slice=function(){return wc.apply(void 0,this.codePoints.slice(this.start,this.end))},e}(),vh=45,bh=43,wh=-1,yh=function(e){return e>=48&&e<=57},Bh=function(e){return yh(e)||e>=65&&e<=70||e>=97&&e<=102},Eh=function(e){return 10===e||9===e||32===e},Ih=function(e){return function(e){return function(e){return e>=97&&e<=122}(e)||function(e){return e>=65&&e<=90}(e)}(e)||function(e){return e>=128}(e)||95===e},Sh=function(e){return Ih(e)||yh(e)||e===vh},xh=function(e){return e>=0&&e<=8||11===e||e>=14&&e<=31||127===e},Dh=function(e,t){return 92===e&&10!==t},Fh=function(e,t,i){return e===vh?Ih(t)||Dh(t,i):!!Ih(e)||!(92!==e||!Dh(e,t))},Th=function(e,t,i){return e===bh||e===vh?!!yh(t)||46===t&&yh(i):yh(46===e?t:e)},Hh=function(e){var t=0,i=1;e[t]!==bh&&e[t]!==vh||(e[t]===vh&&(i=-1),t++);for(var n=[];yh(e[t]);)n.push(e[t++]);var s=n.length?parseInt(wc.apply(void 0,n),10):0;46===e[t]&&t++;for(var r=[];yh(e[t]);)r.push(e[t++]);var o=r.length,a=o?parseInt(wc.apply(void 0,r),10):0;69!==e[t]&&101!==e[t]||t++;var l=1;e[t]!==bh&&e[t]!==vh||(e[t]===vh&&(l=-1),t++);for(var A=[];yh(e[t]);)A.push(e[t++]);var d=A.length?parseInt(wc.apply(void 0,A),10):0;return i*(s+a*Math.pow(10,-o))*Math.pow(10,l*d)},Uh={type:2},Ph={type:3},Qh={type:4},Nh={type:13},Rh={type:8},Lh={type:21},Mh={type:9},kh={type:10},Kh={type:11},Oh={type:12},_h={type:14},Vh={type:23},zh={type:1},Wh={type:25},$h={type:24},Gh={type:26},qh={type:27},Yh={type:28},Xh={type:29},Jh={type:31},jh={type:32},Zh=function(){function e(){this._value=[]}return e.prototype.write=function(e){this._value=this._value.concat(bc(e))},e.prototype.read=function(){for(var e=[],t=this.consumeToken();t!==jh;)e.push(t),t=this.consumeToken();return e},e.prototype.consumeToken=function(){var e=this.consumeCodePoint();switch(e){case 34:return this.consumeStringToken(34);case 35:var t=this.peekCodePoint(0),i=this.peekCodePoint(1),n=this.peekCodePoint(2);if(Sh(t)||Dh(i,n)){var s=Fh(t,i,n)?2:1;return{type:5,value:this.consumeName(),flags:s}}break;case 36:if(61===this.peekCodePoint(0))return this.consumeCodePoint(),Nh;break;case 39:return this.consumeStringToken(39);case 40:return Uh;case 41:return Ph;case 42:if(61===this.peekCodePoint(0))return this.consumeCodePoint(),_h;break;case bh:if(Th(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case 44:return Qh;case vh:var r=e,o=this.peekCodePoint(0),a=this.peekCodePoint(1);if(Th(r,o,a))return this.reconsumeCodePoint(e),this.consumeNumericToken();if(Fh(r,o,a))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();if(o===vh&&62===a)return this.consumeCodePoint(),this.consumeCodePoint(),$h;break;case 46:if(Th(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case 47:if(42===this.peekCodePoint(0))for(this.consumeCodePoint();;){var l=this.consumeCodePoint();if(42===l&&47===(l=this.consumeCodePoint()))return this.consumeToken();if(l===wh)return this.consumeToken()}break;case 58:return Gh;case 59:return qh;case 60:if(33===this.peekCodePoint(0)&&this.peekCodePoint(1)===vh&&this.peekCodePoint(2)===vh)return this.consumeCodePoint(),this.consumeCodePoint(),Wh;break;case 64:var A=this.peekCodePoint(0),d=this.peekCodePoint(1),c=this.peekCodePoint(2);if(Fh(A,d,c))return{type:7,value:this.consumeName()};break;case 91:return Yh;case 92:if(Dh(e,this.peekCodePoint(0)))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();break;case 93:return Xh;case 61:if(61===this.peekCodePoint(0))return this.consumeCodePoint(),Rh;break;case 123:return Kh;case 125:return Oh;case 117:case 85:var h=this.peekCodePoint(0),u=this.peekCodePoint(1);return h!==bh||!Bh(u)&&63!==u||(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(e),this.consumeIdentLikeToken();case 124:if(61===this.peekCodePoint(0))return this.consumeCodePoint(),Mh;if(124===this.peekCodePoint(0))return this.consumeCodePoint(),Lh;break;case 126:if(61===this.peekCodePoint(0))return this.consumeCodePoint(),kh;break;case wh:return jh}return Eh(e)?(this.consumeWhiteSpace(),Jh):yh(e)?(this.reconsumeCodePoint(e),this.consumeNumericToken()):Ih(e)?(this.reconsumeCodePoint(e),this.consumeIdentLikeToken()):{type:6,value:wc(e)}},e.prototype.consumeCodePoint=function(){var e=this._value.shift();return void 0===e?-1:e},e.prototype.reconsumeCodePoint=function(e){this._value.unshift(e)},e.prototype.peekCodePoint=function(e){return e>=this._value.length?-1:this._value[e]},e.prototype.consumeUnicodeRangeToken=function(){for(var e=[],t=this.consumeCodePoint();Bh(t)&&e.length<6;)e.push(t),t=this.consumeCodePoint();for(var i=!1;63===t&&e.length<6;)e.push(t),t=this.consumeCodePoint(),i=!0;if(i)return{type:30,start:parseInt(wc.apply(void 0,e.map((function(e){return 63===e?48:e}))),16),end:parseInt(wc.apply(void 0,e.map((function(e){return 63===e?70:e}))),16)};var n=parseInt(wc.apply(void 0,e),16);if(this.peekCodePoint(0)===vh&&Bh(this.peekCodePoint(1))){this.consumeCodePoint(),t=this.consumeCodePoint();for(var s=[];Bh(t)&&s.length<6;)s.push(t),t=this.consumeCodePoint();return{type:30,start:n,end:parseInt(wc.apply(void 0,s),16)}}return{type:30,start:n,end:n}},e.prototype.consumeIdentLikeToken=function(){var e=this.consumeName();return"url"===e.toLowerCase()&&40===this.peekCodePoint(0)?(this.consumeCodePoint(),this.consumeUrlToken()):40===this.peekCodePoint(0)?(this.consumeCodePoint(),{type:19,value:e}):{type:20,value:e}},e.prototype.consumeUrlToken=function(){var e=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===wh)return{type:22,value:""};var t=this.peekCodePoint(0);if(39===t||34===t){var i=this.consumeStringToken(this.consumeCodePoint());return 0===i.type&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===wh||41===this.peekCodePoint(0))?(this.consumeCodePoint(),{type:22,value:i.value}):(this.consumeBadUrlRemnants(),Vh)}for(;;){var n=this.consumeCodePoint();if(n===wh||41===n)return{type:22,value:wc.apply(void 0,e)};if(Eh(n))return this.consumeWhiteSpace(),this.peekCodePoint(0)===wh||41===this.peekCodePoint(0)?(this.consumeCodePoint(),{type:22,value:wc.apply(void 0,e)}):(this.consumeBadUrlRemnants(),Vh);if(34===n||39===n||40===n||xh(n))return this.consumeBadUrlRemnants(),Vh;if(92===n){if(!Dh(n,this.peekCodePoint(0)))return this.consumeBadUrlRemnants(),Vh;e.push(this.consumeEscapedCodePoint())}else e.push(n)}},e.prototype.consumeWhiteSpace=function(){for(;Eh(this.peekCodePoint(0));)this.consumeCodePoint()},e.prototype.consumeBadUrlRemnants=function(){for(;;){var e=this.consumeCodePoint();if(41===e||e===wh)return;Dh(e,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},e.prototype.consumeStringSlice=function(e){for(var t="";e>0;){var i=Math.min(5e4,e);t+=wc.apply(void 0,this._value.splice(0,i)),e-=i}return this._value.shift(),t},e.prototype.consumeStringToken=function(e){for(var t="",i=0;;){var n=this._value[i];if(n===wh||void 0===n||n===e)return{type:0,value:t+=this.consumeStringSlice(i)};if(10===n)return this._value.splice(0,i),zh;if(92===n){var s=this._value[i+1];s!==wh&&void 0!==s&&(10===s?(t+=this.consumeStringSlice(i),i=-1,this._value.shift()):Dh(n,s)&&(t+=this.consumeStringSlice(i),t+=wc(this.consumeEscapedCodePoint()),i=-1))}i++}},e.prototype.consumeNumber=function(){var e=[],t=4,i=this.peekCodePoint(0);for(i!==bh&&i!==vh||e.push(this.consumeCodePoint());yh(this.peekCodePoint(0));)e.push(this.consumeCodePoint());i=this.peekCodePoint(0);var n=this.peekCodePoint(1);if(46===i&&yh(n))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),t=8;yh(this.peekCodePoint(0));)e.push(this.consumeCodePoint());i=this.peekCodePoint(0),n=this.peekCodePoint(1);var s=this.peekCodePoint(2);if((69===i||101===i)&&((n===bh||n===vh)&&yh(s)||yh(n)))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),t=8;yh(this.peekCodePoint(0));)e.push(this.consumeCodePoint());return[Hh(e),t]},e.prototype.consumeNumericToken=function(){var e=this.consumeNumber(),t=e[0],i=e[1],n=this.peekCodePoint(0),s=this.peekCodePoint(1),r=this.peekCodePoint(2);return Fh(n,s,r)?{type:15,number:t,flags:i,unit:this.consumeName()}:37===n?(this.consumeCodePoint(),{type:16,number:t,flags:i}):{type:17,number:t,flags:i}},e.prototype.consumeEscapedCodePoint=function(){var e=this.consumeCodePoint();if(Bh(e)){for(var t=wc(e);Bh(this.peekCodePoint(0))&&t.length<6;)t+=wc(this.consumeCodePoint());Eh(this.peekCodePoint(0))&&this.consumeCodePoint();var i=parseInt(t,16);return 0===i||function(e){return e>=55296&&e<=57343}(i)||i>1114111?65533:i}return e===wh?65533:e},e.prototype.consumeName=function(){for(var e="";;){var t=this.consumeCodePoint();if(Sh(t))e+=wc(t);else{if(!Dh(t,this.peekCodePoint(0)))return this.reconsumeCodePoint(t),e;e+=wc(this.consumeEscapedCodePoint())}}},e}(),eu=function(){function e(e){this._tokens=e}return e.create=function(t){var i=new Zh;return i.write(t),new e(i.read())},e.parseValue=function(t){return e.create(t).parseComponentValue()},e.parseValues=function(t){return e.create(t).parseComponentValues()},e.prototype.parseComponentValue=function(){for(var e=this.consumeToken();31===e.type;)e=this.consumeToken();if(32===e.type)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(e);var t=this.consumeComponentValue();do{e=this.consumeToken()}while(31===e.type);if(32===e.type)return t;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},e.prototype.parseComponentValues=function(){for(var e=[];;){var t=this.consumeComponentValue();if(32===t.type)return e;e.push(t),e.push()}},e.prototype.consumeComponentValue=function(){var e=this.consumeToken();switch(e.type){case 11:case 28:case 2:return this.consumeSimpleBlock(e.type);case 19:return this.consumeFunction(e)}return e},e.prototype.consumeSimpleBlock=function(e){for(var t={type:e,values:[]},i=this.consumeToken();;){if(32===i.type||Au(i,e))return t;this.reconsumeToken(i),t.values.push(this.consumeComponentValue()),i=this.consumeToken()}},e.prototype.consumeFunction=function(e){for(var t={name:e.value,values:[],type:18};;){var i=this.consumeToken();if(32===i.type||3===i.type)return t;this.reconsumeToken(i),t.values.push(this.consumeComponentValue())}},e.prototype.consumeToken=function(){var e=this._tokens.shift();return void 0===e?jh:e},e.prototype.reconsumeToken=function(e){this._tokens.unshift(e)},e}(),tu=function(e){return 15===e.type},iu=function(e){return 17===e.type},nu=function(e){return 20===e.type},su=function(e){return 0===e.type},ru=function(e,t){return nu(e)&&e.value===t},ou=function(e){return 31!==e.type},au=function(e){return 31!==e.type&&4!==e.type},lu=function(e){var t=[],i=[];return e.forEach((function(e){if(4===e.type){if(0===i.length)throw new Error("Error parsing function args, zero tokens for arg");return t.push(i),void(i=[])}31!==e.type&&i.push(e)})),i.length&&t.push(i),t},Au=function(e,t){return 11===t&&12===e.type||(28===t&&29===e.type||2===t&&3===e.type)},du=function(e){return 17===e.type||15===e.type},cu=function(e){return 16===e.type||du(e)},hu=function(e){return e.length>1?[e[0],e[1]]:[e[0]]},uu={type:17,number:0,flags:4},pu={type:16,number:50,flags:4},mu={type:16,number:100,flags:4},gu=function(e,t,i){var n=e[0],s=e[1];return[Cu(n,t),Cu(void 0!==s?s:n,i)]},Cu=function(e,t){if(16===e.type)return e.number/100*t;if(tu(e))switch(e.unit){case"rem":case"em":return 16*e.number;default:return e.number}return e.number},fu="grad",vu="turn",bu=function(e,t){if(15===t.type)switch(t.unit){case"deg":return Math.PI*t.number/180;case fu:return Math.PI/200*t.number;case"rad":return t.number;case vu:return 2*Math.PI*t.number}throw new Error("Unsupported angle type")},wu=function(e){return 15===e.type&&("deg"===e.unit||e.unit===fu||"rad"===e.unit||e.unit===vu)},yu=function(e){switch(e.filter(nu).map((function(e){return e.value})).join(" ")){case"to bottom right":case"to right bottom":case"left top":case"top left":return[uu,uu];case"to top":case"bottom":return Bu(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[uu,mu];case"to right":case"left":return Bu(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[mu,mu];case"to bottom":case"top":return Bu(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[mu,uu];case"to left":case"right":return Bu(270)}return 0},Bu=function(e){return Math.PI*e/180},Eu=function(e,t){if(18===t.type){var i=Uu[t.name];if(void 0===i)throw new Error('Attempting to parse an unsupported color function "'+t.name+'"');return i(e,t.values)}if(5===t.type){if(3===t.value.length){var n=t.value.substring(0,1),s=t.value.substring(1,2),r=t.value.substring(2,3);return xu(parseInt(n+n,16),parseInt(s+s,16),parseInt(r+r,16),1)}if(4===t.value.length){n=t.value.substring(0,1),s=t.value.substring(1,2),r=t.value.substring(2,3);var o=t.value.substring(3,4);return xu(parseInt(n+n,16),parseInt(s+s,16),parseInt(r+r,16),parseInt(o+o,16)/255)}if(6===t.value.length){n=t.value.substring(0,2),s=t.value.substring(2,4),r=t.value.substring(4,6);return xu(parseInt(n,16),parseInt(s,16),parseInt(r,16),1)}if(8===t.value.length){n=t.value.substring(0,2),s=t.value.substring(2,4),r=t.value.substring(4,6),o=t.value.substring(6,8);return xu(parseInt(n,16),parseInt(s,16),parseInt(r,16),parseInt(o,16)/255)}}if(20===t.type){var a=Qu[t.value.toUpperCase()];if(void 0!==a)return a}return Qu.TRANSPARENT},Iu=function(e){return 0==(255&e)},Su=function(e){var t=255&e,i=255&e>>8,n=255&e>>16,s=255&e>>24;return t<255?"rgba("+s+","+n+","+i+","+t/255+")":"rgb("+s+","+n+","+i+")"},xu=function(e,t,i,n){return(e<<24|t<<16|i<<8|Math.round(255*n)<<0)>>>0},Du=function(e,t){if(17===e.type)return e.number;if(16===e.type){var i=3===t?1:255;return 3===t?e.number/100*i:Math.round(e.number/100*i)}return 0},Fu=function(e,t){var i=t.filter(au);if(3===i.length){var n=i.map(Du);return xu(n[0],n[1],n[2],1)}if(4===i.length){var s=i.map(Du);return xu(s[0],s[1],s[2],s[3])}return 0};function Tu(e,t,i){return i<0&&(i+=1),i>=1&&(i-=1),i<1/6?(t-e)*i*6+e:i<.5?t:i<2/3?6*(t-e)*(2/3-i)+e:e}var Hu=function(e,t){var i=t.filter(au),n=i[0],s=i[1],r=i[2],o=i[3],a=(17===n.type?Bu(n.number):bu(e,n))/(2*Math.PI),l=cu(s)?s.number/100:0,A=cu(r)?r.number/100:0,d=void 0!==o&&cu(o)?Cu(o,1):1;if(0===l)return xu(255*A,255*A,255*A,1);var c=A<=.5?A*(l+1):A+l-A*l,h=2*A-c,u=Tu(h,c,a+1/3),p=Tu(h,c,a),m=Tu(h,c,a-1/3);return xu(255*u,255*p,255*m,d)},Uu={hsl:Hu,hsla:Hu,rgb:Fu,rgba:Fu},Pu=function(e,t){return Eu(e,eu.create(t).parseComponentValue())},Qu={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},Nu={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(e,t){return t.map((function(e){if(nu(e))switch(e.value){case"padding-box":return 1;case"content-box":return 2}return 0}))}},Ru={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},Lu=function(e,t){var i=Eu(e,t[0]),n=t[1];return n&&cu(n)?{color:i,stop:n}:{color:i,stop:null}},Mu=function(e,t){var i=e[0],n=e[e.length-1];null===i.stop&&(i.stop=uu),null===n.stop&&(n.stop=mu);for(var s=[],r=0,o=0;o<e.length;o++){var a=e[o].stop;if(null!==a){var l=Cu(a,t);s.push(l>r?l:r),r=l}else s.push(null)}var A=null;for(o=0;o<s.length;o++){var d=s[o];if(null===d)null===A&&(A=o);else if(null!==A){for(var c=o-A,h=(d-s[A-1])/(c+1),u=1;u<=c;u++)s[A+u-1]=h*u;A=null}}return e.map((function(e,i){return{color:e.color,stop:Math.max(Math.min(1,s[i]/t),0)}}))},ku=function(e,t,i){var n="number"==typeof e?e:function(e,t,i){var n=t/2,s=i/2,r=Cu(e[0],t)-n,o=s-Cu(e[1],i);return(Math.atan2(o,r)+2*Math.PI)%(2*Math.PI)}(e,t,i),s=Math.abs(t*Math.sin(n))+Math.abs(i*Math.cos(n)),r=t/2,o=i/2,a=s/2,l=Math.sin(n-Math.PI/2)*a,A=Math.cos(n-Math.PI/2)*a;return[s,r-A,r+A,o-l,o+l]},Ku=function(e,t){return Math.sqrt(e*e+t*t)},Ou=function(e,t,i,n,s){return[[0,0],[0,t],[e,0],[e,t]].reduce((function(e,t){var r=Ku(i-t[0],n-t[1]);return(s?r<e.optimumDistance:r>e.optimumDistance)?{optimumCorner:t,optimumDistance:r}:e}),{optimumDistance:s?1/0:-1/0,optimumCorner:null}).optimumCorner},_u=function(e,t){var i=Bu(180),n=[];return lu(t).forEach((function(t,s){if(0===s){var r=t[0];if(20===r.type&&-1!==["top","left","right","bottom"].indexOf(r.value))return void(i=yu(t));if(wu(r))return void(i=(bu(e,r)+Bu(270))%Bu(360))}var o=Lu(e,t);n.push(o)})),{angle:i,stops:n,type:1}},Vu="closest-side",zu="farthest-side",Wu="closest-corner",$u="farthest-corner",Gu="circle",qu="ellipse",Yu="cover",Xu="contain",Ju=function(e,t){var i=0,n=3,s=[],r=[];return lu(t).forEach((function(t,o){var a=!0;if(0===o?a=t.reduce((function(e,t){if(nu(t))switch(t.value){case"center":return r.push(pu),!1;case"top":case"left":return r.push(uu),!1;case"right":case"bottom":return r.push(mu),!1}else if(cu(t)||du(t))return r.push(t),!1;return e}),a):1===o&&(a=t.reduce((function(e,t){if(nu(t))switch(t.value){case Gu:return i=0,!1;case qu:return i=1,!1;case Xu:case Vu:return n=0,!1;case zu:return n=1,!1;case Wu:return n=2,!1;case Yu:case $u:return n=3,!1}else if(du(t)||cu(t))return Array.isArray(n)||(n=[]),n.push(t),!1;return e}),a)),a){var l=Lu(e,t);s.push(l)}})),{size:n,shape:i,stops:s,position:r,type:2}},ju=function(e,t){if(22===t.type){var i={url:t.value,type:0};return e.cache.addImage(t.value),i}if(18===t.type){var n=ep[t.name];if(void 0===n)throw new Error('Attempting to parse an unsupported image function "'+t.name+'"');return n(e,t.values)}throw new Error("Unsupported image type "+t.type)};var Zu,ep={"linear-gradient":function(e,t){var i=Bu(180),n=[];return lu(t).forEach((function(t,s){if(0===s){var r=t[0];if(20===r.type&&"to"===r.value)return void(i=yu(t));if(wu(r))return void(i=bu(e,r))}var o=Lu(e,t);n.push(o)})),{angle:i,stops:n,type:1}},"-moz-linear-gradient":_u,"-ms-linear-gradient":_u,"-o-linear-gradient":_u,"-webkit-linear-gradient":_u,"radial-gradient":function(e,t){var i=0,n=3,s=[],r=[];return lu(t).forEach((function(t,o){var a=!0;if(0===o){var l=!1;a=t.reduce((function(e,t){if(l)if(nu(t))switch(t.value){case"center":return r.push(pu),e;case"top":case"left":return r.push(uu),e;case"right":case"bottom":return r.push(mu),e}else(cu(t)||du(t))&&r.push(t);else if(nu(t))switch(t.value){case Gu:return i=0,!1;case qu:return i=1,!1;case"at":return l=!0,!1;case Vu:return n=0,!1;case Yu:case zu:return n=1,!1;case Xu:case Wu:return n=2,!1;case $u:return n=3,!1}else if(du(t)||cu(t))return Array.isArray(n)||(n=[]),n.push(t),!1;return e}),a)}if(a){var A=Lu(e,t);s.push(A)}})),{size:n,shape:i,stops:s,position:r,type:2}},"-moz-radial-gradient":Ju,"-ms-radial-gradient":Ju,"-o-radial-gradient":Ju,"-webkit-radial-gradient":Ju,"-webkit-gradient":function(e,t){var i=Bu(180),n=[],s=1;return lu(t).forEach((function(t,i){var r=t[0];if(0===i){if(nu(r)&&"linear"===r.value)return void(s=1);if(nu(r)&&"radial"===r.value)return void(s=2)}if(18===r.type)if("from"===r.name){var o=Eu(e,r.values[0]);n.push({stop:uu,color:o})}else if("to"===r.name){o=Eu(e,r.values[0]);n.push({stop:mu,color:o})}else if("color-stop"===r.name){var a=r.values.filter(au);if(2===a.length){o=Eu(e,a[1]);var l=a[0];iu(l)&&n.push({stop:{type:16,number:100*l.number,flags:l.flags},color:o})}}})),1===s?{angle:(i+Bu(180))%Bu(360),stops:n,type:s}:{size:3,shape:0,stops:n,position:[],type:s}}},tp={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(e,t){if(0===t.length)return[];var i=t[0];return 20===i.type&&"none"===i.value?[]:t.filter((function(e){return au(e)&&function(e){return!(20===e.type&&"none"===e.value||18===e.type&&!ep[e.name])}(e)})).map((function(t){return ju(e,t)}))}},ip={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(e,t){return t.map((function(e){if(nu(e))switch(e.value){case"padding-box":return 1;case"content-box":return 2}return 0}))}},np={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(e,t){return lu(t).map((function(e){return e.filter(cu)})).map(hu)}},sp={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(e,t){return lu(t).map((function(e){return e.filter(nu).map((function(e){return e.value})).join(" ")})).map(rp)}},rp=function(e){switch(e){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;default:return 0}};!function(e){e.AUTO="auto",e.CONTAIN="contain",e.COVER="cover"}(Zu||(Zu={}));var op,ap={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(e,t){return lu(t).map((function(e){return e.filter(lp)}))}},lp=function(e){return nu(e)||cu(e)},Ap=function(e){return{name:"border-"+e+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},dp=Ap("top"),cp=Ap("right"),hp=Ap("bottom"),up=Ap("left"),pp=function(e){return{name:"border-radius-"+e,initialValue:"0 0",prefix:!1,type:1,parse:function(e,t){return hu(t.filter(cu))}}},mp=pp("top-left"),gp=pp("top-right"),Cp=pp("bottom-right"),fp=pp("bottom-left"),vp=function(e){return{name:"border-"+e+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(e,t){switch(t){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},bp=vp("top"),wp=vp("right"),yp=vp("bottom"),Bp=vp("left"),Ep=function(e){return{name:"border-"+e+"-width",initialValue:"0",type:0,prefix:!1,parse:function(e,t){return tu(t)?t.number:0}}},Ip=Ep("top"),Sp=Ep("right"),xp=Ep("bottom"),Dp=Ep("left"),Fp={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},Tp={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(e,t){return"rtl"===t?1:0}},Hp={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(e,t){return t.filter(nu).reduce((function(e,t){return e|Up(t.value)}),0)}},Up=function(e){switch(e){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},Pp={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},Qp={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(e,t){return 20===t.type&&"normal"===t.value?0:17===t.type||15===t.type?t.number:0}};!function(e){e.NORMAL="normal",e.STRICT="strict"}(op||(op={}));var Np,Rp={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){return"strict"===t?op.STRICT:op.NORMAL}},Lp={name:"line-height",initialValue:"normal",prefix:!1,type:4},Mp=function(e,t){return nu(e)&&"normal"===e.value?1.2*t:17===e.type?t*e.number:cu(e)?Cu(e,t):t},kp={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(e,t){return 20===t.type&&"none"===t.value?null:ju(e,t)}},Kp={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(e,t){return"inside"===t?0:1}},Op={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;default:return-1}}},_p=function(e){return{name:"margin-"+e,initialValue:"0",prefix:!1,type:4}},Vp=_p("top"),zp=_p("right"),Wp=_p("bottom"),$p=_p("left"),Gp={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(e,t){return t.filter(nu).map((function(e){switch(e.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;default:return 0}}))}},qp={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){return"break-word"===t?"break-word":"normal"}},Yp=function(e){return{name:"padding-"+e,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},Xp=Yp("top"),Jp=Yp("right"),jp=Yp("bottom"),Zp=Yp("left"),em={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(e,t){switch(t){case"right":return 2;case"center":case"justify":return 1;default:return 0}}},tm={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(e,t){switch(t){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},im={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(e,t){return 1===t.length&&ru(t[0],"none")?[]:lu(t).map((function(t){for(var i={color:Qu.TRANSPARENT,offsetX:uu,offsetY:uu,blur:uu},n=0,s=0;s<t.length;s++){var r=t[s];du(r)?(0===n?i.offsetX=r:1===n?i.offsetY=r:i.blur=r,n++):i.color=Eu(e,r)}return i}))}},nm={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},sm={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(e,t){if(20===t.type&&"none"===t.value)return null;if(18===t.type){var i=rm[t.name];if(void 0===i)throw new Error('Attempting to parse an unsupported transform function "'+t.name+'"');return i(t.values)}return null}},rm={matrix:function(e){var t=e.filter((function(e){return 17===e.type})).map((function(e){return e.number}));return 6===t.length?t:null},matrix3d:function(e){var t=e.filter((function(e){return 17===e.type})).map((function(e){return e.number}));return 16===t.length?[t[0],t[1],t[4],t[5],t[12],t[13]]:null}},om={type:16,number:50,flags:4},am=[om,om],lm={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(e,t){var i=t.filter(cu);return 2!==i.length?am:[i[0],i[1]]}},Am={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"hidden":return 1;case"collapse":return 2;default:return 0}}};!function(e){e.NORMAL="normal",e.BREAK_ALL="break-all",e.KEEP_ALL="keep-all"}(Np||(Np={}));for(var dm={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){switch(t){case"break-all":return Np.BREAK_ALL;case"keep-all":return Np.KEEP_ALL;default:return Np.NORMAL}}},cm={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(e,t){if(20===t.type)return{auto:!0,order:0};if(iu(t))return{auto:!1,order:t.number};throw new Error("Invalid z-index number parsed")}},hm=function(e,t){if(15===t.type)switch(t.unit.toLowerCase()){case"s":return 1e3*t.number;case"ms":return t.number}throw new Error("Unsupported time type")},um={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(e,t){return iu(t)?t.number:1}},pm={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},mm={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(e,t){return t.filter(nu).map((function(e){switch(e.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0})).filter((function(e){return 0!==e}))}},gm={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(e,t){var i=[],n=[];return t.forEach((function(e){switch(e.type){case 20:case 0:i.push(e.value);break;case 17:i.push(e.number.toString());break;case 4:n.push(i.join(" ")),i.length=0}})),i.length&&n.push(i.join(" ")),n.map((function(e){return-1===e.indexOf(" ")?e:"'"+e+"'"}))}},Cm={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},fm={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(e,t){return iu(t)?t.number:nu(t)&&"bold"===t.value?700:400}},vm={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(e,t){return t.filter(nu).map((function(e){return e.value}))}},bm={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){switch(t){case"oblique":return"oblique";case"italic":return"italic";default:return"normal"}}},wm=function(e,t){return 0!=(e&t)},ym={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(e,t){if(0===t.length)return[];var i=t[0];return 20===i.type&&"none"===i.value?[]:t}},Bm={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(e,t){if(0===t.length)return null;var i=t[0];if(20===i.type&&"none"===i.value)return null;for(var n=[],s=t.filter(ou),r=0;r<s.length;r++){var o=s[r],a=s[r+1];if(20===o.type){var l=a&&iu(a)?a.number:1;n.push({counter:o.value,increment:l})}}return n}},Em={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(e,t){if(0===t.length)return[];for(var i=[],n=t.filter(ou),s=0;s<n.length;s++){var r=n[s],o=n[s+1];if(nu(r)&&"none"!==r.value){var a=o&&iu(o)?o.number:0;i.push({counter:r.value,reset:a})}}return i}},Im={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(e,t){return t.filter(tu).map((function(t){return hm(e,t)}))}},Sm={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(e,t){if(0===t.length)return null;var i=t[0];if(20===i.type&&"none"===i.value)return null;var n=[],s=t.filter(su);if(s.length%2!=0)return null;for(var r=0;r<s.length;r+=2){n.push({open:s[r].value,close:s[r+1].value})}return n}},xm=function(e,t,i){if(!e)return"";var n=e[Math.min(t,e.length-1)];return n?i?n.open:n.close:""},Dm={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(e,t){return 1===t.length&&ru(t[0],"none")?[]:lu(t).map((function(t){for(var i={color:255,offsetX:uu,offsetY:uu,blur:uu,spread:uu,inset:!1},n=0,s=0;s<t.length;s++){var r=t[s];ru(r,"inset")?i.inset=!0:du(r)?(0===n?i.offsetX=r:1===n?i.offsetY=r:2===n?i.blur=r:i.spread=r,n++):i.color=Eu(e,r)}return i}))}},Fm={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(e,t){var i=[];return t.filter(nu).forEach((function(e){switch(e.value){case"stroke":i.push(1);break;case"fill":i.push(0);break;case"markers":i.push(2)}})),[0,1,2].forEach((function(e){-1===i.indexOf(e)&&i.push(e)})),i}},Tm={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},Hm={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(e,t){return tu(t)?t.number:0}},Um=function(){function e(e,t){var i,n;this.animationDuration=Nm(e,Im,t.animationDuration),this.backgroundClip=Nm(e,Nu,t.backgroundClip),this.backgroundColor=Nm(e,Ru,t.backgroundColor),this.backgroundImage=Nm(e,tp,t.backgroundImage),this.backgroundOrigin=Nm(e,ip,t.backgroundOrigin),this.backgroundPosition=Nm(e,np,t.backgroundPosition),this.backgroundRepeat=Nm(e,sp,t.backgroundRepeat),this.backgroundSize=Nm(e,ap,t.backgroundSize),this.borderTopColor=Nm(e,dp,t.borderTopColor),this.borderRightColor=Nm(e,cp,t.borderRightColor),this.borderBottomColor=Nm(e,hp,t.borderBottomColor),this.borderLeftColor=Nm(e,up,t.borderLeftColor),this.borderTopLeftRadius=Nm(e,mp,t.borderTopLeftRadius),this.borderTopRightRadius=Nm(e,gp,t.borderTopRightRadius),this.borderBottomRightRadius=Nm(e,Cp,t.borderBottomRightRadius),this.borderBottomLeftRadius=Nm(e,fp,t.borderBottomLeftRadius),this.borderTopStyle=Nm(e,bp,t.borderTopStyle),this.borderRightStyle=Nm(e,wp,t.borderRightStyle),this.borderBottomStyle=Nm(e,yp,t.borderBottomStyle),this.borderLeftStyle=Nm(e,Bp,t.borderLeftStyle),this.borderTopWidth=Nm(e,Ip,t.borderTopWidth),this.borderRightWidth=Nm(e,Sp,t.borderRightWidth),this.borderBottomWidth=Nm(e,xp,t.borderBottomWidth),this.borderLeftWidth=Nm(e,Dp,t.borderLeftWidth),this.boxShadow=Nm(e,Dm,t.boxShadow),this.color=Nm(e,Fp,t.color),this.direction=Nm(e,Tp,t.direction),this.display=Nm(e,Hp,t.display),this.float=Nm(e,Pp,t.cssFloat),this.fontFamily=Nm(e,gm,t.fontFamily),this.fontSize=Nm(e,Cm,t.fontSize),this.fontStyle=Nm(e,bm,t.fontStyle),this.fontVariant=Nm(e,vm,t.fontVariant),this.fontWeight=Nm(e,fm,t.fontWeight),this.letterSpacing=Nm(e,Qp,t.letterSpacing),this.lineBreak=Nm(e,Rp,t.lineBreak),this.lineHeight=Nm(e,Lp,t.lineHeight),this.listStyleImage=Nm(e,kp,t.listStyleImage),this.listStylePosition=Nm(e,Kp,t.listStylePosition),this.listStyleType=Nm(e,Op,t.listStyleType),this.marginTop=Nm(e,Vp,t.marginTop),this.marginRight=Nm(e,zp,t.marginRight),this.marginBottom=Nm(e,Wp,t.marginBottom),this.marginLeft=Nm(e,$p,t.marginLeft),this.opacity=Nm(e,um,t.opacity);var s=Nm(e,Gp,t.overflow);this.overflowX=s[0],this.overflowY=s[s.length>1?1:0],this.overflowWrap=Nm(e,qp,t.overflowWrap),this.paddingTop=Nm(e,Xp,t.paddingTop),this.paddingRight=Nm(e,Jp,t.paddingRight),this.paddingBottom=Nm(e,jp,t.paddingBottom),this.paddingLeft=Nm(e,Zp,t.paddingLeft),this.paintOrder=Nm(e,Fm,t.paintOrder),this.position=Nm(e,tm,t.position),this.textAlign=Nm(e,em,t.textAlign),this.textDecorationColor=Nm(e,pm,null!==(i=t.textDecorationColor)&&void 0!==i?i:t.color),this.textDecorationLine=Nm(e,mm,null!==(n=t.textDecorationLine)&&void 0!==n?n:t.textDecoration),this.textShadow=Nm(e,im,t.textShadow),this.textTransform=Nm(e,nm,t.textTransform),this.transform=Nm(e,sm,t.transform),this.transformOrigin=Nm(e,lm,t.transformOrigin),this.visibility=Nm(e,Am,t.visibility),this.webkitTextStrokeColor=Nm(e,Tm,t.webkitTextStrokeColor),this.webkitTextStrokeWidth=Nm(e,Hm,t.webkitTextStrokeWidth),this.wordBreak=Nm(e,dm,t.wordBreak),this.zIndex=Nm(e,cm,t.zIndex)}return e.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&0===this.visibility},e.prototype.isTransparent=function(){return Iu(this.backgroundColor)},e.prototype.isTransformed=function(){return null!==this.transform},e.prototype.isPositioned=function(){return 0!==this.position},e.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},e.prototype.isFloating=function(){return 0!==this.float},e.prototype.isInlineLevel=function(){return wm(this.display,4)||wm(this.display,33554432)||wm(this.display,268435456)||wm(this.display,536870912)||wm(this.display,67108864)||wm(this.display,134217728)},e}(),Pm=function(e,t){this.content=Nm(e,ym,t.content),this.quotes=Nm(e,Sm,t.quotes)},Qm=function(e,t){this.counterIncrement=Nm(e,Bm,t.counterIncrement),this.counterReset=Nm(e,Em,t.counterReset)},Nm=function(e,t,i){var n=new Zh,s=null!=i?i.toString():t.initialValue;n.write(s);var r=new eu(n.read());switch(t.type){case 2:var o=r.parseComponentValue();return t.parse(e,nu(o)?o.value:t.initialValue);case 0:return t.parse(e,r.parseComponentValue());case 1:return t.parse(e,r.parseComponentValues());case 4:return r.parseComponentValue();case 3:switch(t.format){case"angle":return bu(e,r.parseComponentValue());case"color":return Eu(e,r.parseComponentValue());case"image":return ju(e,r.parseComponentValue());case"length":var a=r.parseComponentValue();return du(a)?a:uu;case"length-percentage":var l=r.parseComponentValue();return cu(l)?l:uu;case"time":return hm(e,r.parseComponentValue())}}},Rm=function(e,t){var i=function(e){switch(e.getAttribute("data-html2canvas-debug")){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}}(e);return 1===i||t===i},Lm=function(e,t){this.context=e,this.textNodes=[],this.elements=[],this.flags=0,Rm(t,3),this.styles=new Um(e,window.getComputedStyle(t,null)),Og(t)&&(this.styles.animationDuration.some((function(e){return e>0}))&&(t.style.animationDuration="0s"),null!==this.styles.transform&&(t.style.transform="none")),this.bounds=vc(this.context,t),Rm(t,4)&&(this.flags|=16)},Mm="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",km="undefined"==typeof Uint8Array?[]:new Uint8Array(256),Km=0;Km<64;Km++)km[Mm.charCodeAt(Km)]=Km;for(var Om=function(e,t,i){return e.slice?e.slice(t,i):new Uint16Array(Array.prototype.slice.call(e,t,i))},_m=function(){function e(e,t,i,n,s,r){this.initialValue=e,this.errorValue=t,this.highStart=i,this.highValueIndex=n,this.index=s,this.data=r}return e.prototype.get=function(e){var t;if(e>=0){if(e<55296||e>56319&&e<=65535)return this.data[t=((t=this.index[e>>5])<<2)+(31&e)];if(e<=65535)return this.data[t=((t=this.index[2048+(e-55296>>5)])<<2)+(31&e)];if(e<this.highStart)return t=this.index[t=2080+(e>>11)],this.data[t=((t=this.index[t+=e>>5&63])<<2)+(31&e)];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},e}(),Vm="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",zm="undefined"==typeof Uint8Array?[]:new Uint8Array(256),Wm=0;Wm<64;Wm++)zm[Vm.charCodeAt(Wm)]=Wm;var $m,Gm=8,qm=9,Ym=11,Xm=12,Jm=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(String.fromCodePoint)return String.fromCodePoint.apply(String,e);var i=e.length;if(!i)return"";for(var n=[],s=-1,r="";++s<i;){var o=e[s];o<=65535?n.push(o):n.push(55296+((o-=65536)>>10),o%1024+56320),(s+1===i||n.length>16384)&&(r+=String.fromCharCode.apply(String,n),n.length=0)}return r},jm=function(e,t){var i,n,s,r=function(e){var t,i,n,s,r,o=.75*e.length,a=e.length,l=0;"="===e[e.length-1]&&(o--,"="===e[e.length-2]&&o--);var A="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array&&void 0!==Uint8Array.prototype.slice?new ArrayBuffer(o):new Array(o),d=Array.isArray(A)?A:new Uint8Array(A);for(t=0;t<a;t+=4)i=km[e.charCodeAt(t)],n=km[e.charCodeAt(t+1)],s=km[e.charCodeAt(t+2)],r=km[e.charCodeAt(t+3)],d[l++]=i<<2|n>>4,d[l++]=(15&n)<<4|s>>2,d[l++]=(3&s)<<6|63&r;return A}(e),o=Array.isArray(r)?function(e){for(var t=e.length,i=[],n=0;n<t;n+=4)i.push(e[n+3]<<24|e[n+2]<<16|e[n+1]<<8|e[n]);return i}(r):new Uint32Array(r),a=Array.isArray(r)?function(e){for(var t=e.length,i=[],n=0;n<t;n+=2)i.push(e[n+1]<<8|e[n]);return i}(r):new Uint16Array(r),l=Om(a,12,o[4]/2),A=2===o[5]?Om(a,(24+o[4])/2):(i=o,n=Math.ceil((24+o[4])/4),i.slice?i.slice(n,s):new Uint32Array(Array.prototype.slice.call(i,n,s)));return new _m(o[0],o[1],o[2],o[3],l,A)}("AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA="),Zm="",eg=function(e){return jm.get(e)},tg=function(e,t,i){var n=i-2,s=t[n],r=t[i-1],o=t[i];if(2===r&&3===o)return Zm;if(2===r||3===r||4===r)return"";if(2===o||3===o||4===o)return"";if(r===Gm&&-1!==[Gm,qm,Ym,Xm].indexOf(o))return Zm;if(!(r!==Ym&&r!==qm||o!==qm&&10!==o))return Zm;if((r===Xm||10===r)&&10===o)return Zm;if(13===o||5===o)return Zm;if(7===o)return Zm;if(1===r)return Zm;if(13===r&&14===o){for(;5===s;)s=t[--n];if(14===s)return Zm}if(15===r&&15===o){for(var a=0;15===s;)a++,s=t[--n];if(a%2==0)return Zm}return""},ig=function(e){var t=function(e){for(var t=[],i=0,n=e.length;i<n;){var s=e.charCodeAt(i++);if(s>=55296&&s<=56319&&i<n){var r=e.charCodeAt(i++);56320==(64512&r)?t.push(((1023&s)<<10)+(1023&r)+65536):(t.push(s),i--)}else t.push(s)}return t}(e),i=t.length,n=0,s=0,r=t.map(eg);return{next:function(){if(n>=i)return{done:!0,value:null};for(var e=Zm;n<i&&(e=tg(0,r,++n))===Zm;);if(e!==Zm||n===i){var o=Jm.apply(null,t.slice(s,n));return s=n,{value:o,done:!1}}return{done:!0,value:null}}}},ng=function(e){return 0===e[0]&&255===e[1]&&0===e[2]&&255===e[3]},sg=function(e,t,i,n,s){var r="http://www.w3.org/2000/svg",o=document.createElementNS(r,"svg"),a=document.createElementNS(r,"foreignObject");return o.setAttributeNS(null,"width",e.toString()),o.setAttributeNS(null,"height",t.toString()),a.setAttributeNS(null,"width","100%"),a.setAttributeNS(null,"height","100%"),a.setAttributeNS(null,"x",i.toString()),a.setAttributeNS(null,"y",n.toString()),a.setAttributeNS(null,"externalResourcesRequired","true"),o.appendChild(a),a.appendChild(s),o},rg=function(e){return new Promise((function(t,i){var n=new Image;n.onload=function(){return t(n)},n.onerror=i,n.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent((new XMLSerializer).serializeToString(e))}))},og={get SUPPORT_RANGE_BOUNDS(){var e=function(e){if(e.createRange){var t=e.createRange();if(t.getBoundingClientRect){var i=e.createElement("boundtest");i.style.height="123px",i.style.display="block",e.body.appendChild(i),t.selectNode(i);var n=t.getBoundingClientRect(),s=Math.round(n.height);if(e.body.removeChild(i),123===s)return!0}}return!1}(document);return Object.defineProperty(og,"SUPPORT_RANGE_BOUNDS",{value:e}),e},get SUPPORT_WORD_BREAKING(){var e=og.SUPPORT_RANGE_BOUNDS&&function(e){var t=e.createElement("boundtest");t.style.width="50px",t.style.display="block",t.style.fontSize="12px",t.style.letterSpacing="0px",t.style.wordSpacing="0px",e.body.appendChild(t);var i=e.createRange();t.innerHTML="function"==typeof"".repeat?"&#128104;".repeat(10):"";var n=t.firstChild,s=bc(n.data).map((function(e){return wc(e)})),r=0,o={},a=s.every((function(e,t){i.setStart(n,r),i.setEnd(n,r+e.length);var s=i.getBoundingClientRect();r+=e.length;var a=s.x>o.x||s.y>o.y;return o=s,0===t||a}));return e.body.removeChild(t),a}(document);return Object.defineProperty(og,"SUPPORT_WORD_BREAKING",{value:e}),e},get SUPPORT_SVG_DRAWING(){var e=function(e){var t=new Image,i=e.createElement("canvas"),n=i.getContext("2d");if(!n)return!1;t.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{n.drawImage(t,0,0),i.toDataURL()}catch(e){return!1}return!0}(document);return Object.defineProperty(og,"SUPPORT_SVG_DRAWING",{value:e}),e},get SUPPORT_FOREIGNOBJECT_DRAWING(){var e="function"==typeof Array.from&&"function"==typeof window.fetch?function(e){var t=e.createElement("canvas"),i=100;t.width=i,t.height=i;var n=t.getContext("2d");if(!n)return Promise.reject(!1);n.fillStyle="rgb(0, 255, 0)",n.fillRect(0,0,i,i);var s=new Image,r=t.toDataURL();s.src=r;var o=sg(i,i,0,0,s);return n.fillStyle="red",n.fillRect(0,0,i,i),rg(o).then((function(t){n.drawImage(t,0,0);var s=n.getImageData(0,0,i,i).data;n.fillStyle="red",n.fillRect(0,0,i,i);var o=e.createElement("div");return o.style.backgroundImage="url("+r+")",o.style.height=i+"px",ng(s)?rg(sg(i,i,0,0,o)):Promise.reject(!1)})).then((function(e){return n.drawImage(e,0,0),ng(n.getImageData(0,0,i,i).data)})).catch((function(){return!1}))}(document):Promise.resolve(!1);return Object.defineProperty(og,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:e}),e},get SUPPORT_CORS_IMAGES(){var e=void 0!==(new Image).crossOrigin;return Object.defineProperty(og,"SUPPORT_CORS_IMAGES",{value:e}),e},get SUPPORT_RESPONSE_TYPE(){var e="string"==typeof(new XMLHttpRequest).responseType;return Object.defineProperty(og,"SUPPORT_RESPONSE_TYPE",{value:e}),e},get SUPPORT_CORS_XHR(){var e="withCredentials"in new XMLHttpRequest;return Object.defineProperty(og,"SUPPORT_CORS_XHR",{value:e}),e},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var e=!("undefined"==typeof Intl||!Intl.Segmenter);return Object.defineProperty(og,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:e}),e}},ag=function(e,t){this.text=e,this.bounds=t},lg=function(e,t){var i=t.ownerDocument;if(i){var n=i.createElement("html2canvaswrapper");n.appendChild(t.cloneNode(!0));var s=t.parentNode;if(s){s.replaceChild(n,t);var r=vc(e,n);return n.firstChild&&s.replaceChild(n.firstChild,n),r}}return fc.EMPTY},Ag=function(e,t,i){var n=e.ownerDocument;if(!n)throw new Error("Node has no owner document");var s=n.createRange();return s.setStart(e,t),s.setEnd(e,t+i),s},dg=function(e){if(og.SUPPORT_NATIVE_TEXT_SEGMENTATION){var t=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(t.segment(e)).map((function(e){return e.segment}))}return function(e){for(var t,i=ig(e),n=[];!(t=i.next()).done;)t.value&&n.push(t.value.slice());return n}(e)},cg=function(e,t){return 0!==t.letterSpacing?dg(e):function(e,t){if(og.SUPPORT_NATIVE_TEXT_SEGMENTATION){var i=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(i.segment(e)).map((function(e){return e.segment}))}return ug(e,t)}(e,t)},hg=[32,160,4961,65792,65793,4153,4241],ug=function(e,t){for(var i,n=function(e,t){var i=bc(e),n=Ch(i,t),s=n[0],r=n[1],o=n[2],a=i.length,l=0,A=0;return{next:function(){if(A>=a)return{done:!0,value:null};for(var e=sh;A<a&&(e=gh(i,r,s,++A,o))===sh;);if(e!==sh||A===a){var t=new fh(i,e,l,A);return l=A,{value:t,done:!1}}return{done:!0,value:null}}}}(e,{lineBreak:t.lineBreak,wordBreak:"break-word"===t.overflowWrap?"break-word":t.wordBreak}),s=[],r=function(){if(i.value){var e=i.value.slice(),t=bc(e),n="";t.forEach((function(e){-1===hg.indexOf(e)?n+=wc(e):(n.length&&s.push(n),s.push(wc(e)),n="")})),n.length&&s.push(n)}};!(i=n.next()).done;)r();return s},pg=function(e,t,i){this.text=mg(t.data,i.textTransform),this.textBounds=function(e,t,i,n){var s=cg(t,i),r=[],o=0;return s.forEach((function(t){if(i.textDecorationLine.length||t.trim().length>0)if(og.SUPPORT_RANGE_BOUNDS){var s=Ag(n,o,t.length).getClientRects();if(s.length>1){var a=dg(t),l=0;a.forEach((function(t){r.push(new ag(t,fc.fromDOMRectList(e,Ag(n,l+o,t.length).getClientRects()))),l+=t.length}))}else r.push(new ag(t,fc.fromDOMRectList(e,s)))}else{var A=n.splitText(t.length);r.push(new ag(t,lg(e,n))),n=A}else og.SUPPORT_RANGE_BOUNDS||(n=n.splitText(t.length));o+=t.length})),r}(e,this.text,i,t)},mg=function(e,t){switch(t){case 1:return e.toLowerCase();case 3:return e.replace(gg,Cg);case 2:return e.toUpperCase();default:return e}},gg=/(^|\s|:|-|\(|\))([a-z])/g,Cg=function(e,t,i){return e.length>0?t+i.toUpperCase():e},fg=function(e){function t(t,i){var n=e.call(this,t,i)||this;return n.src=i.currentSrc||i.src,n.intrinsicWidth=i.naturalWidth,n.intrinsicHeight=i.naturalHeight,n.context.cache.addImage(n.src),n}return uc(t,e),t}(Lm),vg=function(e){function t(t,i){var n=e.call(this,t,i)||this;return n.canvas=i,n.intrinsicWidth=i.width,n.intrinsicHeight=i.height,n}return uc(t,e),t}(Lm),bg=function(e){function t(t,i){var n=e.call(this,t,i)||this,s=new XMLSerializer,r=vc(t,i);return i.setAttribute("width",r.width+"px"),i.setAttribute("height",r.height+"px"),n.svg="data:image/svg+xml,"+encodeURIComponent(s.serializeToString(i)),n.intrinsicWidth=i.width.baseVal.value,n.intrinsicHeight=i.height.baseVal.value,n.context.cache.addImage(n.svg),n}return uc(t,e),t}(Lm),wg=function(e){function t(t,i){var n=e.call(this,t,i)||this;return n.value=i.value,n}return uc(t,e),t}(Lm),yg=function(e){function t(t,i){var n=e.call(this,t,i)||this;return n.start=i.start,n.reversed="boolean"==typeof i.reversed&&!0===i.reversed,n}return uc(t,e),t}(Lm),Bg=[{type:15,flags:0,unit:"px",number:3}],Eg=[{type:16,flags:0,number:50}],Ig="checkbox",Sg="radio",xg="password",Dg=707406591,Fg=function(e){function t(t,i){var n,s,r,o=e.call(this,t,i)||this;switch(o.type=i.type.toLowerCase(),o.checked=i.checked,o.value=0===(s=(n=i).type===xg?new Array(n.value.length+1).join(""):n.value).length?n.placeholder||"":s,o.type!==Ig&&o.type!==Sg||(o.styles.backgroundColor=3739148031,o.styles.borderTopColor=o.styles.borderRightColor=o.styles.borderBottomColor=o.styles.borderLeftColor=2779096575,o.styles.borderTopWidth=o.styles.borderRightWidth=o.styles.borderBottomWidth=o.styles.borderLeftWidth=1,o.styles.borderTopStyle=o.styles.borderRightStyle=o.styles.borderBottomStyle=o.styles.borderLeftStyle=1,o.styles.backgroundClip=[0],o.styles.backgroundOrigin=[0],o.bounds=(r=o.bounds).width>r.height?new fc(r.left+(r.width-r.height)/2,r.top,r.height,r.height):r.width<r.height?new fc(r.left,r.top+(r.height-r.width)/2,r.width,r.width):r),o.type){case Ig:o.styles.borderTopRightRadius=o.styles.borderTopLeftRadius=o.styles.borderBottomRightRadius=o.styles.borderBottomLeftRadius=Bg;break;case Sg:o.styles.borderTopRightRadius=o.styles.borderTopLeftRadius=o.styles.borderBottomRightRadius=o.styles.borderBottomLeftRadius=Eg}return o}return uc(t,e),t}(Lm),Tg=function(e){function t(t,i){var n=e.call(this,t,i)||this,s=i.options[i.selectedIndex||0];return n.value=s&&s.text||"",n}return uc(t,e),t}(Lm),Hg=function(e){function t(t,i){var n=e.call(this,t,i)||this;return n.value=i.value,n}return uc(t,e),t}(Lm),Ug=function(e){function t(t,i){var n=e.call(this,t,i)||this;n.src=i.src,n.width=parseInt(i.width,10)||0,n.height=parseInt(i.height,10)||0,n.backgroundColor=n.styles.backgroundColor;try{if(i.contentWindow&&i.contentWindow.document&&i.contentWindow.document.documentElement){n.tree=Rg(t,i.contentWindow.document.documentElement);var s=i.contentWindow.document.documentElement?Pu(t,getComputedStyle(i.contentWindow.document.documentElement).backgroundColor):Qu.TRANSPARENT,r=i.contentWindow.document.body?Pu(t,getComputedStyle(i.contentWindow.document.body).backgroundColor):Qu.TRANSPARENT;n.backgroundColor=Iu(s)?Iu(r)?n.styles.backgroundColor:r:s}}catch(e){}return n}return uc(t,e),t}(Lm),Pg=["OL","UL","MENU"],Qg=function(e,t,i,n){for(var s=t.firstChild,r=void 0;s;s=r)if(r=s.nextSibling,kg(s)&&s.data.trim().length>0)i.textNodes.push(new pg(e,s,i.styles));else if(Kg(s))if(tC(s)&&s.assignedNodes)s.assignedNodes().forEach((function(t){return Qg(e,t,i,n)}));else{var o=Ng(e,s);o.styles.isVisible()&&(Lg(s,o,n)?o.flags|=4:Mg(o.styles)&&(o.flags|=2),-1!==Pg.indexOf(s.tagName)&&(o.flags|=8),i.elements.push(o),s.shadowRoot?Qg(e,s.shadowRoot,o,n):Zg(s)||$g(s)||eC(s)||Qg(e,s,o,n))}},Ng=function(e,t){return Xg(t)?new fg(e,t):qg(t)?new vg(e,t):$g(t)?new bg(e,t):Vg(t)?new wg(e,t):zg(t)?new yg(e,t):Wg(t)?new Fg(e,t):eC(t)?new Tg(e,t):Zg(t)?new Hg(e,t):Jg(t)?new Ug(e,t):new Lm(e,t)},Rg=function(e,t){var i=Ng(e,t);return i.flags|=4,Qg(e,t,i,i),i},Lg=function(e,t,i){return t.styles.isPositionedWithZIndex()||t.styles.opacity<1||t.styles.isTransformed()||Gg(e)&&i.styles.isTransparent()},Mg=function(e){return e.isPositioned()||e.isFloating()},kg=function(e){return e.nodeType===Node.TEXT_NODE},Kg=function(e){return e.nodeType===Node.ELEMENT_NODE},Og=function(e){return Kg(e)&&void 0!==e.style&&!_g(e)},_g=function(e){return"object"==typeof e.className},Vg=function(e){return"LI"===e.tagName},zg=function(e){return"OL"===e.tagName},Wg=function(e){return"INPUT"===e.tagName},$g=function(e){return"svg"===e.tagName},Gg=function(e){return"BODY"===e.tagName},qg=function(e){return"CANVAS"===e.tagName},Yg=function(e){return"VIDEO"===e.tagName},Xg=function(e){return"IMG"===e.tagName},Jg=function(e){return"IFRAME"===e.tagName},jg=function(e){return"STYLE"===e.tagName},Zg=function(e){return"TEXTAREA"===e.tagName},eC=function(e){return"SELECT"===e.tagName},tC=function(e){return"SLOT"===e.tagName},iC=function(e){return e.tagName.indexOf("-")>0},nC=function(){function e(){this.counters={}}return e.prototype.getCounterValue=function(e){var t=this.counters[e];return t&&t.length?t[t.length-1]:1},e.prototype.getCounterValues=function(e){var t=this.counters[e];return t||[]},e.prototype.pop=function(e){var t=this;e.forEach((function(e){return t.counters[e].pop()}))},e.prototype.parse=function(e){var t=this,i=e.counterIncrement,n=e.counterReset,s=!0;null!==i&&i.forEach((function(e){var i=t.counters[e.counter];i&&0!==e.increment&&(s=!1,i.length||i.push(1),i[Math.max(0,i.length-1)]+=e.increment)}));var r=[];return s&&n.forEach((function(e){var i=t.counters[e.counter];r.push(e.counter),i||(i=t.counters[e.counter]=[]),i.push(e.reset)})),r},e}(),sC={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},rC={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},oC={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},aC={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},lC=function(e,t,i,n,s,r){return e<t||e>i?CC(e,s,r.length>0):n.integers.reduce((function(t,i,s){for(;e>=i;)e-=i,t+=n.values[s];return t}),"")+r},AC=function(e,t,i,n){var s="";do{i||e--,s=n(e)+s,e/=t}while(e*t>=t);return s},dC=function(e,t,i,n,s){var r=i-t+1;return(e<0?"-":"")+(AC(Math.abs(e),r,n,(function(e){return wc(Math.floor(e%r)+t)}))+s)},cC=function(e,t,i){void 0===i&&(i=". ");var n=t.length;return AC(Math.abs(e),n,!1,(function(e){return t[Math.floor(e%n)]}))+i},hC=function(e,t,i,n,s,r){if(e<-9999||e>9999)return CC(e,4,s.length>0);var o=Math.abs(e),a=s;if(0===o)return t[0]+a;for(var l=0;o>0&&l<=4;l++){var A=o%10;0===A&&wm(r,1)&&""!==a?a=t[A]+a:A>1||1===A&&0===l||1===A&&1===l&&wm(r,2)||1===A&&1===l&&wm(r,4)&&e>100||1===A&&l>1&&wm(r,8)?a=t[A]+(l>0?i[l-1]:"")+a:1===A&&l>0&&(a=i[l-1]+a),o=Math.floor(o/10)}return(e<0?n:"")+a},uC="",pC="",mC="",gC="",CC=function(e,t,i){var n=i?". ":"",s=i?"":"",r=i?", ":"",o=i?" ":"";switch(t){case 0:return""+o;case 1:return""+o;case 2:return""+o;case 5:var a=dC(e,48,57,!0,n);return a.length<4?"0"+a:a;case 4:return cC(e,"",s);case 6:return lC(e,1,3999,sC,3,n).toLowerCase();case 7:return lC(e,1,3999,sC,3,n);case 8:return dC(e,945,969,!1,n);case 9:return dC(e,97,122,!1,n);case 10:return dC(e,65,90,!1,n);case 11:return dC(e,1632,1641,!0,n);case 12:case 49:return lC(e,1,9999,rC,3,n);case 35:return lC(e,1,9999,rC,3,n).toLowerCase();case 13:return dC(e,2534,2543,!0,n);case 14:case 30:return dC(e,6112,6121,!0,n);case 15:return cC(e,"",s);case 16:return cC(e,"",s);case 17:case 48:return hC(e,"",uC,"",s,14);case 47:return hC(e,"",pC,"",s,15);case 42:return hC(e,"",uC,"",s,14);case 41:return hC(e,"",pC,"",s,15);case 26:return hC(e,"","",mC,s,0);case 25:return hC(e,"","",mC,s,7);case 31:return hC(e,"","",gC,r,7);case 33:return hC(e,"","",gC,r,0);case 32:return hC(e,"","",gC,r,7);case 18:return dC(e,2406,2415,!0,n);case 20:return lC(e,1,19999,aC,3,n);case 21:return dC(e,2790,2799,!0,n);case 22:return dC(e,2662,2671,!0,n);case 22:return lC(e,1,10999,oC,3,n);case 23:return cC(e,"");case 24:return cC(e,"");case 27:return dC(e,3302,3311,!0,n);case 28:return cC(e,"",s);case 29:return cC(e,"",s);case 34:return dC(e,3792,3801,!0,n);case 37:return dC(e,6160,6169,!0,n);case 38:return dC(e,4160,4169,!0,n);case 39:return dC(e,2918,2927,!0,n);case 40:return dC(e,1776,1785,!0,n);case 43:return dC(e,3046,3055,!0,n);case 44:return dC(e,3174,3183,!0,n);case 45:return dC(e,3664,3673,!0,n);case 46:return dC(e,3872,3881,!0,n);default:return dC(e,48,57,!0,n)}},fC="data-html2canvas-ignore",vC=function(){function e(e,t,i){if(this.context=e,this.options=i,this.scrolledElements=[],this.referenceElement=t,this.counters=new nC,this.quoteDepth=0,!t.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(t.ownerDocument.documentElement,!1)}return e.prototype.toIFrame=function(e,t){var i=this,n=wC(e,t);if(!n.contentWindow)return Promise.reject("Unable to find iframe window");var s=e.defaultView.pageXOffset,r=e.defaultView.pageYOffset,o=n.contentWindow,a=o.document,l=EC(n).then((function(){return mc(i,void 0,void 0,(function(){var e,i;return gc(this,(function(s){switch(s.label){case 0:return this.scrolledElements.forEach(FC),o&&(o.scrollTo(t.left,t.top),!/(iPad|iPhone|iPod)/g.test(navigator.userAgent)||o.scrollY===t.top&&o.scrollX===t.left||(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(o.scrollX-t.left,o.scrollY-t.top,0,0))),e=this.options.onclone,void 0===(i=this.clonedReferenceElement)?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:a.fonts&&a.fonts.ready?[4,a.fonts.ready]:[3,2];case 1:s.sent(),s.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,BC(a)]:[3,4];case 3:s.sent(),s.label=4;case 4:return"function"==typeof e?[2,Promise.resolve().then((function(){return e(a,i)})).then((function(){return n}))]:[2,n]}}))}))}));return a.open(),a.write(xC(document.doctype)+"<html></html>"),DC(this.referenceElement.ownerDocument,s,r),a.replaceChild(a.adoptNode(this.documentElement),a.documentElement),a.close(),l},e.prototype.createElementClone=function(e){if(Rm(e,2),qg(e))return this.createCanvasClone(e);if(Yg(e))return this.createVideoClone(e);if(jg(e))return this.createStyleClone(e);var t=e.cloneNode(!1);return Xg(t)&&(Xg(e)&&e.currentSrc&&e.currentSrc!==e.src&&(t.src=e.currentSrc,t.srcset=""),"lazy"===t.loading&&(t.loading="eager")),iC(t)?this.createCustomElementClone(t):t},e.prototype.createCustomElementClone=function(e){var t=document.createElement("html2canvascustomelement");return SC(e.style,t),t},e.prototype.createStyleClone=function(e){try{var t=e.sheet;if(t&&t.cssRules){var i=[].slice.call(t.cssRules,0).reduce((function(e,t){return t&&"string"==typeof t.cssText?e+t.cssText:e}),""),n=e.cloneNode(!1);return n.textContent=i,n}}catch(e){if(this.context.logger.error("Unable to access cssRules property",e),"SecurityError"!==e.name)throw e}return e.cloneNode(!1)},e.prototype.createCanvasClone=function(e){var t;if(this.options.inlineImages&&e.ownerDocument){var i=e.ownerDocument.createElement("img");try{return i.src=e.toDataURL(),i}catch(t){this.context.logger.info("Unable to inline canvas contents, canvas is tainted",e)}}var n=e.cloneNode(!1);try{n.width=e.width,n.height=e.height;var s=e.getContext("2d"),r=n.getContext("2d");if(r)if(!this.options.allowTaint&&s)r.putImageData(s.getImageData(0,0,e.width,e.height),0,0);else{var o=null!==(t=e.getContext("webgl2"))&&void 0!==t?t:e.getContext("webgl");if(o){var a=o.getContextAttributes();!1===(null==a?void 0:a.preserveDrawingBuffer)&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",e)}r.drawImage(e,0,0)}return n}catch(t){this.context.logger.info("Unable to clone canvas as it is tainted",e)}return n},e.prototype.createVideoClone=function(e){var t=e.ownerDocument.createElement("canvas");t.width=e.offsetWidth,t.height=e.offsetHeight;var i=t.getContext("2d");try{return i&&(i.drawImage(e,0,0,t.width,t.height),this.options.allowTaint||i.getImageData(0,0,t.width,t.height)),t}catch(t){this.context.logger.info("Unable to clone video as it is tainted",e)}var n=e.ownerDocument.createElement("canvas");return n.width=e.offsetWidth,n.height=e.offsetHeight,n},e.prototype.appendChildNode=function(e,t,i){Kg(t)&&("SCRIPT"===t.tagName||t.hasAttribute(fC)||"function"==typeof this.options.ignoreElements&&this.options.ignoreElements(t))||this.options.copyStyles&&Kg(t)&&jg(t)||e.appendChild(this.cloneNode(t,i))},e.prototype.cloneChildNodes=function(e,t,i){for(var n=this,s=e.shadowRoot?e.shadowRoot.firstChild:e.firstChild;s;s=s.nextSibling)if(Kg(s)&&tC(s)&&"function"==typeof s.assignedNodes){var r=s.assignedNodes();r.length&&r.forEach((function(e){return n.appendChildNode(t,e,i)}))}else this.appendChildNode(t,s,i)},e.prototype.cloneNode=function(e,t){if(kg(e))return document.createTextNode(e.data);if(!e.ownerDocument)return e.cloneNode(!1);var i=e.ownerDocument.defaultView;if(i&&Kg(e)&&(Og(e)||_g(e))){var n=this.createElementClone(e);n.style.transitionProperty="none";var s=i.getComputedStyle(e),r=i.getComputedStyle(e,":before"),o=i.getComputedStyle(e,":after");this.referenceElement===e&&Og(n)&&(this.clonedReferenceElement=n),Gg(n)&&PC(n);var a=this.counters.parse(new Qm(this.context,s)),l=this.resolvePseudoContent(e,n,r,$m.BEFORE);iC(e)&&(t=!0),Yg(e)||this.cloneChildNodes(e,n,t),l&&n.insertBefore(l,n.firstChild);var A=this.resolvePseudoContent(e,n,o,$m.AFTER);return A&&n.appendChild(A),this.counters.pop(a),(s&&(this.options.copyStyles||_g(e))&&!Jg(e)||t)&&SC(s,n),0===e.scrollTop&&0===e.scrollLeft||this.scrolledElements.push([n,e.scrollLeft,e.scrollTop]),(Zg(e)||eC(e))&&(Zg(n)||eC(n))&&(n.value=e.value),n}return e.cloneNode(!1)},e.prototype.resolvePseudoContent=function(e,t,i,n){var s=this;if(i){var r=i.content,o=t.ownerDocument;if(o&&r&&"none"!==r&&"-moz-alt-content"!==r&&"none"!==i.display){this.counters.parse(new Qm(this.context,i));var a=new Pm(this.context,i),l=o.createElement("html2canvaspseudoelement");SC(i,l),a.content.forEach((function(t){if(0===t.type)l.appendChild(o.createTextNode(t.value));else if(22===t.type){var i=o.createElement("img");i.src=t.value,i.style.opacity="1",l.appendChild(i)}else if(18===t.type){if("attr"===t.name){var n=t.values.filter(nu);n.length&&l.appendChild(o.createTextNode(e.getAttribute(n[0].value)||""))}else if("counter"===t.name){var r=t.values.filter(au),A=r[1];if((h=r[0])&&nu(h)){var d=s.counters.getCounterValue(h.value),c=A&&nu(A)?Op.parse(s.context,A.value):3;l.appendChild(o.createTextNode(CC(d,c,!1)))}}else if("counters"===t.name){var h,u=t.values.filter(au),p=u[1];A=u[2];if((h=u[0])&&nu(h)){var m=s.counters.getCounterValues(h.value),g=A&&nu(A)?Op.parse(s.context,A.value):3,C=p&&0===p.type?p.value:"",f=m.map((function(e){return CC(e,g,!1)})).join(C);l.appendChild(o.createTextNode(f))}}}else if(20===t.type)switch(t.value){case"open-quote":l.appendChild(o.createTextNode(xm(a.quotes,s.quoteDepth++,!0)));break;case"close-quote":l.appendChild(o.createTextNode(xm(a.quotes,--s.quoteDepth,!1)));break;default:l.appendChild(o.createTextNode(t.value))}})),l.className=TC+" "+HC;var A=n===$m.BEFORE?" "+TC:" "+HC;return _g(t)?t.className.baseValue+=A:t.className+=A,l}}},e.destroy=function(e){return!!e.parentNode&&(e.parentNode.removeChild(e),!0)},e}();!function(e){e[e.BEFORE=0]="BEFORE",e[e.AFTER=1]="AFTER"}($m||($m={}));var bC,wC=function(e,t){var i=e.createElement("iframe");return i.className="html2canvas-container",i.style.visibility="hidden",i.style.position="fixed",i.style.left="-10000px",i.style.top="0px",i.style.border="0",i.width=t.width.toString(),i.height=t.height.toString(),i.scrolling="no",i.setAttribute(fC,"true"),e.body.appendChild(i),i},yC=function(e){return new Promise((function(t){e.complete?t():e.src?(e.onload=t,e.onerror=t):t()}))},BC=function(e){return Promise.all([].slice.call(e.images,0).map(yC))},EC=function(e){return new Promise((function(t,i){var n=e.contentWindow;if(!n)return i("No window assigned for iframe");var s=n.document;n.onload=e.onload=function(){n.onload=e.onload=null;var i=setInterval((function(){s.body.childNodes.length>0&&"complete"===s.readyState&&(clearInterval(i),t(e))}),50)}}))},IC=["all","d","content"],SC=function(e,t){for(var i=e.length-1;i>=0;i--){var n=e.item(i);-1===IC.indexOf(n)&&t.style.setProperty(n,e.getPropertyValue(n))}return t},xC=function(e){var t="";return e&&(t+="<!DOCTYPE ",e.name&&(t+=e.name),e.internalSubset&&(t+=e.internalSubset),e.publicId&&(t+='"'+e.publicId+'"'),e.systemId&&(t+='"'+e.systemId+'"'),t+=">"),t},DC=function(e,t,i){e&&e.defaultView&&(t!==e.defaultView.pageXOffset||i!==e.defaultView.pageYOffset)&&e.defaultView.scrollTo(t,i)},FC=function(e){var t=e[0],i=e[2];t.scrollLeft=e[1],t.scrollTop=i},TC="___html2canvas___pseudoelement_before",HC="___html2canvas___pseudoelement_after",UC='{\n    content: "" !important;\n    display: none !important;\n}',PC=function(e){QC(e,"."+TC+":before"+UC+"\n         ."+HC+":after"+UC)},QC=function(e,t){var i=e.ownerDocument;if(i){var n=i.createElement("style");n.textContent=t,e.appendChild(n)}},NC=function(){function e(){}return e.getOrigin=function(t){var i=e._link;return i?(i.href=t,i.href=i.href,i.protocol+i.hostname+i.port):"about:blank"},e.isSameOrigin=function(t){return e.getOrigin(t)===e._origin},e.setContext=function(t){e._link=t.document.createElement("a"),e._origin=e.getOrigin(t.location.href)},e._origin="about:blank",e}(),RC=function(){function e(e,t){this.context=e,this._options=t,this._cache={}}return e.prototype.addImage=function(e){var t=Promise.resolve();return this.has(e)?t:VC(e)||KC(e)?((this._cache[e]=this.loadImage(e)).catch((function(){})),t):t},e.prototype.match=function(e){return this._cache[e]},e.prototype.loadImage=function(e){return mc(this,void 0,void 0,(function(){var t,i,n,s,r=this;return gc(this,(function(o){switch(o.label){case 0:return t=NC.isSameOrigin(e),i=!OC(e)&&!0===this._options.useCORS&&og.SUPPORT_CORS_IMAGES&&!t,n=!OC(e)&&!t&&!VC(e)&&"string"==typeof this._options.proxy&&og.SUPPORT_CORS_XHR&&!i,t||!1!==this._options.allowTaint||OC(e)||VC(e)||n||i?(s=e,n?[4,this.proxy(s)]:[3,2]):[2];case 1:s=o.sent(),o.label=2;case 2:return this.context.logger.debug("Added image "+e.substring(0,256)),[4,new Promise((function(e,t){var n=new Image;n.onload=function(){return e(n)},n.onerror=t,(_C(s)||i)&&(n.crossOrigin="anonymous"),n.src=s,!0===n.complete&&setTimeout((function(){return e(n)}),500),r._options.imageTimeout>0&&setTimeout((function(){return t("Timed out ("+r._options.imageTimeout+"ms) loading image")}),r._options.imageTimeout)}))];case 3:return[2,o.sent()]}}))}))},e.prototype.has=function(e){return void 0!==this._cache[e]},e.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},e.prototype.proxy=function(e){var t=this,i=this._options.proxy;if(!i)throw new Error("No proxy defined");var n=e.substring(0,256);return new Promise((function(s,r){var o=og.SUPPORT_RESPONSE_TYPE?"blob":"text",a=new XMLHttpRequest;a.onload=function(){if(200===a.status)if("text"===o)s(a.response);else{var e=new FileReader;e.addEventListener("load",(function(){return s(e.result)}),!1),e.addEventListener("error",(function(e){return r(e)}),!1),e.readAsDataURL(a.response)}else r("Failed to proxy resource "+n+" with status code "+a.status)},a.onerror=r;var l=i.indexOf("?")>-1?"&":"?";if(a.open("GET",""+i+l+"url="+encodeURIComponent(e)+"&responseType="+o),"text"!==o&&a instanceof XMLHttpRequest&&(a.responseType=o),t._options.imageTimeout){var A=t._options.imageTimeout;a.timeout=A,a.ontimeout=function(){return r("Timed out ("+A+"ms) proxying "+n)}}a.send()}))},e}(),LC=/^data:image\/svg\+xml/i,MC=/^data:image\/.*;base64,/i,kC=/^data:image\/.*/i,KC=function(e){return og.SUPPORT_SVG_DRAWING||!zC(e)},OC=function(e){return kC.test(e)},_C=function(e){return MC.test(e)},VC=function(e){return"blob"===e.substr(0,4)},zC=function(e){return"svg"===e.substr(-3).toLowerCase()||LC.test(e)},WC=function(){function e(e,t){this.type=0,this.x=e,this.y=t}return e.prototype.add=function(t,i){return new e(this.x+t,this.y+i)},e}(),$C=function(e,t,i){return new WC(e.x+(t.x-e.x)*i,e.y+(t.y-e.y)*i)},GC=function(){function e(e,t,i,n){this.type=1,this.start=e,this.startControl=t,this.endControl=i,this.end=n}return e.prototype.subdivide=function(t,i){var n=$C(this.start,this.startControl,t),s=$C(this.startControl,this.endControl,t),r=$C(this.endControl,this.end,t),o=$C(n,s,t),a=$C(s,r,t),l=$C(o,a,t);return i?new e(this.start,n,o,l):new e(l,a,r,this.end)},e.prototype.add=function(t,i){return new e(this.start.add(t,i),this.startControl.add(t,i),this.endControl.add(t,i),this.end.add(t,i))},e.prototype.reverse=function(){return new e(this.end,this.endControl,this.startControl,this.start)},e}(),qC=function(e){return 1===e.type},YC=function(e){var t=e.styles,i=e.bounds,n=gu(t.borderTopLeftRadius,i.width,i.height),s=n[0],r=n[1],o=gu(t.borderTopRightRadius,i.width,i.height),a=o[0],l=o[1],A=gu(t.borderBottomRightRadius,i.width,i.height),d=A[0],c=A[1],h=gu(t.borderBottomLeftRadius,i.width,i.height),u=h[0],p=h[1],m=[];m.push((s+a)/i.width),m.push((u+d)/i.width),m.push((r+p)/i.height),m.push((l+c)/i.height);var g=Math.max.apply(Math,m);g>1&&(s/=g,r/=g,a/=g,l/=g,d/=g,c/=g,u/=g,p/=g);var C=i.width-a,f=i.height-c,v=i.width-d,b=i.height-p,w=t.borderTopWidth,y=t.borderRightWidth,B=t.borderBottomWidth,E=t.borderLeftWidth,I=Cu(t.paddingTop,e.bounds.width),S=Cu(t.paddingRight,e.bounds.width),x=Cu(t.paddingBottom,e.bounds.width),D=Cu(t.paddingLeft,e.bounds.width);this.topLeftBorderDoubleOuterBox=s>0||r>0?XC(i.left+E/3,i.top+w/3,s-E/3,r-w/3,bC.TOP_LEFT):new WC(i.left+E/3,i.top+w/3),this.topRightBorderDoubleOuterBox=s>0||r>0?XC(i.left+C,i.top+w/3,a-y/3,l-w/3,bC.TOP_RIGHT):new WC(i.left+i.width-y/3,i.top+w/3),this.bottomRightBorderDoubleOuterBox=d>0||c>0?XC(i.left+v,i.top+f,d-y/3,c-B/3,bC.BOTTOM_RIGHT):new WC(i.left+i.width-y/3,i.top+i.height-B/3),this.bottomLeftBorderDoubleOuterBox=u>0||p>0?XC(i.left+E/3,i.top+b,u-E/3,p-B/3,bC.BOTTOM_LEFT):new WC(i.left+E/3,i.top+i.height-B/3),this.topLeftBorderDoubleInnerBox=s>0||r>0?XC(i.left+2*E/3,i.top+2*w/3,s-2*E/3,r-2*w/3,bC.TOP_LEFT):new WC(i.left+2*E/3,i.top+2*w/3),this.topRightBorderDoubleInnerBox=s>0||r>0?XC(i.left+C,i.top+2*w/3,a-2*y/3,l-2*w/3,bC.TOP_RIGHT):new WC(i.left+i.width-2*y/3,i.top+2*w/3),this.bottomRightBorderDoubleInnerBox=d>0||c>0?XC(i.left+v,i.top+f,d-2*y/3,c-2*B/3,bC.BOTTOM_RIGHT):new WC(i.left+i.width-2*y/3,i.top+i.height-2*B/3),this.bottomLeftBorderDoubleInnerBox=u>0||p>0?XC(i.left+2*E/3,i.top+b,u-2*E/3,p-2*B/3,bC.BOTTOM_LEFT):new WC(i.left+2*E/3,i.top+i.height-2*B/3),this.topLeftBorderStroke=s>0||r>0?XC(i.left+E/2,i.top+w/2,s-E/2,r-w/2,bC.TOP_LEFT):new WC(i.left+E/2,i.top+w/2),this.topRightBorderStroke=s>0||r>0?XC(i.left+C,i.top+w/2,a-y/2,l-w/2,bC.TOP_RIGHT):new WC(i.left+i.width-y/2,i.top+w/2),this.bottomRightBorderStroke=d>0||c>0?XC(i.left+v,i.top+f,d-y/2,c-B/2,bC.BOTTOM_RIGHT):new WC(i.left+i.width-y/2,i.top+i.height-B/2),this.bottomLeftBorderStroke=u>0||p>0?XC(i.left+E/2,i.top+b,u-E/2,p-B/2,bC.BOTTOM_LEFT):new WC(i.left+E/2,i.top+i.height-B/2),this.topLeftBorderBox=s>0||r>0?XC(i.left,i.top,s,r,bC.TOP_LEFT):new WC(i.left,i.top),this.topRightBorderBox=a>0||l>0?XC(i.left+C,i.top,a,l,bC.TOP_RIGHT):new WC(i.left+i.width,i.top),this.bottomRightBorderBox=d>0||c>0?XC(i.left+v,i.top+f,d,c,bC.BOTTOM_RIGHT):new WC(i.left+i.width,i.top+i.height),this.bottomLeftBorderBox=u>0||p>0?XC(i.left,i.top+b,u,p,bC.BOTTOM_LEFT):new WC(i.left,i.top+i.height),this.topLeftPaddingBox=s>0||r>0?XC(i.left+E,i.top+w,Math.max(0,s-E),Math.max(0,r-w),bC.TOP_LEFT):new WC(i.left+E,i.top+w),this.topRightPaddingBox=a>0||l>0?XC(i.left+Math.min(C,i.width-y),i.top+w,C>i.width+y?0:Math.max(0,a-y),Math.max(0,l-w),bC.TOP_RIGHT):new WC(i.left+i.width-y,i.top+w),this.bottomRightPaddingBox=d>0||c>0?XC(i.left+Math.min(v,i.width-E),i.top+Math.min(f,i.height-B),Math.max(0,d-y),Math.max(0,c-B),bC.BOTTOM_RIGHT):new WC(i.left+i.width-y,i.top+i.height-B),this.bottomLeftPaddingBox=u>0||p>0?XC(i.left+E,i.top+Math.min(b,i.height-B),Math.max(0,u-E),Math.max(0,p-B),bC.BOTTOM_LEFT):new WC(i.left+E,i.top+i.height-B),this.topLeftContentBox=s>0||r>0?XC(i.left+E+D,i.top+w+I,Math.max(0,s-(E+D)),Math.max(0,r-(w+I)),bC.TOP_LEFT):new WC(i.left+E+D,i.top+w+I),this.topRightContentBox=a>0||l>0?XC(i.left+Math.min(C,i.width+E+D),i.top+w+I,C>i.width+E+D?0:a-E+D,l-(w+I),bC.TOP_RIGHT):new WC(i.left+i.width-(y+S),i.top+w+I),this.bottomRightContentBox=d>0||c>0?XC(i.left+Math.min(v,i.width-(E+D)),i.top+Math.min(f,i.height+w+I),Math.max(0,d-(y+S)),c-(B+x),bC.BOTTOM_RIGHT):new WC(i.left+i.width-(y+S),i.top+i.height-(B+x)),this.bottomLeftContentBox=u>0||p>0?XC(i.left+E+D,i.top+b,Math.max(0,u-(E+D)),p-(B+x),bC.BOTTOM_LEFT):new WC(i.left+E+D,i.top+i.height-(B+x))};!function(e){e[e.TOP_LEFT=0]="TOP_LEFT",e[e.TOP_RIGHT=1]="TOP_RIGHT",e[e.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",e[e.BOTTOM_LEFT=3]="BOTTOM_LEFT"}(bC||(bC={}));var XC=function(e,t,i,n,s){var r=(Math.sqrt(2)-1)/3*4,o=i*r,a=n*r,l=e+i,A=t+n;switch(s){case bC.TOP_LEFT:return new GC(new WC(e,A),new WC(e,A-a),new WC(l-o,t),new WC(l,t));case bC.TOP_RIGHT:return new GC(new WC(e,t),new WC(e+o,t),new WC(l,A-a),new WC(l,A));case bC.BOTTOM_RIGHT:return new GC(new WC(l,t),new WC(l,t+a),new WC(e+o,A),new WC(e,A));default:return new GC(new WC(l,A),new WC(l-o,A),new WC(e,t+a),new WC(e,t))}},JC=function(e){return[e.topLeftBorderBox,e.topRightBorderBox,e.bottomRightBorderBox,e.bottomLeftBorderBox]},jC=function(e){return[e.topLeftPaddingBox,e.topRightPaddingBox,e.bottomRightPaddingBox,e.bottomLeftPaddingBox]},ZC=function(e,t,i){this.offsetX=e,this.offsetY=t,this.matrix=i,this.type=0,this.target=6},ef=function(e,t){this.path=e,this.target=t,this.type=1},tf=function(e){this.opacity=e,this.type=2,this.target=6},nf=function(e){return 1===e.type},sf=function(e,t){return e.length===t.length&&e.some((function(e,i){return e===t[i]}))},rf=function(e){this.element=e,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]},of=function(){function e(e,t){(this.container=e,this.parent=t,this.effects=[],this.curves=new YC(this.container),this.container.styles.opacity<1&&this.effects.push(new tf(this.container.styles.opacity)),null!==this.container.styles.transform)&&this.effects.push(new ZC(this.container.bounds.left+this.container.styles.transformOrigin[0].number,this.container.bounds.top+this.container.styles.transformOrigin[1].number,this.container.styles.transform));if(0!==this.container.styles.overflowX){var i=JC(this.curves),n=jC(this.curves);sf(i,n)?this.effects.push(new ef(i,6)):(this.effects.push(new ef(i,2)),this.effects.push(new ef(n,4)))}}return e.prototype.getEffects=function(e){for(var t=-1===[2,3].indexOf(this.container.styles.position),i=this.parent,n=this.effects.slice(0);i;){var s=i.effects.filter((function(e){return!nf(e)}));if(t||0!==i.container.styles.position||!i.parent){if(n.unshift.apply(n,s),t=-1===[2,3].indexOf(i.container.styles.position),0!==i.container.styles.overflowX){var r=JC(i.curves),o=jC(i.curves);sf(r,o)||n.unshift(new ef(o,6))}}else n.unshift.apply(n,s);i=i.parent}return n.filter((function(t){return wm(t.target,e)}))},e}(),af=function(e,t,i,n){e.container.elements.forEach((function(s){var r=wm(s.flags,4),o=wm(s.flags,2),a=new of(s,e);wm(s.styles.display,2048)&&n.push(a);var l=wm(s.flags,8)?[]:n;if(r||o){var A=r||s.styles.isPositioned()?i:t,d=new rf(a);if(s.styles.isPositioned()||s.styles.opacity<1||s.styles.isTransformed()){var c=s.styles.zIndex.order;if(c<0){var h=0;A.negativeZIndex.some((function(e,t){return c>e.element.container.styles.zIndex.order?(h=t,!1):h>0})),A.negativeZIndex.splice(h,0,d)}else if(c>0){var u=0;A.positiveZIndex.some((function(e,t){return c>=e.element.container.styles.zIndex.order?(u=t+1,!1):u>0})),A.positiveZIndex.splice(u,0,d)}else A.zeroOrAutoZIndexOrTransformedOrOpacity.push(d)}else s.styles.isFloating()?A.nonPositionedFloats.push(d):A.nonPositionedInlineLevel.push(d);af(a,d,r?d:i,l)}else s.styles.isInlineLevel()?t.inlineLevel.push(a):t.nonInlineLevel.push(a),af(a,t,i,l);wm(s.flags,8)&&lf(s,l)}))},lf=function(e,t){for(var i=e instanceof yg?e.start:1,n=e instanceof yg&&e.reversed,s=0;s<t.length;s++){var r=t[s];r.container instanceof wg&&"number"==typeof r.container.value&&0!==r.container.value&&(i=r.container.value),r.listValue=CC(i,r.container.styles.listStyleType,!0),i+=n?-1:1}},Af=function(e,t){switch(t){case 0:return cf(e.topLeftBorderBox,e.topLeftPaddingBox,e.topRightBorderBox,e.topRightPaddingBox);case 1:return cf(e.topRightBorderBox,e.topRightPaddingBox,e.bottomRightBorderBox,e.bottomRightPaddingBox);case 2:return cf(e.bottomRightBorderBox,e.bottomRightPaddingBox,e.bottomLeftBorderBox,e.bottomLeftPaddingBox);default:return cf(e.bottomLeftBorderBox,e.bottomLeftPaddingBox,e.topLeftBorderBox,e.topLeftPaddingBox)}},df=function(e,t){var i=[];return qC(e)?i.push(e.subdivide(.5,!1)):i.push(e),qC(t)?i.push(t.subdivide(.5,!0)):i.push(t),i},cf=function(e,t,i,n){var s=[];return qC(e)?s.push(e.subdivide(.5,!1)):s.push(e),qC(i)?s.push(i.subdivide(.5,!0)):s.push(i),qC(n)?s.push(n.subdivide(.5,!0).reverse()):s.push(n),qC(t)?s.push(t.subdivide(.5,!1).reverse()):s.push(t),s},hf=function(e){var t=e.styles;return e.bounds.add(t.borderLeftWidth,t.borderTopWidth,-(t.borderRightWidth+t.borderLeftWidth),-(t.borderTopWidth+t.borderBottomWidth))},uf=function(e){var t=e.styles,i=e.bounds,n=Cu(t.paddingLeft,i.width),s=Cu(t.paddingRight,i.width),r=Cu(t.paddingTop,i.width),o=Cu(t.paddingBottom,i.width);return i.add(n+t.borderLeftWidth,r+t.borderTopWidth,-(t.borderRightWidth+t.borderLeftWidth+n+s),-(t.borderTopWidth+t.borderBottomWidth+r+o))},pf=function(e,t,i){var n=function(e,t){return 0===e?t.bounds:2===e?uf(t):hf(t)}(ff(e.styles.backgroundOrigin,t),e),s=function(e,t){return 0===e?t.bounds:2===e?uf(t):hf(t)}(ff(e.styles.backgroundClip,t),e),r=Cf(ff(e.styles.backgroundSize,t),i,n),o=r[0],a=r[1],l=gu(ff(e.styles.backgroundPosition,t),n.width-o,n.height-a);return[vf(ff(e.styles.backgroundRepeat,t),l,r,n,s),Math.round(n.left+l[0]),Math.round(n.top+l[1]),o,a]},mf=function(e){return nu(e)&&e.value===Zu.AUTO},gf=function(e){return"number"==typeof e},Cf=function(e,t,i){var n=t[0],s=t[1],r=t[2],o=e[0],a=e[1];if(!o)return[0,0];if(cu(o)&&a&&cu(a))return[Cu(o,i.width),Cu(a,i.height)];var l=gf(r);if(nu(o)&&(o.value===Zu.CONTAIN||o.value===Zu.COVER))return gf(r)?i.width/i.height<r!=(o.value===Zu.COVER)?[i.width,i.width/r]:[i.height*r,i.height]:[i.width,i.height];var A=gf(n),d=gf(s),c=A||d;if(mf(o)&&(!a||mf(a)))return A&&d?[n,s]:l||c?c&&l?[A?n:s*r,d?s:n/r]:[A?n:i.width,d?s:i.height]:[i.width,i.height];if(l){var h=0,u=0;return cu(o)?h=Cu(o,i.width):cu(a)&&(u=Cu(a,i.height)),mf(o)?h=u*r:a&&!mf(a)||(u=h/r),[h,u]}var p=null,m=null;if(cu(o)?p=Cu(o,i.width):a&&cu(a)&&(m=Cu(a,i.height)),null===p||a&&!mf(a)||(m=A&&d?p/n*s:i.height),null!==m&&mf(o)&&(p=A&&d?m/s*n:i.width),null!==p&&null!==m)return[p,m];throw new Error("Unable to calculate background-size for element")},ff=function(e,t){var i=e[t];return void 0===i?e[0]:i},vf=function(e,t,i,n,s){var r=t[0],o=t[1],a=i[0],l=i[1];switch(e){case 2:return[new WC(Math.round(n.left),Math.round(n.top+o)),new WC(Math.round(n.left+n.width),Math.round(n.top+o)),new WC(Math.round(n.left+n.width),Math.round(l+n.top+o)),new WC(Math.round(n.left),Math.round(l+n.top+o))];case 3:return[new WC(Math.round(n.left+r),Math.round(n.top)),new WC(Math.round(n.left+r+a),Math.round(n.top)),new WC(Math.round(n.left+r+a),Math.round(n.height+n.top)),new WC(Math.round(n.left+r),Math.round(n.height+n.top))];case 1:return[new WC(Math.round(n.left+r),Math.round(n.top+o)),new WC(Math.round(n.left+r+a),Math.round(n.top+o)),new WC(Math.round(n.left+r+a),Math.round(n.top+o+l)),new WC(Math.round(n.left+r),Math.round(n.top+o+l))];default:return[new WC(Math.round(s.left),Math.round(s.top)),new WC(Math.round(s.left+s.width),Math.round(s.top)),new WC(Math.round(s.left+s.width),Math.round(s.height+s.top)),new WC(Math.round(s.left),Math.round(s.height+s.top))]}},bf="Hidden Text",wf=function(){function e(e){this._data={},this._document=e}return e.prototype.parseMetrics=function(e,t){var i=this._document.createElement("div"),n=this._document.createElement("img"),s=this._document.createElement("span"),r=this._document.body;i.style.visibility="hidden",i.style.fontFamily=e,i.style.fontSize=t,i.style.margin="0",i.style.padding="0",i.style.whiteSpace="nowrap",r.appendChild(i),n.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",n.width=1,n.height=1,n.style.margin="0",n.style.padding="0",n.style.verticalAlign="baseline",s.style.fontFamily=e,s.style.fontSize=t,s.style.margin="0",s.style.padding="0",s.appendChild(this._document.createTextNode(bf)),i.appendChild(s),i.appendChild(n);var o=n.offsetTop-s.offsetTop+2;i.removeChild(s),i.appendChild(this._document.createTextNode(bf)),i.style.lineHeight="normal",n.style.verticalAlign="super";var a=n.offsetTop-i.offsetTop+2;return r.removeChild(i),{baseline:o,middle:a}},e.prototype.getMetrics=function(e,t){var i=e+" "+t;return void 0===this._data[i]&&(this._data[i]=this.parseMetrics(e,t)),this._data[i]},e}(),yf=function(e,t){this.context=e,this.options=t},Bf=function(e){function t(t,i){var n=e.call(this,t,i)||this;return n._activeEffects=[],n.canvas=i.canvas?i.canvas:document.createElement("canvas"),n.ctx=n.canvas.getContext("2d"),i.canvas||(n.canvas.width=Math.floor(i.width*i.scale),n.canvas.height=Math.floor(i.height*i.scale),n.canvas.style.width=i.width+"px",n.canvas.style.height=i.height+"px"),n.fontMetrics=new wf(document),n.ctx.scale(n.options.scale,n.options.scale),n.ctx.translate(-i.x,-i.y),n.ctx.textBaseline="bottom",n._activeEffects=[],n.context.logger.debug("Canvas renderer initialized ("+i.width+"x"+i.height+") with scale "+i.scale),n}return uc(t,e),t.prototype.applyEffects=function(e){for(var t=this;this._activeEffects.length;)this.popEffect();e.forEach((function(e){return t.applyEffect(e)}))},t.prototype.applyEffect=function(e){this.ctx.save(),function(e){return 2===e.type}(e)&&(this.ctx.globalAlpha=e.opacity),function(e){return 0===e.type}(e)&&(this.ctx.translate(e.offsetX,e.offsetY),this.ctx.transform(e.matrix[0],e.matrix[1],e.matrix[2],e.matrix[3],e.matrix[4],e.matrix[5]),this.ctx.translate(-e.offsetX,-e.offsetY)),nf(e)&&(this.path(e.path),this.ctx.clip()),this._activeEffects.push(e)},t.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},t.prototype.renderStack=function(e){return mc(this,void 0,void 0,(function(){return gc(this,(function(t){switch(t.label){case 0:return e.element.container.styles.isVisible()?[4,this.renderStackContent(e)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},t.prototype.renderNode=function(e){return mc(this,void 0,void 0,(function(){return gc(this,(function(t){switch(t.label){case 0:return wm(e.container.flags,16),e.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(e)]:[3,3];case 1:return t.sent(),[4,this.renderNodeContent(e)];case 2:t.sent(),t.label=3;case 3:return[2]}}))}))},t.prototype.renderTextWithLetterSpacing=function(e,t,i){var n=this;0===t?this.ctx.fillText(e.text,e.bounds.left,e.bounds.top+i):dg(e.text).reduce((function(t,s){return n.ctx.fillText(s,t,e.bounds.top+i),t+n.ctx.measureText(s).width}),e.bounds.left)},t.prototype.createFontStyle=function(e){var t=e.fontVariant.filter((function(e){return"normal"===e||"small-caps"===e})).join(""),i=Df(e.fontFamily).join(", "),n=tu(e.fontSize)?""+e.fontSize.number+e.fontSize.unit:e.fontSize.number+"px";return[[e.fontStyle,t,e.fontWeight,n,i].join(" "),i,n]},t.prototype.renderTextNode=function(e,t){return mc(this,void 0,void 0,(function(){var i,n,s,r,o,a,l,A=this;return gc(this,(function(d){return i=this.createFontStyle(t),n=i[1],s=i[2],this.ctx.font=i[0],this.ctx.direction=1===t.direction?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",r=this.fontMetrics.getMetrics(n,s),o=r.baseline,a=r.middle,l=t.paintOrder,e.textBounds.forEach((function(e){l.forEach((function(i){switch(i){case 0:A.ctx.fillStyle=Su(t.color),A.renderTextWithLetterSpacing(e,t.letterSpacing,o);var n=t.textShadow;n.length&&e.text.trim().length&&(n.slice(0).reverse().forEach((function(i){A.ctx.shadowColor=Su(i.color),A.ctx.shadowOffsetX=i.offsetX.number*A.options.scale,A.ctx.shadowOffsetY=i.offsetY.number*A.options.scale,A.ctx.shadowBlur=i.blur.number,A.renderTextWithLetterSpacing(e,t.letterSpacing,o)})),A.ctx.shadowColor="",A.ctx.shadowOffsetX=0,A.ctx.shadowOffsetY=0,A.ctx.shadowBlur=0),t.textDecorationLine.length&&(A.ctx.fillStyle=Su(t.textDecorationColor||t.color),t.textDecorationLine.forEach((function(t){switch(t){case 1:A.ctx.fillRect(e.bounds.left,Math.round(e.bounds.top+o),e.bounds.width,1);break;case 2:A.ctx.fillRect(e.bounds.left,Math.round(e.bounds.top),e.bounds.width,1);break;case 3:A.ctx.fillRect(e.bounds.left,Math.ceil(e.bounds.top+a),e.bounds.width,1)}})));break;case 1:t.webkitTextStrokeWidth&&e.text.trim().length&&(A.ctx.strokeStyle=Su(t.webkitTextStrokeColor),A.ctx.lineWidth=t.webkitTextStrokeWidth,A.ctx.lineJoin=window.chrome?"miter":"round",A.ctx.strokeText(e.text,e.bounds.left,e.bounds.top+o)),A.ctx.strokeStyle="",A.ctx.lineWidth=0,A.ctx.lineJoin="miter"}}))})),[2]}))}))},t.prototype.renderReplacedElement=function(e,t,i){if(i&&e.intrinsicWidth>0&&e.intrinsicHeight>0){var n=uf(e),s=jC(t);this.path(s),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(i,0,0,e.intrinsicWidth,e.intrinsicHeight,n.left,n.top,n.width,n.height),this.ctx.restore()}},t.prototype.renderNodeContent=function(e){return mc(this,void 0,void 0,(function(){var i,n,s,r,o,a,l,A,d,c,h,u,p,m,g,C;return gc(this,(function(f){switch(f.label){case 0:this.applyEffects(e.getEffects(4)),n=e.curves,s=(i=e.container).styles,r=0,o=i.textNodes,f.label=1;case 1:return r<o.length?[4,this.renderTextNode(o[r],s)]:[3,4];case 2:f.sent(),f.label=3;case 3:return r++,[3,1];case 4:if(!(i instanceof fg))return[3,8];f.label=5;case 5:return f.trys.push([5,7,,8]),[4,this.context.cache.match(i.src)];case 6:return p=f.sent(),this.renderReplacedElement(i,n,p),[3,8];case 7:return f.sent(),this.context.logger.error("Error loading image "+i.src),[3,8];case 8:if(i instanceof vg&&this.renderReplacedElement(i,n,i.canvas),!(i instanceof bg))return[3,12];f.label=9;case 9:return f.trys.push([9,11,,12]),[4,this.context.cache.match(i.svg)];case 10:return p=f.sent(),this.renderReplacedElement(i,n,p),[3,12];case 11:return f.sent(),this.context.logger.error("Error loading svg "+i.svg.substring(0,255)),[3,12];case 12:return i instanceof Ug&&i.tree?[4,new t(this.context,{scale:this.options.scale,backgroundColor:i.backgroundColor,x:0,y:0,width:i.width,height:i.height}).render(i.tree)]:[3,14];case 13:a=f.sent(),i.width&&i.height&&this.ctx.drawImage(a,0,0,i.width,i.height,i.bounds.left,i.bounds.top,i.bounds.width,i.bounds.height),f.label=14;case 14:if(i instanceof Fg&&(l=Math.min(i.bounds.width,i.bounds.height),i.type===Ig?i.checked&&(this.ctx.save(),this.path([new WC(i.bounds.left+.39363*l,i.bounds.top+.79*l),new WC(i.bounds.left+.16*l,i.bounds.top+.5549*l),new WC(i.bounds.left+.27347*l,i.bounds.top+.44071*l),new WC(i.bounds.left+.39694*l,i.bounds.top+.5649*l),new WC(i.bounds.left+.72983*l,i.bounds.top+.23*l),new WC(i.bounds.left+.84*l,i.bounds.top+.34085*l),new WC(i.bounds.left+.39363*l,i.bounds.top+.79*l)]),this.ctx.fillStyle=Su(Dg),this.ctx.fill(),this.ctx.restore()):i.type===Sg&&i.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(i.bounds.left+l/2,i.bounds.top+l/2,l/4,0,2*Math.PI,!0),this.ctx.fillStyle=Su(Dg),this.ctx.fill(),this.ctx.restore())),Ef(i)&&i.value.length){switch(A=this.createFontStyle(s),d=this.fontMetrics.getMetrics(g=A[0],A[1]).baseline,this.ctx.font=g,this.ctx.fillStyle=Su(s.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=Sf(i.styles.textAlign),C=uf(i),c=0,i.styles.textAlign){case 1:c+=C.width/2;break;case 2:c+=C.width}h=C.add(c,0,0,-C.height/2+1),this.ctx.save(),this.path([new WC(C.left,C.top),new WC(C.left+C.width,C.top),new WC(C.left+C.width,C.top+C.height),new WC(C.left,C.top+C.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new ag(i.value,h),s.letterSpacing,d),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!wm(i.styles.display,2048))return[3,20];if(null===i.styles.listStyleImage)return[3,19];if(0!==(u=i.styles.listStyleImage).type)return[3,18];p=void 0,m=u.url,f.label=15;case 15:return f.trys.push([15,17,,18]),[4,this.context.cache.match(m)];case 16:return p=f.sent(),this.ctx.drawImage(p,i.bounds.left-(p.width+10),i.bounds.top),[3,18];case 17:return f.sent(),this.context.logger.error("Error loading list-style-image "+m),[3,18];case 18:return[3,20];case 19:e.listValue&&-1!==i.styles.listStyleType&&(g=this.createFontStyle(s)[0],this.ctx.font=g,this.ctx.fillStyle=Su(s.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",C=new fc(i.bounds.left,i.bounds.top+Cu(i.styles.paddingTop,i.bounds.width),i.bounds.width,Mp(s.lineHeight,s.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new ag(e.listValue,C),s.letterSpacing,Mp(s.lineHeight,s.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),f.label=20;case 20:return[2]}}))}))},t.prototype.renderStackContent=function(e){return mc(this,void 0,void 0,(function(){var t,i,n,s,r,o,a,l,A,d,c,h,u,p;return gc(this,(function(m){switch(m.label){case 0:return wm(e.element.container.flags,16),[4,this.renderNodeBackgroundAndBorders(e.element)];case 1:m.sent(),t=0,i=e.negativeZIndex,m.label=2;case 2:return t<i.length?[4,this.renderStack(i[t])]:[3,5];case 3:m.sent(),m.label=4;case 4:return t++,[3,2];case 5:return[4,this.renderNodeContent(e.element)];case 6:m.sent(),n=0,s=e.nonInlineLevel,m.label=7;case 7:return n<s.length?[4,this.renderNode(s[n])]:[3,10];case 8:m.sent(),m.label=9;case 9:return n++,[3,7];case 10:r=0,o=e.nonPositionedFloats,m.label=11;case 11:return r<o.length?[4,this.renderStack(o[r])]:[3,14];case 12:m.sent(),m.label=13;case 13:return r++,[3,11];case 14:a=0,l=e.nonPositionedInlineLevel,m.label=15;case 15:return a<l.length?[4,this.renderStack(l[a])]:[3,18];case 16:m.sent(),m.label=17;case 17:return a++,[3,15];case 18:A=0,d=e.inlineLevel,m.label=19;case 19:return A<d.length?[4,this.renderNode(d[A])]:[3,22];case 20:m.sent(),m.label=21;case 21:return A++,[3,19];case 22:c=0,h=e.zeroOrAutoZIndexOrTransformedOrOpacity,m.label=23;case 23:return c<h.length?[4,this.renderStack(h[c])]:[3,26];case 24:m.sent(),m.label=25;case 25:return c++,[3,23];case 26:u=0,p=e.positiveZIndex,m.label=27;case 27:return u<p.length?[4,this.renderStack(p[u])]:[3,30];case 28:m.sent(),m.label=29;case 29:return u++,[3,27];case 30:return[2]}}))}))},t.prototype.mask=function(e){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(e.slice(0).reverse()),this.ctx.closePath()},t.prototype.path=function(e){this.ctx.beginPath(),this.formatPath(e),this.ctx.closePath()},t.prototype.formatPath=function(e){var t=this;e.forEach((function(e,i){var n=qC(e)?e.start:e;0===i?t.ctx.moveTo(n.x,n.y):t.ctx.lineTo(n.x,n.y),qC(e)&&t.ctx.bezierCurveTo(e.startControl.x,e.startControl.y,e.endControl.x,e.endControl.y,e.end.x,e.end.y)}))},t.prototype.renderRepeat=function(e,t,i,n){this.path(e),this.ctx.fillStyle=t,this.ctx.translate(i,n),this.ctx.fill(),this.ctx.translate(-i,-n)},t.prototype.resizeImage=function(e,t,i){var n;if(e.width===t&&e.height===i)return e;var s=(null!==(n=this.canvas.ownerDocument)&&void 0!==n?n:document).createElement("canvas");return s.width=Math.max(1,t),s.height=Math.max(1,i),s.getContext("2d").drawImage(e,0,0,e.width,e.height,0,0,t,i),s},t.prototype.renderBackgroundImage=function(e){return mc(this,void 0,void 0,(function(){var t,i,n,s,r;return gc(this,(function(o){switch(o.label){case 0:t=e.styles.backgroundImage.length-1,i=function(i){var s,r,o,a,l,A,d,c,h,u,p,m,g,C,f,v,b,w,y,B,E,I,S,x,D,F,T,H,U,P,Q;return gc(this,(function(N){switch(N.label){case 0:if(0!==i.type)return[3,5];s=void 0,r=i.url,N.label=1;case 1:return N.trys.push([1,3,,4]),[4,n.context.cache.match(r)];case 2:return s=N.sent(),[3,4];case 3:return N.sent(),n.context.logger.error("Error loading background-image "+r),[3,4];case 4:return s&&(o=pf(e,t,[s.width,s.height,s.width/s.height]),v=o[0],I=o[1],S=o[2],C=n.ctx.createPattern(n.resizeImage(s,y=o[3],B=o[4]),"repeat"),n.renderRepeat(v,C,I,S)),[3,6];case 5:1===i.type?(a=pf(e,t,[null,null,null]),v=a[0],I=a[1],S=a[2],l=ku(i.angle,y=a[3],B=a[4]),A=l[0],d=l[1],c=l[2],h=l[3],u=l[4],(p=document.createElement("canvas")).width=y,p.height=B,m=p.getContext("2d"),g=m.createLinearGradient(d,h,c,u),Mu(i.stops,A).forEach((function(e){return g.addColorStop(e.stop,Su(e.color))})),m.fillStyle=g,m.fillRect(0,0,y,B),y>0&&B>0&&(C=n.ctx.createPattern(p,"repeat"),n.renderRepeat(v,C,I,S))):function(e){return 2===e.type}(i)&&(f=pf(e,t,[null,null,null]),v=f[0],b=f[1],w=f[2],B=f[4],I=Cu((E=0===i.position.length?[pu]:i.position)[0],y=f[3]),S=Cu(E[E.length-1],B),x=function(e,t,i,n,s){var r=0,o=0;switch(e.size){case 0:0===e.shape?r=o=Math.min(Math.abs(t),Math.abs(t-n),Math.abs(i),Math.abs(i-s)):1===e.shape&&(r=Math.min(Math.abs(t),Math.abs(t-n)),o=Math.min(Math.abs(i),Math.abs(i-s)));break;case 2:if(0===e.shape)r=o=Math.min(Ku(t,i),Ku(t,i-s),Ku(t-n,i),Ku(t-n,i-s));else if(1===e.shape){var a=Math.min(Math.abs(i),Math.abs(i-s))/Math.min(Math.abs(t),Math.abs(t-n)),l=Ou(n,s,t,i,!0);o=a*(r=Ku(l[0]-t,(l[1]-i)/a))}break;case 1:0===e.shape?r=o=Math.max(Math.abs(t),Math.abs(t-n),Math.abs(i),Math.abs(i-s)):1===e.shape&&(r=Math.max(Math.abs(t),Math.abs(t-n)),o=Math.max(Math.abs(i),Math.abs(i-s)));break;case 3:if(0===e.shape)r=o=Math.max(Ku(t,i),Ku(t,i-s),Ku(t-n,i),Ku(t-n,i-s));else if(1===e.shape){a=Math.max(Math.abs(i),Math.abs(i-s))/Math.max(Math.abs(t),Math.abs(t-n));var A=Ou(n,s,t,i,!1);o=a*(r=Ku(A[0]-t,(A[1]-i)/a))}}return Array.isArray(e.size)&&(r=Cu(e.size[0],n),o=2===e.size.length?Cu(e.size[1],s):r),[r,o]}(i,I,S,y,B),F=x[1],(D=x[0])>0&&F>0&&(T=n.ctx.createRadialGradient(b+I,w+S,0,b+I,w+S,D),Mu(i.stops,2*D).forEach((function(e){return T.addColorStop(e.stop,Su(e.color))})),n.path(v),n.ctx.fillStyle=T,D!==F?(H=e.bounds.left+.5*e.bounds.width,U=e.bounds.top+.5*e.bounds.height,Q=1/(P=F/D),n.ctx.save(),n.ctx.translate(H,U),n.ctx.transform(1,0,0,P,0,0),n.ctx.translate(-H,-U),n.ctx.fillRect(b,Q*(w-U)+U,y,B*Q),n.ctx.restore()):n.ctx.fill())),N.label=6;case 6:return t--,[2]}}))},n=this,s=0,r=e.styles.backgroundImage.slice(0).reverse(),o.label=1;case 1:return s<r.length?[5,i(r[s])]:[3,4];case 2:o.sent(),o.label=3;case 3:return s++,[3,1];case 4:return[2]}}))}))},t.prototype.renderSolidBorder=function(e,t,i){return mc(this,void 0,void 0,(function(){return gc(this,(function(n){return this.path(Af(i,t)),this.ctx.fillStyle=Su(e),this.ctx.fill(),[2]}))}))},t.prototype.renderDoubleBorder=function(e,t,i,n){return mc(this,void 0,void 0,(function(){var s,r;return gc(this,(function(o){switch(o.label){case 0:return t<3?[4,this.renderSolidBorder(e,i,n)]:[3,2];case 1:return o.sent(),[2];case 2:return s=function(e,t){switch(t){case 0:return cf(e.topLeftBorderBox,e.topLeftBorderDoubleOuterBox,e.topRightBorderBox,e.topRightBorderDoubleOuterBox);case 1:return cf(e.topRightBorderBox,e.topRightBorderDoubleOuterBox,e.bottomRightBorderBox,e.bottomRightBorderDoubleOuterBox);case 2:return cf(e.bottomRightBorderBox,e.bottomRightBorderDoubleOuterBox,e.bottomLeftBorderBox,e.bottomLeftBorderDoubleOuterBox);default:return cf(e.bottomLeftBorderBox,e.bottomLeftBorderDoubleOuterBox,e.topLeftBorderBox,e.topLeftBorderDoubleOuterBox)}}(n,i),this.path(s),this.ctx.fillStyle=Su(e),this.ctx.fill(),r=function(e,t){switch(t){case 0:return cf(e.topLeftBorderDoubleInnerBox,e.topLeftPaddingBox,e.topRightBorderDoubleInnerBox,e.topRightPaddingBox);case 1:return cf(e.topRightBorderDoubleInnerBox,e.topRightPaddingBox,e.bottomRightBorderDoubleInnerBox,e.bottomRightPaddingBox);case 2:return cf(e.bottomRightBorderDoubleInnerBox,e.bottomRightPaddingBox,e.bottomLeftBorderDoubleInnerBox,e.bottomLeftPaddingBox);default:return cf(e.bottomLeftBorderDoubleInnerBox,e.bottomLeftPaddingBox,e.topLeftBorderDoubleInnerBox,e.topLeftPaddingBox)}}(n,i),this.path(r),this.ctx.fill(),[2]}}))}))},t.prototype.renderNodeBackgroundAndBorders=function(e){return mc(this,void 0,void 0,(function(){var t,i,n,s,r,o,a,l,A=this;return gc(this,(function(d){switch(d.label){case 0:return this.applyEffects(e.getEffects(2)),i=!Iu((t=e.container.styles).backgroundColor)||t.backgroundImage.length,n=[{style:t.borderTopStyle,color:t.borderTopColor,width:t.borderTopWidth},{style:t.borderRightStyle,color:t.borderRightColor,width:t.borderRightWidth},{style:t.borderBottomStyle,color:t.borderBottomColor,width:t.borderBottomWidth},{style:t.borderLeftStyle,color:t.borderLeftColor,width:t.borderLeftWidth}],s=If(ff(t.backgroundClip,0),e.curves),i||t.boxShadow.length?(this.ctx.save(),this.path(s),this.ctx.clip(),Iu(t.backgroundColor)||(this.ctx.fillStyle=Su(t.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(e.container)]):[3,2];case 1:d.sent(),this.ctx.restore(),t.boxShadow.slice(0).reverse().forEach((function(t){A.ctx.save();var i,n,s,r,o=JC(e.curves),a=t.inset?0:1e4,l=(i=(t.inset?1:-1)*t.spread.number-a,n=(t.inset?1:-1)*t.spread.number,s=t.spread.number*(t.inset?-2:2),r=t.spread.number*(t.inset?-2:2),o.map((function(e,t){switch(t){case 0:return e.add(i,n);case 1:return e.add(i+s,n);case 2:return e.add(i+s,n+r);case 3:return e.add(i,n+r)}return e})));t.inset?(A.path(o),A.ctx.clip(),A.mask(l)):(A.mask(o),A.ctx.clip(),A.path(l)),A.ctx.shadowOffsetX=t.offsetX.number+a,A.ctx.shadowOffsetY=t.offsetY.number,A.ctx.shadowColor=Su(t.color),A.ctx.shadowBlur=t.blur.number,A.ctx.fillStyle=t.inset?Su(t.color):"rgba(0,0,0,1)",A.ctx.fill(),A.ctx.restore()})),d.label=2;case 2:r=0,o=0,a=n,d.label=3;case 3:return o<a.length?0!==(l=a[o]).style&&!Iu(l.color)&&l.width>0?2!==l.style?[3,5]:[4,this.renderDashedDottedBorder(l.color,l.width,r,e.curves,2)]:[3,11]:[3,13];case 4:return d.sent(),[3,11];case 5:return 3!==l.style?[3,7]:[4,this.renderDashedDottedBorder(l.color,l.width,r,e.curves,3)];case 6:return d.sent(),[3,11];case 7:return 4!==l.style?[3,9]:[4,this.renderDoubleBorder(l.color,l.width,r,e.curves)];case 8:return d.sent(),[3,11];case 9:return[4,this.renderSolidBorder(l.color,r,e.curves)];case 10:d.sent(),d.label=11;case 11:r++,d.label=12;case 12:return o++,[3,3];case 13:return[2]}}))}))},t.prototype.renderDashedDottedBorder=function(e,t,i,n,s){return mc(this,void 0,void 0,(function(){var r,o,a,l,A,d,c,h,u,p,m,g,C,f,v,b;return gc(this,(function(w){return this.ctx.save(),r=function(e,t){switch(t){case 0:return df(e.topLeftBorderStroke,e.topRightBorderStroke);case 1:return df(e.topRightBorderStroke,e.bottomRightBorderStroke);case 2:return df(e.bottomRightBorderStroke,e.bottomLeftBorderStroke);default:return df(e.bottomLeftBorderStroke,e.topLeftBorderStroke)}}(n,i),o=Af(n,i),2===s&&(this.path(o),this.ctx.clip()),qC(o[0])?(a=o[0].start.x,l=o[0].start.y):(a=o[0].x,l=o[0].y),qC(o[1])?(A=o[1].end.x,d=o[1].end.y):(A=o[1].x,d=o[1].y),c=0===i||2===i?Math.abs(a-A):Math.abs(l-d),this.ctx.beginPath(),this.formatPath(3===s?r:o.slice(0,2)),h=t<3?3*t:2*t,u=t<3?2*t:t,3===s&&(h=t,u=t),p=!0,c<=2*h?p=!1:c<=2*h+u?(h*=m=c/(2*h+u),u*=m):(g=Math.floor((c+u)/(h+u)),C=(c-g*h)/(g-1),u=(f=(c-(g+1)*h)/g)<=0||Math.abs(u-C)<Math.abs(u-f)?C:f),p&&this.ctx.setLineDash(3===s?[0,h+u]:[h,u]),3===s?(this.ctx.lineCap="round",this.ctx.lineWidth=t):this.ctx.lineWidth=2*t+1.1,this.ctx.strokeStyle=Su(e),this.ctx.stroke(),this.ctx.setLineDash([]),2===s&&(qC(o[0])&&(v=o[3],b=o[0],this.ctx.beginPath(),this.formatPath([new WC(v.end.x,v.end.y),new WC(b.start.x,b.start.y)]),this.ctx.stroke()),qC(o[1])&&(v=o[1],b=o[2],this.ctx.beginPath(),this.formatPath([new WC(v.end.x,v.end.y),new WC(b.start.x,b.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]}))}))},t.prototype.render=function(e){return mc(this,void 0,void 0,(function(){return gc(this,(function(t){switch(t.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=Su(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),i=new of(e,null),n=new rf(i),af(i,n,n,s=[]),lf(i.container,s),[4,this.renderStack(n)];case 1:return t.sent(),this.applyEffects([]),[2,this.canvas]}var i,n,s}))}))},t}(yf),Ef=function(e){return e instanceof Hg||(e instanceof Tg||e instanceof Fg&&e.type!==Sg&&e.type!==Ig)},If=function(e,t){switch(e){case 0:return JC(t);case 2:return function(e){return[e.topLeftContentBox,e.topRightContentBox,e.bottomRightContentBox,e.bottomLeftContentBox]}(t);default:return jC(t)}},Sf=function(e){switch(e){case 1:return"center";case 2:return"right";default:return"left"}},xf=["-apple-system","system-ui"],Df=function(e){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?e.filter((function(e){return-1===xf.indexOf(e)})):e},Ff=function(e){function t(t,i){var n=e.call(this,t,i)||this;return n.canvas=i.canvas?i.canvas:document.createElement("canvas"),n.ctx=n.canvas.getContext("2d"),n.options=i,n.canvas.width=Math.floor(i.width*i.scale),n.canvas.height=Math.floor(i.height*i.scale),n.canvas.style.width=i.width+"px",n.canvas.style.height=i.height+"px",n.ctx.scale(n.options.scale,n.options.scale),n.ctx.translate(-i.x,-i.y),n.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+i.width+"x"+i.height+" at "+i.x+","+i.y+") with scale "+i.scale),n}return uc(t,e),t.prototype.render=function(e){return mc(this,void 0,void 0,(function(){var t,i;return gc(this,(function(n){switch(n.label){case 0:return t=sg(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,e),[4,Tf(t)];case 1:return i=n.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=Su(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(i,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}}))}))},t}(yf),Tf=function(e){return new Promise((function(t,i){var n=new Image;n.onload=function(){t(n)},n.onerror=i,n.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent((new XMLSerializer).serializeToString(e))}))},Hf=function(){function e(e){var t=e.enabled;this.id=e.id,this.enabled=t,this.start=Date.now()}return e.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.enabled&&("undefined"!=typeof window&&window.console&&"function"==typeof console.debug?console.debug.apply(console,Cc([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},e.prototype.getTime=function(){return Date.now()-this.start},e.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.enabled&&"undefined"!=typeof window&&window.console&&"function"==typeof console.info&&console.info.apply(console,Cc([this.id,this.getTime()+"ms"],e))},e.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.enabled&&("undefined"!=typeof window&&window.console&&"function"==typeof console.warn?console.warn.apply(console,Cc([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},e.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.enabled&&("undefined"!=typeof window&&window.console&&"function"==typeof console.error?console.error.apply(console,Cc([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},e.instances={},e}(),Uf=function(){function e(t,i){var n;this.windowBounds=i,this.instanceName="#"+e.instanceCount++,this.logger=new Hf({id:this.instanceName,enabled:t.logging}),this.cache=null!==(n=t.cache)&&void 0!==n?n:new RC(this,t)}return e.instanceCount=1,e}(),Pf=function(e,t){return void 0===t&&(t={}),Qf(e,t)};"undefined"!=typeof window&&NC.setContext(window);var Qf=function(e,t){return mc(void 0,void 0,void 0,(function(){var i,n,s,r,o,a,l,A,d,c,h,u,p,m,g,C,f,v,b,w,y,B,E,I,S,x,D,F,T,H,U,P,Q,N,R,L,M,k;return gc(this,(function(K){switch(K.label){case 0:if(!e||"object"!=typeof e)return[2,Promise.reject("Invalid element provided as first argument")];if(!(i=e.ownerDocument))throw new Error("Element is not attached to a Document");if(!(n=i.defaultView))throw new Error("Document is not attached to a Window");return s={allowTaint:null!==(B=t.allowTaint)&&void 0!==B&&B,imageTimeout:null!==(E=t.imageTimeout)&&void 0!==E?E:15e3,proxy:t.proxy,useCORS:null!==(I=t.useCORS)&&void 0!==I&&I},r=pc({logging:null===(S=t.logging)||void 0===S||S,cache:t.cache},s),o={windowWidth:null!==(x=t.windowWidth)&&void 0!==x?x:n.innerWidth,windowHeight:null!==(D=t.windowHeight)&&void 0!==D?D:n.innerHeight,scrollX:null!==(F=t.scrollX)&&void 0!==F?F:n.pageXOffset,scrollY:null!==(T=t.scrollY)&&void 0!==T?T:n.pageYOffset},a=new fc(o.scrollX,o.scrollY,o.windowWidth,o.windowHeight),l=new Uf(r,a),A=null!==(H=t.foreignObjectRendering)&&void 0!==H&&H,d={allowTaint:null!==(U=t.allowTaint)&&void 0!==U&&U,onclone:t.onclone,ignoreElements:t.ignoreElements,inlineImages:A,copyStyles:A},l.logger.debug("Starting document clone with size "+a.width+"x"+a.height+" scrolled to "+-a.left+","+-a.top),c=new vC(l,e,d),(h=c.clonedReferenceElement)?[4,c.toIFrame(i,a)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return u=K.sent(),p=Gg(h)||"HTML"===h.tagName?function(e){var t=e.body,i=e.documentElement;if(!t||!i)throw new Error("Unable to get document size");var n=Math.max(Math.max(t.scrollWidth,i.scrollWidth),Math.max(t.offsetWidth,i.offsetWidth),Math.max(t.clientWidth,i.clientWidth)),s=Math.max(Math.max(t.scrollHeight,i.scrollHeight),Math.max(t.offsetHeight,i.offsetHeight),Math.max(t.clientHeight,i.clientHeight));return new fc(0,0,n,s)}(h.ownerDocument):vc(l,h),m=p.width,g=p.height,C=p.left,f=p.top,v=Nf(l,h,t.backgroundColor),b={canvas:t.canvas,backgroundColor:v,scale:null!==(Q=null!==(P=t.scale)&&void 0!==P?P:n.devicePixelRatio)&&void 0!==Q?Q:1,x:(null!==(N=t.x)&&void 0!==N?N:0)+C,y:(null!==(R=t.y)&&void 0!==R?R:0)+f,width:null!==(L=t.width)&&void 0!==L?L:Math.ceil(m),height:null!==(M=t.height)&&void 0!==M?M:Math.ceil(g)},A?(l.logger.debug("Document cloned, using foreign object rendering"),[4,new Ff(l,b).render(h)]):[3,3];case 2:return w=K.sent(),[3,5];case 3:return l.logger.debug("Document cloned, element located at "+C+","+f+" with size "+m+"x"+g+" using computed rendering"),l.logger.debug("Starting DOM parsing"),y=Rg(l,h),v===y.styles.backgroundColor&&(y.styles.backgroundColor=Qu.TRANSPARENT),l.logger.debug("Starting renderer for element at "+b.x+","+b.y+" with size "+b.width+"x"+b.height),[4,new Bf(l,b).render(y)];case 4:w=K.sent(),K.label=5;case 5:return(null===(k=t.removeContainer)||void 0===k||k)&&(vC.destroy(u)||l.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore")),l.logger.debug("Finished rendering"),[2,w]}}))}))},Nf=function(e,t,i){var n=t.ownerDocument,s=n.documentElement?Pu(e,getComputedStyle(n.documentElement).backgroundColor):Qu.TRANSPARENT,r=n.body?Pu(e,getComputedStyle(n.body).backgroundColor):Qu.TRANSPARENT,o="string"==typeof i?Pu(e,i):null===i?Qu.TRANSPARENT:4294967295;return t===n.documentElement?Iu(s)?Iu(r)?o:r:s:o};let Rf="";function Lf(e){if(!e)return"";const t=window.getComputedStyle(e);return function(e){const t=((null==e?void 0:e.backgroundColor)||"").replace(/\s+|rgba\(|\)/g,"").toLowerCase();if(""===t||"transparent"===t||"0"===(null==e?void 0:e.opacity))return!0;const i=t.split(",");return 4===i.length&&"0"===i[3]}(t)?Lf(e.parentElement):t.backgroundColor}async function Mf(e,t,i,n,s,r){if(!(e=Mt(e)))return Promise.reject();(await Md.getInstance().getVizModule()).exportFromMarkup("<div></div>",{fileName:t,format:i,width:e.clientWidth,height:e.clientHeight,backgroundColor:s||Lf(e),margin:n||void 0,svgToCanvas:async function(t,i){const n=await function(e){return new Promise(((t,i)=>{const n=e.cloneNode(!0);kf(e,n);const s=document.createElement("IFRAME");s.style.cssText="position: absolute; left: -10000px; top: -10000px; visibility: hidden; opacity: 0;",s.onload=()=>{s.contentDocument.body.appendChild(n),s.contentDocument.body.style.margin="0px",t(s)},document.body.appendChild(s)}))}(e),r=n.contentDocument.body;await Pf(r,{canvas:i,backgroundColor:s,scale:1,width:e.clientWidth,height:e.clientHeight}),document.body.removeChild(n)},onFileSaving:r})}function kf(e,t){!function(e,t){const i=window.getComputedStyle(e);for(let e=0;e<i.length;e++){const n=i[e],s=i.getPropertyValue(n);t.style.setProperty(n,s)}}(e,t);const i=e.childNodes,n=t.childNodes,s=i.length;for(let e=0;e<s;e++){const t=i[e];if(1===t.nodeType){kf(t,n[e])}}}const Kf="dxbl-chart-base";class Of extends Kd{constructor(){super(Of.eventName)}}Of.eventName=Kf+".drawn";class _f extends CustomEvent{constructor(e){super(_f.eventName,{detail:new Yf(e),bubbles:!0,composed:!0,cancelable:!0})}}_f.eventName=Kf+".tooltip-showing";class Vf extends CustomEvent{constructor(e){super(Vf.eventName,{detail:new Xf(e),bubbles:!0,composed:!0,cancelable:!0})}}Vf.eventName=Kf+".series-click";class zf extends CustomEvent{constructor(e){super(zf.eventName,{detail:new Jf(e),bubbles:!0,composed:!0,cancelable:!0})}}zf.eventName=Kf+".selection-changed";class Wf extends CustomEvent{constructor(e,t){super(Wf.eventName,{detail:new jf(e,t),bubbles:!0,composed:!0,cancelable:!0})}}Wf.eventName=Kf+".legend-click";class $f extends CustomEvent{constructor(e){super($f.eventName,{detail:new Gf(e),bubbles:!0,composed:!0,cancelable:!0})}}$f.eventName=Kf+".visual-range-changed";class Gf{constructor(e){const{startValue:t,endValue:i}=e.range,{startValue:n,endValue:s}=e.previousRange;this.IsArgumentAxis=e.axis.isArgumentAxis,this.PreviousRange={startValue:n,endValue:s},this.CurrentRange={startValue:t,endValue:i},this.ChangeSource=e.actionType,this.AxisName=e.axis.name}}class qf{constructor(e){this.SeriesIndex=e.seriesIndex,this.Tag=e.tag,this.Data=e.data}}class Yf extends qf{constructor(e){super(e),this.Id=e.id}}class Xf extends qf{}class Jf extends qf{constructor(e){super(e),this.IsSeriesSelected=e.isSeriesSelected,this.IsPointSelected=e.isPointSelected}}class jf{constructor(e,t){this.SeriesIndex=e,this.PointId=t}}gt.register(Of.eventName,(e=>e.detail)),gt.register(_f.eventName,(e=>e.detail)),gt.register(Vf.eventName,(e=>e.detail)),gt.register(zf.eventName,(e=>e.detail)),gt.register(Wf.eventName,(e=>e.detail)),gt.register($f.eventName,(e=>e.detail)),le();const Zf="dxChartLegendElementHasMouseoverEvent";class ev extends ic{get widgetSettingsConverter(){return this._widgetSettingsConverter}get styleHelper(){return this._styleHelper}get selectionController(){return this._selectionController}constructor(){super(),this._isChartUpdating=!1,this.legendMouseOverHandler=this.onLegendMouseOver.bind(this),this._styleHelper=cc.getInstance(),this._drawnExecutor=nc(this.onChartDrawn.bind(this)),this._serverDrawnExecutor=nc(this.dispatchServerDrawnEvent.bind(this)),this._selectionController=new Pd(this),this._tooltipHelper=new Id(this),this._selectionController.setChartType(this.getWidgetTypeName()),this._widgetSettingsConverter=this.createWidgetSettingsConverter()}disposeComponent(){super.disposeComponent(),this._drawnExecutor.reset(),this._serverDrawnExecutor.reset(),this._selectionController.dispose(),this.removeLegendMouseHandler();const e=this.querySelectorAll("."+md);for(let t=0;t<e.length;t++){const i=e[t];i&&yi(i)}}resetSelection(){this.selectionController.resetSelection(),this.afterWidgetResolved((e=>{e.clearSelection()}))}selectSeries(e){this.afterWidgetResolved((t=>{const i=t.getSeriesByPos(e);i&&!i.isSelected()&&this.selectionController.toggleSeriesSelection(i)}))}deselectSeries(e){this.afterWidgetResolved((t=>{const i=t.getSeriesByPos(e);(null==i?void 0:i.isSelected())&&this.selectionController.toggleSeriesSelection(i)}))}selectPoints(e,t){this.afterWidgetResolved((i=>{const n=i.getSeriesByPos(e);if(n)for(let e=0;e<t.length;e++){const i=ev.getPointByData(n,t[e]);i&&!i.isSelected()&&this.selectionController.togglePointSelection(i)}}))}deselectPoints(e,t){this.afterWidgetResolved((i=>{const n=i.getSeriesByPos(e);if(n)for(let e=0;e<t.length;e++){const i=ev.getPointByData(n,t[e]);(null==i?void 0:i.isSelected())&&this.selectionController.togglePointSelection(i)}}))}onSeriesVisibleChanged(e,t,i){var n;null===(n=this._widgetPromise)||void 0===n||n.then((function(n){const s=yd(n,e,t);i?s.show():s.hide()})).catch((e=>console.error(e)))}exportToFile(e,t,i,n){return function(e,t,i,n,s){return Mf(e,t,i,n,s,void 0)}(this,e,t,i,n)}exportToBase64AndGetLength(e,t,i){return async function(e,t,i,n){return new Promise(((s,r)=>{Mf(e,"",t,i,n,(function(e){e.cancel=!0;const t=new FileReader;t.readAsDataURL(e.data),t.onloadend=function(){Rf=t.result,s(Rf.length)}}))}))}(this,e,t,i)}getBase64ImageChunk(e,t){return async function(e,t){return new Promise(((i,n)=>{i(Rf.substring(e,t))}))}(e,t)}clearBase64ImageData(){return async function(){return new Promise(((e,t)=>{Rf="",e()}))}()}showTooltipForPoint(e,t){var i;null===(i=this._widgetPromise)||void 0===i||i.then((i=>{const n=i.getSeriesByPos(t);if(!n)return;let s=e[sc.defaultSeriesArgumentField];"datetime"===n.argumentType&&"string"==typeof s&&(s=new Date(s));const r=n.getPointsByArg(s),o=(null==r?void 0:r.find((t=>t.originalValue===e[sc.defaultSeriesValueField])))||r[0];null==o||o.showTooltip()})).catch((e=>{pi(this)||console.error(e)}))}correctTooltipPosition(){this._tooltipHelper.positionTooltip()}hideTooltip(e){this._tooltipHelper.hideTooltip(e)}render(){this.executeClientMethod("render")}refreshTheme(){var e;null===(e=this._widgetPromise)||void 0===e||e.then((e=>e.option("palette",this._styleHelper.palette))),this.updateWidgetTheme()}onSeriesClick(e,t,i){const n=new Vf({seriesIndex:e,data:t,tag:i});this.dispatchEvent(n)}onSelectionChanged(e){const t=new zf(e);this.dispatchEvent(t)}onTooltipShowing(e){const t=new _f(e);this.dispatchEvent(t)}createWidgetDefaultOptions(){return{...this.widgetSettingsConverter.createDefaultSettings(),palette:this.styleHelper.palette}}processSpecialOptions(e){super.processSpecialOptions(e),this.onBeforeChartOptionsCompleted(e);const t=this.widgetSettingsConverter.convert(e);Object.getOwnPropertyNames(e).forEach((t=>delete e[t])),Object.assign(e,t),this.correctChartElementHeight()}correctChartElementHeight(){const e=this.getWidgetElement();this.style.getPropertyValue("height")||e.style.setProperty("min-height","300px")}onBeforeChartOptionsCompleted(e){var t;this.configureSelectionController(e),this.hasTooltip(e)&&this.addLegendMouseHandler(),(null===(t=e.legend)||void 0===t?void 0:t.visible)&&this.afterWidgetResolved((e=>{bd(this,e,this.getLegendItemType(),this.selectionController)}))}configureSelectionController(e){void 0!==e.pointSelectionMode&&this._selectionController.setPointSelectionMode(e.pointSelectionMode)}hasTooltip(e){var t;return!!(null===(t=e.tooltip)||void 0===t?void 0:t.enabled)}addLegendMouseHandler(){const e=this.querySelector("."+hd);e&&!e.hasAttribute(Zf)&&(e.addEventListener("mouseover",this.legendMouseOverHandler),e.setAttribute(Zf,"true"))}removeLegendMouseHandler(){const e=this.querySelector("."+hd);null==e||e.removeEventListener("mouseover",this.legendMouseOverHandler),null==e||e.removeAttribute(Zf)}onLegendMouseOver(){this._tooltipHelper.hideTooltip(!0)}createWidgetHandlers(){const e=this.selectionController;return{...super.createWidgetHandlers(),onPointClick:this.getChartOnPointClickHandler(),onSeriesClick:this.getChartOnSeriesClickHandler(),onPointSelectionChanged:t=>{e.pointSelectionChanged(t)},onSeriesSelectionChanged:t=>{e.seriesSelectionChanged(t)},onPointHoverChanged:t=>{this._isChartUpdating||e.pointHoverChanged(t)},onSeriesHoverChanged:t=>{this._isChartUpdating||e.seriesHoverChanged(t)},onDrawn:this.getChartOnDrawnHandler(),onOptionChanged:()=>this.onChartOptionChanged(),onTooltipShown:e=>this._tooltipHelper.onTooltipShown(e,this.onTooltipShowing.bind(this)),onTooltipHidden:e=>this._tooltipHelper.onTooltipHidden(e)}}getChartOnDrawnHandler(){return e=>{const t=this._selectionController;bd(this,e.component,this.getLegendItemType(),t),t.restoreChartSelection(e.component),this.onChartDrawn()}}getChartOnSeriesClickHandler(){}onChartDrawn(){this._drawnExecutor.reset(),this.changeLoadingPanelVisibility(!1),this._serverDrawnExecutor.execute(),this.endChartUpdating(),Ai(this,"dxbl-chart-first-loading",!1)}dispatchServerDrawnEvent(){this.dispatchEvent(new Of)}onChartOptionChanged(){this._isChartUpdating&&this._drawnExecutor.execute()}onlyContainerSizeChanged(){this.onChartDrawn()}nonWidgetOptionChanged(){this.changeLoadingPanelVisibility(!1)}updateWidgetOptions(e,t){this.startChartUpdating(),t.animation={enabled:!1},this.prepareSpecialOptions(t,e),super.updateWidgetOptions(e,t)}prepareSpecialOptions(e,t){var i;const n=sc.argumentAxisKey,s=sc.visualRangeKey,r=null===(i=e[n])||void 0===i?void 0:i[s],o=t.option(`${n}.${s}`);r&&o&&(e[n][s]=Object.assign(o,r))}getSkippedEmptyOptions(){return["dataSource"]}startChartUpdating(){this._isChartUpdating=!0}endChartUpdating(){this._isChartUpdating=!1}static getPointByData(e,t){let i=t[sc.defaultSeriesArgumentField],n=t[sc.defaultSeriesValueField];const s=e.valueType;return"datetime"===e.argumentType&&"string"==typeof i&&(i=new Date(i)),"datetime"===s&&"string"==typeof n&&(n=new Date(n).getTime()),e.getPointsByArg(i).find((e=>"datetime"===s?e.originalValue.getTime()===n:e.originalValue===n))}onLegendClick(e,t){const i=new Wf(e,t);this.dispatchEvent(i)}}const tv=`${sc.commonAxisSettingsKey}.title.font.${sc.colorKey}`,iv=`${sc.commonAxisSettingsKey}.${sc.constantLineStyleKey}.${sc.colorKey}`,nv=`${sc.commonAxisSettingsKey}.${sc.colorKey}`,sv=`${sc.commonSeriesSettingsKey}.valueErrorBar.${sc.colorKey}`,rv=`${sc.commonAnnotationSettingsKey}.${sc.colorKey}`,ov=`${sc.commonAnnotationSettingsKey}.font.${sc.colorKey}`,av=`${sc.commonSeriesSettingsKey}.candlestick.innerColor`,lv=`zoomAndPan.dragBoxStyle.${sc.colorKey}`,Av=`${sc.commonAxisSettingsKey}.label.font.${sc.colorKey}`,dv=`${sc.commonAxisSettingsKey}.label.font.opacity`;let cv=class extends ev{constructor(){super(...arguments),this._pointClickArgs=null}getWidgetTypeName(){return Sd.xyChartName}getLegendItemType(){return vd.series}createWidgetSettingsConverter(){return new ac}getThemeDependentOptionsDict(){const e={[tv]:Cd.axisTitleFontColor,[iv]:Cd.constantLineColor,[nv]:Cd.axisLineColor,containerBackgroundColor:Cd.containerBackgroundColor,[sv]:Cd.errorBarColor,[rv]:Cd.annotationColor,[ov]:Cd.annotationTextColor,[av]:Cd.candlestickInnerColor,[lv]:Cd.zoomAndPanDragBoxColor,[Av]:Cd.axisLabelFontColor,[dv]:Cd.axisLabelFontOpacity};return{...super.getThemeDependentOptionsDict(),...e}}configureSelectionController(e){void 0!==e.seriesSelectionMode&&this.selectionController.setSeriesSelectionMode(e.seriesSelectionMode),super.configureSelectionController(e)}getChartOnPointClickHandler(){return e=>{this._pointClickArgs=e}}getChartOnSeriesClickHandler(){return e=>{var t;const i=e.target,n=null===(t=this._pointClickArgs)||void 0===t?void 0:t.target;this.onSeriesClick(i.index,null==n?void 0:n.data,null==n?void 0:n.tag),this._pointClickArgs=null,this.selectionController.selectSeriesAndPoint(i,n)}}createWidgetHandlers(){return{...super.createWidgetHandlers(),onZoomEnd:e=>this.onChartVisualRangeChanged(e)}}onChartVisualRangeChanged(e){const t=new $f(e);this.dispatchEvent(t)}resetVisualRange(){this.afterWidgetResolved((e=>{e.resetVisualRange()}))}setArgumentAxisVisualRange(e){this.afterWidgetResolved((t=>{t.getArgumentAxis().visualRange(e)}))}setValueAxisVisualRange(e,t){this.afterWidgetResolved((i=>{var n;null===(n=i.getValueAxis(t))||void 0===n||n.visualRange(e)}))}};cv=C([on("dxbl-chart")],cv);let hv=class extends ev{getWidgetTypeName(){return Sd.pieChartName}createWidgetSettingsConverter(){return new lc}getLegendItemType(){return vd.point}getChartOnPointClickHandler(){const e=this.selectionController;return t=>{const i=t.target;this.onSeriesClick(i.series.index,i.data,i.tag),e.togglePointSelection(i)}}};hv=C([on("dxbl-pie-chart")],hv);const uv="dxbl-polar-chart",pv=`--${uv}`;let mv=class extends ev{constructor(){super(...arguments),this._pointClickArgs=null}getWidgetTypeName(){return Sd.polarChartName}createWidgetSettingsConverter(){return new Ac}configureSelectionController(e){void 0!==e.seriesSelectionMode&&this.selectionController.setSeriesSelectionMode(e.seriesSelectionMode),super.configureSelectionController(e)}getLegendItemType(){return vd.series}getChartOnPointClickHandler(){return e=>{this._pointClickArgs=e}}getChartOnSeriesClickHandler(){return e=>{var t;const i=e.target,n=null===(t=this._pointClickArgs)||void 0===t?void 0:t.target;this.onSeriesClick(i.index,null==n?void 0:n.data,null==n?void 0:n.tag),this._pointClickArgs=null,this.selectionController.selectSeriesAndPoint(i,n)}}getThemeDependentOptionsDict(){const e={containerBackgroundColor:`${pv}-container-background-color`};return{...super.getThemeDependentOptionsDict(),...e}}};mv=C([on(uv)],mv);const gv="dxbl-map";class Cv extends CustomEvent{constructor(e,t){super(Cv.eventName,{detail:new vv(e,t),bubbles:!0,composed:!0,cancelable:!0})}}Cv.eventName=gv+".click";class fv extends CustomEvent{constructor(e){super(fv.eventName,{detail:new bv(e),bubbles:!0,composed:!0,cancelable:!0})}}fv.eventName=gv+".marker-click";class vv{constructor(e,t){this.Latitude=e,this.Longitude=t}}class bv{constructor(e){this.Key=e}}var wv,yv;gt.register(Cv.eventName,(e=>e.detail)),gt.register(fv.eventName,(e=>e.detail)),null!==(wv=(yv=window).sj_evt)&&void 0!==wv||(yv.sj_evt={fire:()=>{},bind:()=>{}});const Bv="markerId";let Ev=class extends ic{createWidgetHandlers(){return{...super.createWidgetHandlers(),onClick:e=>this.onMapClick(e),onReady:e=>this.onMapReady(e),onOptionChanged:e=>this.onMapOptionChanged(e)}}getWidgetModuleName(){return"ui"}getWidgetTypeName(){return"dxMap"}disposeWidget(e){var t;null===(t=null==e?void 0:e._lastAsyncAction)||void 0===t||t.catch((e=>{})),super.disposeWidget(e)}createWidgetDefaultOptions(){return{height:"100%",width:"100%"}}processSpecialOptions(e){super.processSpecialOptions(e),this.preapreMarkerClickHandlers(e.markers)}onMapClick(e){this.dispatchEvent(new Cv(e.location.lat,e.location.lng))}onMapReady(e){this.changeLoadingPanelVisibility(!1)}onMapOptionChanged(e){this.changeLoadingPanelVisibility(!1)}preapreMarkerClickHandlers(e){null==e||e.forEach((e=>{if(e[Bv]){const t=e[Bv];e.onClick=()=>{this.onMarkerClick(t)},delete e[Bv]}}))}onMarkerClick(e){this.dispatchEvent(new fv(e))}};Ev=C([on("dxbl-map")],Ev);const Iv="dxbl-html-editor";class Sv extends CustomEvent{constructor(e,t,i){super(Sv.eventName,{detail:new Hv(e,t,i),bubbles:!0,composed:!0,cancelable:!0})}}Sv.eventName=Iv+".state-changed";class xv extends CustomEvent{constructor(e){super(xv.eventName,{detail:new Uv(e),bubbles:!0,composed:!0,cancelable:!0})}}xv.eventName=Iv+".show-hyperlink-dialog";class Dv extends CustomEvent{constructor(e){super(Dv.eventName,{detail:new Pv(e),bubbles:!0,composed:!0,cancelable:!0})}}Dv.eventName=Iv+".show-image-dialog";class Fv extends Kd{constructor(){super(Fv.eventName)}}Fv.eventName=Iv+".show-table-dialog";class Tv extends CustomEvent{constructor(e){super(Tv.eventName,{detail:new Qv(e),bubbles:!0,composed:!0,cancelable:!0})}}Tv.eventName=Iv+".value-changed";class Hv{constructor(e,t,i){this.Format=e,this.ButtonsVisibility=t,this.ReadOnly=i}}class Uv{constructor(e){this.Data=e}}class Pv{constructor(e){this.Data=e}}class Qv{constructor(e){this.Value=e}}gt.register(Sv.eventName,(e=>e.detail)),gt.register(Tv.eventName,(e=>e.detail)),gt.register(xv.eventName,(e=>e.detail)),gt.register(Dv.eventName,(e=>e.detail)),gt.register(Fv.eventName,(e=>e.detail));class Nv{static moveFocus(e,t,i){const n=e.querySelectorAll(t);if(n.length<=1)return;const s=Array.from(n).filter((e=>!Te.isHidden(e)));if(s.length<=1)return;const r=document.activeElement,o=s.reduce(((e,t,i)=>t.contains(r)?i:e),-1);if(o<0)return;let a,l=o;if(i)if(l++,l>=s.length){const t=this.findFocusableElements(document),i=this.findFocusableElements(e),n=t.indexOf(i[i.length-1]);a=n>=0&&n<t.length-1?t[n+1]:t[0]}else a=s[l];else if(l--,l<0){const t=this.findFocusableElements(document),i=this.findFocusableElements(e),n=t.indexOf(i[0]);a=n>0?t[n-1]:t[t.length-1]}else a=s[l];null==a||a.focus()}static findFocusableElements(e){return Array.from(e.querySelectorAll(k)).filter((e=>e.tabIndex>-1&&e.offsetWidth&&e.offsetHeight&&!Te.isHidden(e)))}}const Rv=Object.freeze(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","enterkeyhint","exportparts","filter","font","g","glyph","glyphref","hkern","image","inputmode","line","lineargradient","marker","mask","metadata","mpath","part","path","pattern","polygon","polyline","radialgradient","rect","slot","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),Lv=Object.freeze(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan","xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]);function Mv(e){const t=e.tagName.toLowerCase();Rv.includes(t)?([...e.attributes].forEach((t=>{const{name:i,value:n}=t,s=i.toLowerCase();Lv.includes(s)?s.startsWith("on")?e.removeAttribute(i):"href"!==s&&"xlink:href"!==s||function(e){if(!e)return!1;const t=e.trim().toLowerCase();return!(!t.startsWith("#")&&!t.startsWith("data:image/")&&(t.startsWith("javascript:")||t.startsWith("vbscript:")||t.startsWith("data:")||t.startsWith("http:")||t.startsWith("https:")))}(n)||e.removeAttribute(i):e.removeAttribute(i)})),[...e.children].forEach((e=>Mv(e)))):e.remove()}function kv(e){const t=(new DOMParser).parseFromString(e,"image/svg+xml").documentElement;return t&&"svg"===t.tagName.toLowerCase()?(Mv(t),t.outerHTML):null}const Kv="silent",Ov="user",_v="focusout",Vv="keydown",zv="Normal text",Wv=/^(data:[\w\/\-+.]+;base64,)(.*)$/;var $v;!function(e){e.OnLostFocus="onLostFocus",e.OnDelayedInput="onDelayedInput"}($v||($v={}));let Gv=class extends ic{constructor(){super(...arguments),this._readOnly=!1,this._bindValueMode=$v.OnLostFocus,this._inputDelay=500,this._timer=0,this._lastQuillFormat={},this._lastButtonsVisibility="",this._valueChangesQueueTimer=0,this._valueChangesQueue=[],this.isBindingUse=!1}getWidgetModuleName(){return"ui"}getWidgetTypeName(){return"dxHtmlEditor"}createInitOptions(){const e=super.createInitOptions();return e.toolbar=void 0,e.mediaResizing={enabled:!0},e}updateWidgetOptions(e,t){if(1===Object.keys(t).length&&"value"in t){if(e.option("value")===t.value&&this.hideLoadingPanel(),this._valueChangesQueue.length>0){if(this._valueChangesQueue.shift()===t.value)return;this._valueChangesQueue=[]}}super.updateWidgetOptions(e,t),this.updateStates(t)}processSpecialOptions(e){super.processSpecialOptions(e),this.prepareValidationOptions(e),this.prepareResizingOptions(e),this.setBindValueOptions(e)}setBindValueOptions(e){e.bindMarkupMode&&(this._bindValueMode=e.bindMarkupMode,delete e.bindMarkupMode),e.inputDelay&&(this._inputDelay=e.inputDelay,delete e.inputDelay)}prepareValidationOptions(e){"showValidationMessageOnFocus"in e&&(e.validationMessageMode="always",delete e.showValidationMessageOnFocus),!1===e.isValid&&(e.validationStatus="invalid",delete e.isValid),e.validationMessage&&(e.validationError={message:e.validationMessage},delete e.validationMessage)}prepareResizingOptions(e){var t,i;"mediaResizeEnabled"in e&&(e.mediaResizing={enabled:e.mediaResizeEnabled},delete e.mediaResizeEnabled),"tableResizeEnabled"in e&&(e.tableResizing={enabled:e.tableResizeEnabled,minColumnWidth:null!==(t=e.tableColumnMinWidth)&&void 0!==t?t:40,minRowHeight:null!==(i=e.tableRowMinHeight)&&void 0!==i?i:24},delete e.tableResizeEnabled),delete e.tableColumnMinWidth,delete e.tableRowMinHeight}createComponent(e){var t;super.createComponent(e),null===(t=this._widgetPromise)||void 0===t||t.then((t=>{this._widgetInstance=t,this._widgetInstance.getQuillInstance().on("editor-change",this.onEditorChange.bind(this)),this.updateStates(e),this.getWidgetElement().removeAttribute("role")}));const i=this.getContainerToSetStyle();i.addEventListener(_v,this.onFocusOut),i.addEventListener(Vv,this.onKeyDown)}updateStates(e){this.applyHtmlEditorState(e.readOnly)}disposeComponent(){super.disposeComponent();const e=this.getContainerToSetStyle();e.removeEventListener(_v,this.onFocusOut),e.removeEventListener(Vv,this.onKeyDown)}createWidgetHandlers(){return{...super.createWidgetHandlers(),onContentReady:e=>this.hideLoadingPanel(),onValueChanged:e=>this.onValueChanged(e.value),onOptionChanged:e=>this.hideLoadingPanel()}}onWidgetInitialized(e){super.onWidgetInitialized(e),this.processMentionsModule(e.component)}processMentionsModule(e){const t=e.get("modules/mentions");e.register({"modules/mentions":class extends t{_getPopupConfig(){const e=super._getPopupConfig();return e.container="dxbl-html-editor",e}}})}hideLoadingPanel(){this.changeLoadingPanelVisibility(!1)}setValueInQueue(e){this._valueChangesQueue.push(e),clearTimeout(this._valueChangesQueueTimer),this._valueChangesQueueTimer=setTimeout((()=>{this._valueChangesQueue=[]}),500)}onValueChanged(e){this._bindValueMode===$v.OnDelayedInput?(clearTimeout(this._timer),this._timer=setTimeout((()=>{this.isBindingUse&&this.setValueInQueue(e),this.sendValue(e)}),this._inputDelay)):this._value=e}onFocusOut(e){this._bindValueMode!==$v.OnLostFocus||void 0===this._value||pt.containsElement(this.getContainerToSetStyle(),e.relatedTarget)||(this.sendValue(this._value),this._value=void 0)}onKeyDown(e){if(e.shiftKey&&e.altKey){const t=Be.KeyUtils.getEventKeyCode(e);t===Be.KeyCode.Down?(this.moveFocus(!0),e.stopPropagation()):t===Be.KeyCode.Up&&(this.moveFocus(!1),e.stopPropagation())}}moveFocus(e){Nv.moveFocus(this.getContainerToSetStyle(),"dxbl-ribbon-internal, .ql-editor",e)}sendValue(e){let t;""!==e&&(t=this.getJsObjectReference(e)),this.dispatchEvent(new Tv(t))}getJsObjectReference(e){const t=(new TextEncoder).encode(e);return DotNet.createJSStreamReference(t)}onEditorChange(e,...t){"selection-change"===e&&null===t[0]?this._selection=t[1]:!this._readOnly&&this.applyHtmlEditorState()}applyHtmlEditorState(e){const t=!!e,i=this.getQuillFormat(),n=this.modifyFormat(i),s=this.getButtonsVisibility(i);this._readOnly===t&&JSON.stringify(this._lastQuillFormat)===JSON.stringify(i)&&this._lastButtonsVisibility===s||this.dispatchEvent(new Sv(n,s,t)),this._readOnly=t,this._lastQuillFormat=i,this._lastButtonsVisibility=s}getQuillFormat(){var e,t;const i=null===(e=this._widgetInstance)||void 0===e?void 0:e.getSelection();return i?null===(t=this._widgetInstance)||void 0===t?void 0:t.getFormat(i.index,i.length):{}}modifyFormat(e){const t=this.prepareFormatParameters(e),i=this.getFullFormat(t);return JSON.stringify(i)}getFullFormat(e){return e.header||(e.header=zv),e}getButtonsVisibility(e){if(!this._widgetInstance)return"{}";const t=this._widgetInstance.getQuillInstance().history,{undo:i,redo:n}=t.stack,s=this.isTableElement(e);return JSON.stringify({undo:i.length>0,redo:n.length>0,insertTable:!s,insertRowAbove:s,insertRowBelow:s,deleteRow:s,insertColumnLeft:s,insertColumnRight:s,deleteColumn:s,insertHeaderRow:s,deleteTable:s})}isTableElement(e){return!(!e.tableCellLine&&!e.tableHeaderCellLine)}prepareFormatParameters(e){const t={};for(const[i,n]of Object.entries(e))switch(i){case"align":"left"===n?t.alignLeft=!0:"center"===n?t.alignCenter=!0:"right"===n?t.alignRight=!0:t.alignJustify=!0;break;case"list":"ordered"===n?t.orderedList=!0:"bullet"===n&&(t.bulletList=!0);break;case"script":"sub"===n?t.subscript=!0:"super"===n&&(t.superscript=!0);break;case"indent":case"imageSrc":case"background":case"color":case"target":case"link":break;case"code-block":t["code-block"]=!0;break;case"header":t.header=this.getHeaderValue(n);break;default:t[i]=n}return t}parseFormatParameters(e,t){let i,n;switch(e){case"alignLeft":i="align",n=!!t&&"left";break;case"alignCenter":i="align",n=!!t&&"center";break;case"alignRight":i="align",n=!!t&&"right";break;case"alignJustify":i="align",n=!!t&&"justify";break;case"orderedList":i="list",n=!!t&&"ordered";break;case"bulletList":i="list",n=!!t&&"bullet";break;case"subscript":i="script",n=!!t&&"sub";break;case"superscript":i="script",n=!!t&&"super";break;case"increaseIndent":i="indent",n=!!t&&"+1";break;case"decreaseIndent":i="indent",n=!!t&&"-1";break;case"header":n=this.parseHeaderValue(t)}return{formatName:null!=i?i:e,formatValue:null!=n?n:t}}toggleUndoRedo(e){var t,i;"undo"===e?null===(t=this._widgetInstance)||void 0===t||t.undo():null===(i=this._widgetInstance)||void 0===i||i.redo(),this.applyHtmlEditorState()}clearFormat(){var e,t;const i=null===(e=this._widgetInstance)||void 0===e?void 0:e.getSelection();i&&(null===(t=this._widgetInstance)||void 0===t||t.removeFormat(i.index,i.length),this.applyHtmlEditorState())}toggleFontChanges(e,t){var i,n;this.focusEditor(),this._selection&&(null===(i=this._widgetInstance)||void 0===i||i.setSelection(this._selection.index,this._selection.length)),null===(n=this._widgetInstance)||void 0===n||n.format(e,t),this.applyHtmlEditorState()}parseHeaderValue(e){return e!==zv&&e.split(" ")[1]}getHeaderValue(e){return e?`Heading ${e}`:zv}getLeafSelection(e,t){const i=e.getLeaf(t),n=i[0].text;return{index:t-i[1],length:n?n.length:0}}getTableModule(){var e;const t=null===(e=this._widgetInstance)||void 0===e?void 0:e.getQuillInstance();return t.focus(),t.getModule("table")}insertRowAbove(){this.getTableModule().insertRowAbove()}insertRowBelow(){this.getTableModule().insertRowBelow()}deleteRow(){this.getTableModule().deleteRow()}insertColumnLeft(){this.getTableModule().insertColumnLeft()}insertColumnRight(){this.getTableModule().insertColumnRight()}deleteColumn(){this.getTableModule().deleteColumn()}insertHeaderRow(){this.getTableModule().insertHeaderRow()}deleteTable(){this.getTableModule().deleteTable()}insertVariable(e,t){var i,n;const s=null===(i=this._widgetInstance)||void 0===i?void 0:i.getSelection(),r=s?s.index:0,o=null===(n=this._widgetInstance)||void 0===n?void 0:n.getQuillInstance();s&&o.deleteText(r,s.length,Kv),this._widgetInstance.insertEmbed(r,"variable",{value:e,escapeChar:t||["{","}"]})}executeCommand(e,t,i){var n;const{formatName:s,formatValue:r}=this.parseFormatParameters(e,t);switch(s){case"undo":case"redo":this.toggleUndoRedo(s);break;case"clear":this.clearFormat();break;case"header":case"size":case"font":this.toggleFontChanges(s,r);break;case"insertRowAbove":this.insertRowAbove();break;case"insertRowBelow":this.insertRowBelow();break;case"deleteRow":this.deleteRow();break;case"insertColumnLeft":this.insertColumnLeft();break;case"insertColumnRight":this.insertColumnRight();break;case"deleteColumn":this.deleteColumn();break;case"insertHeaderRow":this.insertHeaderRow();break;case"deleteTable":this.deleteTable();break;case"variable":this.insertVariable(t,i);break;default:null===(n=this._widgetInstance)||void 0===n||n.format(s,r),this.applyHtmlEditorState()}}async applyPicture(e,t,i,n,s){var r,o,a,l;const A=null===(r=this._widgetInstance)||void 0===r?void 0:r.getFormat(),d=null===(o=this._widgetInstance)||void 0===o?void 0:o.getSelection(),c=null===(a=this._widgetInstance)||void 0===a?void 0:a.getQuillInstance(),h=await this.decodeStream(e),u=await this.getSrc(h,!s);if(!u)return;let p=null!==(l=d.index)&&void 0!==l?l:0;A.imageSrc&&0===d.length?(p=this.getLeafSelection(c,d.index).index,c.deleteText(p,1,Kv)):d.length&&c.deleteText(p,d.length,Kv),this._widgetInstance.insertEmbed(p,"extendedImage",{src:u,alt:t,width:i,height:n})}applyHyperlink(e,t,i){var n,s,r,o,a;const l=null===(n=this._widgetInstance)||void 0===n?void 0:n.getFormat(),A=null===(s=this._widgetInstance)||void 0===s?void 0:s.getSelection(),d=null===(r=this._widgetInstance)||void 0===r?void 0:r.getQuillInstance();if(A.length>0&&this.hasEmbeddedElement(A))null===(o=this._widgetInstance)||void 0===o||o.format("link",{href:e,target:i});else{const n=0===t.length?e:t;let s=null!==(a=A.index)&&void 0!==a?a:0;if(void 0!==l.link&&0===A.length){const{index:e,length:t}=this.getLeafSelection(d,A.index);s=e,d.deleteText(e,t,Kv)}else A.length&&d.deleteText(A.index,A.length,Kv);d.insertText(s,n,"link",{href:e,target:i},Ov),d.setSelection(s+n.length,0)}}insertTable(e,t){this.getTableModule().insertTable(e,t)}showDialog(e){switch(e){case"ShowHyperlinkDialog":this.passHyperlinkDialogData();break;case"ShowInsertPictureDialog":this.passImageDialogData();break;case"ShowInsertTableDialog":this.passTableDialogData()}}focusEditor(){var e;null===(e=this._widgetInstance)||void 0===e||e.focus()}getSelectedContent(){if(!this._widgetInstance)return;const{start:e,length:t}=this.getCurrentPosition();return this._widgetInstance.getText(e,t)}insertText(e,t){if(!this._widgetInstance)return;const{start:i,length:n}=this.getCurrentPosition();switch(t){case"after":this._widgetInstance.insertText(i+n,e,Ov),this._widgetInstance.setSelection(i+n,e.length);break;case"before":this._widgetInstance.insertText(i,e,Ov),this._widgetInstance.setSelection(i,e.length);break;case"replace":this._widgetInstance.delete(i,n),this._widgetInstance.insertText(i,e,Ov),this._widgetInstance.setSelection(i,e.length)}}getCurrentPosition(){const e=this._widgetInstance.getSelection(!0);return e&&e.length?{start:e.index,length:e.length}:{start:0,length:this._widgetInstance.getLength()}}hasEmbeddedElement(e){var t;const i=(null===(t=this._widgetInstance)||void 0===t?void 0:t.getQuillInstance()).getContents(e.index,e.length).ops;for(const e of i)if(e.insert.extendedImage||e.insert.variable||e.insert.mention)return!0;return!1}async decodeStream(e){const t=await e.arrayBuffer();return new TextDecoder("utf-8").decode(t)}async getSrc(e,t){return t?this.sanitizeData(e):e}async sanitizeData(e){const t=e.match(Wv);if(!t)return e;const[,i,n]=t;if("data:image/svg+xml;base64,"!==i)return e;const s=kv(atob(n));return s?`${i}${btoa(s)}`:null}passHyperlinkDialogData(){var e,t,i;let n={};const s=null===(e=this._widgetInstance)||void 0===e?void 0:e.getFormat(),r=null===(t=this._widgetInstance)||void 0===t?void 0:t.getSelection(),o=null===(i=this._widgetInstance)||void 0===i?void 0:i.getQuillInstance();if(r.length>0&&this.hasEmbeddedElement(r))n={url:s.link,text:null,blank:s.link?!!s.target:void 0};else if(void 0===s.link){n={text:this._widgetInstance.getText(r.index,r.length)}}else{const e=o.getLeaf(r.index),t=this._widgetInstance.getText(r.index,r.length);n={url:s.link,text:0===r.length?e[0].text:t,blank:!!s.target}}this.dispatchEvent(new xv(n))}passImageDialogData(){var e;let t={};const i=null===(e=this._widgetInstance)||void 0===e?void 0:e.getFormat();t={stream:i.imageSrc&&this.getJsObjectReference(i.imageSrc),alt:i.alt,width:i.width,height:i.height},this.dispatchEvent(new Dv(t))}passTableDialogData(){this.dispatchEvent(new Fv)}};C([An({attribute:"is-binding-use",type:Boolean})],Gv.prototype,"isBindingUse",void 0),Gv=C([on("dxbl-html-editor")],Gv);const qv="dxbl-gauge-base";class Yv extends Kd{constructor(){super(Yv.eventName)}}Yv.eventName=qv+".drawn";class Xv extends Kd{constructor(){super(Xv.eventName)}}Xv.eventName=qv+".exported",gt.register(Yv.eventName,(e=>e.detail)),gt.register(Xv.eventName,(e=>e.detail));class Jv extends ic{constructor(){super(),this._styleHelper=cc.getInstance(),this._drawnExecutor=nc(this.onGaugeDrawn.bind(this))}createWidgetDefaultOptions(){return{palette:this._styleHelper.palette}}createWidgetHandlers(){return{...super.createWidgetHandlers(),onDrawn:()=>this.onGaugeDrawn(),onOptionChanged:()=>this.onGaugeOptionChanged(),onExported:()=>this.onGaugeExported()}}onGaugeDrawn(){this._drawnExecutor.reset(),this.changeLoadingPanelVisibility(!1),this.dispatchEvent(new Yv)}onGaugeOptionChanged(){this._drawnExecutor.execute()}onGaugeExported(){this.dispatchEvent(new Xv)}onlyContainerSizeChanged(){this.onGaugeDrawn()}exportTo(...e){return this.executeClientMethod("exportTo",...e)}print(...e){return this.executeClientMethod("print",...e)}svg(...e){return this.executeClientMethod("svg",...e)}}const jv="color",Zv="font",eb="tooltip",tb=`${eb}.${jv}`,ib=`${eb}.${Zv}.${jv}`,nb="--dxbl-client-component",sb=`${nb}-${eb}-${jv}`,rb=`${nb}-${eb}-${Zv}-${jv}`;function ob(){return{[tb]:sb,[ib]:rb}}const ab="dxbl-bar-gauge",lb="legend",Ab="itemCaptions",db="color",cb="font",hb="subtitle",ub="title",pb=`${cb}.${db}`,mb=`${lb}.${pb}`,gb=`${ub}.${pb}`,Cb=`${ub}.${hb}.${pb}`,fb=`${lb}.${gb}`,vb=`${lb}.${Cb}`,bb=`--${ab}`,wb=`${bb}-${lb}`,yb=`${cb}-${db}`,Bb=`${ub}-${yb}`,Eb=`${hb}-${yb}`;let Ib=class extends Jv{getWidgetTypeName(){return"dxBarGauge"}processSpecialOptions(e){super.processSpecialOptions(e),this.prepareLegend(e[lb])}prepareLegend(e){const t=null==e?void 0:e[Ab];t&&(e.customizeText=e=>{var i,n;const s=null===(i=e.item)||void 0===i?void 0:i.index;return null!==(n=t[s])&&void 0!==n?n:e.text},delete e[Ab])}getThemeDependentOptionsDict(){const e={[gb]:`${bb}-${Bb}`,[Cb]:`${bb}-${Eb}`,[mb]:`${wb}-item-${yb}`,[fb]:`${wb}-${Bb}`,[vb]:`${wb}-${Eb}`,...ob()};return{...super.getThemeDependentOptionsDict(),...e}}};Ib=C([on(ab)],Ib);const Sb="dxbl-sankey";class xb extends Kd{constructor(){super(xb.eventName)}}xb.eventName=Sb+".drawn";class Db extends Kd{constructor(){super(Db.eventName)}}Db.eventName=Sb+".exported";class Fb{constructor({label:e,linksIn:t,linksOut:i}){this.Node={label:e,linksIn:t,linksOut:i}}}class Tb{constructor(e){this.Connection=e}}class Hb extends CustomEvent{constructor(e){super(Hb.eventName,{detail:new Fb(e),bubbles:!0,composed:!0,cancelable:!0})}}Hb.eventName=Sb+".nodeClick";class Ub extends CustomEvent{constructor(e){super(Ub.eventName,{detail:new Tb(e),bubbles:!0,composed:!0,cancelable:!0})}}Ub.eventName=Sb+".linkClick",gt.register(xb.eventName,(e=>e.detail)),gt.register(Db.eventName,(e=>e.detail)),gt.register(Hb.eventName,(e=>e.detail)),gt.register(Ub.eventName,(e=>e.detail));const Pb="dxbl-sankey",Qb="exportTo",Nb="print",Rb="svg",Lb="getAllLinks",Mb="getAllNodes",kb="color",Kb="font",Ob="subtitle",_b="title",Vb="label",zb=`${Kb}.${kb}`,Wb=`${_b}.${zb}`,$b=`${_b}.${Ob}.${zb}`,Gb=`${Vb}.${zb}`,qb=`--${Pb}`,Yb=`${Kb}-${kb}`,Xb=`${_b}-${Yb}`,Jb=`${Ob}-${Yb}`,jb=`${Vb}-${Yb}`;let Zb=class extends ic{constructor(){super(),this._styleHelper=cc.getInstance(),this._drawnExecutor=nc(this.onDrawn.bind(this))}getWidgetTypeName(){return"dxSankey"}createWidgetDefaultOptions(){return{tooltip:{enabled:!1},palette:this._styleHelper.palette}}createWidgetHandlers(){return{...super.createWidgetHandlers(),onDrawn:()=>this.onDrawn(),onOptionChanged:()=>this.onOptionChanged(),onNodeClick:e=>this.onNodeClick(e.target),onLinkClick:e=>this.onLinkClick(e.target),onExported:()=>this.onExported()}}processSpecialOptions(e){super.processSpecialOptions(e),e.dataSource&&(e.dataSource=this._prepareDataSource(e.dataSource))}_prepareDataSource(e){const t=e.sources||[],i=e.targets||[],n=e.weights||[],s=[];for(let e=0;e<t.length;e++)s.push({source:t[e],target:i[e],weight:n[e]});return s}onDrawn(){this._drawnExecutor.reset(),this.changeLoadingPanelVisibility(!1),this.dispatchEvent(new xb)}onOptionChanged(){this._drawnExecutor.execute()}onNodeClick({label:e,linksIn:t,linksOut:i}){this.dispatchEvent(new Hb({label:e,linksIn:t,linksOut:i}))}onLinkClick({connection:e}){this.dispatchEvent(new Ub(e))}onlyContainerSizeChanged(){var e;null===(e=this._widgetPromise)||void 0===e||e.then((e=>{e.render()})),this.onDrawn()}onExported(){this.dispatchEvent(new Db)}getThemeDependentOptionsDict(){const e={[Wb]:`${qb}-${Xb}`,[$b]:`${qb}-${Jb}`,[Gb]:`${qb}-${jb}`,...ob()};return{...super.getThemeDependentOptionsDict(),...e}}[Qb](...e){return this.executeClientMethod(Qb,...e)}[Nb](...e){return this.executeClientMethod(Nb,...e)}[Rb](...e){return this.executeClientMethod(Rb,...e)}[Lb](...e){return this.executeClientMethod(Lb,...e).then((e=>e.map((e=>e.connection))))}[Mb](...e){return this.executeClientMethod(Mb,...e).then((e=>e.map((e=>({label:e.label,linksIn:e.linksIn,linksOut:e.linksOut})))))}};Zb=C([on(Pb)],Zb);const ew="dxbl-sparkline";class tw extends Kd{constructor(){super(tw.eventName)}}tw.eventName=ew+".drawn";class iw extends Kd{constructor(){super(iw.eventName)}}iw.eventName=ew+".exported",gt.register(tw.eventName,(e=>e.detail)),gt.register(iw.eventName,(e=>e.detail));const nw="dxbl-sparkline",sw=`--${nw}`,rw="exportTo",ow="print",aw="svg";let lw=class extends ic{constructor(){super(),this._drawnExecutor=nc(this.onDrawn.bind(this))}getWidgetTypeName(){return"dxSparkline"}createWidgetHandlers(){return{...super.createWidgetHandlers(),onDrawn:()=>this.onDrawn(),onOptionChanged:()=>this.onOptionChanged(),onExported:()=>this.onExported()}}createWidgetDefaultOptions(){return{ignoreEmptyPoints:!0,tooltip:{enabled:!1}}}processSpecialOptions(e){super.processSpecialOptions(e),e.dataSource&&(e.dataSource=this._prepareDataSource(e.dataSource))}getContainerToSetStyle(){return this.getWidgetElement()}_prepareDataSource(e){const t=e.arg||[],i=e.val||[],n=[];for(let e=0;e<t.length;e++)n.push({arg:t[e],val:i[e]});return n}onDrawn(){this._drawnExecutor.reset(),this.changeLoadingPanelVisibility(!1),this.dispatchEvent(new tw)}onExported(){this.dispatchEvent(new iw)}onOptionChanged(){this._drawnExecutor.execute()}onlyContainerSizeChanged(){var e;null===(e=this._widgetPromise)||void 0===e||e.then((e=>{e.render()})),this.onDrawn()}getSkippedEmptyOptions(){return["dataSource"]}[rw](...e){return this.executeClientMethod(rw,...e)}[ow](...e){return this.executeClientMethod(ow,...e)}[aw](...e){return this.executeClientMethod(aw,...e)}getThemeDependentOptionsDict(){const e={pointColor:`${sw}-point-color`,...ob()};return{...super.getThemeDependentOptionsDict(),...e}}};lw=C([on(nw)],lw);const Aw="dxbl-range-selector";class dw extends Kd{constructor(){super(dw.eventName)}}dw.eventName=Aw+".drawn";class cw extends CustomEvent{constructor(e,t){super(cw.eventName,{detail:new uw(e,t),bubbles:!0,composed:!0,cancelable:!0})}}cw.eventName=Aw+".value-changed";class hw extends Kd{constructor(){super(hw.eventName)}}hw.eventName=Aw+".exported";class uw{constructor(e,t){this.Value=e,this.PreviousValue=t}}gt.register(dw.eventName,(e=>e.detail)),gt.register(cw.eventName,(e=>e.detail)),gt.register(hw.eventName,(e=>e.detail));const pw="title",mw="color",gw="scale",Cw="sliderMarker",fw=`font.${mw}`,vw=`${pw}.${fw}`,bw=`${pw}.subtitle.${fw}`,ww=`${gw}.tick.${mw}`,yw=`${gw}.minorTick.${mw}`,Bw=`${Cw}.${mw}`,Ew=`${Cw}.${fw}`,Iw=`sliderHandle.${mw}`,Sw=`shutter.${mw}`,xw=`${gw}.label.${fw}`,Dw="--dxbl-range-selector",Fw=`${Dw}-scale-tick-color`,Tw=`${Dw}-title-font-color`,Hw=`${Dw}-selected-range-color`,Uw=`${Dw}-slider-marker-color`,Pw=`${Dw}-slider-marker-font-color`,Qw=`${Dw}-slider-handle-color`,Nw=`${Dw}-shutter-color`,Rw=`${Dw}-container-background-color`,Lw=`${Dw}-scale-label-font-color`,Mw="exportTo",kw="print",Kw="svg";let Ow=class extends ic{get styleHelper(){return this._styleHelper}constructor(){super(),this._styleHelper=cc.getInstance(),this._drawnExecutor=nc(this.onDrawn.bind(this)),this._widgetSettingsConverter=this.createWidgetSettingsConverter()}createWidgetHandlers(){return{...super.createWidgetHandlers(),onDrawn:()=>this.onDrawn(),onOptionChanged:()=>this.onOptionChanged(),onValueChanged:e=>this.onValueChanged(e),onExported:()=>this.onExported()}}getWidgetTypeName(){return"dxRangeSelector"}createWidgetSettingsConverter(){return new dc}createInitOptions(){const e=super.createInitOptions(),t=this._widgetSettingsConverter.createDefaultSettings();return e.scale={label:{font:{opacity:sc.defaultAxisLabelFontOpacity}}},e.chart={commonSeriesSettings:t.commonSeriesSettings,dataPrepareSettings:t.dataPrepareSettings,palette:this.styleHelper.palette},e}onDrawn(){this._drawnExecutor.reset(),this.changeLoadingPanelVisibility(!1),this.dispatchEvent(new dw)}onlyContainerSizeChanged(){this.onDrawn()}onOptionChanged(){this._drawnExecutor.execute()}onValueChanged(e){this.dispatchEvent(new cw(e.value,e.previousValue))}onExported(){this.dispatchEvent(new hw)}createWidgetDefaultOptions(){return{height:"100%",width:"100%"}}processSpecialOptions(e){super.processSpecialOptions(e),this.prepareValueOptions(e),this.prepareImageOptions(e),this.prepareBehaviorOptions(e),e.chart&&this._widgetSettingsConverter.processSpecialChartSettings(e,e.chart)}prepareOptions(e,t,i){e[t]=e[t]||{};for(const[n,s]of Object.entries(i))n in e&&(e[t][s]=e[n],delete e[n])}prepareValueOptions(e){this.prepareOptions(e,"value",{selectedRangeStartValue:"startValue",selectedRangeEndValue:"endValue",selectedRangeLength:"length"})}prepareImageOptions(e){"background"in e&&this.prepareOptions(e.background,"image",{imagePosition:"location",imageUrl:"url"})}prepareBehaviorOptions(e){this.prepareOptions(e,"behavior",{allowSlidersSwap:"allowSlidersSwap",animationEnabled:"animationEnabled",manualRangeSelectionEnabled:"manualRangeSelectionEnabled",moveSelectedRangeByClick:"moveSelectedRangeByClick",snapToTicks:"snapToTicks",valueChangeMode:"valueChangeMode"})}[Mw](...e){return this.executeClientMethod(Mw,...e)}[kw](...e){return this.executeClientMethod(kw,...e)}[Kw](...e){return this.executeClientMethod(Kw,...e)}getThemeDependentOptionsDict(){const e={[vw]:Tw,[bw]:Tw,[ww]:Fw,[yw]:Fw,selectedRangeColor:Hw,[Bw]:Uw,[Ew]:Pw,[Iw]:Qw,[Sw]:Nw,containerBackgroundColor:Rw,[xw]:Lw};return{...super.getThemeDependentOptionsDict(),...e}}};Ow=C([on("dxbl-range-selector")],Ow);const _w="dxbl-calendar-table-container";class Vw{}Vw.MainElement=he.Prefix+"-calendar",Vw.SelectedItem=Vw.MainElement+"-selected-item",Vw.SelectedRange=Vw.MainElement+"-selected-range",Vw.SelectedRangeFirst=Vw.SelectedRange+"-first",Vw.SelectedRangeLast=Vw.SelectedRange+"-last",Vw.Header=Vw.MainElement+"-header",Vw.Content=Vw.MainElement+"-content",Vw.DataTableContainerWrapperClassName=Vw.MainElement+"-data-table-container-wrapper",Vw.Footer=Vw.MainElement+"-footer",Vw.WeekRow=Vw.MainElement+"-week-row",Vw.YearRow=Vw.MainElement+"-year-row",Vw.DecadeRow=Vw.MainElement+"-decade-row",Vw.CenturyRow=Vw.MainElement+"-century-row",Vw.Cell=Vw.MainElement+"-cell",Vw.Day=Vw.MainElement+"-day",Vw.NotCurrentView=Vw.MainElement+"-not-current-view",Vw.HeaderHelper=Vw.MainElement+"-header",Vw.HeaderTitleButton=Vw.HeaderHelper+"-title-btn",Vw.HeaderPreviousYearButton=Vw.HeaderHelper+"-previous-year-btn",Vw.HeaderPreviousMonthButton=Vw.HeaderHelper+"-previous-month-btn",Vw.HeaderPreviousPeriodButton=Vw.HeaderHelper+"-previous-period-btn",Vw.HeaderNextYearButton=Vw.HeaderHelper+"-next-year-btn",Vw.HeaderNextMonthButton=Vw.HeaderHelper+"-next-month-btn",Vw.HeaderNextPeriodButton=Vw.HeaderHelper+"-next-period-btn";class zw{}var Ww,$w;zw.MainElement=`.${Vw.MainElement}`,zw.SelectedItem=`td.${Vw.SelectedItem}`,zw.Header=`.${Vw.Header}`,zw.FirstDataTableContainer=`${_w}:nth-of-type(1)`,zw.DateTableContainer=_w,zw.DataTable=`.${Vw.Content} > table`,zw.DataTableContainerWrapperClassName=`.${Vw.DataTableContainerWrapperClassName}`,zw.Footer=`.${Vw.Footer}`,zw.Day=`.${Vw.Day}`,zw.Cell=`.${Vw.Cell}`,function(e){e.class="class",e.view="view",e.minView="min-view",e.viewDate="view-date",e.enableMultiSelect="enable-multi-select",e.minDate="min-date",e.maxDate="max-date",e.visiblePeriodsCount="visible-periods-count",e.enableRangeSelect="enable-range-select",e.periodIndex="period-index",e.hasNullStartXorEndDate="has-null-start-xor-end-date",e.selectDateOnFirstFocus="select-date-on-first-focus"}(Ww||(Ww={})),function(e){e.dataDate="data-date",e.dataMonth="data-month",e.dataYear="data-year",e.dataDecade="data-decade"}($w||($w={}));const Gw=12,qw=new Date(new Date(Date.UTC(1,0,1)).setUTCFullYear(1)),Yw=new Date(Date.UTC(9999,11,31)),Xw=864e5;class Jw{constructor(e,t){this._pointerDownDate=e.pointerDownDate,this._pointerUpDate=null,this._clearSelection=e.clearSelection,this.cellElements=e.cellElements,this._callback=t,this.refreshUI(!1)}get clearSelection(){return this._clearSelection}get pointerDownDate(){return this._pointerDownDate}get pointerUpDate(){return this._pointerUpDate}set pointerUpDate(e){this._pointerUpDate!==e&&e&&(this._pointerUpDate=e,this.refreshUI(!0))}get isValid(){return!!this._pointerUpDate}stop(){this.refreshUI(!1),this.isValid&&null!==this._callback&&this._callback(this._pointerDownDate,this._pointerUpDate,this._clearSelection)}cancel(){for(let e=0;e<this.cellElements.length;e++){const t=this.cellElements[e];Jw.removeDayCellSelectedClasses(t),t.hasAttribute("data-selected")&&Jw.addSelectedClassesToCell(t)}}refreshUI(e){const t=this.getStartPointedDateRange(),i=this.getEndPointedDateRange();for(let n=0;n<this.cellElements.length;n++){const s=this.cellElements[n];if(Ey.isDateCellDisabled(s))continue;const r=Number(s.dataset.date);Jw.removeDayCellSelectedClasses(s),e&&this.isDateRangeBoundary(r,t,i)&&T.DomUtils.addClassName(s,Vw.SelectedRange),this.needApplySelectedStyle(r,t,i,e)&&Jw.addSelectedClassesToCell(s),s.hasAttribute("data-selected")&&!this.clearSelection&&Jw.addSelectedClassesToCell(s)}}getStartPointedDateRange(){return this.pointerUpDate?Math.min(this.pointerUpDate.getTime(),this.pointerDownDate.getTime()):this.pointerDownDate.getTime()}getEndPointedDateRange(){return this.pointerUpDate?Math.max(this.pointerUpDate.getTime(),this.pointerDownDate.getTime()):this.pointerDownDate.getTime()}needApplySelectedStyle(e,t,i,n){return!(e<t||e>i)&&(!n||!this.isDateRangeBoundary(e,t,i))}isDateRangeBoundary(e,t,i){if(!this.isDateDisabled(e)&&(e===t||e===i))return!0;return!(!(e>t&&e<i)||e!==this.getBoundaryDate(t,e)&&e!==this.getBoundaryDate(i,e))}getBoundaryDate(e,t){const i=e<t,n=i?1:-1;let s=e;for(;(i?s<t:s>t)&&this.isDateDisabled(s);)s+=n*Xw;return s}isDateDisabled(e){const t=this.getDayCellByDay(e);return null!=t&&Ey.isDateCellDisabled(t)}getDayCellByDay(e){for(let t=0;t<this.cellElements.length;t++)if(this.cellElements[t].getAttribute($w.dataDate)===e.toString())return this.cellElements[t];return null}static addSelectedClassesToCell(e){T.DomUtils.addClassName(e,Vw.SelectedItem)}static removeDayCellSelectedClasses(e){T.DomUtils.removeClassName(e,Vw.SelectedItem),T.DomUtils.removeClassName(e,Vw.SelectedRange),T.DomUtils.removeClassName(e,"text-white")}}class jw{constructor(e,t,i){this._pointerDownDate=e,this._pointerUpDate=null,this._clearSelection=t,this._callback=i}get clearSelection(){return this._clearSelection}get pointerDownDate(){return this._pointerDownDate}get pointerUpDate(){return this._pointerUpDate}set pointerUpDate(e){this._pointerUpDate=e}get isValid(){var e;return this.pointerDownDate.getTime()===(null===(e=this.pointerUpDate)||void 0===e?void 0:e.getTime())}stop(){null!==this._callback&&this._pointerUpDate&&this._callback(this._pointerDownDate,this._pointerUpDate,this._clearSelection)}cancel(){}refreshUI(){}}class Zw{constructor(e,t){this._pointerDownDate=e.pointerDownDate,this._pointerUpDate=null,this._clearSelection=e.clearSelection,this.cellElements=e.cellElements,this._callback=t,this.refreshUI()}get clearSelection(){return this._clearSelection}get pointerDownDate(){return this._pointerDownDate}get pointerUpDate(){return this._pointerUpDate}set pointerUpDate(e){this._pointerUpDate!==e&&e&&(this._pointerUpDate=e,this.refreshUI())}get isValid(){return!!this._pointerUpDate}stop(){this.refreshUI(),this.isValid&&null!==this._callback&&this._callback(this._pointerDownDate,this._pointerUpDate,this._clearSelection)}cancel(){for(let e=0;e<this.cellElements.length;e++){const t=this.cellElements[e];Zw.removeDayCellSelectedClasses(t),t.hasAttribute("data-selected")&&Zw.addSelectedClassesToCell(t)}}refreshUI(){const e=this.getStartPointedDateRange(),t=this.getEndPointedDateRange();for(let i=0;i<this.cellElements.length;i++){const n=this.cellElements[i];if(Ey.isDateCellDisabled(n))continue;const s=Number(n.dataset.date);Zw.removeDayCellSelectedClasses(n),this.isDateDisabled(s)||(this.isDateRangeBoundary(s,e,t)&&T.DomUtils.addClassName(n,Vw.SelectedRange),s===e&&T.DomUtils.addClassName(n,Vw.SelectedRangeFirst),s===t&&T.DomUtils.addClassName(n,Vw.SelectedRangeLast)),this.needApplySelectedStyle(s,e,t)&&Zw.addSelectedClassesToCell(n),n.hasAttribute("data-selected")&&!this.clearSelection&&Zw.addSelectedClassesToCell(n)}}getStartPointedDateRange(){return this.pointerUpDate?Math.min(this.pointerUpDate.getTime(),this.pointerDownDate.getTime()):this.pointerDownDate.getTime()}getEndPointedDateRange(){return this.pointerUpDate?Math.max(this.pointerUpDate.getTime(),this.pointerDownDate.getTime()):this.pointerDownDate.getTime()}needApplySelectedStyle(e,t,i){return!(e<t||e>i)&&!this.isDateRangeBoundary(e,t,i)}isDateRangeBoundary(e,t,i){if(e===t||e===i)return!0;return e>t&&e<i&&(e===this.getBoundaryDate(t,e)||e===this.getBoundaryDate(i,e))}getBoundaryDate(e,t){const i=e<t,n=i?1:-1;let s=e;for(;(i?s<t:s>t)&&this.isDateDisabled(s);)s+=n*Xw;return s}isDateDisabled(e){const t=this.getDayCellByDay(e);return null!=t&&Ey.isDateCellDisabled(t)}getDayCellByDay(e){for(let t=0;t<this.cellElements.length;t++)if(this.cellElements[t].getAttribute($w.dataDate)===e.toString())return this.cellElements[t];return null}static addSelectedClassesToCell(e){T.DomUtils.addClassName(e,Vw.SelectedItem)}static removeDayCellSelectedClasses(e){T.DomUtils.removeClassName(e,Vw.SelectedItem),T.DomUtils.removeClassName(e,Vw.SelectedRange),T.DomUtils.removeClassName(e,Vw.SelectedRangeFirst),T.DomUtils.removeClassName(e,Vw.SelectedRangeLast),T.DomUtils.removeClassName(e,"text-white")}}var ey,ty,iy,ny;!function(e){e[e.PreviousYear=0]="PreviousYear",e[e.PreviousMonth=1]="PreviousMonth",e[e.Title=2]="Title",e[e.NextMonth=3]="NextMonth",e[e.NextYear=4]="NextYear",e[e.PreviousPeriod=5]="PreviousPeriod",e[e.NextPeriod=6]="NextPeriod"}(ey||(ey={})),function(e){e[e.Header=0]="Header",e[e.DataTable=1]="DataTable",e[e.Footer=2]="Footer"}(ty||(ty={})),function(e){e[e.Month=0]="Month",e[e.Year=1]="Year",e[e.Decade=2]="Decade",e[e.Century=3]="Century"}(iy||(iy={})),function(e){e[e.January=0]="January",e[e.February=1]="February",e[e.March=2]="March",e[e.April=3]="April",e[e.May=4]="May",e[e.June=5]="June",e[e.July=6]="July",e[e.August=7]="August",e[e.September=8]="September",e[e.October=9]="October",e[e.November=10]="November",e[e.December=11]="December"}(ny||(ny={}));class sy extends Es{constructor(){super(),this._handlePointerEventsMode=r.None,this.viewDate=new Date,this.viewType=iy.Month,this.minViewType=iy.Month,this.periodIndex=0,this._pointerEventsHelper=new q(this)}get calendar(){return this._calendar||(this._calendar=T.DomUtils.getParentByTagName(this,tl)),this._calendar}get IsMinMeasure(){return this.viewType===this.minViewType}connectedCallback(){super.connectedCallback(),this._pointerEventsHelper.initialize()}disconnectedCallback(){super.disconnectedCallback(),this._pointerEventsHelper.dispose()}updated(e){e.has("viewDate")&&(this.calendar.restoreFocus(),this.calendar.dateSelectionRenderer&&this.calendar.dateSelectionRenderer.refreshUI()),e.has("viewType")&&(this._handlePointerEventsMode=r.None,this.IsMinMeasure&&(this._handlePointerEventsMode=r.Click|r.Dragging)),super.updated(e)}get handlePointerEventsMode(){return this._handlePointerEventsMode}get handlePointerEventsTarget(){return this}get hoverTitleElementsSelector(){return null}get bypassNonInlineHoverTitleElementChildSelector(){return null}shouldProcessPointerEvent(e){return!0}handlePointerEventsDelay(e){return s.Default}}C([An({attribute:Ww.viewDate,converter:e=>new Date(Number(e))})],sy.prototype,"viewDate",void 0),C([An({type:Number,attribute:Ww.view})],sy.prototype,"viewType",void 0),C([An({type:Number,attribute:Ww.minView})],sy.prototype,"minViewType",void 0),C([An({type:Number,attribute:Ww.periodIndex})],sy.prototype,"periodIndex",void 0);class ry extends CustomEvent{constructor(e,t,i){super(ry.eventName,{detail:new ay(e,t,i),bubbles:!0,composed:!0,cancelable:!0})}}ry.eventName=tl+".cellpointerup";class oy extends Event{constructor(){super(oy.eventName,{bubbles:!0,composed:!1,cancelable:!0})}}oy.eventName=tl+".keyboardnavigationleaved";class ay{constructor(e,t,i){this.PointerDownDateEpochMs=e,this.PointerUpDateEpochMs=t,this.ClearSelection=i}}gt.register(ry.eventName,(e=>e.detail));class ly extends Mi{constructor(e,t){super(e.getKeyboardNavigator(),t),this.calendar=e}isFocusedFromOutside(){return this.calendar.isSameNode(document.activeElement)}isFocusedFromDataTable(){var e,t,i;return null!==(i=null===(t=null!==(e=this.getDataTableContainerWrapper())&&void 0!==e?e:this.getCurrentDataTableContainer())||void 0===t?void 0:t.contains(document.activeElement))&&void 0!==i&&i}getHeader(){return this.calendar.getHeaderElement()}getDataTableContainerWrapper(){return this.calendar.tableContainerWrapper}getCurrentDataTableContainer(){return this.calendar.currentTableContainer}getAllDataTableContainers(){return this.calendar.enumerateTableContainers}getFooter(){return this.calendar.getFooterElement()}}class Ay extends ly{constructor(e,t){super(e,t),this.itemSelector=`:scope > .${he.Button}:not(.${he.Disabled}), :scope > div.${Vw.HeaderTitleButton}:not(.${he.Disabled})`,this.buttonClassToButtonType=new Map([[Vw.HeaderPreviousYearButton,ey.PreviousYear],[Vw.HeaderPreviousMonthButton,ey.PreviousMonth],[Vw.HeaderPreviousPeriodButton,ey.PreviousPeriod],[Vw.HeaderTitleButton,ey.Title],[Vw.HeaderNextYearButton,ey.NextYear],[Vw.HeaderNextMonthButton,ey.NextMonth],[Vw.HeaderNextPeriodButton,ey.NextPeriod]]),this.buttonTypeToButtonClass=new Map([[ey.PreviousYear,Vw.HeaderPreviousYearButton],[ey.PreviousMonth,Vw.HeaderPreviousMonthButton],[ey.PreviousPeriod,Vw.HeaderPreviousPeriodButton],[ey.Title,Vw.HeaderTitleButton],[ey.NextYear,Vw.HeaderNextYearButton],[ey.NextMonth,Vw.HeaderNextMonthButton],[ey.NextPeriod,Vw.HeaderNextPeriodButton]])}getShortcutContext(){return{AreaType:ty.Header,ButtonType:this.getSelectedButtonType()}}queryItems(){return this.queryItemsBySelector(this.itemSelector)}activate(){const e=this.getButtonIndexByType(this.lastFocusedButtonType);this.selectedItemIndex=this.isFocusedFromOutside()?0:this.isFocusedFromDataTable()?this.itemCount-1:null!=e?e:0,super.activate()}leaveBackward(){this.lastFocusedButtonType=void 0,super.leaveBackward()}leaveForward(){this.lastFocusedButtonType=void 0,super.leaveForward()}handleKeyDown(e){switch(Be.KeyUtils.getEventKeyCode(e)){case Be.KeyCode.Tab:return e.shiftKey?this.moveToPrevItem():this.moveToNextItem();case Be.KeyCode.Space:case Be.KeyCode.Enter:return this.calendar.scheduleFocusRestoration(!1),this.performShortcutEvent(e),!0;case Be.KeyCode.Left:case Be.KeyCode.Up:case Be.KeyCode.Home:case Be.KeyCode.PageUp:case Be.KeyCode.Right:case Be.KeyCode.Down:case Be.KeyCode.End:case Be.KeyCode.PageDown:return!0}return super.handleKeyDown(e)}moveToPrevItem(){return this.selectedItemIndex>0&&(this.selectItem(this.selectedItemIndex-1),!0)}moveToNextItem(){return this.selectedItemIndex<this.itemCount-1&&(this.selectItem(this.selectedItemIndex+1),!0)}updateSelectedItemByIndex(e){super.updateSelectedItemByIndex(e),this.lastFocusedButtonType=this.getSelectedButtonType()}getSelectedButtonType(){for(const e of this.selectedItemElement.classList)if(this.buttonClassToButtonType.has(e))return this.buttonClassToButtonType.get(e)}getButtonIndexByType(e){return e?this.items.findIndex((t=>t.classList.contains(this.buttonTypeToButtonClass.get(e)))):void 0}}class dy extends ly{get isObsolete(){return this.calendar.currentView!==this.currentCalendarView}get targetElement(){return super.targetElement}constructor(e,t){super(e,t),this.boundCalendarFocusedDayChangedHandler=this.onCalendarFocusedDayChanged.bind(this),this.calendar.onFocusedDayChanged(this.boundCalendarFocusedDayChangedHandler)}activate(){this.applyCalendarFocus(),super.activate()}onDispose(){this.calendar.offFocusedDayChanged(this.boundCalendarFocusedDayChangedHandler),super.onDispose()}get dateSelectionRenderer(){return this.calendar.dateSelectionRenderer}getShortcutContext(){const e=this.lastShortcutArgs;return delete this.lastShortcutArgs,{AreaType:ty.DataTable,Offset:null==e?void 0:e.offset,Row:null==e?void 0:e.row,Column:null==e?void 0:e.column,PeriodIndex:null==e?void 0:e.periodIndex,Date:null==e?void 0:e.date}}queryItems(){return this.queryItemsBySelector(this.itemSelector)}handleKeyDown(e){switch(Be.KeyUtils.getEventKeyCode(e)){case Be.KeyCode.Left:return!((e.ctrlKey||e.metaKey||e.altKey)&&!e.shiftKey)&&this.moveToPrevDay(e);case Be.KeyCode.Right:return!((e.ctrlKey||e.metaKey||e.altKey)&&!e.shiftKey)&&this.moveToNextDay(e);case Be.KeyCode.Up:return!((e.ctrlKey||e.metaKey||e.altKey)&&!e.shiftKey)&&this.moveToPrevRow(e);case Be.KeyCode.Down:return!((e.ctrlKey||e.metaKey||e.altKey)&&!e.shiftKey)&&this.moveToNextRow(e);case Be.KeyCode.Home:return this.handleHomeKey(e);case Be.KeyCode.End:return this.handleEndKey(e);case Be.KeyCode.PageUp:return this.calendar.scheduleFocusRestoration(),this.handlePageUpKey(e);case Be.KeyCode.PageDown:return this.calendar.scheduleFocusRestoration(),this.handlePageDownKey(e);case Be.KeyCode.Enter:case Be.KeyCode.Space:return this.handleItemClick(e),!0}return super.handleKeyDown(e)}handleKeyUp(e){return this.isShiftKeyCode(e)&&this.stopSelectingDays(),super.handleKeyUp(e)}isShiftKeyCode(e){return 16===Be.KeyUtils.getEventKeyCode(e)}getSelectedItemRowIndex(){return Math.floor(this.selectedItemIndex/this.rowLength)}getSelectedItemColumnIndex(){return Math.floor(this.selectedItemIndex%this.rowLength)}handlePageUpKey(e,t){return this.prepareAndPerformShortcutEvent(e,{offset:null!=t?t:e.shiftKey?-12:-1,date:e.shiftKey?Ey.getDateFromCell(this.selectedItemElement):void 0}),!0}handlePageDownKey(e,t){return this.prepareAndPerformShortcutEvent(e,{offset:null!=t?t:e.shiftKey?Gw:1,date:e.shiftKey?Ey.getDateFromCell(this.selectedItemElement):void 0}),!0}prepareAndPerformShortcutEvent(e,t){t.periodIndex=this.targetElement.periodIndex,this.lastShortcutArgs=t,this.performShortcutEvent(e)}tryRemoveTabindexFromSelectedElement(){this.selectedItemElement&&fi.removeTabIndex(this.selectedItemElement)}onCalendarFocusedDayChanged(e,t=!0){this.tryRemoveTabindexFromSelectedElement(),this.isActive()&&e&&(this.tryRestoreSelectedItem(e),this.selectedItemElement&&fi.makeElementFocusable(this.selectedItemElement),t&&this.selectItem(this.selectedItemIndex))}applyCalendarFocus(){var e;this.tryRemoveTabindexFromSelectedElement();const t=null!==(e=this.calendar.getFocusedCellElementInView(this.currentCalendarView))&&void 0!==e?e:this.targetElement.querySelector(zw.SelectedItem);t&&this.tryRestoreSelectedItem(t)}tryRestoreSelectedItem(e){if(!e.isConnected)return;const t=this.navigator.getStrategy(this.getCurrentDataTableContainer());if(!t)return;const i=t.items.indexOf(e);i>-1&&(t.selectedItemIndex=i)}initStartDaySelection(e){null===this.dateSelectionRenderer&&e.shiftKey&&this.calendar.createDateSelectionRenderer(Ey.getDateFromCell(this.selectedItemElement),!e.ctrlKey&&!e.metaKey)}stopSelectingDays(){null!==this.dateSelectionRenderer&&(this.dateSelectionRenderer.pointerUpDate=Ey.getDateFromCell(this.selectedItemElement),this.calendar.stopSelectingDates())}updateSelectedItemFocusableState(){this.selectedItemElement&&(this.isActive()?fi.makeElementFocusable(this.selectedItemElement):fi.removeTabIndex(this.selectedItemElement))}isActive(){return this.targetElement===this.calendar.currentTableContainer}}class cy extends dy{get rowLength(){return this._rowLength}get currentCalendarView(){return this._currentCalendarView}get itemSelector(){return`:scope tr > .${Vw.Cell}`}constructor(e,t,i,n){super(e,t),this._currentCalendarView=i,this._rowLength=n}activate(){super.activate(),this.extendSelection()}moveToPrevDay(e){var t,i;this.initStartDaySelection(e);const n=this.calendar.tryMoveFocus({value:-1,isHorizontal:!0},this.selectedItemElement);if(n.needChangePeriod){if(n.newPeriodFitsIntoVisibleRange)return!1;this.switchCurrentMonth(e,null!==(i=n.periodsToSkip)&&void 0!==i?i:-1)}else{const e=null!==(t=n.unitsToSkip)&&void 0!==t?t:-1;this.selectedItemIndex>=e&&this.selectItem(this.selectedItemIndex+e),this.extendSelection()}return!0}moveToNextDay(e){var t,i;this.initStartDaySelection(e);const n=this.calendar.tryMoveFocus({value:1,isHorizontal:!0},this.selectedItemElement);if(n.needChangePeriod){if(n.newPeriodFitsIntoVisibleRange)return!1;this.switchCurrentMonth(e,null!==(i=n.periodsToSkip)&&void 0!==i?i:1)}else{const e=null!==(t=n.unitsToSkip)&&void 0!==t?t:1;this.selectedItemIndex<this.itemCount-e&&this.selectItem(this.selectedItemIndex+e),this.extendSelection()}return!0}moveToPrevRow(e){var t,i;this.initStartDaySelection(e);const n=this.calendar.tryMoveFocus({value:-1,isHorizontal:!1},this.selectedItemElement);if(n.needChangePeriod){if(n.newPeriodFitsIntoVisibleRange)return!1;this.switchCurrentMonth(e,null!==(i=n.periodsToSkip)&&void 0!==i?i:-1)}else{const e=null!==(t=n.unitsToSkip)&&void 0!==t?t:-this.rowLength;this.selectedItemIndex>=e&&this.selectItem(this.selectedItemIndex+e),this.extendSelection()}return!0}moveToNextRow(e){var t,i;this.initStartDaySelection(e);const n=this.calendar.tryMoveFocus({value:1,isHorizontal:!1},this.selectedItemElement);if(n.needChangePeriod){if(n.newPeriodFitsIntoVisibleRange)return!1;this.switchCurrentMonth(e,null!==(i=n.periodsToSkip)&&void 0!==i?i:1)}else{const e=null!==(t=n.unitsToSkip)&&void 0!==t?t:this.rowLength;this.selectedItemIndex<this.itemCount-e&&this.selectItem(this.selectedItemIndex+e),this.extendSelection()}return!0}handleHomeKey(e){var t;const i=this.getSelectedItemRowIndex()*this.rowLength,n={value:i-this.selectedItemIndex,isHorizontal:!0};this.initStartDaySelection(e);const s=this.calendar.tryMoveFocus(n,this.selectedItemElement);if(s.needChangePeriod){if(s.newPeriodFitsIntoVisibleRange)return!1;this.switchCurrentMonth(e,null!==(t=s.periodsToSkip)&&void 0!==t?t:-1)}else{this.selectItem(void 0!==s.unitsToSkip?this.selectedItemIndex+s.unitsToSkip:i),this.extendSelection()}return!0}handleEndKey(e){var t;const i=(this.getSelectedItemRowIndex()+1)*this.rowLength-1,n={value:i-this.selectedItemIndex,isHorizontal:!0};this.initStartDaySelection(e);const s=this.calendar.tryMoveFocus(n,this.selectedItemElement);if(s.needChangePeriod){if(s.newPeriodFitsIntoVisibleRange)return!1;this.switchCurrentMonth(e,null!==(t=s.periodsToSkip)&&void 0!==t?t:1)}else{this.selectItem(void 0!==s.unitsToSkip?this.selectedItemIndex+s.unitsToSkip:i),this.extendSelection()}return!0}handlePageUpKey(e){const t={value:-(e.shiftKey?Ey.getYearOffsetInDaysFrom(-1,this.selectedItemElement):Ey.getMonthOffsetInDaysFrom(-1,this.selectedItemElement)),isHorizontal:!0};this.initStartDaySelection(e);const i=this.calendar.tryMoveFocus(t,this.selectedItemElement);if(i.needChangePeriod){if(i.newPeriodFitsIntoVisibleRange)return this.applyCalendarFocus(),!1;super.handlePageUpKey(e,i.periodsToSkip)}else this.applyCalendarFocus(),this.selectItem(this.selectedItemIndex);return!0}handlePageDownKey(e){const t={value:e.shiftKey?Ey.getYearOffsetInDaysFrom(1,this.selectedItemElement):Ey.getMonthOffsetInDaysFrom(1,this.selectedItemElement),isHorizontal:!0};this.initStartDaySelection(e);const i=this.calendar.tryMoveFocus(t,this.selectedItemElement);if(i.needChangePeriod){if(i.newPeriodFitsIntoVisibleRange)return this.applyCalendarFocus(),!1;super.handlePageDownKey(e,i.periodsToSkip)}else this.applyCalendarFocus(),this.selectItem(this.selectedItemIndex);return!0}extendSelection(){null!==this.dateSelectionRenderer&&(this.dateSelectionRenderer.pointerUpDate=Ey.getDateFromCell(this.selectedItemElement))}handleItemClick(e){const t=Ey.getDateFromCell(this.selectedItemElement);this.calendar.tryCreateRangeSelectionRenderer(t),this.prepareAndPerformShortcutEvent(e,{date:t})}switchCurrentMonth(e,t){this.prepareAndPerformShortcutEvent(e,{offset:t,date:this.calendar.focusedDate})}}class hy extends dy{get rowLength(){return 4}moveToPrevDay(e){var t;const i=this.calendar.tryMoveFocus({value:-1,isHorizontal:!0},this.selectedItemElement);if(i.needChangePeriod){if(i.newPeriodFitsIntoVisibleRange)return!1;this.switchCurrentMonth(e,-1)}else{const e=null!==(t=i.unitsToSkip)&&void 0!==t?t:-1;this.selectedItemIndex>=e&&this.selectItem(this.selectedItemIndex+e)}return!0}moveToNextDay(e){var t;const i=this.calendar.tryMoveFocus({value:1,isHorizontal:!0},this.selectedItemElement);if(i.needChangePeriod){if(i.newPeriodFitsIntoVisibleRange)return!1;this.switchCurrentMonth(e,1)}else{const e=null!==(t=i.unitsToSkip)&&void 0!==t?t:1;this.selectedItemIndex<this.itemCount-e&&this.selectItem(this.selectedItemIndex+e)}return!0}moveToPrevRow(e){var t;const i=this.calendar.tryMoveFocus({value:-1,isHorizontal:!1},this.selectedItemElement);if(i.needChangePeriod){if(i.newPeriodFitsIntoVisibleRange)return!1;this.switchCurrentMonth(e,-1)}else{const e=null!==(t=i.unitsToSkip)&&void 0!==t?t:-this.rowLength;this.selectedItemIndex>=e&&this.selectItem(this.selectedItemIndex+e)}return!0}moveToNextRow(e){var t;const i=this.calendar.tryMoveFocus({value:1,isHorizontal:!1},this.selectedItemElement);if(i.needChangePeriod){if(i.newPeriodFitsIntoVisibleRange)return!1;this.switchCurrentMonth(e,1)}else{const e=null!==(t=i.unitsToSkip)&&void 0!==t?t:this.rowLength;this.selectedItemIndex<this.itemCount-e&&this.selectItem(this.selectedItemIndex+e)}return!0}handleHomeKey(e){const t=this.getIndexOfFirstAccessibleItemInCurrentView(),i=this.calendar.tryMoveFocus({value:t-this.selectedItemIndex,isHorizontal:!0},this.selectedItemElement);if(i.needChangePeriod){if(i.newPeriodFitsIntoVisibleRange)return!1}else{this.selectItem(void 0!==i.unitsToSkip?this.selectedItemIndex+i.unitsToSkip:t)}return!0}handleEndKey(e){const t=this.getIndexOfLastAccessibleItemInCurrentView(),i=this.calendar.tryMoveFocus({value:t-this.selectedItemIndex,isHorizontal:!0},this.selectedItemElement);if(i.needChangePeriod){if(i.newPeriodFitsIntoVisibleRange)return!1}else{this.selectItem(void 0!==i.unitsToSkip?this.selectedItemIndex+i.unitsToSkip:t)}return!0}handlePageUpKey(e){const t=this.calendar.tryMoveFocus({value:-(this.calendar.currentView===iy.Year?Gw:10),isHorizontal:!0},this.selectedItemElement);if(t.needChangePeriod){if(t.newPeriodFitsIntoVisibleRange)return!1;super.handlePageUpKey(e,t.periodsToSkip)}return!0}handlePageDownKey(e){const t=this.calendar.tryMoveFocus({value:this.calendar.currentView===iy.Year?Gw:10,isHorizontal:!0},this.selectedItemElement);if(t.needChangePeriod){if(t.newPeriodFitsIntoVisibleRange)return!1;super.handlePageDownKey(e,t.periodsToSkip)}return!0}handleItemClick(e){this.calendar.scheduleFocusRestoration(),this.prepareAndPerformShortcutEvent(e,{row:this.getSelectedItemRowIndex(),column:this.getSelectedItemColumnIndex()})}switchCurrentMonth(e,t){this.prepareAndPerformShortcutEvent(e,{offset:t})}getIndexOfFirstAccessibleItemInCurrentView(){let e=0;for(;e<=this.selectedItemIndex&&!this.itemBelongsToCurrentView(e);)e++;return e}getIndexOfLastAccessibleItemInCurrentView(){let e=this.itemCount-1;for(;e>=this.selectedItemIndex&&!this.itemBelongsToCurrentView(e);)e--;return e}itemBelongsToCurrentView(e){var t;return!(null===(t=this.getItem(e))||void 0===t?void 0:t.classList.contains(Vw.NotCurrentView))}}class uy extends hy{get currentCalendarView(){return iy.Year}get itemSelector(){return`:scope .${Vw.YearRow} > td`}}class py extends hy{get currentCalendarView(){return iy.Decade}get itemSelector(){return`:scope .${Vw.DecadeRow} > td:not(.${he.Invisible})`}}class my extends hy{get currentCalendarView(){return iy.Century}get itemSelector(){return`:scope .${Vw.CenturyRow} > td:not(.${he.Invisible})`}}class gy extends ly{constructor(e,t){super(e,t),this.itemSelector=`:scope > .${he.Button}`}getShortcutContext(){return{AreaType:ty.Footer,ButtonType:this.selectedItemIndex}}queryItems(){return this.queryItemsBySelector(this.itemSelector)}activate(){this.selectedItemIndex=this.isFocusedFromOutside()?this.itemCount-1:0,super.activate()}handleKeyDown(e){switch(Be.KeyUtils.getEventKeyCode(e)){case Be.KeyCode.Tab:return e.shiftKey?this.moveToPrevItem():this.moveToNextItem();case Be.KeyCode.Space:case Be.KeyCode.Enter:return this.performShortcutEvent(e),!0;case Be.KeyCode.Left:case Be.KeyCode.Up:case Be.KeyCode.Home:case Be.KeyCode.PageUp:case Be.KeyCode.Right:case Be.KeyCode.Down:case Be.KeyCode.End:case Be.KeyCode.PageDown:return!0}return super.handleKeyDown(e)}moveToPrevItem(){return this.selectedItemIndex>0&&(this.selectItem(this.selectedItemIndex-1),!0)}moveToNextItem(){return this.selectedItemIndex<this.itemCount-1&&(this.selectItem(this.selectedItemIndex+1),!0)}}class Cy extends ly{constructor(e){super(e,e),this._isFirstFocus=!0}updateSelectedItemByChildElement(e,t=null){super.updateSelectedItemByChildElement(e,t),this.calendar.hasAttribute(Ww.selectDateOnFirstFocus)&&this._isFirstFocus&&(this._isFirstFocus=!1,this.selectedItemIndex=1)}queryItems(){return new Array(this.getHeader(),...this.getAllDataTableContainers(),this.getFooter())}activate(){this.isDateTableStrategy(this.getItemStrategy(this.selectedItemIndex))&&(this.selectedItemIndex=this.findActiveDataTableStrategyIndex()),super.activate()}createItemStrategy(e){if(e.matches(zw.Header))return new Ay(this.calendar,e);if(e.matches(zw.DateTableContainer))return this.createDataTableStrategy(e);if(e.matches(zw.Footer))return new gy(this.calendar,e);throw new Error("Not implemented")}createDataTableStrategy(e){switch(e.viewType){case iy.Month:return new cy(this.calendar,e,iy.Month,7);case iy.Year:return e.IsMinMeasure?new cy(this.calendar,e,iy.Year,4):new uy(this.calendar,e);case iy.Decade:return e.IsMinMeasure?new cy(this.calendar,e,iy.Decade,4):new py(this.calendar,e);case iy.Century:return e.IsMinMeasure?new cy(this.calendar,e,iy.Century,4):new my(this.calendar,e)}}handleKeyDown(e){switch(Be.KeyUtils.getEventKeyCode(e)){case Be.KeyCode.Tab:return this.handleTab(e);case Be.KeyCode.Up:return this.handleArrowUp(e);case Be.KeyCode.Down:return this.handleArrowDown(e);case Be.KeyCode.Left:case Be.KeyCode.Home:case Be.KeyCode.PageUp:return this.handleMove(e,!1);case Be.KeyCode.Right:case Be.KeyCode.End:case Be.KeyCode.PageDown:return this.handleMove(e,!0)}return super.handleKeyDown(e)}handleTab(e){if(this.isDateTableStrategy(this.getSelectedItemStrategy())){const t=this.findNotDataTableStrategyIndex(!e.shiftKey);if(-1!==t)return this.selectItem(t),!0;this.updateDataTableStrategiesFocusableElements(),this.selectedItemIndex=e.shiftKey?0:this.itemCount-1}else{if(this.isDateTableStrategy(this.getItemStrategy(this.selectedItemIndex+(e.shiftKey?-1:1))))return this.updateDataTableStrategiesFocusableElements(),this.selectItem(this.findActiveDataTableStrategyIndex()),!0}return e.shiftKey?(this.selectedItemIndex>0?this.moveToPrevItem():(this.leaveBackward(),this.dispatchKeyboardNavigationLeavedEvent()),!0):this.selectedItemIndex<this.itemCount-1?(this.moveToNextItem(),!0):super.handleKeyDown(e)}handleArrowUp(e){return e.ctrlKey?(this.calendar.scheduleFocusRestoration(),this.performShortcutEvent(e),!0):this.handleMove(e,!1)}handleArrowDown(e){return e.ctrlKey?(this.calendar.scheduleFocusRestoration(),this.performShortcutEvent(e),!0):this.handleMove(e,!0)}handleMove(e,t){return this.isAnyModifierKeyPressed(e)?super.handleKeyDown(e):(t?this.moveToNextItem():this.moveToPrevItem(),!0)}dispatchKeyboardNavigationLeavedEvent(){setTimeout((()=>this.targetElement.dispatchEvent(new oy)),0)}isAnyModifierKeyPressed(e){return e.shiftKey||e.ctrlKey||e.metaKey||e.altKey}findNotDataTableStrategyIndex(e){if(e){for(let e=this.selectedItemIndex+1;e<this.itemCount;e++)if(!this.isDateTableStrategy(this.getItemStrategy(e)))return e}else for(let e=this.selectedItemIndex-1;e>=0;e--)if(!this.isDateTableStrategy(this.getItemStrategy(e)))return e;return-1}findActiveDataTableStrategyIndex(){for(let e=0;e<this.itemCount;e++){const t=this.getItemStrategy(e);if(this.isDateTableStrategy(t)&&t.isActive())return e}return 0}updateDataTableStrategiesFocusableElements(){for(let e=0;e<this.itemCount;e++){const t=this.getItemStrategy(e);this.isDateTableStrategy(t)&&t.updateSelectedItemFocusableState()}Kr.isActivated&&Kr.updateSubscriptions()}isDateTableStrategy(e){return e instanceof dy}}class fy{get focusedItem(){return this._focusedItem}set focusedItem(e){this._focusedItem=e}get focusedElement(){return this._focusedElement}set focusedElement(e){this._focusedElement=e}get minDate(){return this._minDate}set minDate(e){this._minDate=e}get maxDate(){return this._maxDate}set maxDate(e){this._maxDate=e}get calendar(){return this._calendar}constructor(e){this.boundCalendarMinMaxDatesChangedHandler=this.updateMinMaxDates.bind(this),this._calendar=e,this._focusedElement=null,this._minDate=this._calendar.minDate,this._maxDate=this._calendar.maxDate,this.calendar.onMinMaxDatesChanged(this.boundCalendarMinMaxDatesChangedHandler)}get calendarCurrentViewDate(){return this.calendar.currentViewDate}getUpdatedElementToFocus(){return this.focusedElement=this.findCellElementByItem(this.getUpdatedItemToFocus()),this.focusedElement}updateMinMaxDates(e,t){e&&(this._minDate=e),t&&(this._maxDate=t)}}class vy extends fy{tryMoveFocus(e,t){const i=Ey.getMonthFromCell(t);this.focusedItem=this.getMonthRelativeTo(e,i),void 0!==this.focusedItem&&(this.focusedItem=this.applyMinMaxDates(this.focusedItem)),this.focusedElement=this.findCellElementByItem(this.focusedItem);const n=this.areMonthsDifferByYear(e,i);return{needChangePeriod:n,periodsToSkip:n?e.value:void 0,unitsToSkip:this.focusedItem&&i?this.focusedItem-i:void 0}}getUpdatedItemToFocus(){if(void 0===this.focusedItem){const e=this.calendar.findSelectedCellElement();this.focusedItem=e?Ey.getMonthFromCell(e):this.calendarCurrentViewDate.getMonth()}return this.focusedItem&&(this.focusedItem=this.applyMinMaxDates(this.focusedItem)),this.focusedItem}findCellElementByItem(e){return void 0===e?null:this.calendar.currentTableContainer.querySelector(`td[${$w.dataMonth}="${ny[e]}"]`)}applyMinMaxDates(e){return this.calendarCurrentViewDate.getFullYear()===this.minDate.getFullYear()&&e<this.minDate.getMonth()?this.minDate.getMonth():this.calendarCurrentViewDate.getFullYear()===this.maxDate.getFullYear()&&e>this.maxDate.getMonth()?this.maxDate.getMonth():e}getMonthRelativeTo(e,t){if(void 0===t)return;const i=(this.getRawIndex(e,t)%Gw+Gw)%Gw;return ny[ny[i%Gw]]}areMonthsDifferByYear(e,t){if(void 0===t)return!1;const i=this.getRawIndex(e,t);return i<0||i>=Gw}getEffectiveOffset(e){return e.value*(e.isHorizontal?1:4)}getRawIndex(e,t){return t+this.getEffectiveOffset(e)}}class by extends fy{tryMoveFocus(e,t){const i=Ey.getYearFromCell(t);this.focusedItem=this.getYearRelativeTo(e,i),void 0!==this.focusedItem&&(this.focusedItem=this.applyMinMaxDates(this.focusedItem)),this.focusedElement=this.findCellElementByItem(this.focusedItem);const n=this.areYearsDifferByDecade(this.calendarCurrentViewDate.getFullYear(),this.focusedItem);return{needChangePeriod:n,periodsToSkip:n?e.value:void 0,unitsToSkip:this.focusedItem&&i?this.focusedItem-i:void 0}}getUpdatedItemToFocus(){if(void 0===this.focusedItem){const e=this.calendar.findSelectedCellElement();this.focusedItem=e?Ey.getYearFromCell(e):this.calendarCurrentViewDate.getFullYear()}return this.focusedItem&&(this.focusedItem=this.applyMinMaxDates(this.focusedItem)),this.focusedItem}findCellElementByItem(e){return void 0===e?null:this.calendar.currentTableContainer.querySelector(`td[${$w.dataYear}="${e}"]`)}applyMinMaxDates(e){return e<this.minDate.getFullYear()?this.minDate.getFullYear():e>this.maxDate.getFullYear()?this.maxDate.getFullYear():e}getYearRelativeTo(e,t){if(void 0!==t)return t+this.getEffectiveOffset(e)}getEffectiveOffset(e){return e.value*(e.isHorizontal?1:4)}areYearsDifferByDecade(e,t){return void 0!==e&&void 0!==t&&Math.floor(e/10)!==Math.floor(t/10)}}class wy extends fy{tryMoveFocus(e,t){const i=Ey.getDateFromCell(t);this.focusedItem=this.applyMinMaxDates(this.getDateRelativeTo(e,t)),this.focusedElement=this.findCellElementByItem(this.focusedItem);const n=this.areDatesDifferByMonthOrYear(this.calendarCurrentViewDate,this.focusedItem);return{needChangePeriod:n,periodsToSkip:n?this.getShortcutOffsetInMonths(this.focusedItem,this.calendarCurrentViewDate):void 0,unitsToSkip:this.focusedItem?Math.round((this.focusedItem.getTime()-i.getTime())/Xw):void 0}}getUpdatedItemToFocus(){if(this.focusedItem=this.getFindCachedFocusedItem(),this.areDatesDifferByMonthOrYear(this.focusedItem,this.calendarCurrentViewDate)){const e=this.focusedItem.getDate();this.focusedItem=new Date(this.calendarCurrentViewDate);let t=this.trySetDate(this.focusedItem,e);null===t&&(t=this.trySetDate(this.focusedItem,this.calendarCurrentViewDate.getDate())),null===t&&(t=this.trySetDate(this.focusedItem,1)),this.focusedItem=t}return this.focusedItem=this.applyMinMaxDates(this.focusedItem),this.focusedItem}getFindCachedFocusedItem(){let e=this.focusedItem;if(void 0===e){const t=this.calendar.findSelectedCellElement();e=t?Ey.getDateFromCell(t):this.calendarCurrentViewDate}return e}findCellElementByItem(e){return void 0===e?null:this.calendar.currentTableContainer.querySelector(`.${Vw.Day}[${$w.dataDate}="${e.getTime()}"]`)}applyMinMaxDates(e){return e<this.minDate?new Date(this.minDate):e>this.maxDate?new Date(this.maxDate):new Date(e)}areDatesDifferByMonthOrYear(e,t){return e.getMonth()!==t.getMonth()||this.areDatesDifferByYear(e,t)}areDatesDifferByYear(e,t){return e.getUTCFullYear()!==t.getUTCFullYear()}trySetDate(e,t){const i=new Date(e);return i.setDate(t),this.areDatesDifferByMonthOrYear(i,e)?null:i}getShortcutOffsetInMonths(e,t){return e.getMonth()-t.getMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*Gw}getDateRelativeTo(e,t){const i=Ey.getDateFromCell(t),n=new Date(i);return new Date(n.setDate(n.getDate()+e.value*(e.isHorizontal?1:7)))}}class yy extends fy{tryMoveFocus(e,t){const i=Ey.getDecadeFromCell(t);this.focusedItem=this.getDecadeRelativeTo(e,i),void 0!==this.focusedItem&&(this.focusedItem=this.applyMinMaxDates(this.focusedItem)),this.focusedElement=this.findCellElementByItem(this.focusedItem);const n=this.areDecadesDifferByCentury(this.getCurrentDecade(),this.focusedItem),s=this.focusedItem&&i?this.subtractDecade(this.focusedItem,i):void 0;return{needChangePeriod:n,periodsToSkip:n?e.value:void 0,unitsToSkip:s}}getUpdatedItemToFocus(){if(void 0===this.focusedItem){const e=this.calendar.findSelectedCellElement();this.focusedItem=e?Ey.getDecadeFromCell(e):this.getCurrentDecade()}return this.focusedItem&&(this.focusedItem=this.applyMinMaxDates(this.focusedItem)),this.focusedItem}findCellElementByItem(e){return void 0===e?null:this.calendar.currentTableContainer.querySelector(`td[${$w.dataDecade}="${e.startYear}-${e.endYear}"]`)}applyMinMaxDates(e){return-1===this.compareDecades(e,this.getDecadeOfDate(this.minDate))?this.getDecadeOfDate(this.minDate):1===this.compareDecades(e,this.getDecadeOfDate(this.maxDate))?this.getDecadeOfDate(this.maxDate):e}getDecadeRelativeTo(e,t){if(void 0===t)return;const i=t.startYear+this.getEffectiveOffset(e);return{startYear:i,endYear:i+9}}getEffectiveOffset(e){return e.value*(e.isHorizontal?1:4)*10}areDecadesDifferByCentury(e,t){if(void 0===(null==e?void 0:e.startYear)||void 0===(null==t?void 0:t.startYear))return!1;return Math.floor(e.startYear/100)!==Math.floor(t.startYear/100)}getCurrentDecade(){return this.getDecadeOfDate(this.calendarCurrentViewDate)}getDecadeOfDate(e){const t=e.getFullYear(),i=10*Math.floor(t/10);return{startYear:i,endYear:i+9}}compareDecades(e,t){return e.startYear<t.startYear?-1:e.startYear===t.startYear?0:1}subtractDecade(e,t){return(e.startYear-t.startYear)/10}}const By=document.createElement("template");By.innerHTML="\n<style></style>\n<slot />";class Ey extends de{constructor(){super(),this.boundOnStartDateSelectionHandler=this.onStartDateSelection.bind(this),this.boundOnStopDaySelectionHandler=this.onStopDaySelection.bind(this),this.boundOnCancelDateSelectionHandler=this.onCancelDateSelection.bind(this),this.boundOnDateCellPointerEnterHandler=this.onDateCellPointerEnter.bind(this),this._enableMultiSelect=!1,this._enableRangeSelect=!1,this._hasNullStartXorEndDate=!1,this._visiblePeriodsCount=1,this._currentViewIndex=0,this._focusedCellElement=null,this._focusRestorationScheduled=!0,this._needImmediateSelectionAfterFocusRestored=!0,this._tableContainers=new Array,this._minDate=qw,this._maxDate=Yw,this._dateSelectionRenderer=null,this.calendarTableResizeObservers=new Map,this.focusedDayChangedHandlers=new Set,this.minMaxDatesChangedHandlers=new Set}get enableMultiSelect(){return this._enableMultiSelect}set enableMultiSelect(e){this._enableMultiSelect=e}get enableRangeSelect(){return this._enableRangeSelect}set enableRangeSelect(e){this._enableRangeSelect=e}get hasNullStartXorEndDate(){return this._hasNullStartXorEndDate}set hasNullStartXorEndDate(e){this._hasNullStartXorEndDate=e}get visiblePeriodsCount(){return this._visiblePeriodsCount}set visiblePeriodsCount(e){this._visiblePeriodsCount=e}get currentViewDate(){return this.currentTableContainer.viewDate}get baseViewDate(){return this.baseTableContainer.viewDate}get currentView(){var e,t;return null!==(t=null===(e=this.baseTableContainer)||void 0===e?void 0:e.viewType)&&void 0!==t?t:iy.Month}get focusedDate(){return this._focusStrategies[iy.Month].getFindCachedFocusedItem()}get enumerateTableContainers(){return this._tableContainers||this.registerTableContainers(),this._tableContainers}get currentTableContainer(){return this._tableContainers[this._currentViewIndex]}get baseTableContainer(){return this._baseTableContainer||(this._baseTableContainer=this.querySelector(zw.FirstDataTableContainer)),this._baseTableContainer}get tableContainerWrapper(){return this._tableContainerWrapper||(this._tableContainerWrapper=this.querySelector(zw.DataTableContainerWrapperClassName)),this._tableContainerWrapper}get minDate(){return this._minDate}set minDate(e){this._minDate=e}get maxDate(){return this._maxDate}set maxDate(e){this._maxDate=e}get dateSelectionRenderer(){return this._dateSelectionRenderer}connectedCallback(){super.connectedCallback(),this.addEventSubscriptions()}initializeComponent(){super.initializeComponent(),this._focusStrategies={[iy.Month]:new wy(this),[iy.Year]:new vy(this),[iy.Decade]:new by(this),[iy.Century]:new yy(this)},this.registerTableContainers(),this.initializeKeyboardNavigator(),this.tryInitializeRangeSelectionSubscriptions()}disposeComponent(){this.removeEventSubscriptions(),this.focusedDayChangedHandlers.clear(),this.minMaxDatesChangedHandlers.clear(),super.disposeComponent()}disconnectedCallback(){this.calendarTableResizeObservers.forEach((e=>e.disconnect())),super.disconnectedCallback()}registerTableContainers(){this._tableContainers=Array.from(this.querySelectorAll(zw.DateTableContainer))}applyTableSize(e,t,i){e.style.width=t+"px",e.style.height=i+"px"}onCalendarTableSizeChanged(e){var t;if(e.length<1)return;const i=e[0].target,n=e[0].contentRect;rt.fromDomRect(n).isEmpty||(this.applyTableSize(i,n.width,n.height),null===(t=this.calendarTableResizeObservers.get(i))||void 0===t||t.disconnect())}addEventSubscriptions(){this.addEventListener(a.eventName,this.boundOnStartDateSelectionHandler),this.addEventListener(l.eventName,this.boundOnStopDaySelectionHandler),this.addEventListener(A.eventName,this.boundOnCancelDateSelectionHandler),this.enableRangeSelect&&this.addEventListener(d.eventName,this.boundOnStartDateSelectionHandler)}removeEventSubscriptions(){this.removeEventListener(a.eventName,this.boundOnStartDateSelectionHandler),this.removeEventListener(l.eventName,this.boundOnStopDaySelectionHandler),this.removeEventListener(A.eventName,this.boundOnCancelDateSelectionHandler),this.removeEventListener(d.eventName,this.boundOnStartDateSelectionHandler)}addDayCellEventSubscriptions(){const e=this.findCellElements();for(let t=0;t<e.length;t++){e[t].addEventListener("pointerenter",this.boundOnDateCellPointerEnterHandler)}}removeDateCellEventSubscriptions(){const e=this.findCellElements();for(let t=0;t<e.length;t++){e[t].removeEventListener("pointerenter",this.boundOnDateCellPointerEnterHandler)}}tryInitializeRangeSelectionSubscriptions(){if(!this.hasNullStartXorEndDate)return;const e=this.findSelectedCellElement();if(!e)return;const t=Ey.getDateFromCell(e);t&&(this.createDateSelectionRenderer(t,!0),this._dateSelectionRenderer&&!Ey.isDateCellDisabled(e)&&(this._dateSelectionRenderer.pointerUpDate=t),this.addDayCellEventSubscriptions())}onStartDateSelection(e){if(T.DomUtils.hasClassName(this,he.Disabled)||T.DomUtils.hasClassName(this,he.ReadOnly))return;const t=Ey.getCellByTarget(e.detail.source.target),i=Ey.getDateFromTarget(e.detail.source.target);if(!t||!i)return;this.createDateSelectionRenderer(i,!e.detail.isLongTap&&(!(e.detail.source.ctrlKey||e.detail.source.metaKey)||e.detail.isTouch)),this._dateSelectionRenderer&&!Ey.isDateCellDisabled(t)&&(this._dateSelectionRenderer.pointerUpDate=Ey.getDateFromCell(t)),this.addDayCellEventSubscriptions(),e.stopPropagation()}onStopDaySelection(e){if(!this._dateSelectionRenderer)return;const t=Ey.getCellByTarget(e.detail.source.target);t?Ey.isDateCellDisabled(t)||(this._dateSelectionRenderer.pointerUpDate=Ey.getDateFromCell(t)):this.cancelDateSelection(),this.stopSelectingDates(),this.removeDateCellEventSubscriptions(),e.stopPropagation()}onCancelDateSelection(e){this.cancelDateSelection(),e.stopPropagation()}cancelDateSelection(){this._dateSelectionRenderer&&(this._dateSelectionRenderer.cancel(),this.removeDateCellEventSubscriptions(),this._dateSelectionRenderer=null)}stopSelectingDates(){this._dateSelectionRenderer&&(this._dateSelectionRenderer.stop(),this._dateSelectionRenderer=null)}invokeCellPointerUp(e,t,i){var n;const s=e.getTime(),r=null!==(n=null==t?void 0:t.getTime())&&void 0!==n?n:null;this.dispatchEvent(new ry(s,r,i))}onDateCellPointerEnter(e){const t=Ey.getCellByTarget(e.target);this._dateSelectionRenderer&&t&&!Ey.isDateCellDisabled(t)&&(this._dateSelectionRenderer.pointerUpDate=Ey.getDateFromCell(t))}tryCreateRangeSelectionRenderer(e){this.enableRangeSelect&&(this._dateSelectionRenderer=this.createDateRangeSelectionRenderer(e,!1))}createDateSelectionRenderer(e,t){this._dateSelectionRenderer=this.enableRangeSelect?this.createDateRangeSelectionRenderer(e,t):this.enableMultiSelect?this.createMultipleDateSelectionRenderer(e,t):this.createSingleDateSelectionRenderer(e,t)}createMultipleDateSelectionRenderer(e,t){return new Jw({pointerDownDate:e,clearSelection:t,cellElements:this.findCellElements()},this.invokeCellPointerUp.bind(this))}createSingleDateSelectionRenderer(e,t){return new jw(e,t,this.invokeCellPointerUp.bind(this))}createDateRangeSelectionRenderer(e,t){return new Zw({pointerDownDate:e,clearSelection:t,cellElements:this.findCellElements()},this.invokeCellPointerUp.bind(this))}findCellElements(){return this.querySelectorAll(zw.Cell)}findSelectedCellElement(){return this.querySelector(zw.SelectedItem)}getMainElement(){return this.querySelector(zw.MainElement)}getHeaderElement(){return this.querySelector(zw.Header)}getTableElements(){return Array.from(this.querySelectorAll(zw.DataTable))}getFooterElement(){return this.querySelector(zw.Footer)}initializeKeyboardNavigator(){this.keyboardNavigator=this.querySelector(Qi),this.keyboardNavigator&&!this.keyboardNavigator.initialized&&this.keyboardNavigator.initialize(this,new Cy(this))}getKeyboardNavigator(){return this.keyboardNavigator}getFocusedCellElementInView(e){return this._focusStrategies[e].getUpdatedElementToFocus()}tryMoveFocus(e,t){const i=this._focusStrategies[this.currentView].tryMoveFocus(e,t);if(i.needChangePeriod&&i.periodsToSkip){this.scheduleFocusRestoration();const e=this._currentViewIndex+(this.currentView===iy.Month?i.periodsToSkip:i.periodsToSkip>0?1:-1);e>=0&&e<this._visiblePeriodsCount&&(this._currentViewIndex=e,i.newPeriodFitsIntoVisibleRange=!0)}return i}scheduleFocusRestoration(e=!0){this._focusRestorationScheduled=!0,this._needImmediateSelectionAfterFocusRestored=e}restoreFocus(){const e=this._focusStrategies[this.currentView].getUpdatedElementToFocus();this._focusRestorationScheduled&&(this.tryFireFocusedDayChanged(e),this.dateSelectionRenderer&&e&&(this.dateSelectionRenderer.pointerUpDate=Ey.getDateFromCell(e)),this._focusRestorationScheduled=!1,this._needImmediateSelectionAfterFocusRestored=!1)}onFocusedDayChanged(e){this.focusedDayChangedHandlers.add(e)}offFocusedDayChanged(e){this.focusedDayChangedHandlers.delete(e)}onMinMaxDatesChanged(e){this.minMaxDatesChangedHandlers.add(e)}tryFireFocusedDayChanged(e){if(null!==e)for(const t of this.focusedDayChangedHandlers)t(e,this._needImmediateSelectionAfterFocusRestored)}fireMinMaxDatesChanged(e,t){for(const i of this.minMaxDatesChangedHandlers)i(e,t)}static getDateFromTarget(e){const t=Ey.getCellByTarget(e);return t?Ey.getDateFromCell(t):null}static getCellByTarget(e){const t=e;return t?T.DomUtils.hasClassName(t,Vw.Cell)?t:t.closest(zw.Cell):null}static getDateFromCell(e){return new Date(Number(e.getAttribute($w.dataDate)))}static getMonthFromCell(e){const t=e.getAttribute($w.dataMonth);if(t)return ny[t]}static getYearFromCell(e){const t=e.getAttribute($w.dataYear);if(t)return Number(t)}static getDecadeFromCell(e){const t=e.getAttribute($w.dataDecade);if(!t)return;const[i,n]=t.split("-").map(Number);return{startYear:i,endYear:n}}static getMonthOffsetInDaysFrom(e,t){const i=Ey.getDateFromCell(t),n=i.getDate(),s=new Date(i);s.setDate(1),s.setMonth(s.getMonth()+e);const r=this.getLastDayOfTheMonth(s);return s.setDate(n>r?r:n),Math.round(Math.abs(s.getTime()-i.getTime())/Xw)}static getYearOffsetInDaysFrom(e,t){const i=Ey.getDateFromCell(t),n=i.getDate(),s=new Date(i);s.setDate(1),s.setFullYear(s.getFullYear()+e);const r=this.getLastDayOfTheMonth(s);return s.setDate(n>r?r:n),Math.round(Math.abs(s.getTime()-i.getTime())/Xw)}static getLastDayOfTheMonth(e){return new Date(e.getFullYear(),e.getMonth()+1,0).getDate()}static isDateCellDisabled(e){return e.hasAttribute("data-disabled")}getContentTemplate(){return By}static get observedAttributes(){return[Ww.class,Ww.enableMultiSelect,Ww.minDate,Ww.maxDate,Ww.enableRangeSelect,Ww.visiblePeriodsCount,Ww.hasNullStartXorEndDate]}attributeChangedCallback(e,t,i){switch(e){case Ww.enableMultiSelect:this.enableMultiSelect=null!==i;break;case Ww.minDate:{const e=new Date(Number(i));this.minDate=e>=qw?e:qw,this.fireMinMaxDatesChanged(this.minDate);break}case Ww.maxDate:{const e=new Date(Number(i));this.maxDate=e<=Yw?e:Yw,this.fireMinMaxDatesChanged(void 0,this.maxDate);break}case Ww.visiblePeriodsCount:this.visiblePeriodsCount=Number(i);break;case Ww.enableRangeSelect:this.enableRangeSelect=null!==i,this.removeEventSubscriptions(),this.addEventSubscriptions();break;case Ww.hasNullStartXorEndDate:this.hasNullStartXorEndDate=null!==i,this.removeDateCellEventSubscriptions(),this.tryInitializeRangeSelectionSubscriptions(),this.removeEventSubscriptions(),this.addEventSubscriptions()}}}customElements.define(tl,Ey),customElements.define(_w,sy);class Iy{}Iy.Prefix=he.Prefix+"-tabs",Iy.Item=Iy.Prefix+"-item",Iy.Content=Iy.Prefix+"-content",Iy.TabList=Iy.Prefix+"-tablist",Iy.ContentPanel=Iy.Content+"-panel",Iy.Scrollable=Iy.TabList+"-scrollable",Iy.HasOverflow=Iy.TabList+"-has-overflow",Iy.ButtonScroll=Iy.Prefix+"-scroll-btn",Iy.ButtonScrollNext=Iy.ButtonScroll+"-next",Iy.ButtonScrollPrev=Iy.ButtonScroll+"-prev",Iy.CloseButton=Iy.Prefix+"-close-button";class Sy{}Sy.Prefix="dxbl",Sy.Carousel=Sy.Prefix+"-carousel",Sy.DrawerPanel=Sy.Prefix+"-drawer-panel",Sy.ExpandableContainer=Sy.Prefix+"-expandable-container",Sy.FormLayout=Sy.Prefix+"-form-layout",Sy.FormLayoutGroup=Sy.FormLayout+"-group",Sy.FormLayoutTab=Sy.FormLayout+"-tab",Sy.FormLayoutItem=Sy.FormLayout+"-item",Sy.GridLayout=Sy.Prefix+"-grid-layout",Sy.GridLayoutRoot=Sy.GridLayout+"-root",Sy.GridLayoutItem=Sy.GridLayout+"-item",Sy.GroupControl=Sy.Prefix+"-group-control",Sy.Splitter=Sy.Prefix+"-splitter",Sy.SplitterPane=Sy.Splitter+"-pane",Sy.SplitterSeparator=Sy.Splitter+"-separator",Sy.StackLayout=Sy.Prefix+"-stack-layout",Sy.StackLayoutRoot=Sy.StackLayout+"-root",Sy.StackLayoutItem=Sy.StackLayout+"-item",Sy.Tabs=Sy.Prefix+"-tabs",Sy.TabList=Sy.Prefix+"-tab-list",Sy.TabItem=Sy.Prefix+"-tab-item",Sy.TabsContentPanel=Sy.Tabs+"-content-panel";class xy extends Event{constructor(){super(xy.eventName,{bubbles:!0,composed:!1,cancelable:!0})}}xy.eventName=Sy.Tabs+".active-tab-changed";class Dy extends CustomEvent{constructor(e,t){super(Dy.eventName,{detail:new Fy(e,t),bubbles:!0,composed:!0,cancelable:!0})}}Dy.eventName=Sy.Tabs+".tab-reorder";class Fy{constructor(e,t){this.fromIndex=e,this.toIndex=t}}function Ty(e){return e*(2-e)}gt.register(Dy.eventName,(e=>e.detail));class Hy{constructor(){this.subscribers=[]}subscribe(e,t=!1){-1===this.subscribers.indexOf(e)&&this.subscribers.push(e)}unsubscribe(e){const t=this.subscribers.indexOf(e);-1!==t&&this.subscribers.splice(t,1)}}Hy.Empty=new Hy;class Uy extends Hy{emit(e){this.subscribers.forEach((t=>t(e)))}}class Py extends Hy{constructor(e){super(),this.isInitialized=1===arguments.length,this.value=e}update(e){this.isInitialized&&e===this.value||(this.isInitialized=!0,this.value=e,this.subscribers.forEach((t=>t(e))))}subscribe(e,t=!1){this.isInitialized&&!t&&e(this.value),super.subscribe(e,t)}asTrigger(e){const t=new Py(null);return this.subscribe("function"!=typeof e?i=>t.update(-1!==e.indexOf(i)):i=>t.update(e(i))),t}or(e){const t=new Py(null);return this.subscribe((i=>t.update(i||e.value))),e.subscribe((e=>t.update(this.value||e))),t}and(e){const t=new Py(null);return this.subscribe((i=>t.update(i&&e.value))),e.subscribe((e=>t.update(this.value&&e))),t}join(e){const t=new Py(null);return this.subscribe((i=>t.update([i,e.value]))),e.subscribe((e=>t.update([this.value,e]))),t}}function Qy(e){return e/Math.abs(e)}function Ny(e,t,i,n){let s=null;const r=e=>s?s(e,null):0,o=()=>{s=null},a=(e,n,r)=>{s=function(e,t,i,n,s){const r=t+i;let o=0;return(a,l)=>{if(l)return l(e-o,a,n(a/r));if(a<t)return null;a>=r&&s&&s();const A=e*n((Math.min(a,r)-t)/i)-o;return o+=A,A}}(n+e,r,t,i,o)},l=e=>{null===s?(a(e.value,0,e.timeStamp),n(r)):s(e.timeStamp,((t,i)=>a(e.value,t,i)))};return e.subscribe(l),()=>{s=null,e.unsubscribe(l)}}function Ry(e,t,i,n,s){const r=function(e,t,i,n){const s=new Uy;let r=0,o=0;return e.addEventListener(t,(e=>{e.preventDefault();const t=i(e);if(0!==t&&!isNaN(t)){const i=e.timeStamp||performance.now(),a=o?Math.min(250,i-o):0;o=i;const l=a?Math.exp(-a/110):0;if(r*=l,r+=t,Math.abs(r)>=n){const e=Qy(r);s.emit({value:n*e,timeStamp:i}),r-=n*e}}}),{capture:!1,passive:!1}),s}(e,"wheel",(e=>e.deltaY),t),o=function(e,t){const i=new Uy;let n=0,s=1;return e.subscribe((e=>{(0===n||e.timeStamp>=n||Qy(e.value)!==s)&&(n=e.timeStamp+t,s=Qy(e.value),i.emit(e))})),i}(r,30);function a(e,t){Gt((i=>{const s=e(i);0!==s?(null!==s&&n(s),a(e,t)):t()}))}Ny(o,300,i,(function(e){s(new Promise(((t,i)=>{a(e,t)})))}))}class Ly{}Ly.Roller=he.Prefix+"-roller",Ly.RollerContainer=Ly.Roller+"-container",Ly.RollersContainer=he.Prefix+"-rollers-container",Ly.RollerTitle=Ly.Roller+"-title",Ly.RollerItem=Ly.Roller+"-item",Ly.RollerAfter=Ly.Roller+"-after",Ly.RollerExpander=Ly.Roller+"-expander",Ly.RollerFooter=he.Prefix+"-rollers-footer";class My extends Event{constructor(){super(My.eventName,{bubbles:!0,composed:!1,cancelable:!0})}}function ky(e,t,i){const n=i(e);return n?t||n.visible.value?n:ky(n,t,i):null}function Ky(e,t){const i=-1===t?"prevItem":"nextItem";return e[i]?e[i]:e[i]=(i=>{const n=e.value+t*i.delta;return-1===t&&-1!==i.min&&n<i.min?i.needLoop?new _y(i,i.max,!1,null,e):null:1===t&&-1!==i.max&&n>i.max?i.needLoop?new _y(i,i.min,!1,e,null):null:new _y(i,n,!1,null,null)})(e.collection)}My.eventName="dxrollerinitialized";class Oy{constructor(e,t,i,n,s,r){this._collection=e,this.prevItem=s,this.nextItem=r,this.value=t,this.visible=i||new Py(!0),this.selected=new Py(!!n),s&&(s.nextItem=this),r&&(r.prevItem=this),this.displayText=new Py(t);const o=this.collection.selectedItem;this.selected.subscribe((e=>{e&&(o.value&&o.value.selected.update(!1),o.update(this))})),this.visible.subscribe((e=>{if(!e&&this.selected.value){const e=this.getPrevious(!1);e&&e.selected.update(!0)}this.collection.visibleItemsChanged.emit(null)}),!0)}get collection(){return this._collection}getPrevious(e){return ky(this,e,(e=>e.prevItem))}getNext(e){return ky(this,e,(e=>e.nextItem))}getDisplayText(){return this.displayText.value||this.value}}class _y extends Oy{constructor(e,t,i,n,s){super(e,t,null,i,n,s)}get collection(){return this._collection}getPrevious(e){return Ky(this,-1)}getNext(e){return Ky(this,1)}}class Vy extends _y{constructor(e,t){super(e,t,!0,null,null)}}class zy{constructor(e=!0){this.needLoop=e,this.items=[],this.selectedItem=new Py(null),this.visibleItemsChanged=new Uy}static createCollection(e,t,i=!0){const n=new zy(i);for(let i=0;i<t.length;i++)n.add(i+1,null,i+1===e).displayText.value=t[i];return n.initialize(e),n}static createInconsistentCollection(e,t,i=!0){const n=new zy(i);for(let i=0;i<t.length;i++)n.add(t[i][0],null,t[i][0]===e).displayText.value=t[i][1];return n.initialize(e),n}static createGenerator(e,t,i,n,s=!0){const r=new Wy(t,i,n,s);return r.initialize(e),r}initialize(e){const t=this.items.filter((t=>t.value===e));if(t.length>0)t[0].selected.update(!0);else{const t=function(e,t){if(0===e.length)return null;let i=e[0],n=Math.abs(i.value-t);for(let s=1;s<e.length;s++){const r=e[s],o=Math.abs(r.value-t);o<n&&(i=r,n=o)}return i}(this.items,e);t&&t.selected.update(!0)}this.needLoop&&(this.items[0].prevItem=this.items[this.items.length-1],this.items[this.items.length-1].nextItem=this.items[0])}add(e,t,i){const n=new Oy(this,e,t,i,this.items[this.items.length-1],null);return this.items.push(n),n}}class Wy extends zy{constructor(e,t,i,n){super(n),this.min=e,this.max=t,this.delta=i,this.originItem=null}initialize(e){this.originItem=new Vy(this,e)}}class $y{constructor(e,t,i,n,s){this.dataItem=null,this.displayTextSubscription=this.displayTextSubscription.bind(this),this.roller=i,this.prevItem=s,this.nextItem=null,this.index=t,this.elements=i.createRollerItemElements(),this.offset=t*n,this.height=n,this.position=0,this.visibleItemCount=i.visibleItemCount,s&&(s.nextItem=this),this.updateDataItem(e),this.selectItem=this.selectItem.bind(this)}initialize(e){const t=Math.floor(this.visibleItemCount/2);this.elements[1].style.top=(this.index-t)*this.height+"px",e.appendChild(this.elements[1]),this.move(this.offset),this.addEventSubscriptions()}addEventSubscriptions(){this.elements[0].addEventListener("click",(()=>{Gt(this.selectItem)}),{signal:oB(this.elements[0]).signal})}isSelected(){return Math.floor(this.visibleItemCount/2)*this.height===Math.round(this.position)}selectItem(e){if(!this.dataItem)return Promise.resolve();const t=Math.floor(this.visibleItemCount/2);return this.roller.afterMove(Jy(Hy.Empty,(e=>this.roller.move(e)),{divisor:this.roller.itemSize.height,startTimestamp:e,endTimestamp:e+300,easing:Ty,frameCallback:Gt,value:(t-this.index)*this.height-(this.position-this.offset)}))}move(e){this.updatePosition(e);const t=this.position-this.offset;this.elements.forEach((e=>e.style.transform="matrix(1, 0, 0, 1, 0, "+t+")"))}updatePosition(e){this.position+=e,this.position>this.visibleItemCount*this.height?(this.position-=(this.visibleItemCount+1)*this.height,this.updateDataItem(this.nextItem&&this.nextItem.dataItem?this.nextItem.dataItem.getPrevious(!1):null)):this.position<-1*this.height&&(this.position+=(this.visibleItemCount+1)*this.height,this.updateDataItem(this.prevItem.dataItem?this.prevItem.dataItem.getNext(!1):null))}updateDataItem(e){this.dataItem!==e&&(this.dataItem&&this.dataItem.displayText.unsubscribe(this.displayTextSubscription),this.dataItem=e,this.dataItem?this.dataItem.displayText.subscribe(this.displayTextSubscription):this.displayTextSubscription(""))}displayTextSubscription(e){this.elements.forEach((t=>Gy(t,e)))}raiseChanges(){this.isSelected()&&this.dataItem&&this.dataItem.selected.update(!0)}}function Gy(e,t){e.innerText=t}function qy(e,t,i){const n=i(e);return n&&Math.abs(Math.round(n.position-e.position))===t?[n].concat(qy(n,t,i)):[]}function Yy(e,t,i){0!==e.length&&(e.shift().updateDataItem(t),Yy(e,i(t),i))}class Xy{constructor(e,t,i,n,s,r){this.itemCollection=e,this.visibleItemCount=t,this.itemContainers=[],this.itemSize=n,this.caption=s,this.longestVisibleDisplayText=r,this.needLoop=e.needLoop,this.container=i,this.rollerElement=null,this.rollerContainer=null,this.move=this.move.bind(this),this.moveReversed=this.moveReversed.bind(this),this.afterMove=this.afterMove.bind(this),this.duplicateContainer=null}initialize(){this.initializeRollerElements();const e=[this.itemCollection.selectedItem.value];for(;e.length<this.visibleItemCount;)e.splice(0,0,e[0]?e[0].getPrevious(!1):null),e.push(e[e.length-1]?e[e.length-1].getNext(!1):null);e.push(e[e.length-1]?e[e.length-1].getNext(!1):null);for(let t=0;t<e.length;t++)this.itemContainers.push(new $y(e[t],t,this,this.itemSize.height,this.itemContainers[this.itemContainers.length-1]));this.longestVisibleDisplayText&&Gy(this.createRollerItemElement(Ly.RollerItem+" "+Ly.RollerExpander),this.longestVisibleDisplayText),this.duplicateContainer=this.createRollerItemElement(Ly.RollerAfter),this.duplicateContainer.setAttribute("role","spinbutton"),this.duplicateContainer.setAttribute(N.ariaLabel,this.caption),this.duplicateContainer.setAttribute(N.ariaValuenow,this.itemCollection.selectedItem.value.value),this.duplicateContainer.setAttribute(N.ariaValuetext,this.itemCollection.selectedItem.value.displayText.value),this.itemContainers[0].prevItem=this.itemContainers[this.itemContainers.length-1],this.itemContainers[this.itemContainers.length-1].nextItem=this.itemContainers[0];for(let e=0;e<this.itemContainers.length;e++)this.itemContainers[e].initialize(this.duplicateContainer);this.itemCollection.selectedItem.subscribe((()=>this.updateVisibleDataItems()),!0),this.itemCollection.visibleItemsChanged.subscribe((()=>this.updateVisibleDataItems())),Ry(this.rollerElement,this.itemSize.height,Ty,this.moveReversed,this.afterMove),function(e,t,i,n){const s=new Uy,r=new Uy;let o=0;e.addEventListener("touchstart",(e=>{o=e.touches[0].clientY}),{capture:!1,passive:!0,signal:oB(e).signal}),e.addEventListener("touchend",(()=>{o=0,Gt((e=>r.emit(e)))}),{capture:!1,passive:!0,signal:oB(e).signal}),e.addEventListener("touchmove",(e=>{e.preventDefault();const t=e.changedTouches[0].clientY;s.emit(t-o),o=t}),{capture:!1,passive:!1,signal:oB(e).signal});const a={divisor:t,accelerationTimeFrame:0};!function(e,t,i,n,s,r){let o,a,l,A=1,d=!1;const c=i.accelerationTimeFrame||300;function h(e){const t=Math.abs(a%i.divisor);return{value:t>=i.divisor/2?(i.divisor-t)*Math.sign(a):a%i.divisor*-1,endTimestamp:e+300,startTimestamp:e,easing:Ty,frameCallback:r,divisor:0}}function u(e,t){return(t*=A)>=o&&e-l<=c&&(A=Math.min(2,1.2*A)),a+=t,o=t,l=e,t}function p(e){a=0,l=e,A=1}e.subscribe((i=>{r((r=>{d||(d=!0,p(r),s(new Promise(((i,s)=>{const o=s=>{t.unsubscribe(o),Jy(e,n,h(s)).then((()=>{d=!1,i()})).catch((()=>{t.subscribe(o)})).finally((()=>p(r)))};t.subscribe(o)})))),n(u(r,i))}))}))}(s,r,a,i,n,Gt)}(this.rollerElement,this.itemSize.height,this.move,this.afterMove),this.rollerContainer&&this.rollerContainer.addEventListener("keydown",(e=>{let t=null;e.keyCode===Be.KeyCode.Up?t=this.itemCollection.selectedItem.value.getPrevious():e.keyCode===Be.KeyCode.Down&&(t=this.itemCollection.selectedItem.value.getNext()),t&&(e.preventDefault(),t.selected.update(!0))}),{signal:oB(this.rollerContainer).signal})}initializeRollerElements(){const e=this.rollerContainer=document.createElement("SPAN");e.className=Ly.RollerContainer,e.style.minWidth=this.itemSize.width.toString();const t=document.createElement("SPAN");t.innerText=this.caption,t.className=Ly.RollerTitle,e.appendChild(t);const i=this.rollerElement=document.createElement("DIV");i.className=Ly.Roller,i.tabIndex=-1,i.style.height=this.itemSize.height*this.visibleItemCount+"px",e.appendChild(i),this.container&&this.container.appendChild(e)}updateVisibleDataItems(){var e,t;const i=this.itemContainers.filter((e=>e.isSelected()))[0];if(!i)return;const n=qy(i,this.itemSize.height,(e=>e.prevItem)),s=qy(i,this.itemSize.height,(e=>e.nextItem)),r=this.itemCollection.selectedItem.value;i.updateDataItem(r),null===(e=this.duplicateContainer)||void 0===e||e.setAttribute(N.ariaValuenow,r.value),null===(t=this.duplicateContainer)||void 0===t||t.setAttribute(N.ariaValuetext,r.displayText.value),Yy(n.concat([]),r.getPrevious(),(e=>e?e.getPrevious(!1):null)),Yy(s.concat([]),r.getNext(),(e=>e?e.getNext(!1):null))}createRollerItemElement(e){const t=document.createElement("SPAN");return t.className=e||Ly.RollerItem,this.rollerElement&&this.rollerElement.appendChild(t),t}createRollerItemElements(){const e=this.createRollerItemElement(null);return[e,e.cloneNode()]}moveReversed(e){this.move(0-e)}move(e){if(0===e)return;const t=Math.sign(e),i=this.itemContainers.length-1,n=-1===t?i:0,s=(-1===t?0:i)+t;if(!this.needLoop){if(1===t){const i=Math.floor(this.visibleItemCount/2)*this.itemSize.height;for(let r=n;r!==s;r+=t)!this.itemContainers[r].dataItem&&this.itemContainers[r].position+this.itemSize.height-i<=0&&this.itemContainers[r].position+this.itemSize.height+e-i>0&&(e=Math.min(i-(this.itemContainers[r].position+this.itemSize.height),e))}else{const i=(Math.floor(this.visibleItemCount/2)+1)*this.itemSize.height;for(let r=n;r!==s;r+=t)!this.itemContainers[r].dataItem&&this.itemContainers[r].position-i>=0&&this.itemContainers[r].position+e-i<0&&(e=Math.max(i-this.itemContainers[r].position,e))}if(0===e)return}for(let i=n;i!==s;i+=t)this.itemContainers[i].move(e)}afterMove(e){return e.then((()=>Promise.resolve(this.itemContainers.forEach((e=>e.raiseChanges())))))}}function Jy(e,t,i){return new Promise(((n,s)=>{function r(){e.unsubscribe(r),s()}e.subscribe(r);let o=0;const a=i.frameCallback,l=s=>{if(s<i.endTimestamp){const e=i.easing((s-i.startTimestamp)/(i.endTimestamp-i.startTimestamp)),n=i.value*e-o;t(n),o+=n,a(l)}else e.unsubscribe(r),t(i.value-o),n()};a(l)}))}function jy(e){return e.value%4==0&&e.value%100!=0||e.value%400==0}function Zy(e){return 2!==e.value}function eB(e){return-1!==[1,3,5,7,8,10,12].indexOf(e.value)}var tB;function iB(e,t,i,n,s,r,o){const a=e.add(t,i,n);r.subscribe((([e,i])=>{if(o){const n=s[function(e,t,i){return new Date(e,t-1,i).getDay()}(i.value,e.value,t)];a.displayText.update(t+" "+n)}else a.displayText.value=s[t-1]}))}function nB(e){return e&&e.length?" "+e.concat([]).sort(((e,t)=>t.length-e.length))[0]:""}function sB(e){let t="initial";for(;e;){if(t=window.getComputedStyle(e).backgroundColor,t&&"rgba(0, 0, 0, 0)"!==t&&"transparent"!==t)return t;e=e.parentElement}return t}function rB(e){e.eventSubscriptionsController&&e.eventSubscriptionsController.abort(),e.eventSubscriptionsController=new AbortController}function oB(e){return Nt(e,null,(e=>!!e.eventSubscriptionsController)).eventSubscriptionsController}!function(e){e[e.DayWithoutLeadingZero=0]="DayWithoutLeadingZero",e[e.DayWithLeadingZero=1]="DayWithLeadingZero",e[e.DayWithShortName=2]="DayWithShortName",e[e.DayWithFullName=3]="DayWithFullName",e[e.MonthWithShortName=4]="MonthWithShortName",e[e.MonthWithFullName=5]="MonthWithFullName",e[e.MonthWithoutLeadingZero=6]="MonthWithoutLeadingZero",e[e.MonthWithLeadingZero=7]="MonthWithLeadingZero",e[e.YearWithFourDigit=8]="YearWithFourDigit",e[e.YearWithThreeDigit=9]="YearWithThreeDigit",e[e.YearWithTwoDigit=10]="YearWithTwoDigit",e[e.YearWithOneDigit=11]="YearWithOneDigit"}(tB||(tB={}));const aB=1,lB=2,AB=0,dB=1,cB=2,hB=3;class uB extends Mi{constructor(e,t,i){super(e,t),this.dotNetRef=i}queryItems(){return this.queryItemsBySelector(`.${Ly.RollerContainer} .${Ly.Roller} .${Ly.RollerAfter}`)}handleKeyDown(e){const t=Be.KeyUtils.getEventKeyCode(e);return t!==Be.KeyCode.Tab&&t!==Be.KeyCode.Right&&t!==Be.KeyCode.Space||e.shiftKey||this.lastItemSelected?t===Be.KeyCode.Tab&&e.shiftKey||t===Be.KeyCode.Left?(this.selectedItemIndex>0?this.moveToPrevItem():t!==Be.KeyCode.Left&&this.leaveBackward(),!0):super.handleKeyDown(e):(this.moveToNextItem(),!0)}}const pB=new WeakMap;class mB{constructor(e,t,i,n){this.hoursCollection=e,this.minutesCollection=t,this.secondsCollection=i,this.AMPMCollection=n}update(e){if(this.AMPMCollection){let t=this.AMPMCollection?e.hours%12:e.hours;t=0===t?12:t,this.hoursCollection.initialize(t),this.AMPMCollection.initialize(e.hours>=12?lB:aB)}else this.hoursCollection.initialize(e.hours);this.minutesCollection.initialize(e.minutes),this.secondsCollection.initialize(e.seconds)}}class gB{constructor(e,t,i){this.yearsCollection=e,this.monthsCollection=t,this.daysCollection=i}update(e){const t=e.filter((e=>e.type===tB.DayWithShortName||e.type===tB.DayWithFullName||e.type===tB.DayWithoutLeadingZero||e.type===tB.DayWithLeadingZero))[0],i=e.filter((e=>e.type===tB.MonthWithShortName||e.type===tB.MonthWithFullName||e.type===tB.MonthWithLeadingZero||e.type===tB.MonthWithoutLeadingZero))[0],n=e.filter((e=>e.type===tB.YearWithFourDigit||e.type===tB.YearWithThreeDigit||e.type===tB.YearWithTwoDigit||e.type===tB.YearWithOneDigit))[0];this.yearsCollection.initialize(n.value),this.monthsCollection.initialize(i.value),this.daysCollection.initialize(t.value)}}function CB(e){const t=document.createElement("span");t.className=Ly.RollerItem,t.textContent="01234567890",e.appendChild(t);let i=t.offsetHeight;return i||(i=Rt(e,"dxbl-lg")?42:Rt(e,"dxbl-sm")?30:36),e.removeChild(t),i}function fB(e,t,i){const n=[];let s=0;for(let r=e;r<=t;r+=i)n[s]=[r,r.toString()],s++;return n}const vB={initializeDateRoller:function(e,t,i,s,r){n.removeLoaded(e),rB(e);const o=t.items.filter((e=>e.type===tB.DayWithShortName||e.type===tB.DayWithFullName||e.type===tB.DayWithoutLeadingZero||e.type===tB.DayWithLeadingZero))[0],a=t.items.filter((e=>e.type===tB.MonthWithShortName||e.type===tB.MonthWithFullName||e.type===tB.MonthWithLeadingZero||e.type===tB.MonthWithoutLeadingZero))[0],l=t.items.filter((e=>e.type===tB.YearWithFourDigit||e.type===tB.YearWithThreeDigit||e.type===tB.YearWithTwoDigit||e.type===tB.YearWithOneDigit))[0],A=t.yearNames||[];let d=t.monthNames||[];const c=t.dayNames||[],h=CB(e);let u=o?o.value:1,p=null;a?p=a.value:(d=["","","","","","","","","","","",""],p=i);let m=l?l.value:s;const g=l?zy.createCollection(m,A):zy.createGenerator(m,1,9999,1),C=zy.createCollection(p,d),f=C.selectedItem.asTrigger(Zy),v={29:g.selectedItem.asTrigger(jy).or(f),30:f,31:C.selectedItem.asTrigger(eB)},b=C.selectedItem.join(g.selectedItem),w=o&&(o.type===tB.DayWithFullName||o.type===tB.DayWithShortName),y=new zy;for(let e=1;e<=31;e++)iB(y,e,v[e],e===u,c,b,w);y.initialize(u);const B=["25"+nB(c),nB(d),"0000"].reduce(((e,t)=>e.length>t.length?e:t)),E=document.createDocumentFragment();E.eventSubscriptionsController=e.eventSubscriptionsController;const I=document.createElement("STYLE");function S(e){return t=>{e(t),r.invokeMethodAsync("UpdateDateTime",[u,p,m]).catch((e=>console.error(e)))}}I.type="text/css",I.innerText=`.${Ly.Roller} { height: ${5*h}px; } .${Ly.RollerItem}, .${Ly.RollerAfter} { height: ${h}px; } .${Ly.RollerAfter} { background-color: ${sB(e)}; } `,E.appendChild(I),t.items.forEach((e=>{switch(e.type){case tB.DayWithoutLeadingZero:case tB.DayWithLeadingZero:case tB.DayWithFullName:case tB.DayWithShortName:new Xy(y,5,E,{width:-1,height:h},e.name,B).initialize();break;case tB.MonthWithFullName:case tB.MonthWithShortName:case tB.MonthWithLeadingZero:case tB.MonthWithoutLeadingZero:new Xy(C,5,E,{width:-1,height:h},e.name,B).initialize();break;case tB.YearWithFourDigit:case tB.YearWithThreeDigit:case tB.YearWithTwoDigit:case tB.YearWithOneDigit:new Xy(g,5,E,{width:-1,height:h},e.name,B).initialize();break}})),E.appendChild(document.createElement(Qi)),e.textContent="",e.appendChild(E),y.selectedItem.subscribe(S((e=>{u=e.value}))),C.selectedItem.subscribe(S((e=>{p=e.value}))),g.selectedItem.subscribe(S((e=>{m=e.value}))),pB.set(e,new gB(g,C,y));const x=e.querySelector(Qi);return x&&!x.initialized&&x.initialize(e,new uB(x,e,r)),e.dispatchEvent(new My),n.setLoaded(e),Promise.resolve()},initializeTimeRoller:function(e,t,i){if(n.removeLoaded(e),rB(e),!t)return Promise.reject();const s=t.twelveHourFormat;let r=s?t.time.hours%12:t.time.hours;s&&0===r&&(r=12);let o=t.time.minutes,a=t.time.seconds,l=t.time.hours>=12?lB:aB;const A=CB(e),d=1===t.secondDelta?zy.createGenerator(a,0,59,1):zy.createInconsistentCollection(a,fB(0,59,t.secondDelta),!0),c=1===t.minuteDelta?zy.createGenerator(o,0,59,1):zy.createInconsistentCollection(o,fB(0,59,t.minuteDelta),!0),h=1===t.hourDelta?s?zy.createGenerator(r,1,12,1):zy.createGenerator(r,0,23,1):zy.createInconsistentCollection(r,s?fB(1,12,t.hourDelta):fB(0,23,t.hourDelta),!0);let u=null;t.ampmDesignators&&t.ampmDesignators[0]&&t.ampmDesignators[1]&&(u=zy.createCollection(l,t.ampmDesignators,!1));const p=document.createDocumentFragment();p.eventSubscriptionsController=e.eventSubscriptionsController;const m=document.createElement("STYLE");function g(e){return t=>{e(t),i.invokeMethodAsync("UpdateDateTime",[r,o,a,l]).catch()}}m.type="text/css",m.innerText=`.${Ly.Roller} { height: ${5*A}px; } .${Ly.RollerItem}, .${Ly.RollerAfter} { height: ${A}px; } .${Ly.RollerAfter} { background-color: ${sB(e)}; }`,p.appendChild(m),t.items.forEach((e=>{switch(e.type){case AB:new Xy(h,5,p,{width:-1,height:A},e.name,"15").initialize();break;case dB:new Xy(c,5,p,{width:-1,height:A},e.name,"55").initialize();break;case cB:new Xy(d,5,p,{width:-1,height:A},e.name,"55").initialize();break;case hB:if(u){new Xy(u,5,p,{width:-1,height:A},e.name,"AM").initialize()}}})),h.selectedItem.subscribe(g((e=>{r=e.value}))),c.selectedItem.subscribe(g((e=>{o=e.value}))),d.selectedItem.subscribe(g((e=>{a=e.value}))),u&&u.selectedItem.subscribe(g((e=>{l=e.value}))),p.appendChild(document.createElement(Qi)),pB.set(e,new mB(h,c,d,u)),e.textContent="",e.appendChild(p);const C=e.querySelector(Qi);return C&&!C.initialized&&C.initialize(e,new uB(C,e,i)),e.dispatchEvent(new My),n.setLoaded(e),Promise.resolve()},updateRoller:function(e,t){if(!pB.has(e))return;const i=pB.get(e);if(i)return void i.update(t);const n=pB.get(e);n&&n.update(t)},disposeRoller:function(e){e.eventSubscriptionsController&&e.eventSubscriptionsController.abort()}};class bB{}bB.Button=he.Prefix+"-btn",bB.SplitButton=bB.Button+"-split",bB.ButtonFirst=bB.Button+"-first",bB.ButtonLast=bB.Button+"-last",bB.ButtonTool=bB.Button+"-tool",bB.ButtonGroup=bB.Button+"-group",bB.ButtonGroupFirst=bB.ButtonGroup+"-first",bB.ButtonGroupVertical=bB.ButtonGroup+"-vertical",bB.ButtonGroupLeft=bB.ButtonGroup+"-left",bB.ButtonGroupRight=bB.ButtonGroup+"-right";class wB extends Sa{constructor(e,t,i){super(e,t),this._focusTrapElement=null,this._parentStrategy=i,this._needRestoreInputFocus=!1}get parentStrategy(){return this._parentStrategy}get dropDownEditor(){return this.parentStrategy.dropDownEditor}getHeaderButtons(){return Array.from(this.targetElement.querySelectorAll(`.${Xl.Header} > .${bB.Button}`))}addEventSubscriptions(){super.addEventSubscriptions(),this.boundOnDropDownEditorPointerDownHandler||(this.boundOnDropDownEditorPointerDownHandler=this.onDropDownEditorPointerDownHandler.bind(this),this.targetElement.addEventListener(xl.eventName,this.boundOnDropDownEditorPointerDownHandler)),this.boundOnPopupClosingResultRequestedHandler||(this.boundOnPopupClosingResultRequestedHandler=this.onPopupClosingResultRequested.bind(this),this.targetElement.addEventListener(Gr.eventName,this.boundOnPopupClosingResultRequestedHandler),this.targetElement.addEventListener($r.eventName,this.boundOnPopupClosingResultRequestedHandler))}onDispose(){this.boundOnDropDownEditorPointerDownHandler&&(this.targetElement.removeEventListener(xl.eventName,this.boundOnDropDownEditorPointerDownHandler),this.boundOnDropDownEditorPointerDownHandler=void 0),this.boundOnPopupClosingResultRequestedHandler&&(this.targetElement.removeEventListener(Gr.eventName,this.boundOnPopupClosingResultRequestedHandler),this.targetElement.removeEventListener($r.eventName,this.boundOnPopupClosingResultRequestedHandler),this.boundOnPopupClosingResultRequestedHandler=void 0)}handleKeyDown(e){const t=Be.KeyUtils.getEventKeyCode(e);return Be.KeyUtils.getEventKeyCode(e)!==Be.KeyCode.Tab&&(t===Be.KeyCode.Esc||(e.altKey||e.metaKey)&&t===Be.KeyCode.Up?(this._needRestoreInputFocus=!0,this.closeDropDown(),!0):super.handleKeyDown(e))}onDropDownEditorPointerDownHandler(){this.dropDownEditor.focused||this.parentStrategy.closeDropDown()}onPopupClosingResultRequested(){this.targetElement.contains(document.activeElement)?this.dropDownEditor.focusInternal():this.dropDownEditor.raiseFocusOutInternal(),this._needRestoreInputFocus=!1}closeDropDown(){this.parentStrategy.closeDropDown()}focusElementInRootPath(){return!1}handlePopupShown(){this._needRestoreInputFocus=!1;const e=this.getNestedContentElement();this._focusTrapElement=e||this.targetElement,Kr.activate(this._focusTrapElement,!1,!0),super.handlePopupShown();const t=this.getInnerControlMainElement();t&&xi(this.dropDownEditor)&&Ii(t),this.dropDownEditor.classList.add(he.Focused)}onPopupClosed(){this.dropDownEditor.classList.remove(he.Focused),Kr.deactivate(this._focusTrapElement,!1),this._focusTrapElement=null,this._needRestoreInputFocus&&this.dropDownEditor.focusInternal(),super.onPopupClosed()}}class yB extends ql{createPopupStrategy(e,t){return new BB(e,t,this)}}class BB extends wB{constructor(e,t,i){super(e,t,i),this.editorInitiallyFocused=this.dropDownEditor.focused}handleKeyDown(e){const t=Be.KeyUtils.getEventKeyCode(e);if(e.shiftKey&&t===Be.KeyCode.Tab&&this.isFirstHeaderButtonSelected()&&!this.isRollerFooterExist()){const e=this.getLastRollerItem();if(e)return this.focusItem(e),!0}return t===Be.KeyCode.Enter&&this.isTimeRollerSelected()||t===Be.KeyCode.Space&&this.isLastTimeRollerSelected()?(this.closeDropDownAndApplyValue(e),!0):super.handleKeyDown(e)}handlePopupShown(){super.handlePopupShown(),this.editorInitiallyFocused&&this.focusFirstRollerItem()}onRollerInitialized(){this.editorInitiallyFocused&&this.focusFirstRollerItem()}focusFirstRollerItem(){this.focusItem(this.getFirstRollerItem())}focusLastRollerItem(){this.focusItem(this.getLastRollerItem())}focusItem(e){e&&(fi.makeElementFocusable(e),fi.focusElement(e))}getRollersContainer(){return this.targetElement.querySelector(`.${Ly.RollersContainer}`)}getFirstRollerItem(){return this.targetElement.querySelector(`.${Ly.RollerAfter}`)}getLastRollerItem(){const e=this.targetElement.querySelectorAll(`.${Ly.RollerAfter}`);return e[e.length-1]}addEventSubscriptions(){super.addEventSubscriptions(),this.boundOnRollerInitializedHandler||(this.boundOnRollerInitializedHandler=this.onRollerInitialized.bind(this),this.targetElement.addEventListener(My.eventName,this.boundOnRollerInitializedHandler))}onDispose(){this.boundOnRollerInitializedHandler&&(this.targetElement.removeEventListener(My.eventName,this.boundOnRollerInitializedHandler),this.boundOnRollerInitializedHandler=void 0)}isTimeRollerSelected(){var e;return null===(e=document.activeElement)||void 0===e?void 0:e.classList.contains(`${Ly.RollerAfter}`)}isLastTimeRollerSelected(){var e;return this.isTimeRollerSelected()&&!(null===(e=document.activeElement)||void 0===e?void 0:e.nextElementSibling)}isFirstHeaderButtonSelected(){return this.getHeaderButtons()[0]===document.activeElement}isRollerFooterExist(){return!!this.targetElement.querySelector(`.${Ly.RollerFooter}`)}closeDropDownAndApplyValue(e){this.parentStrategy.closeDropDownAndApplyValue(e)}getInnerControlMainElement(){return this.getRollersContainer()}}class EB extends yB{createPopupStrategy(e,t){return new IB(e,t,this)}}class IB extends BB{constructor(e,t,i){super(e,t,i)}handleKeyDown(e){return Be.KeyUtils.getEventKeyCode(e)===Be.KeyCode.Space&&this.isLastDateRollerSelected()?(this.performShortcutEvent(e),!0):super.handleKeyDown(e)}handlePopupShown(){super.handlePopupShown(),this.editorInitiallyFocused&&this.focusItem(this.getSelectedDay())}addEventSubscriptions(){super.addEventSubscriptions(),this.boundOnActiveTabChangedHandler||(this.boundOnActiveTabChangedHandler=this.onActiveTabChanged.bind(this),this.targetElement.addEventListener(xy.eventName,this.boundOnActiveTabChangedHandler)),this.boundOnCalendarKeyboardNavigationLeavedHandler||(this.boundOnCalendarKeyboardNavigationLeavedHandler=this.onCalendarKeyboardNavigationLeaved.bind(this),this.targetElement.addEventListener(oy.eventName,this.boundOnCalendarKeyboardNavigationLeavedHandler))}onDispose(){this.boundOnActiveTabChangedHandler&&(this.targetElement.removeEventListener(xy.eventName,this.boundOnActiveTabChangedHandler),this.boundOnActiveTabChangedHandler=void 0),this.boundOnCalendarKeyboardNavigationLeavedHandler&&(this.targetElement.removeEventListener(oy.eventName,this.boundOnCalendarKeyboardNavigationLeavedHandler),this.boundOnCalendarKeyboardNavigationLeavedHandler=void 0),super.onDispose()}onActiveTabChanged(){var e;(null===(e=document.activeElement)||void 0===e?void 0:e.classList.contains(Iy.Item))||this.focusFirstRollerItem()}onCalendarKeyboardNavigationLeaved(){if(!this.getTabs()){const e=fi.findFocusableElements(this.targetElement).pop();e&&this.focusItem(e)}}getFirstRollerItem(){var e;const t=null===(e=this.getTabs())||void 0===e?void 0:e.getActiveTabContent();return t?t.querySelector(`.${Ly.RollerAfter}`):super.getFirstRollerItem()}isLastTimeRollerSelected(){const e=this.getTabs();return null!==e&&e.activeTabIndex===e.tabCount-1&&super.isLastTimeRollerSelected()}isLastDateRollerSelected(){const e=this.getTabs();return null!==e&&0===e.activeTabIndex&&super.isLastTimeRollerSelected()}getCalendar(){return this.targetElement.querySelector(`.${Vw.MainElement}`)}getTabs(){return this.targetElement.querySelector(`.${Iy.Prefix}`)}getSelectedDay(){var e;return null===(e=this.getCalendar())||void 0===e?void 0:e.querySelector(`.${Vw.SelectedItem}`)}getInnerControlMainElement(){var e;return null!==(e=this.getCalendar())&&void 0!==e?e:super.getInnerControlMainElement()}}class SB extends jl{connectedCallback(){super.connectedCallback()}disconnectedCallback(){super.disconnectedCallback()}toggleDropDownVisibility(){this.fieldText!==this.fieldElementValue&&this.raiseFieldChange(),super.toggleDropDownVisibility()}openDropDown(){this.fieldText!==this.fieldElementValue&&this.raiseFieldChange(),super.openDropDown()}createKeyboardStrategy(){return new EB(this)}}const xB="dxbl-dropdown",DB="data-dropdown-thumb";class FB{constructor(e,t){this.width=Math.floor(e),this.height=Math.floor(t)}}class TB extends CustomEvent{constructor(e,t){super(TB.eventName,{detail:new FB(e,t),bubbles:!0,composed:!0,cancelable:!0})}}TB.eventName=xB+".resizeStarted",gt.register(TB.eventName,(e=>e.detail));class HB extends CustomEvent{constructor(e,t){super(HB.eventName,{detail:new FB(e,t),bubbles:!0,composed:!0,cancelable:!0})}}HB.eventName=xB+".resizeCompleted",gt.register(HB.eventName,(e=>e.detail));class UB extends fo{constructor(){super(...arguments),this.dragStart=null,this.dragBounds=null,this.dragStartedHandler=this.handleDragStarted.bind(this),this.dragDeltaHandler=this.handleDragDelta.bind(this),this.dragCompletedHandler=this.handleDragCompleted.bind(this),this.dragWidth=0,this.dragHeight=0,this.dragMaxWidth=0,this.dragMaxHeight=0,this.isInDragOperation=!1,this.dragCssStyle=null}get branchType(){return Us.DropDown}renderTemplate(){return Xn`
            <dxbl-branch
                id="branch"
                branch-id="${this.branchId}"
                parent-branch-id="${this.parentBranchId}"
                type="${this.branchType}"
                style="${this.dragCssStyle}">
                <dxbl-dropdown-root
                    id="root"
                    style="${this.rootCssStyle}"
                    ?resizing="${this.resizing}"
                    drop-opposite="${this.actualDropOpposite}"
                    drop-direction="${this.actualDropDirection}"
                    drop-alignment="${this.actualDropAlignment}">
                    ${this.renderDefaultSlot()}
                    ${this.renderAdditionalSlots()}
                    ${this.renderBridgeSlot()}
                </dxbl-dropdown-root>
            </dxbl-branch>
        `}getRootTagName(){return"dxbl-dropdown-root"}connectedCallback(){super.connectedCallback(),this.addEventListener(_i.eventName,this.dragStartedHandler),this.addEventListener(Vi.eventName,this.dragDeltaHandler),this.addEventListener(zi.eventName,this.dragCompletedHandler)}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener(_i.eventName,this.dragStartedHandler),this.removeEventListener(Vi.eventName,this.dragDeltaHandler),this.removeEventListener(zi.eventName,this.dragCompletedHandler)}get child(){return this.root}handleDragStarted(e){const t=H.getOriginalSource(e);if(!t)return;if(!t.hasAttribute(DB))return;if(!this.child)return;this.lockPlacement(),this.dragStart=new et(e.detail.x,e.detail.y);const i=this.getRestrictBounds(),n=this.getPlacementTargetInterestPoints(this.placement),s=this.actualDropAlignment,r=this.actualDropDirection,o=ot.getRelativeElementRect(this.child);this.dragBounds=this.calcResizeRect(i,n,s,r),this.dragMaxWidth=this.dragBounds.width,this.dragMaxHeight=this.dragBounds.height,this.isInDragOperation=!0,this.dragWidth=o.width,this.dragHeight=o.height,this.raiseResizeStarted(this.dragWidth,this.dragHeight)}willUpdate(e){super.willUpdate(e),this.dragCssStyle=this.isInDragOperation?`width: ${Te.toPx(this.dragWidth)}; height: ${Te.toPx(this.dragHeight)}; max-width: ${Te.toPx(this.dragMaxWidth)}; max-height: ${Te.toPx(this.dragMaxHeight)};`:null}updated(e){super.updated(e),this.root.offsetWidth<this.root.scrollWidth&&(this.dragWidth=this.root.scrollWidth),this.root.offsetHeight<this.root.scrollHeight&&(this.dragHeight=this.root.scrollHeight)}handleDragDelta(e){const t=H.getOriginalSource(e);if(!t)return;if(!t.hasAttribute(DB))return;const i=Math.min(this.dragMaxWidth,this.actualDropDirection===jr.Near?e.detail.x-this.offset.x:this.offset.x+this.childSize.width-e.detail.x),n=Math.min(this.dragMaxHeight,this.actualDropAlignment===Zr.bottom?e.detail.y-this.offset.y:this.offset.y+this.childSize.height-e.detail.y),s=ua(this.minWidth,this),r=ua(this.minHeight,this);this.dragWidth=s?i>s?i:s:i>0?i:0,this.dragHeight=r?n>r?n:r:n>0?n:0}handleDragCompleted(e){var t,i;const n=H.getOriginalSource(e);n&&n.hasAttribute(DB)&&(this.isInDragOperation=!1,this.dragWidth=null!==(t=this.branch.offsetWidth)&&void 0!==t?t:0,this.dragHeight=null!==(i=this.branch.offsetHeight)&&void 0!==i?i:0,this.desiredWidth=Te.toPx(this.dragWidth),this.desiredHeight=Te.toPx(this.dragHeight),this.unlockPlacement(),this.raiseResizeCompleted(this.dragWidth,this.dragHeight))}calcResizeRect(e,t,i,n){if(n===jr.Near){if(i===Zr.top){return rt.intersect(e,st.createFromPoints(t[Xr.TopLeft],e.topRight))}return rt.intersect(e,st.createFromPoints(t[Xr.BottomLeft],e.bottomRight))}if(i===Zr.top){return rt.intersect(e,st.createFromPoints(t[Xr.TopRight],e.topLeft))}return rt.intersect(e,st.createFromPoints(t[Xr.BottomRight],e.bottomLeft))}raiseResizeStarted(e,t){this.dispatchEvent(new TB(e,t))}raiseResizeCompleted(e,t){this.dispatchEvent(new HB(e,t))}calcRenderWidth(){return this.isInDragOperation?null:super.calcRenderWidth()}calcRenderHeight(){return this.isInDragOperation?null:super.calcRenderHeight()}shouldUpdateRootCssStyle(e){return super.shouldUpdateRootCssStyle(e)||e.has("isInDragOperation")||e.has("dragWidth")||e.has("dragHeight")||e.has("dragMaxWidth")||e.has("dragMaxHeight")}createKeyboardNavigationStrategy(){return new Da(this.keyboardNavigator,this)}processCapturedKeyDownAsync(e,t){const i=Be.KeyUtils.getEventKeyCode(e);return t.nextInteractionHandled=i===Be.KeyCode.Esc&&null!==this.logicalParent&&[Qa,Vr].includes(this.logicalParent.tagName.toLowerCase()),super.processCapturedKeyDownAsync(e,t)}}C([cn("#root",!0)],UB.prototype,"root",void 0),C([cn("#branch")],UB.prototype,"branch",void 0),C([An({type:Number,reflect:!1})],UB.prototype,"dragWidth",void 0),C([An({type:Number,reflect:!1})],UB.prototype,"dragHeight",void 0),C([An({type:Number,reflect:!1})],UB.prototype,"dragMaxWidth",void 0),C([An({type:Number,reflect:!1})],UB.prototype,"dragMaxHeight",void 0),C([An({type:Boolean,reflect:!1})],UB.prototype,"isInDragOperation",void 0),C([An({type:String,reflect:!1})],UB.prototype,"dragCssStyle",void 0);let PB=class extends UB{updated(e){e.has("zIndex")&&this.zIndex&&this.raiseZIndexChange(),super.updated(e)}raiseZIndexChange(){this.updateComplete.then((e=>{this.dispatchEvent(new co(new Ao(this.zIndex)))}))}};PB=C([on(xB)],PB);let QB=class extends gs{constructor(){super(...arguments),this.topLeftClass=null,this.topRightClass=null,this.bottomLeftClass=null,this.bottomRightClass=null,this.dropOpposite=!1,this.dropDirection=jr.Near,this.dropAlignment=Zr.bottom,this.resizing=!1}static get styles(){return fn`
            :host {
                display: flex;
                position: relative;
                flex: 1 1 auto;
                flex-direction: column;
                box-sizing: border-box;
                min-height: 0;
            }
            .hidden {
                display: none;
            }
            ::slotted([slot="top-right"]) {
                position: absolute;
                z-index: 1001;
                top: 0px;
                right: 0px;
                transform: rotate(270deg);
                cursor: ne-resize;
            }
            ::slotted([slot="top-left"]) {
                position: absolute;
                z-index: 1001;
                top: 0px;
                left: 0px;
                transform: rotate(180deg);
                cursor: nw-resize;
            }
            ::slotted([slot="bottom-left"]) {
                position: absolute;
                z-index: 1001;
                bottom: 0px;
                left: 0px;
                transform: rotate(90deg);
                cursor: sw-resize;
            }
            ::slotted([slot="bottom-right"]) {
                position: absolute;
                z-index: 1001;
                bottom: 0px;
                right: 0px;
                cursor: se-resize;
                transform: rotate(0deg);
            }
        }`}connectedCallback(){super.connectedCallback(),this.calculateStyles(this.resizing,this.dropAlignment,this.dropDirection)}willUpdate(e){(e.has("dropAlignment")||e.has("dropDirection")||e.has("resizing"))&&this.calculateStyles(this.resizing,this.dropAlignment,this.dropDirection)}calculateStyles(e,t,i){this.topLeftClass=e&&t===Zr.top&&i===jr.Far?null:"hidden",this.topRightClass=e&&t===Zr.top&&i===jr.Near?null:"hidden",this.bottomLeftClass=e&&t===Zr.bottom&&i===jr.Far?null:"hidden",this.bottomRightClass=e&&t===Zr.bottom&&i===jr.Near?null:"hidden"}render(){return Xn`
            <slot></slot>
            <dxbl-thumb data-qa-thumb-location="top-left" data-dropdown-thumb class="${this.topLeftClass}">
                <slot name="top-left"></slot>
            </dxbl-thumb>
            <dxbl-thumb data-qa-thumb-location="top-right" data-dropdown-thumb class="${this.topRightClass}">
                <slot name="top-right"></slot>
            </dxbl-thumb>
            <dxbl-thumb data-qa-thumb-location="bottom-left" data-dropdown-thumb class="${this.bottomLeftClass}">
                <slot name="bottom-left"></slot>
            </dxbl-thumb>
            <dxbl-thumb data-qa-thumb-location="bottom-right" data-dropdown-thumb class="${this.bottomRightClass}">
                <slot name="bottom-right"></slot>
            </dxbl-thumb>`}};C([An({type:String,reflect:!1})],QB.prototype,"topLeftClass",void 0),C([An({type:String,reflect:!1})],QB.prototype,"topRightClass",void 0),C([An({type:String,reflect:!1})],QB.prototype,"bottomLeftClass",void 0),C([An({type:String,reflect:!1})],QB.prototype,"bottomRightClass",void 0),C([An({type:Object,attribute:"drop-opposite"})],QB.prototype,"dropOpposite",void 0),C([An({type:String,attribute:"drop-direction"})],QB.prototype,"dropDirection",void 0),C([An({type:String,attribute:"drop-alignment"})],QB.prototype,"dropAlignment",void 0),C([An({type:Boolean,attribute:"resizing"})],QB.prototype,"resizing",void 0),QB=C([on("dxbl-dropdown-root")],QB);let NB=class extends fr{get popup(){var e;for(const t of null!==(e=this.portable)&&void 0!==e?e:[])if(ut(t,["branchType","reposition","desiredWidth","desiredHeight","minDesiredWidth","minDesiredHeight","closeAsync","processCapturedPointerAsync","addEventListener","removeEventListener","contains","focus","positionChanged","renderedVisible"]))return t;return null}get popupBase(){var e;for(const t of null!==(e=this.portable)&&void 0!==e?e:[])if(lt(t))return t;return null}};NB=C([on("dxbl-popup-portal")],NB);let RB=class extends gs{constructor(){super(),this.eventsSet=new Set,this.events=null,this.eventListener=this.handleEvent.bind(this),this._value=null}get value(){return this._value}updated(e){var t,i;e.has("events")&&(this.unsubscribe(null!==(t=e.get("events"))&&void 0!==t?t:null),this.eventsSet=new Set(null===(i=this.events)||void 0===i?void 0:i.split(";")),this.subscribe(this.events))}subscribe(e){var t;null===(t=this.events)||void 0===t||t.split(";").forEach((e=>{this.addEventListener(e,this.eventListener)}))}unsubscribe(e){null==e||e.split(";").forEach((e=>{this.removeEventListener(e,this.eventListener)}))}raise(e,t){try{if(!this.eventsSet.has(e))return;this._value=JSON.stringify([e,t]),this.dispatchEvent(new Event("change",{bubbles:!0}))}finally{this._value=null}}handleEvent(e){}};C([An({type:String,attribute:"events"})],RB.prototype,"events",void 0),RB=C([on("dxbl-events-interceptor")],RB);let LB=class extends gs{constructor(){super(...arguments),this.slotChangedHandler=this.handleSlotChange.bind(this)}render(){return Xn`
            <slot @slotchange=${this.slotChangedHandler}></slot>
        `}handleSlotChange(e){const t=e.target.assignedNodes().find((e=>e instanceof ga)),i=this.closest(Qa);i&&(t?(i.notifyDialogConnected(t),i.notifyRootConnected()):(i.notifyDialogDisconnected(),i.notifyRootDisconnected()))}};var MB;LB=C([on("dxbl-modal-root")],LB);let kB=MB=class extends gs{constructor(){super(...arguments),this.slotChangedHandler=this.handleSlotChanged.bind(this),this.interceptorSlotChangedHandler=this.handleInterceptorSlotChange.bind(this),this.interceptor=null,this.resizeHandler=this.handleResize.bind(this),this._adaptivityEnabled=!1,this._popupAccessor=null,this.adaptiveWidth=576}get popup(){var e;return(null===(e=this._popupAccessor)||void 0===e?void 0:e.popup)||null}get popupBase(){var e;return(null===(e=this._popupAccessor)||void 0===e?void 0:e.popupBase)||null}get adaptivityEnabled(){return this._adaptivityEnabled}set adaptivityEnabled(e){this._adaptivityEnabled!==e&&(this._adaptivityEnabled=e,this.raiseEnableAdaptivity(e))}createRenderRoot(){const e=super.createRenderRoot(),t=document.createElement("slot");e.appendChild(t),t.addEventListener("slotchange",this.slotChangedHandler);const i=document.createElement("slot");return i.name="interceptor",e.appendChild(i),i.addEventListener("slotchange",this.interceptorSlotChangedHandler),e}connectedCallback(){super.connectedCallback(),window.addEventListener("resize",this.resizeHandler,{passive:!0}),setTimeout((()=>this.updateAdaptivity()))}disconnectedCallback(){super.disconnectedCallback(),window.removeEventListener("resize",this.resizeHandler)}handleResize(e){this.updateAdaptivity()}updateAdaptivity(){this.adaptivityEnabled=this.getActualAdaptivityEnabled(),this.raiseEvent("adaptivityChanged",{enabled:this.adaptivityEnabled})}getActualAdaptivityEnabled(){return window.innerWidth<=this.adaptiveWidth}handleSlotChanged(e){const t=e.target.assignedNodes();this._popupAccessor=MB.findPopupAccessor(t)}handleInterceptorSlotChange(e){const t=e.target.assignedNodes();this.interceptor=t[0]}raiseEvent(e,t){this.interceptor&&this.interceptor.raise&&this.interceptor.raise(e,t)}raiseEnableAdaptivity(e){this.raiseEvent("adaptivityChanged",{enabled:e})}static findPopupAccessor(e){const t=e.find((e=>at(e)));return t||null}};C([An({type:Number,attribute:"adaptive-width"})],kB.prototype,"adaptiveWidth",void 0),kB=MB=C([on("dxbl-adaptive-dropdown")],kB);customElements.define("dxbl-date-edit",class extends SB{});class KB extends EB{createPopupStrategy(e,t){return new OB(e,t,this)}}class OB extends IB{handleKeyDown(e){const t=Be.KeyUtils.getEventKeyCode(e);return e.altKey&&t===Be.KeyCode.Delete?(this.tryClearEditorValue(),!0):super.handleKeyDown(e)}tryClearEditorValue(){this.dropDownEditor.enabled&&!this.dropDownEditor.isReadOnly&&this.dropDownEditor.dispatchClearEditorValue()}}customElements.define("dxbl-date-range-picker",class extends SB{processPointerDown(e){return H.containsInComposedPath(e,this.isFieldElement.bind(this))&&!this.isDropDownOpen&&this.tryOpenDropDown(),super.processPointerDown(e)}createKeyboardStrategy(){return new KB(this)}});class _B{}_B.ClassName=he.Prefix+"-list-box",_B.ContainerNoScrollClassName=_B.ClassName+"-container-no-scroll",_B.TableHeaderRowClassName=_B.ClassName+"-table-header-row",_B.TableSelectionCellClassName=_B.ClassName+"-selection-cell",_B.MultiSelectClassName=_B.ClassName+"-multi-select",_B.SelectedItemClassName=_B.ClassName+"-item-selected",_B.FocusedItemClassName=_B.ClassName+"-item-focused",_B.EmptyDataItemClassName=_B.ClassName+"-empty-data-item",_B.GroupRowClassName=_B.ClassName+"-group-item",_B.ItemDisplayTemplateContainer=_B.ClassName+"-item-display-template-container",_B.RenderContainer=_B.ClassName+"-render-container",_B.SearchContainer=_B.ClassName+"-search-container",_B.ListSelectAllContainer=_B.ClassName+"-select-all-container",_B.ItemDraggingHint=_B.ClassName+"-dragging-hint",_B.ItemDraggingHintPortal=_B.ClassName+"-dragging-hint-portal",_B.DropTargetIndicatorClassName=_B.ClassName+"-drop-target-indicator",_B.EmptyListItem=_B.ClassName+"-empty-list-item",_B.CheckedClassName=_B.ClassName+"-checked",_B.MoveCursorCssClassName=_B.ClassName+"-move-cursor",_B.NotAllowedCursorCssClassName=_B.ClassName+"-not-allowed-cursor";class VB{}VB.VisibleIndexAttributeName="data-visible-index",VB.ItemIdAttributeName="id",VB.ComponentIdAttributeName="id",VB.AllowDragItemsAttributeName="allow-drag-items",VB.DropMode="drop-mode";class zB{}zB.TableSelector=`.${xe.ContentContainerClassName} > table`,zB.ListSelector=`.${xe.ContentContainerClassName} > ul`,zB.TableBodyRows=`table > tbody > tr:not([${qi}]):not([${Yi}])`,zB.ListItems=`ul > li:not([${qi}]):not([${Yi}])`,zB.MultiSelectClassSelector=`.${_B.MultiSelectClassName}`,zB.TablePartsSelector=":scope > *:not(colgroup)",zB.TableBodySelector=":scope > tbody",zB.KeyboardNavigatorSelector=`:scope > ${Qi}`,zB.HeaderRowSelector=`.${_B.TableHeaderRowClassName}`,zB.TableDataRowSelector=`:scope > tr:not([${qi}]):not([${Yi}]):not(.${_B.GroupRowClassName}):not(.${_B.EmptyListItem})`,zB.TableVisibleRowGeneralSelector=`tr[${VB.VisibleIndexAttributeName}]`,zB.TableVisibleRowSelector=`:scope > ${zB.TableVisibleRowGeneralSelector}`,zB.ItemGeneralSelector=`li:not([${qi}]):not([${Yi}]):not(.${_B.GroupRowClassName}):not(.${_B.EmptyListItem})`,zB.ItemSelector=`:scope > ${zB.ItemGeneralSelector}`,zB.ListVisibleItemGeneralSelector=`li[${VB.VisibleIndexAttributeName}]`,zB.ListVisibleItemSelector=`:scope > ${zB.ListVisibleItemGeneralSelector}`,zB.VisibleItemSelector=`:scope > [${VB.VisibleIndexAttributeName}]`,zB.ListItemDisplayTemplateConrainerSelector=`.${_B.ItemDisplayTemplateContainer}`,zB.SelectedItemSelector=`.${_B.SelectedItemClassName}`,zB.FocusedItemSelector=`.${_B.FocusedItemClassName}`,zB.EmptyDataItemSelector=`.${_B.EmptyDataItemClassName}`,zB.EmptyListItemSelector=`.${_B.EmptyListItem}`,zB.SearchBoxSelector=`:scope > .${_B.SearchContainer} > .${Bl.TextEdit}`,zB.GroupRowSelector=`.${_B.GroupRowClassName}`,zB.ListSelectAllContainerSelector=`.${_B.ListSelectAllContainer}`,zB.ItemDragHintSelector=`${$s}.${_B.ItemDraggingHint}`,zB.ItemDisplayTemplateSelector=`.${_B.ItemDisplayTemplateContainer}`,zB.DropTargetIndicatorSelector=`.${_B.DropTargetIndicatorClassName}`;class WB extends CustomEvent{constructor(e){super(WB.eventName,{detail:new $B(e),bubbles:!0,composed:!0,cancelable:!0})}}WB.eventName=al+".focusedrowchanged";class $B{constructor(e){this.VisibleIndex=e}}class GB extends CustomEvent{constructor(e,t){super(GB.eventName,{detail:new qB(e,t),bubbles:!0,composed:!0,cancelable:!0})}}GB.eventName=al+".makeelementvisible";class qB{constructor(e,t){this.VisibleIndex=e,this.VerticalEdge=t}}class YB extends CustomEvent{constructor(e){super(YB.eventName,{detail:new XB(e),bubbles:!0,composed:!0,cancelable:!0})}}YB.eventName=al+".itemdropped";class XB{constructor(e){this.SourceInfo=new JB(e.sourceInfo),this.TargetInfo=new jB(e.targetInfo)}}class JB{constructor(e){this.Key=e.key,this.VisibleIndex=e.visibleIndex}}class jB extends JB{constructor(e){super(e),this.DropPosition=e.dropPosition}}gt.register(WB.eventName,(e=>e.detail)),gt.register(GB.eventName,(e=>e.detail)),gt.register(YB.eventName,(e=>e.detail));class ZB{static getVerticalEdge(e){switch(e){case Pe.Top:return 0;case Pe.Bottom:return 1;default:return-1}}static getElementVisibleIndex(e){return Te.getAttributeIntValue(e,VB.VisibleIndexAttributeName,-1)}static findItemIndex(e,t){for(let i=0;i<t.length;i++){const n=t[i];if(n&&this.getElementVisibleIndex(n)===e)return i}return-1}static queryItemsBySelector(e,t){return Array.from(e.querySelectorAll(t))}static isGroupRowElement(e){return!!e&&(e.matches&&e.matches(zB.GroupRowSelector))}static getRow(e,t){const i=e.getItemsContainer();return i?i.querySelector(`:scope > [${VB.VisibleIndexAttributeName}="${t}"]`):null}static isGroupRow(e,t){const i=ZB.getRow(e,t);return!!i&&ZB.isGroupRowElement(i)}static getElementHeight(e,t,i=0){const n=ZB.getRow(e,t);return n?n.getBoundingClientRect().height:i}static calculateItemAverageHeight(e){const t=e[0];return(e[e.length-1].getBoundingClientRect().bottom-t.getBoundingClientRect().top)/e.length}static isOutsideViewportItemRequired(e,t,i,n){const s=n?i+1:i-1,r=ZB.getRow(e,s);if(r){const i=r.getBoundingClientRect(),o=t.getElementsRectangle(t.getHeaderElements());if(!n&&o)return!Ja.getIntersectionRectangle(i,o).isEmpty;return Ja.getIntersectionRectangle(i,t.getBoundingClientRect()).height<=ZB.getElementHeight(e,s)}return!0}static calculateRowHeight(e,t,i,n){const s=ZB.getRow(e,i);let r=ZB.getElementHeight(e,i);return s&&r&&!ZB.isOutsideViewportItemRequired(e,t,i,n)&&(r+=Ja.calculateHeightOffsetValue(s,t,n)),r}static calculateBoundaryItemVisibleIndex(e,t,i){const n=Math.ceil(Ja.getDataAreaViewportHeight(t)),s=i?0:e.getLastAvailableVisibleIndex();let r=i&&e.getSelectedVisibleIndex()<=s||!i&&e.getSelectedVisibleIndex()>=s?s:e.getSelectedVisibleIndex(),o=ZB.calculateRowHeight(e,t,r,i);const a=Ja.isVirtualScrollingEnabled(t)?ZB.calculateItemAverageHeight(e.getRows()):void 0,l=i?1:-1;let A=r+l;for(;e.isElementInsideViewport(A)&&(o+=ZB.getElementHeight(e,A,a),!(o>n&&r!==e.getSelectedVisibleIndex()));)r=A,A+=l;return r}}class eE{constructor(e){this._selectedItemIndex=-1,this._selectedVisibleIndex=-1,this._firstVisibleIndex=-1,this._lastVisibleIndex=-1,this._firstAvailableVisibleIndex=0,this._lastAvailableVisibleIndex=-1,this._tabKeyPressed=!1,this._isActive=!1,this._renderContainer=null,this._requireUpdateSelectedItemState=-1,this.boundOnRenderContainerMutationHandler=this.onRenderContainerMutation.bind(this),this.boundOnVisibleElementChangedHandler=this.onVisibleElementChanged.bind(this),this._component=e,this._items=[],this._rows=[],this._renderContainerMutationObserver=new MutationObserver(this.boundOnRenderContainerMutationHandler)}get tabKeyPressed(){return this._tabKeyPressed||Pi.keyboardEventProcessed&&Pi.processingKeyCode===Be.KeyCode.Tab}get items(){return this._items}get itemCount(){return this.items.length}get selectedItemElement(){return this.selectedItemIndex>=0&&this.selectedItemIndex<this.itemCount?this.items[this.selectedItemIndex]:null}get selectedItemIndex(){return this._selectedItemIndex}get isFirstItemSelected(){return this._selectedVisibleIndex<=this._firstAvailableVisibleIndex}get isLastItemSelected(){return this._selectedVisibleIndex>=this._lastAvailableVisibleIndex}get isVirtualRenderModeEnabled(){return this._component.enableVirtualRenderMode}get totalItemCount(){const e=this._component.getScrollViewer();return e&&e instanceof sn?e.totalItemCount:this._rows.length}get searchIsAppliedAndReturnsNoneEmptyData(){return this.itemCount>0&&this._component.searchIsApplied}isIndexWithinBoundaries(e){return e>=0&&e<this.itemCount}onPopupShown(){this._isActive=!0,this.initialize(),this.addEventSubscriptions()}onPopupClosed(){this.removeEventSubscriptions(),this.dispose(),this._isActive=!1}processKeyDown(e){switch(Be.KeyUtils.getEventKeyCode(e)){case Be.KeyCode.Tab:this._tabKeyPressed=!0;break;case Be.KeyCode.Enter:case Be.KeyCode.Esc:return!this._isActive&&(this._component.processKeyDownEvent(e),!0);case Be.KeyCode.Up:return this._component.handleCloseDropDown(e);case Be.KeyCode.Down:return this._component.handleOpenDropDown(e);case Be.KeyCode.Delete:return this._component.handleTryClearEditorValue(e)}return!1}processCapturedKeyDown(e){switch(Be.KeyUtils.getEventKeyCode(e)){case Be.KeyCode.Tab:this._tabKeyPressed=!0;break;case Be.KeyCode.Enter:case Be.KeyCode.Esc:return this._component.processKeyDownEvent(e),!0;case Be.KeyCode.Up:return!(e.altKey||e.metaKey)&&this.handleArrowUpKeyDown();case Be.KeyCode.Down:return!(e.altKey||e.metaKey)&&this.handleArrowDownKeyDown();case Be.KeyCode.PageUp:return this.handlePageUp();case Be.KeyCode.PageDown:return this.handlePageDown();case Be.KeyCode.Home:return e.ctrlKey&&e.shiftKey&&this.handleHomeKeyDown();case Be.KeyCode.End:return e.ctrlKey&&e.shiftKey&&this.handleEndKeyDown()}return!1}processKeyUp(e){switch(this._tabKeyPressed=!1,Be.KeyUtils.getEventKeyCode(e)){case Be.KeyCode.Down:case Be.KeyCode.Up:case Be.KeyCode.PageUp:case Be.KeyCode.PageDown:this.notifyFocusedRowChanged();break;case Be.KeyCode.Home:case Be.KeyCode.End:e.shiftKey&&e.ctrlKey&&this.notifyFocusedRowChanged()}return!1}updateState(){this._isActive?(this.udpdateFocusState(),this.updateSelectedItemState()):this._requireUpdateSelectedItemState++}shouldHandleKeyDown(e){switch(Be.KeyUtils.getEventKeyCode(e)){case Be.KeyCode.Enter:case Be.KeyCode.Esc:return this._isActive;default:return!1}}getItem(e){return this.items[e]}addFocusHiddenAttribute(){this._renderContainer&&!xi(this._renderContainer)&&Ii(this._renderContainer)}removeFocusHiddenAttribute(){this._renderContainer&&xi(this._renderContainer)&&Si(this._renderContainer)}addDataQaLoadedAttribute(){this._renderContainer&&!n.hasLoaded(this._renderContainer)&&n.setLoaded(this._renderContainer)}removeDataQaLoadedAttribute(){this._renderContainer&&n.hasLoaded(this._renderContainer)&&n.removeLoaded(this._renderContainer)}containsFocusHiddenAttribute(){return!!this._renderContainer&&xi(this._renderContainer)}dispose(){this.removeFocusHiddenAttribute(),this.removeDataQaLoadedAttribute(),this._renderContainerMutationObserver.disconnect(),this.setSelectedItem(-1,!0),this.notifyFocusedRowChanged(),this._firstAvailableVisibleIndex=-1,this._lastAvailableVisibleIndex=-1,this._firstVisibleIndex=-1,this._lastVisibleIndex=-1,this._items=[],this._rows=[]}initialize(){if(this._items=this.queryItems(),this._rows=this.queryRows(),this.updateBoundaries(),this._renderContainer=this._component.renderContainer,this._renderContainer&&this._renderContainerMutationObserver.observe(this._renderContainer,{childList:!0,subtree:!0}),this.addFocusHiddenAttribute(),this.updateViewportBoundaries(),this._component.useCustomInput){const e=this.findSelectedDataItemIndex();e>=0&&(this.setSelectedItem(e),this.notifyFocusedRowChanged())}else this.restoreFocusedState();this.addDataQaLoadedAttribute()}restoreFocusedState(){if(this.searchIsAppliedAndReturnsNoneEmptyData&&this._requireUpdateSelectedItemState>=0)this.removeFocusHiddenAttribute(),this._requireUpdateSelectedItemState=-1,this.setSelectedItem(0,!0);else{const e=this.findSelectedDataItemIndex();e>=0&&this.setSelectedItem(e,!0)}this.notifyFocusedRowChanged()}handleArrowUpKeyDown(){return this.removeFocusHiddenAttribute(),this.isFirstItemSelected?(this.addFocusMarkerClass(this.selectedItemElement),!0):(this.isVirtualRenderModeEnabled?this.moveToPrevVirtualItem():this.moveToPrevItem(),!0)}handleArrowDownKeyDown(){return this.removeFocusHiddenAttribute(),this.isLastItemSelected?(this.addFocusMarkerClass(this.selectedItemElement),!0):(this.isVirtualRenderModeEnabled?this.moveToNextVirtualItem():this.moveToNextItem(),!0)}handlePageUp(){return this.removeFocusHiddenAttribute(),this.isFirstItemSelected?(this.addFocusMarkerClass(this.selectedItemElement),!0):(this.isVirtualRenderModeEnabled?this.moveToPrevVirtualPageItem():this.moveToPrevPageItem(),!0)}handlePageDown(){return this.removeFocusHiddenAttribute(),this.isLastItemSelected?(this.addFocusMarkerClass(this.selectedItemElement),!0):(this.isVirtualRenderModeEnabled?this.moveToNextVirtualPageItem():this.moveToNextPageItem(),!0)}moveToNextPageItem(){const e=this._lastAvailableVisibleIndex,t=this._component.getScrollViewer();if(t){const i=ZB.calculateBoundaryItemVisibleIndex(this,t,!0),n=i>e?e:i,s=ZB.isGroupRow(this,n),r=ZB.findItemIndex(s?n-1:n,this.items);this.setSelectedItem(r);const o=s?ZB.getRow(this,n):this.selectedItemElement;this.scrollToElement(Pe.Bottom,Qe.None,o)}}moveToPrevPageItem(){const e=this._component.getScrollViewer();if(e){const t=ZB.calculateBoundaryItemVisibleIndex(this,e,!1),i=t<0?0:t,n=ZB.isGroupRow(this,i),s=ZB.findItemIndex(n?i+1:i,this.items);this.setSelectedItem(s);const r=n?ZB.getRow(this,i):this.selectedItemElement;this.scrollToElement(Pe.Top,Qe.None,r)}}moveToPrevVirtualPageItem(){const e=this._component.getScrollViewer();if(e){const t=ZB.calculateBoundaryItemVisibleIndex(this,e,!1);if(this.isElementInsideViewport(t)){const e=ZB.isGroupRow(this,t),i=ZB.findItemIndex(e?t+1:t,this.items);this.setSelectedItem(i);const n=e?ZB.getRow(this,t):this.selectedItemElement;this.scrollToElement(Pe.Top,Qe.None,n)}else this.notifyMakeElementVisible(t,Pe.Top)}}moveToNextVirtualPageItem(){const e=this._component.getScrollViewer();if(e){const t=ZB.calculateBoundaryItemVisibleIndex(this,e,!0);if(this.isElementInsideViewport(t)){const e=ZB.isGroupRow(this,t),i=ZB.findItemIndex(e?t-1:t,this.items);this.setSelectedItem(i);const n=e?ZB.getRow(this,t):this.selectedItemElement;this.scrollToElement(Pe.Bottom,Qe.None,n)}else this.notifyMakeElementVisible(t,Pe.Bottom)}}handleHomeKeyDown(){return this.removeFocusHiddenAttribute(),this.isFirstItemSelected?(this.addFocusMarkerClass(this.selectedItemElement),!0):(this.isVirtualRenderModeEnabled?this.moveToFirstVirtualItem():this.moveToFirstItem(),!0)}handleEndKeyDown(){return this.removeFocusHiddenAttribute(),this.isLastItemSelected?(this.addFocusMarkerClass(this.selectedItemElement),!0):(this.isVirtualRenderModeEnabled?this.moveToLastVirtualItem():this.moveToLastItem(),!0)}moveToPrevItem(){this.selectedItemIndex>0&&this.setSelectedItem(this.selectedItemIndex-1),this.scrollToElement(null,Qe.None)}moveToNextItem(){this.selectedItemIndex<this.itemCount-1&&this.setSelectedItem(this.selectedItemIndex+1),this.scrollToElement(null,Qe.None)}moveToNextVirtualItem(){let e=this._selectedVisibleIndex+1;this.isElementInsideViewport(e)&&ZB.isGroupRow(this,e)&&e++,this.isElementInsideViewport(e)&&this.selectedItemIndex<this.totalItemCount-1?(this.setSelectedItem(this.selectedItemIndex+1),this.scrollToElement(null,Qe.None)):this.notifyMakeElementVisible(e,Pe.Bottom)}moveToPrevVirtualItem(){let e=this._selectedVisibleIndex-1;0===e&&0===this.selectedItemIndex||(this.isElementInsideViewport(e)&&ZB.isGroupRow(this,e)&&e--,this.isElementInsideViewport(e)&&this.selectedItemIndex>0?(this.setSelectedItem(this.selectedItemIndex-1),this.scrollToElement(null,Qe.None)):this.notifyMakeElementVisible(e,Pe.Top))}moveToFirstItem(){if(this._component.getScrollViewer()){const e=ZB.isGroupRow(this,0);this.setSelectedItem(0);const t=e?ZB.getRow(this,0):this.selectedItemElement;this.scrollToElement(Pe.Top,Qe.None,t)}}moveToFirstVirtualItem(){this.isElementInsideViewport(0)&&this.selectedItemIndex>0?(this.setSelectedItem(0),this.scrollToElement(Pe.Top,Qe.None)):this.notifyMakeElementVisible(0,Pe.Top)}moveToLastItem(){this._component.getScrollViewer()&&(this.setSelectedItem(this.itemCount-1),this.scrollToElement(Pe.Bottom,Qe.None))}moveToLastVirtualItem(){const e=this.totalItemCount-1;this.isElementInsideViewport(e)&&this.selectedItemIndex<this.itemCount-1?(this.setSelectedItem(this.itemCount-1),this.scrollToElement(Pe.Bottom,Qe.None)):this.notifyMakeElementVisible(e,Pe.Bottom)}updateViewportBoundaries(){if(0===this._rows.length||0===this.itemCount)return;this._firstVisibleIndex=this.getElementVisibleIndex(this._rows[0]);this._lastVisibleIndex=this.getElementVisibleIndex(this._rows[this._rows.length-1])}queryRows(){return this.itemsContainer?Array.from(this.itemsContainer.querySelectorAll(zB.VisibleItemSelector)):[]}get itemsContainer(){const e=this._component.getTable();return e?e.querySelector(zB.TableBodySelector):this._component.getList()}updateBoundaries(){let e=0;0!==this._firstAvailableVisibleIndex&&(e++,this._firstAvailableVisibleIndex=0);const t=this.totalItemCount-1;return this._lastAvailableVisibleIndex!==t&&(e++,this._lastAvailableVisibleIndex=t),e>0}isElementInsideViewport(e){return e>=this._firstVisibleIndex&&e<=this._lastVisibleIndex}findItemIndex(e){for(let t=0;t<this.itemCount;t++){const i=this.items[t];if(i&&this.getElementVisibleIndex(i)===e)return t}return-1}getElementVisibleIndex(e){return Te.getAttributeIntValue(e,VB.VisibleIndexAttributeName,-1)}findSelectedDataItemIndex(){for(let e=0;e<this.itemCount;e++){const t=this.items[e];if(t&&t.matches(zB.SelectedItemSelector))return e}return-1}notifyFocusedRowChanged(){this._component.notifyFocusedRowChanged(this._selectedVisibleIndex)}notifyMakeElementVisible(e,t=null){e<0||this._component.notifyMakeElementVisible(e,ZB.getVerticalEdge(t))}setSelectedItem(e,t=!1){(this.selectedItemIndex!==e||t)&&(this.removeFocusMarkerClass(this.selectedItemElement),this._selectedItemIndex=e,this.selectedItemElement?(this.addFocusMarkerClass(this.selectedItemElement),this.updateActiveDescendantAttribute(this.selectedItemElement),this._selectedVisibleIndex=this.getElementVisibleIndex(this.selectedItemElement)):(this.removeFocusMarkerClass(this.selectedItemElement),this.updateActiveDescendantAttribute(this.selectedItemElement),this._selectedVisibleIndex=-1),this.notifyFocusedRowChanged())}updateActiveDescendantAttribute(e){if(this.containsFocusHiddenAttribute())return;const t=e&&e.getAttribute(VB.ItemIdAttributeName);this._component.updateActiveDescendantAttributeValue(null!=t?t:"")}removeFocusMarkerClass(e){e&&T.DomUtils.hasClassName(e,_B.FocusedItemClassName)&&T.DomUtils.removeClassName(e,_B.FocusedItemClassName)}addFocusMarkerClass(e){this.containsFocusHiddenAttribute()||!e||T.DomUtils.hasClassName(e,_B.FocusedItemClassName)||T.DomUtils.hasClassName(e,_B.EmptyDataItemClassName)||T.DomUtils.addClassName(e,_B.FocusedItemClassName)}queryItems(){const e=this._component.getTable();if(e){const t=e.querySelector(zB.TableBodySelector);if(t)return ZB.queryItemsBySelector(t,zB.TableDataRowSelector)}else{const e=this._component.getList();if(e)return ZB.queryItemsBySelector(e,zB.ItemSelector)}return[]}addEventSubscriptions(){const e=this._component.getScrollViewer();e&&e.addEventListener(Oe.eventName,this.boundOnVisibleElementChangedHandler)}removeEventSubscriptions(){const e=this._component.getScrollViewer();e&&e.removeEventListener(Oe.eventName,this.boundOnVisibleElementChangedHandler)}udpdateFocusState(){this._component.useCustomInput?this.addFocusHiddenAttribute():this.removeFocusHiddenAttribute()}updateSelectedItemState(){this.setSelectedItem(this.searchIsAppliedAndReturnsNoneEmptyData&&!this._component.useCustomInput?0:-1,!0),this.notifyFocusedRowChanged()}onRenderContainerMutation(e,t){if(this._isActive)if(this.removeFocusMarkerClass(this.selectedItemElement),this._items=this.queryItems(),this._rows=this.queryRows(),this.updateViewportBoundaries(),this.updateBoundaries())this.udpdateFocusState(),this.updateSelectedItemState();else if(this.isElementInsideViewport(this._selectedVisibleIndex)){const e=this.findItemIndex(this._selectedVisibleIndex);e>-1&&(this.setSelectedItem(e,!0),this.notifyFocusedRowChanged())}}onVisibleElementChanged(e){if(e.detail.isFocusRequired){const t=ZB.getElementVisibleIndex(e.detail.element),i=ZB.isGroupRow(this,t),n=ZB.findItemIndex(i?t+1:t,this.items);this.setSelectedItem(n),this.notifyFocusedRowChanged()}}scrollToElement(e,t,i=this.selectedItemElement){const n=this._component.getScrollViewer();n&&i&&_e.scrollToElementRelyOnStickyDescendants(i,e,t,n)}getLastAvailableVisibleIndex(){return this._lastAvailableVisibleIndex}getSelectedVisibleIndex(){return this._selectedVisibleIndex}getItemsContainer(){return this.itemsContainer}getRows(){return this._rows}}class tE extends CustomEvent{constructor(e,t,i,n){super(tE.eventName,{detail:new iE(e,t,i,n),bubbles:!0,composed:!0,cancelable:!0})}}tE.eventName=Al+".keydown";class iE{constructor(e,t,i,n){this.Key=e,this.AltKey=t,this.CtrlKey=i,this.ShiftKey=n}}class nE extends CustomEvent{constructor(){super(nE.eventName,{bubbles:!0,composed:!0,cancelable:!0})}}nE.eventName=Al+".dropdownclosed",gt.register(tE.eventName,(e=>e.detail)),gt.register(nE.eventName,(e=>e.detail));class sE{}var rE;sE.AriaActiveDescendant="aria-activedescendant",function(e){e.Default="Default",e.None="None",e.AutoSearch="AutoSearch"}(rE||(rE={}));class oE extends jl{constructor(){super(),this._elementHasCalculatedWidthAttribute="has-calculated-width",this._readyAttributeLifespanTimeoutId=null,this._focusedRowIndex=-1,this.boundOnScrollViewerUpdateHandler=this.onScrollViewerUpdate.bind(this),this.boundOnRenderContainerPointerDownHandler=this.onRenderContainerPointerDown.bind(this),this.boundOnVisibleElementChangedHandler=this.onVisibleElementChanged.bind(this),this.boundOnPopupDomElementMutationHandler=this.onPopupDomElementMutationCallback.bind(this),this.boundOnRenderContainerSizeChanged=this.ensureRenderContainerState.bind(this),this.boundOnPopupShownHandler=this.onPopupShown.bind(this),this.boundOnPopupClosedHandler=this.onPopupClosed.bind(this),this._tableHeaderCellSelector=`.${xe.ContentContainerClassName} > table > thead > ${zB.HeaderRowSelector} > th`,this._tableBodyCellSelector=`.${xe.ContentContainerClassName} > table > tbody > ${zB.TableVisibleRowGeneralSelector} > td`,this._hoverTitleElementsSelector=[this._tableBodyCellSelector,this._tableHeaderCellSelector].join(", "),this.searchDelay=null,this._kbdNavigationHelper=new eE(this),this.dropDownWidthMode=Jl.ContentOrEditorWidth,this.searchMode=rE.Default,this.useCustomInput=!1,this._pointerEventsHelper=new q(this),this._popupDomElementMutationObserver=new MutationObserver(this.boundOnPopupDomElementMutationHandler),this._renderContainerResizeObserver=new ResizeObserver(this.boundOnRenderContainerSizeChanged),this.setUpSearchDelay()}connectedCallback(){super.connectedCallback(),this.prepareRenderContainer()}disconnectedCallback(){super.disconnectedCallback(),this.releaseRenderContainer()}ensurePopupElement(){super.ensurePopupElement(),this.popupElement&&(this.popupElement.addEventListener(ao.eventName,this.boundOnPopupShownHandler),this.popupElement.addEventListener(lo.eventName,this.boundOnPopupClosedHandler))}disposePopupElement(){this.popupElement&&(this.popupElement.removeEventListener(ao.eventName,this.boundOnPopupShownHandler),this.popupElement.removeEventListener(lo.eventName,this.boundOnPopupClosedHandler)),super.disposePopupElement()}createKeyboardStrategy(){return new Yl(this)}get renderContainer(){return this.popupDOMElement?this.popupDOMElement.querySelector(`.${_B.RenderContainer}`):null}getScrollViewer(){return this.renderContainer?this.renderContainer.querySelector(`.${xe.ClassName}`):null}getScrollViewerContent(){return this.renderContainer?this.renderContainer.querySelector(`.${xe.ContentContainerClassName}`):null}getTable(){return this.renderContainer?this.renderContainer.querySelector(`.${xe.ContentContainerClassName} > table`):null}getList(){return this.renderContainer?this.renderContainer.querySelector(zB.ListSelector):null}notifyFocusedRowChanged(e){e!==this._focusedRowIndex&&(this.dispatchEvent(new WB(e)),this._focusedRowIndex=e)}notifyMakeElementVisible(e,t){e<0||this.dispatchEvent(new GB(e,t))}notifyColumnsChanged(e){}handleOpenDropDown(e){return!(!this.enabled||this.isReadOnly||this.isDropDownOpen||!e.altKey&&!e.metaKey)&&(this.openDropDown(),!0)}handleCloseDropDown(e){return!(!this.enabled||this.isReadOnly||!this.isDropDownOpen||!e.altKey&&!e.metaKey)&&(this.closeDropDown(),!0)}handleTryClearEditorValue(e){return!(!this.enabled||this.isReadOnly||!e.altKey)&&(this.dispatchClearEditorValue(),!0)}processKeyDownEvent(e){this._searchInputDefferedAction.forceExecute();const t=new tE(e.key,e.altKey,e.ctrlKey||e.metaKey,e.shiftKey);this.dispatchEvent(t)}updateActiveDescendantAttributeValue(e){this.inputElement&&this.inputElement.hasAttribute(sE.AriaActiveDescendant)&&this.inputElement.setAttribute(sE.AriaActiveDescendant,e)}get isTableRender(){return!!this.getTable()}get enableVirtualRenderMode(){const e=this.getScrollViewer();return null!==e&&e instanceof sn}get isSearchActive(){switch(this.searchMode){case rE.None:case rE.Default:return!1;default:return!0}}get searchIsApplied(){const e=this.fieldElement?this.fieldElementValue:this.fieldText;return this.isSearchActive&&(e?e.length:-1)>0}onTextInput(e){this.inputElement&&(this.ensureDropDownOpened(e),this._kbdNavigationHelper.updateState(),this.raiseFieldText())}raiseFieldText(){this._searchInputDefferedAction.execute((()=>super.raiseFieldText()))}raiseFocusOut(e){this._searchInputDefferedAction.forceExecute(),super.raiseFocusOut(e,this._kbdNavigationHelper.tabKeyPressed)}ensureDropDownOpened(e){!this.isDropDownOpen&&e.data&&e.data.length>0&&this.tryOpenDropDown()}processKeyDown(e){return!!this.tryProcessKeyDown(e)||super.processKeyDown(e)}processKeyUp(e){return!!this.tryProcessKeyUp(e)||super.processKeyUp(e)}tryProcessKeyDown(e){return this._kbdNavigationHelper.processKeyDown(e)}tryProcessKeyUp(e){return this._kbdNavigationHelper.processKeyUp(e)}processCapturedKeyDownAsync(e,t){return this._kbdNavigationHelper.processCapturedKeyDown(e)?(e.preventDefault(),t.handled=!0,Promise.resolve()):super.processCapturedKeyDownAsync(e,t)}onPopupShown(e){this.renderContainer||!this.popupDOMElement?this.onPopupShownCore():this._popupDomElementMutationObserver.observe(this.popupDOMElement,{childList:!0,subtree:!0})}onPopupClosed(e){this._popupDomElementMutationObserver.disconnect(),this._kbdNavigationHelper.onPopupClosed(),this.releaseRenderContainer()}prepareRenderContainer(){this.renderContainer&&(this.renderContainer.addEventListener(Ke.eventName,this.boundOnScrollViewerUpdateHandler),this.renderContainer.addEventListener(Oe.eventName,this.boundOnVisibleElementChangedHandler),this.renderContainer.addEventListener("pointerdown",this.boundOnRenderContainerPointerDownHandler),this.isDropDownWidthDependsOnContent&&this._renderContainerResizeObserver.observe(this.renderContainer),this.resizeDropDownElement(),this._pointerEventsHelper.initialize())}releaseRenderContainer(){this.renderContainer&&(this.renderContainer.removeEventListener(Ke.eventName,this.boundOnScrollViewerUpdateHandler),this.renderContainer.removeEventListener(Oe.eventName,this.boundOnVisibleElementChangedHandler),this.renderContainer.removeEventListener("pointerdown",this.boundOnRenderContainerPointerDownHandler),this._renderContainerResizeObserver.disconnect(),this._pointerEventsHelper.dispose()),this.isDropDownWidthDependsOnContent&&this.dropDownElement&&(this.dropDownElement.desiredWidth=null)}onPopupDomElementMutationCallback(e,t){this.renderContainer&&(t.disconnect(),this.onPopupShownCore())}onPopupShownCore(){this.prepareRenderContainer(),this._kbdNavigationHelper.onPopupShown()}onVisibleElementChanged(e){this.resizeDropDownElement()}resizeDropDownElementCore(){const e=this.getTable();if(e){const t=Array.from(e.querySelectorAll(":scope > colgroup > col")),i=Array.from(e.querySelectorAll(":scope > thead > tr > th")),n=[],s=[];for(let e=0;e<t.length;e++){const i=t[e];(i.style.width.indexOf("%")>0||i.hasAttribute(this._elementHasCalculatedWidthAttribute))&&(i.style.removeProperty("width"),i.removeAttribute(this._elementHasCalculatedWidthAttribute)),i.style.width?n.push(e):s.push(e)}if(s.length<1)return;const r=n.map((e=>i[e])),o=s.map((e=>i[e])),a=r.reduce(((e,t)=>e+t.getBoundingClientRect().width),0),l=e.style.width;e.style.width="auto";const A=o.reduce(((e,t)=>e+t.getBoundingClientRect().width),0),d=this.dropDownElement.minDesiredWidth?T.DomUtils.pxToInt(this.dropDownElement.minDesiredWidth):0;if(this.needAdjustNarrowContent(a,A,d)){if(s.length>1){const e=(d-a)/A;for(let n=0;n<s.length-1;n++){const r=s[n],o=t[r];o.style.width=Te.toPx(Math.ceil(i[r].getBoundingClientRect().width*e)),o.setAttribute(this._elementHasCalculatedWidthAttribute,"")}}}else s.forEach((e=>{const n=t[e];n.style.width=Te.toPx(Math.ceil(i[e].getBoundingClientRect().width)),n.setAttribute(this._elementHasCalculatedWidthAttribute,"")}));e.style.width=l}else{const e=this.getList(),t=window.innerWidth,i=this.getScrollViewerContent(),n=this.popupDOMElement&&i?this.popupDOMElement.getBoundingClientRect().width-i.getBoundingClientRect().width:0,s=Math.ceil(e.getBoundingClientRect().width+n);this.dropDownElement.desiredWidth=Te.toPx(Math.min(s,t))}}needAdjustNarrowContent(e,t,i){if(i){return this.dropDownWidthMode===Jl.ContentOrEditorWidth&&e+t<i}return!1}resizeDropDownElement(){this.dropDownElement&&(this.isDropDownWidthDependsOnContent?this.resizeDropDownElementCore():this.ensureRenderContainerState())}onSizeChanged(e,t){if(!this.dropDownElement)return;const i=this.getScrollViewer();i&&i.refreshUI&&i.refreshUI(),super.onSizeChanged(e,t)}onRenderContainerPointerDown(e){var t;h.Browser.Firefox&&this.isTableRender&&e.ctrlKey&&e.preventDefault(),null!==(null===(t=this.renderContainer)||void 0===t?void 0:t.querySelector(zB.EmptyDataItemSelector))&&H.markHandled(e)}onScrollViewerUpdate(e){const t=this.getScrollViewerContent(),i=this.getTable();t&&i&&(i.offsetHeight<t.clientHeight?T.DomUtils.addClassName(i,_B.ContainerNoScrollClassName):i.offsetHeight>t.clientHeight&&T.DomUtils.removeClassName(i,_B.ContainerNoScrollClassName)),e.stopPropagation()}ensureRenderContainerState(){const e=this.renderContainer;if(!e)return;const t="ready";n.removeAttribute(e,t),this._readyAttributeLifespanTimeoutId&&clearTimeout(this._readyAttributeLifespanTimeoutId),this._readyAttributeLifespanTimeoutId=setTimeout((()=>{n.setAttribute(e,t)}),1e3)}shouldHandleKeyDown(e){return this._kbdNavigationHelper.shouldHandleKeyDown(e)}get isDropDownWidthDependsOnContent(){return this.dropDownWidthMode===Jl.ContentWidth||this.dropDownWidthMode===Jl.ContentOrEditorWidth}get handlePointerEventsMode(){return r.None}get handlePointerEventsTarget(){var e;return null!==(e=this.getTable())&&void 0!==e?e:this}get hoverTitleElementsSelector(){return this._hoverTitleElementsSelector}get bypassNonInlineHoverTitleElementChildSelector(){return null}shouldProcessPointerEvent(e){return!0}handlePointerEventsDelay(e){return s.Default}setUpSearchDelay(){var e;this._searchInputDefferedAction=new ja(this.isSearchActive&&null!==(e=this.searchDelay)&&void 0!==e?e:0)}updated(e){e.has("searchDelay")&&this.setUpSearchDelay(),super.updated(e)}}var aE;C([An({type:rE,attribute:"search-mode"})],oE.prototype,"searchMode",void 0),C([An({type:Boolean,attribute:"use-custom-input"})],oE.prototype,"useCustomInput",void 0),C([An({type:Number,attribute:"search-delay"})],oE.prototype,"searchDelay",void 0),function(e){e.Input="Input",e.Click="Click"}(aE||(aE={}));class lE extends oE{constructor(){super(),this.dropDownTriggerMode=aE.Input}connectedCallback(){super.connectedCallback()}disconnectedCallback(){super.disconnectedCallback()}applyTextPropertyCore(){super.applyTextPropertyCore(),this.allowInput||this.fieldElement&&this.fieldText&&""!==this.fieldText&&this.fieldElement.setSelectionRange(0,0)}ensureDropDownOpened(e){if(!this.isDropDownOpen){(e.data&&e.data.length>0||(this.fieldElement?this.fieldElementValue:this.fieldText))&&super.tryOpenDropDown()}}processPointerDown(e){const t=H.containsInComposedPath(e,this.isFieldElement.bind(this));let i=!1;return H.containsInComposedPath(e,this.isEditBoxTemplateElement.bind(this))?i=!0:t&&(i=this.dropDownTriggerMode===aE.Click||this.isFieldElementReadonly),i&&this.toggleDropDownVisibility(),super.processPointerDown(e)}}C([An({type:aE,attribute:"drop-down-trigger-mode"})],lE.prototype,"dropDownTriggerMode",void 0),customElements.define(ll,lE);class AE extends ql{createPopupStrategy(e,t){return new dE(e,t,this)}}class dE extends wB{constructor(e,t,i){super(e,t,i),this._focusableElements=[],this._timeoutId=null}get editDropDownElement(){return this.targetElement.querySelector(`.${Xl.ClassName}`)}updateFocusableElementsList(){if(this.editDropDownElement){const e=fi.findFocusableElements(this.editDropDownElement);this._focusableElements=e.length>0?e:[this.editDropDownElement]}}get focusableElements(){return this._focusableElements}handlePopupShown(){super.handlePopupShown(),this.addDropDownElementsEventSubscriptions(),this.waitForNavigatorInitialization()}handlePopupClosed(){super.handlePopupClosed(),this.targetElement.removeEventListener("focus",this.boundDropDownElementFocusHandler),this.editDropDownElement&&this.editDropDownElement.removeEventListener("focus",this.boundEditDropDownElementFocusHandler)}addDropDownElementsEventSubscriptions(){this.boundDropDownElementFocusHandler||(this.boundDropDownElementFocusHandler=this.dropDownElementFocusHandler.bind(this)),this.targetElement.addEventListener("focus",this.boundDropDownElementFocusHandler),this.editDropDownElement&&(this.boundEditDropDownElementFocusHandler||(this.boundEditDropDownElementFocusHandler=this.editDropDownElementFocusHandler.bind(this)),this.editDropDownElement.addEventListener("focus",this.boundEditDropDownElementFocusHandler))}waitForNavigatorInitialization(){if(this._timeoutId&&clearTimeout(this._timeoutId),document.activeElement===this.targetElement){const e=this.getFirstKeyboardNavigator();e&&!e.initialized?this._timeoutId=setTimeout((()=>this.waitForNavigatorInitialization()),50):this.handlePopupShownInternal()}}handlePopupShownInternal(){this.updateFocusableElementsList(),this.tryFocusFirstFocusableElement(),this.synchronizeInnerComponentFocusState()}tryFocusFirstFocusableElement(){this.focusableElements.length>0&&fi.focusElement(this.focusableElements[0])}tryFocusLastFocusableElement(){this.focusableElements.length>0&&fi.focusElement(this.focusableElements[this.focusableElements.length-1])}handleKeyDown(e){return Be.KeyUtils.getEventKeyCode(e)===Be.KeyCode.Tab&&this.focusableElements.length<=1?(H.markHandled(e),!1):super.handleKeyDown(e)}onDropDownEditorPointerDownHandler(){T.DomUtils.isItParent(this.targetElement,document.activeElement)||super.onDropDownEditorPointerDownHandler()}dropDownElementFocusHandler(e){this.tryFocusFirstFocusableElement()}editDropDownElementFocusHandler(e){this.tryFocusLastFocusableElement()}getInnerControlMainElement(){return null}getFirstKeyboardNavigator(){return this.editDropDownElement.querySelector(Qi)}synchronizeInnerComponentFocusState(){const e=this.getFirstKeyboardNavigator();e&&e.isActive&&xi(this.dropDownEditor)&&Ii(e.targetElement)}}let cE=class extends jl{constructor(){super()}processPointerDown(e){const t=e.target===this.editBoxElement,i=this.editBoxTemplateElement&&this.editBoxTemplateElement.contains(e.target)&&!this.isFocusableElementInMainElementTemplate(e.target);return this.isDropDownOpen||!t&&!i||this.tryOpenDropDown(),super.processPointerDown(e)}createKeyboardStrategy(){return new AE(this)}connectedCallback(){super.connectedCallback()}disconnectedCallback(){super.disconnectedCallback()}};cE=C([on("dxbl-dropdown-box")],cE);let hE=class extends El{constructor(){super(),this.textAreaObserver=new MutationObserver(this.textAreaSizeChanged.bind(this))}connectedOrContentChanged(){super.connectedOrContentChanged();const e=this.getFieldElement();e&&this.textAreaObserver.observe(e,{attributes:!0})}disconnectedCallback(){this.textAreaObserver.disconnect(),super.disconnectedCallback()}textAreaSizeChanged(e,t){var i,n;const s=e[0].target,r=parseInt(s.style.width);if(!isNaN(r)){const e=this.offsetWidth-this.clientWidth+r;this.offsetWidth!==e&&(this.style.width=e+"px")}const o=parseInt(s.style.height),a=parseInt(s.style.marginBottom);if(!isNaN(o)){const e=parseInt(getComputedStyle(s).minHeight),t=o>=e?o:e,r=null!==(n=null===(i=this.getButtonsArea())||void 0===i?void 0:i.getBoundingClientRect().height)&&void 0!==n?n:0,l=this.offsetHeight-this.clientHeight+t+r+a;this.offsetHeight!==l&&(this.style.height=l+"px")}}get shouldForceInputOnEnter(){return!1}getFieldElement(){return this.querySelector("textarea")}getButtonsArea(){return this.querySelector(".dxbl-memo-edit-buttons-area")}};hE=C([on("dxbl-memo-editor")],hE);customElements.define("dxbl-date-time-edit",class extends SB{createKeyboardStrategy(){return new yB(this)}});class uE extends Mi{constructor(e,t){super(e.getKeyboardNavigator(),t),this.component=e}getTable(){return this.component.getTable()}getList(){return this.component.getList()}getSearchBox(){return this.component.getSearchBox()}getListSelectAll(){return this.component.getListSelectAll()}getScrollViewer(){return this.component.getScrollViewer()}getScrollViewerContent(){return this.component.getScrollViewerContent()}getColumnInfoByCell(e){return this.component.getColumnInfoByCell(e)}get isFocusedRowEnabled(){return this.component.enableFocusedRow}get isMultipleSelectionEnabled(){return this.component.enableMultipleSelection}get isShowCheckboxesEnabled(){return this.component.isShowCheckboxesEnabled}canSwitchToNestedContentMode(){return!0}handleTabKeyDown(e,t=!1){if(!t&&e.altKey)return!1;if(e.shiftKey){if(this.firstItemSelected)return!1;this.moveToPrevItem()}else{if(this.lastItemSelected)return!1;this.moveToNextItem()}return!0}}class pE extends uE{constructor(e,t,i){super(t,i),this.lockScroll=0}isImmediatelyClickEnabled(){return!1}get preventScrollOnFocus(){return this.lockScroll>0}getVisibleIndex(){return Te.getAttributeIntValue(this.targetElement,VB.VisibleIndexAttributeName,-1)}leave(){fi.removeTabIndex(this.selectedItemElement)}lockScrollOnFocus(){this.lockScroll++}unlockScrollOnFocus(){this.lockScroll--}getShortcutContext(){return{ElementType:this.getElementType(),VisibleIndex:this.getVisibleIndex()}}}class mE extends pE{handleKeyDown(e){return this.nestedContentSelected||Be.KeyUtils.getEventKeyCode(e)!==Be.KeyCode.Space?super.handleKeyDown(e):(this.performShortcutEvent(e),!0)}}class gE extends uE{constructor(e,t){super(e,t),this.savedVisibleIndex=-1,this.selectedVisibleIndex=-1,this.firstVisibleIndex=-1,this.lastVisibleIndex=-1,this.firstAvailableVisibleIndex=0,this.lastAvailableVisibleIndex=-1,this.requestRestoreSelectedElementIndex=-1,this.boundOnVisibleElementChangedHandler=this.onMakeRowVisible.bind(this),this._rows=[],this.addEventSubscriptions()}get enableVirtualRenderMode(){return this.component.enableVirtualRenderMode}get isFirstItemSelected(){return this.selectedVisibleIndex<=this.firstAvailableVisibleIndex}get isLastItemSelected(){return this.selectedVisibleIndex>=this.lastAvailableVisibleIndex}get totalItemCount(){const e=this.component.virtualItemCount;return e>=0?e:this._rows.length}get preventScrollOnFocus(){return this.enableVirtualRenderMode}updateSelectedItemByChildElement(e,t=null){const i=this.findItemElementIndexByChild(e);if(i<0)return;const n=t instanceof MouseEvent;if(n&&(this.selectedVisibleIndex=ZB.getElementVisibleIndex(this.items[i])),this.enableVirtualRenderMode)return!n&&i!==this.selectedItemIndex&&this.isElementInsideViewport(this.selectedVisibleIndex)&&(this.requestRestoreSelectedElementIndex=this.selectedVisibleIndex),void this.updateSelectedItemByIndex(i);super.updateSelectedItemByChildElement(e,t)}initialize(){super.initialize(),this._rows=this.queryRows(),this.resetState(),this.updateBoundaries(),this.updateViewportBoundaries()}activate(){if(this.enableVirtualRenderMode)if(this.requestRestoreSelectedElementIndex>-1)this.notifyMakeElementVisible(this.requestRestoreSelectedElementIndex,null),this.requestRestoreSelectedElementIndex=-1;else if(this.selectedVisibleIndex>-1)if(this.isElementInsideViewport(this.selectedVisibleIndex)){const e=ZB.findItemIndex(this.selectedVisibleIndex,this.items);e>-1&&this.selectViewportItem(e)}else Ii(this.component);else this.selectViewportItem(this.selectedItemIndex);else super.activate()}onDispose(){this._rows=[],this.resetState(),this.removeEventSubscriptions(),super.onDispose()}getSelectedItemStrategy(){return super.getSelectedItemStrategy()}selectItem(e){const t=this.getSelectedItemStrategy(),i=this.getStrategy(e),n=i.getVisibleIndex();this.selectedVisibleIndex=n,this.savedVisibleIndex=n,Si(this.component),super.selectItem(e),t&&t!==i&&t.leave()}handleKeyDown(e){switch(Be.KeyUtils.getEventKeyCode(e)){case Be.KeyCode.Up:return!(e.altKey||e.metaKey)&&this.handleArrowUpKeyDown();case Be.KeyCode.Down:return this.handleArrowDownKeyDown();case Be.KeyCode.PageDown:return this.handlePageDown();case Be.KeyCode.PageUp:return this.handlePageUp();case Be.KeyCode.Home:return this.handleHomeKeyDown(e)||this.performShortcutEvent(e),!0;case Be.KeyCode.End:return this.handleEndKeyDown(e)||this.performShortcutEvent(e),!0;case Be.KeyCode.Space:return this.performShortcutEvent(e),!0}return!1}handleKeyUp(e){switch(Be.KeyUtils.getEventKeyCode(e)){case Be.KeyCode.Down:case Be.KeyCode.Up:case Be.KeyCode.PageUp:case Be.KeyCode.PageDown:case Be.KeyCode.Home:case Be.KeyCode.End:this.notifyFocusedRowChanged()}return!1}moveToPrevItem(){super.moveToPrevItem(),this.scrollToElement(null,Qe.None)}moveToNextItem(){super.moveToNextItem(),this.scrollToElement(null,Qe.None)}selectViewportItem(e){const t=this.getStrategy(e);t.lockScrollOnFocus(),this.selectItem(e),t.unlockScrollOnFocus()}moveToPrevVirtualItem(){let e=this.selectedVisibleIndex-1;0===e&&0===this.selectedItemIndex||(this.isElementInsideViewport(e)&&ZB.isGroupRow(this,e)&&e--,this.isElementInsideViewport(e)&&this.selectedItemIndex>0?(this.selectViewportItem(this.selectedItemIndex-1),this.scrollToElement(null,Qe.None)):this.notifyMakeElementVisible(e,Pe.Top))}moveToNextVirtualItem(){let e=this.selectedVisibleIndex+1;this.isElementInsideViewport(e)&&ZB.isGroupRow(this,e)&&e++,this.isElementInsideViewport(e)&&this.selectedItemIndex<this.totalItemCount-1?(this.selectViewportItem(this.selectedItemIndex+1),this.scrollToElement(null,Qe.None)):this.notifyMakeElementVisible(e,Pe.Bottom)}handleArrowUpKeyDown(){return this.isFirstItemSelected||(this.enableVirtualRenderMode?this.moveToPrevVirtualItem():this.moveToPrevItem()),!0}handleArrowDownKeyDown(){return this.isLastItemSelected||(this.enableVirtualRenderMode?this.moveToNextVirtualItem():this.moveToNextItem()),!0}handleHomeKeyDown(e){return!!this.isFirstItemSelected||(this.savedVisibleIndex=-1,this.enableVirtualRenderMode?this.moveToFirstVirtualItem():this.moveToFirstItem(),!(e.ctrlKey&&e.shiftKey))}moveToFirstItem(){if(this.getScrollViewer()){const e=ZB.isGroupRow(this,0);this.selectItem(0);const t=e?ZB.getRow(this,0):this.selectedItemElement;this.scrollToElement(Pe.Top,Qe.None,t)}}moveToFirstVirtualItem(){this.isElementInsideViewport(0)&&this.selectedItemIndex>0?(this.selectViewportItem(0),this.scrollToElement(Pe.Top,Qe.None)):this.notifyMakeElementVisible(0,Pe.Top)}handleEndKeyDown(e){return!!this.isLastItemSelected||(this.savedVisibleIndex=-1,this.enableVirtualRenderMode?this.moveToLastVirtualItem():this.moveToLastItem(),!(e.ctrlKey&&e.shiftKey))}moveToLastItem(){this.component.getScrollViewer()&&(this.selectItem(this.itemCount-1),this.scrollToElement(Pe.Bottom,Qe.None))}moveToLastVirtualItem(){const e=this.totalItemCount-1;this.isElementInsideViewport(e)&&this.selectedItemIndex<this.itemCount-1?(this.selectViewportItem(this.itemCount-1),this.scrollToElement(Pe.Bottom,Qe.None)):this.notifyMakeElementVisible(e,Pe.Bottom)}handlePageUp(){return this.isFirstItemSelected||(this.savedVisibleIndex=-1,this.enableVirtualRenderMode?this.moveToPrevVirtualPageItem():this.moveToPrevPageItem()),!0}moveToPrevPageItem(){const e=this.component.getScrollViewer();if(e){const t=ZB.calculateBoundaryItemVisibleIndex(this,e,!1),i=t<0?0:t,n=ZB.isGroupRow(this,i),s=ZB.findItemIndex(n?i+1:i,this.items);this.selectItem(s);const r=n?ZB.getRow(this,i):this.selectedItemElement;this.scrollToElement(Pe.Top,Qe.None,r)}}moveToPrevVirtualPageItem(){const e=this.component.getScrollViewer();if(e){const t=ZB.calculateBoundaryItemVisibleIndex(this,e,!1);if(this.isElementInsideViewport(t)){const e=ZB.isGroupRow(this,t),i=ZB.findItemIndex(e?t+1:t,this.items);this.selectViewportItem(i);const n=e?ZB.getRow(this,t):this.selectedItemElement;this.scrollToElement(Pe.Top,Qe.None,n)}else this.notifyMakeElementVisible(t,Pe.Top)}}handlePageDown(){return this.isLastItemSelected||(this.savedVisibleIndex=-1,this.enableVirtualRenderMode?this.moveToNextVirtualPageItem():this.moveToNextPageItem()),!0}moveToNextPageItem(){const e=this.lastAvailableVisibleIndex,t=this.component.getScrollViewer();if(t){const i=ZB.calculateBoundaryItemVisibleIndex(this,t,!0),n=i>e?e:i,s=ZB.isGroupRow(this,n),r=ZB.findItemIndex(s?n-1:n,this.items);this.selectItem(r);const o=s?ZB.getRow(this,n):this.selectedItemElement;this.scrollToElement(Pe.Bottom,Qe.None,o)}}moveToNextVirtualPageItem(){const e=this.component.getScrollViewer();if(e){const t=ZB.calculateBoundaryItemVisibleIndex(this,e,!0);if(this.isElementInsideViewport(t)){const e=ZB.isGroupRow(this,t),i=ZB.findItemIndex(e?t-1:t,this.items);this.selectViewportItem(i);const n=e?ZB.getRow(this,t):this.selectedItemElement;this.scrollToElement(Pe.Bottom,Qe.None,n)}else this.notifyMakeElementVisible(t,Pe.Bottom)}}onMakeRowVisible(e){if(e.detail.isFocusRequired){const t=ZB.getElementVisibleIndex(e.detail.element),i=ZB.isGroupRow(this,t),n=ZB.findItemIndex(i?t+1:t,this.items);this.selectItem(n)}}addEventSubscriptions(){const e=this.getScrollViewer();e&&e.addEventListener(Oe.eventName,this.boundOnVisibleElementChangedHandler)}removeEventSubscriptions(){const e=this.getScrollViewer();e&&e.removeEventListener(Oe.eventName,this.boundOnVisibleElementChangedHandler)}getStrategy(e){return this.getItemStrategy(e)}notifyFocusedRowChanged(){this.isFocusedRowEnabled&&this.savedVisibleIndex>-1&&(this.component.notifyFocusedRowChanged(this.savedVisibleIndex),this.savedVisibleIndex=-1)}scrollToElement(e,t,i=this.selectedItemElement){const n=this.getScrollViewer();n&&i&&_e.scrollToElementRelyOnStickyDescendants(i,e,t,n)}notifyMakeElementVisible(e,t=null){e<0||this.component.notifyMakeElementVisible(e,ZB.getVerticalEdge(t))}updateBoundaries(){this.firstAvailableVisibleIndex=0,this.lastAvailableVisibleIndex=this.totalItemCount-1}updateViewportBoundaries(){if(0===this._rows.length)return;this.firstVisibleIndex=ZB.getElementVisibleIndex(this._rows[0]);this.lastVisibleIndex=ZB.getElementVisibleIndex(this._rows[this._rows.length-1])}queryRows(){return Array.from(this.targetElement.querySelectorAll(zB.VisibleItemSelector))}isElementInsideViewport(e){return e>=this.firstVisibleIndex&&e<=this.lastVisibleIndex}resetState(){this.firstAvailableVisibleIndex=-1,this.lastAvailableVisibleIndex=-1,this.firstVisibleIndex=-1,this.lastVisibleIndex=-1}getLastAvailableVisibleIndex(){return this.lastAvailableVisibleIndex}getSelectedVisibleIndex(){return this.selectedVisibleIndex}getItemsContainer(){return this.targetElement}getRows(){return this._rows}}var CE,fE;!function(e){e[e.Undefined=0]="Undefined",e[e.HeaderRow=1]="HeaderRow",e[e.DataRow=2]="DataRow",e[e.ListItem=3]="ListItem",e[e.EmptyData=4]="EmptyData",e[e.EmptyItem=5]="EmptyItem"}(CE||(CE={})),function(e){e[e.None=0]="None",e[e.Table=1]="Table",e[e.List=2]="List",e[e.SearchBox=3]="SearchBox",e[e.ListSelectAll=4]="ListSelectAll"}(fE||(fE={}));class vE{static getElementType(e){return e.matches(zB.HeaderRowSelector)?CE.HeaderRow:e.matches(zB.TableVisibleRowGeneralSelector)?CE.DataRow:e.matches(zB.EmptyDataItemSelector)?CE.EmptyData:e.matches(zB.ListVisibleItemGeneralSelector)?CE.ListItem:e.matches(zB.EmptyListItemSelector)?CE.EmptyItem:CE.Undefined}static getNavigationAreaType(e){return e.matches(zB.TableSelector)?fE.Table:e.matches(zB.ListSelector)?fE.List:e.matches(zB.SearchBoxSelector)?fE.SearchBox:e.matches(zB.ListSelectAllContainerSelector)?fE.ListSelectAll:fE.None}static isSelectionCell(e){var t;return null!==(t=null==e?void 0:e.matches(`.${_B.TableSelectionCellClassName}`))&&void 0!==t&&t}static isItemDisplayTemplateContainer(e){var t;return null!==(t=null==e?void 0:e.matches(`.${_B.ItemDisplayTemplateContainer}`))&&void 0!==t&&t}}class bE extends uE{constructor(e,t){super(e,t)}queryItems(){return this.queryItemsBySelector(zB.TablePartsSelector)}createItemStrategy(e){return e.matches("thead")?new wE(this.component,e):e.matches("tbody")?new yE(this,this.component,e):null}handleKeyDown(e){return Be.KeyUtils.getEventKeyCode(e)===Be.KeyCode.Tab&&this.handleTabKeyDown(e)}getShortcutContext(){return{AreaType:fE.Table}}}class wE extends uE{constructor(e,t){super(e,t)}queryItems(){return this.queryItemsBySelector(zB.HeaderRowSelector)}createItemStrategy(e){if(vE.getElementType(e)===CE.HeaderRow)return new BE(this.component,e);throw new Error("Not implemented")}}class yE extends gE{constructor(e,t,i){super(t,i)}createItemStrategy(e){return e.matches(zB.TableVisibleRowGeneralSelector)?new EE(this,this.component,e):e.matches(zB.EmptyDataItemSelector)?new IE(this,this.component,e):null}queryItems(){return this.queryItemsBySelector(zB.TableDataRowSelector)}}class BE extends uE{constructor(e,t){super(e,t)}handleKeyDown(e){switch(Be.KeyUtils.getEventKeyCode(e)){case Be.KeyCode.Space:return this.handleSpace(e);case Be.KeyCode.Enter:case Be.KeyCode.Down:case Be.KeyCode.Up:case Be.KeyCode.PageDown:case Be.KeyCode.PageUp:case Be.KeyCode.Home:case Be.KeyCode.End:return!0}return super.handleKeyDown(e)}handleSpace(e){return this.performShortcutEvent(e),!0}getShortcutContext(){return{ElementType:CE.HeaderRow}}}class EE extends mE{getElementType(){return CE.DataRow}handleKeyDown(e){if(!this.nestedContentSelected&&Be.KeyUtils.getEventKeyCode(e)===Be.KeyCode.Enter){const e=this.findFocusableElements().length;if(this.isShowCheckboxesEnabled&&1===e||0===e)return!0}return super.handleKeyDown(e)}}class IE extends pE{constructor(e,t,i){super(e,t,i)}getElementType(){return CE.EmptyData}}class SE extends gE{constructor(e,t){super(e,t)}getShortcutContext(){return{AreaType:fE.List}}queryItems(){return this.queryItemsBySelector(zB.ItemSelector)}createItemStrategy(e){return e.matches(zB.ListVisibleItemGeneralSelector)?new xE(this,this.component,e):e.matches(zB.EmptyDataItemSelector)?new DE(this,this.component,e):null}}class xE extends mE{getElementType(){return CE.ListItem}hasItemDisplayTemplate(){return!!this.targetElement.querySelector(zB.ItemDisplayTemplateSelector)}handleKeyDown(e){if(!this.nestedContentSelected){const t=this.findFocusableElements().length;if(Be.KeyUtils.getEventKeyCode(e)===Be.KeyCode.Enter&&(!this.hasItemDisplayTemplate()||0===t||1===t&&this.isShowCheckboxesEnabled))return!0}return super.handleKeyDown(e)}}class DE extends pE{constructor(e,t,i){super(e,t,i)}getElementType(){return CE.EmptyData}}class FE extends uE{constructor(e,t){super(e,t)}}class TE extends uE{constructor(e,t){super(e,t)}handleKeyDown(e){switch(Be.KeyUtils.getEventKeyCode(e)){case Be.KeyCode.Space:return this.performShortcutEvent(e),!0;case Be.KeyCode.Enter:case Be.KeyCode.Down:case Be.KeyCode.Up:case Be.KeyCode.PageDown:case Be.KeyCode.PageUp:case Be.KeyCode.Home:case Be.KeyCode.End:return!0}return super.handleKeyDown(e)}getShortcutContext(){return{AreaType:fE.ListSelectAll}}}class HE extends uE{constructor(e){super(e,e)}getShortcutContext(){return{IsMacOSPlatform:this.isMacOSPlatform}}queryItems(){return new Array(this.getSearchBox(),this.getListSelectAll(),this.getList(),this.getTable())}createItemStrategy(e){switch(vE.getNavigationAreaType(e)){case fE.SearchBox:return new FE(this.component,e);case fE.ListSelectAll:return new TE(this.component,e);case fE.Table:return new bE(this.component,e);case fE.List:return new SE(this.component,e)}return null}moveToPrevItem(){this.selectedItemIndex>0?super.moveToPrevItem():this.leaveBackward()}moveToNextItem(){this.selectedItemIndex<this.itemCount-1?super.moveToNextItem():this.leaveForward()}handleKeyDown(e){return Be.KeyUtils.getEventKeyCode(e)===Be.KeyCode.Tab&&this.handleTabKeyDown(e)}handleTabKeyDown(e){return super.handleTabKeyDown(e,e.altKey)||(e.shiftKey?this.leaveBackward():this.leaveForward()),!0}}class UE{constructor(e){this._uID=e}get uID(){return this._uID}}var PE;!function(e){e[e.Item=0]="Item",e[e.Component=1]="Component"}(PE||(PE={}));class QE extends jA{constructor(e){super(),this.listBox=e}getKey(){return this.listBox.uId}getItemDropArea(){return this.listBox.getList()}getDropMode(){return this.listBox.getDropMode()}activateDropTarget(e){var t;super.activateDropTarget(e),null===(t=this.listBox.getScrollViewer())||void 0===t||t.startAutoScrolling(Re.Vertical)}deactivateDropTarget(){var e;super.deactivateDropTarget(),null===(e=this.listBox.getScrollViewer())||void 0===e||e.stopAutoScrolling()}getDraggableElement(e){return this.listBox.getItemDragHint()}getItemVisibleIndex(e){return this.listBox.getItemVisibleIndex(e)}getDropRestrictions(){return this.listBox.getDropRestrictions()}start(e,t){this.isItemDraggingAllowed(e)&&super.start(e,t)}stop(){super.stop(),document.body.classList.remove(_B.MoveCursorCssClassName,_B.NotAllowedCursorCssClassName)}findItemElementUpToParent(e,t){return Nt(e,null,(e=>e.matches(zB.ListItems)&&e.closest(zB.ListSelector)===t))}getDroppableTargets(){const{restrictions:e}=this.draggableRowItemContext||{};return e?e.allowedComponents.map((e=>QA.find(e))):[]}getDropTargetIndicator(){return this.listBox.getDropTargetIndicator()}static isEmptyItem(e){const t=vE.getElementType(e);return t===CE.EmptyData||t===CE.EmptyItem}getDropPosition(){if(!this.draggableRowItemContext)return HA.Append;const{currentCursorPosition:e,mouseOverElementRect:t,mouseOverElement:i,target:n}=this.draggableRowItemContext;return n.getDropMode()===PE.Component?HA.Append:i&&t?QE.isEmptyItem(i)?HA.Append:this.isRestrictedTopArea()?HA.Before:this.isRestrictedBottomArea()?HA.After:PA.getDropPositionByCursor(e.y,t):HA.Inside}isItemDropPossible(e){return!(!this.draggableRowItemContext||e===this.draggableRowItemContext.srcElement)&&(this.isWithinDragging()?this.isReorderPossible(e):this.isDropAllowed())}isReorderPossible(e){const t=vE.getElementType(e);if(!this.draggableRowItemContext)return!1;const{target:i}=this.draggableRowItemContext;if(i.getDropMode()===PE.Component)return!1;if(t===CE.EmptyItem)return!0;if(t!==CE.ListItem)return!1;const n=this.getItemDropArea();if(!n||e.closest(n.tagName)!==n)return!1;const s=this.getItemVisibleIndex(e);return!this.isWithinDeniedRange(s)}refreshUICore(){if(super.refreshUICore(),!this.draggableRowItemContext)return;const e=this.isDropAllowed();document.body.classList.toggle(_B.MoveCursorCssClassName,e),document.body.classList.toggle(_B.NotAllowedCursorCssClassName,!e)}isDropAllowed(){const e=this.listBox.getDragMediator();return!e||!this.draggableRowItemContext||e.isDropAllowed(this.draggableRowItemContext.srcElement,this.draggableRowItemContext.mouseOverElement)}isItemDraggingAllowed(e){const t=vE.getElementType(e);return t===CE.DataRow||t===CE.ListItem}}function NE(e){return{fromAttribute:t=>e[t],toAttribute:t=>e[t]}}const RE=-1;let LE=class extends Es{constructor(){super(),this._focusedRowIndex=RE,this._columnsInfo=[],this.boundOnScrollViewerUpdateHandler=this.onScrollViewerUpdate.bind(this),this.boundOnMouseDownHandler=this.onMouseDown.bind(this),this.boundOnDragStartHandler=this.onDragStart.bind(this),this.boundOnDragStopHandler=this.onDragStop.bind(this),this.boundOnDragCancelHandler=this.onDragCancel.bind(this),this._handlePointerEventsMode=r.None,this.allowDragItems=!1,this.dropMode=PE.Item,this._pointerEventsHelper=new q(this),this.resizeObserver=new ResizeObserver(this.onSizeChanged.bind(this)),this.itemDraggingHelper=new QE(this)}connectedCallback(){super.connectedCallback(),this._pointerEventsHelper.initialize(),this.addEventSubscriptions(),this.resizeObserver.observe(this)}disconnectedCallback(){delete this.keyboardNavigator,this._pointerEventsHelper.dispose(),this.removeEventSubscriptions(),this.resizeObserver.disconnect(),super.disconnectedCallback()}contentChanged(){super.contentChanged(),this.initializeKeyboardNavigator()}getScrollViewer(){return this.querySelector(`.${xe.ClassName}`)}getScrollViewerContent(){return this.querySelector(`.${xe.ContentContainerClassName}`)}getTable(){return this.querySelector(zB.TableSelector)}getList(){return this.querySelector(zB.ListSelector)}getSearchBox(){return this.querySelector(zB.SearchBoxSelector)}getListSelectAll(){return this.querySelector(zB.ListSelectAllContainerSelector)}getItemDragHint(){var e,t;const i=this.querySelector(`.${_B.ItemDraggingHintPortal}`);return null!==(t=null===(e=null==i?void 0:i.portable)||void 0===e?void 0:e.find((e=>{var t;return null===(t=e.matches)||void 0===t?void 0:t.call(e,zB.ItemDragHintSelector)})))&&void 0!==t?t:null}getKeyboardNavigator(){return this.keyboardNavigator}getDropTargetIndicator(){return this.querySelector(zB.DropTargetIndicatorSelector)}getDropRestrictions(){return this.querySelector(be)}getDragMediator(){const e=this.dataset.dragMediatorSelector;return void 0===e||0===e.length?null:this.querySelector(e)}getDropMode(){return this.dropMode}notifyFocusedRowChanged(e){e!==this.focusedRowIndex&&this.enableFocusedRow&&(this.focusedRowIndex=e,this.dispatchEvent(new WB(e)))}notifyMakeElementVisible(e,t){e<0||this.dispatchEvent(new GB(e,t))}notifyColumnsChanged(e){this._columnsInfo=e}getColumnInfoByCell(e){if(e instanceof HTMLElement){const t=this.getElementIndex(e);if(t>=0&&t<this._columnsInfo.length)return this._columnsInfo[t]}return null}getItemVisibleIndex(e){if(e){const t=e.getAttribute(VB.VisibleIndexAttributeName);return t?parseInt(t):RE}return RE}get isTableRender(){return!!this.getTable()}get focusedRowIndex(){return this._focusedRowIndex}set focusedRowIndex(e){this._focusedRowIndex=e}get enableFocusedRow(){return!1}get enableMultipleSelection(){return this.classList.contains(_B.MultiSelectClassName)}get enableVirtualRenderMode(){const e=this.getScrollViewer();return null!==e&&e instanceof sn}get isShowCheckboxesEnabled(){return this.classList.contains(_B.CheckedClassName)}get virtualItemCount(){const e=this.getScrollViewer();return e&&e instanceof sn?e.totalItemCount:RE}get uId(){return this.getAttribute(VB.ComponentIdAttributeName)}initializeKeyboardNavigator(){this.keyboardNavigator=this.querySelector(zB.KeyboardNavigatorSelector),this.keyboardNavigator&&!this.keyboardNavigator.initialized&&this.keyboardNavigator.initialize(this,new HE(this))}addEventSubscriptions(){this.addEventListener(a.eventName,this.boundOnDragStartHandler),this.addEventListener(l.eventName,this.boundOnDragStopHandler),this.addEventListener(A.eventName,this.boundOnDragCancelHandler),this.addEventListener(Ke.eventName,this.boundOnScrollViewerUpdateHandler),h.Browser.Firefox&&this.isTableRender&&this.addEventListener("mousedown",this.boundOnMouseDownHandler)}removeEventSubscriptions(){this.removeEventListener(a.eventName,this.boundOnDragStartHandler),this.removeEventListener(l.eventName,this.boundOnDragStopHandler),this.removeEventListener(A.eventName,this.boundOnDragCancelHandler),this.removeEventListener(Ke.eventName,this.boundOnScrollViewerUpdateHandler),h.Browser.Firefox&&this.isTableRender&&this.removeEventListener("mousedown",this.boundOnMouseDownHandler)}onScrollViewerUpdate(e){var t;const i=this.getScrollViewerContent(),n=null!==(t=this.getTable())&&void 0!==t?t:this.getList();i&&n&&(n.offsetHeight<i.clientHeight?T.DomUtils.addClassName(n,_B.ContainerNoScrollClassName):n.offsetHeight>i.clientHeight&&T.DomUtils.removeClassName(n,_B.ContainerNoScrollClassName)),e.stopPropagation()}onSizeChanged(e){const t=this.getScrollViewer();t&&t.refreshUI&&t.refreshUI()}onMouseDown(e){e.ctrlKey&&e.preventDefault()}getListItemElement(e){return di(e,zB.ItemGeneralSelector)}onDragStart(e){const t=e.detail.source,i=this.getListItemElement(t.target);i&&this.itemDraggingHelper.start(i,t),e.stopPropagation()}onDragStop(e){if(this.itemDraggingHelper.isStarted()){const e=this.itemDraggingHelper.createItemDraggedHandlerArgs();this.itemDraggingHelper.stop(),this.notifyItemDropped(e)}e.stopPropagation()}onDragCancel(e){this.itemDraggingHelper.isStarted()&&this.itemDraggingHelper.stop(),e.stopPropagation()}notifyItemDropped(e){e&&this.dispatchEvent(new YB(e))}getElementIndex(e){if(!e)return RE;if(e instanceof HTMLTableCellElement)return e.cellIndex;if(e&&e.parentElement)for(let t=0;t<e.parentElement.children.length;t++)if(e.parentElement.children[t]===e)return t;return RE}updateHandlePointerEventsMode(){this._handlePointerEventsMode|=r.None,this.allowDragItems&&(this._handlePointerEventsMode|=r.Dragging)}onAllowDragItemsStateChanged(){this.itemDraggingHelper.initItemDropTarget(this.allowDragItems),this.updateHandlePointerEventsMode()}updated(e){super.updated(e),e.has("allowDragItems")&&this.onAllowDragItemsStateChanged()}get handlePointerEventsMode(){return this._handlePointerEventsMode}get handlePointerEventsTarget(){return this}get hoverTitleElementsSelector(){return null}get bypassNonInlineHoverTitleElementChildSelector(){return null}shouldProcessPointerEvent(e){return!0}handlePointerEventsDelay(e){return s.Default}};var ME,kE,KE;C([An({attribute:VB.AllowDragItemsAttributeName,type:Boolean})],LE.prototype,"allowDragItems",void 0),C([An({attribute:VB.DropMode,type:PE,converter:NE(PE)})],LE.prototype,"dropMode",void 0),LE=C([on(al)],LE),customElements.define("dxbl-list-box-columns-info",class extends de{get data(){return this.getAttribute("data")}get componentClassName(){return this.getAttribute("component-class-name")}get columns(){return null!==this.data?this.parseColumns(this.data):[]}constructor(){super()}connectedCallback(){var e;super.connectedCallback(),this.component=this.closest(`.${this.componentClassName}`),null===(e=this.component)||void 0===e||e.notifyColumnsChanged(this.columns)}parseColumns(e){const t=JSON.parse(e),i=[];for(let e=0;e<t.length;e++){const n=new UE(t[e].UID);i.push(n)}return i}static get observedAttributes(){return["data"]}attributeChangedCallback(e,t,i){var n;if("data"===e)null===(n=this.component)||void 0===n||n.notifyColumnsChanged(this.parseColumns(i))}});class OE{}ME=OE,OE.TagClass=he.Prefix+"-tag",OE.TagTemplateClass=ME.TagClass+"-tmpl",OE.TagCloseButtonClass=ME.TagClass+"-btn-close";customElements.define("dxbl-tag-box",class extends oE{constructor(){super()}connectedCallback(){super.connectedCallback()}isFocusableElementInMainElementTemplate(e){return!(!di(e,`.${OE.TagTemplateClass}`)||!Ti(e))||super.isFocusableElementInMainElementTemplate(e)}disconnectedCallback(){super.disconnectedCallback()}get isSearchActive(){return this.searchMode!==rE.None}processPointerDown(e){var t;const i=H.containsInComposedPath(e,this.isTagCloseButtonElement),n=H.containsInComposedPath(e,El.isClearButtonElement),s=H.containsInComposedPath(e,El.isEditorButtonElement),r=e.target===this.fieldElement,o=!i&&!this.isFocusableElementInMainElementTemplate(e.target);return(r||o)&&this.toggleDropDownVisibility(),Ii(this),s&&this.focused&&this.raiseFieldChange(),(n||s||i)&&e.preventDefault(),this.focused||!s||this.useAdaptiveLayout||null===(t=this.editBoxElement)||void 0===t||t.focus(),!0}applyTextPropertyCore(){super.applyTextPropertyCore(),this.fieldElementValue&&(this.selectAll(),this.raiseFieldText()),this.setInputSizeAttribute()}onFieldReady(e,t){super.onFieldReady(e,t),t&&this.setInputSizeAttribute()}updatePlaceholder(){super.updatePlaceholder(),this.setInputSizeAttribute()}onTextInput(e){super.onTextInput(e),this.setInputSizeAttribute()}tryProcessKeyDown(e){return!!super.tryProcessKeyDown(e)||Be.KeyUtils.getEventKeyCode(e)===Be.KeyCode.Backspace&&(!this.fieldElementValue&&(this.processKeyDownEvent(e),!0))}setInputSizeAttribute(){this.inputElement&&this.inputElement.setAttribute("size",this.getInputSize().toString())}getInputSize(){return this.fieldElementValue?this.fieldElementValue.length:this.placeholder?this.placeholder.length:1}isTagTemplateElement(e){var t;return!!e&&(null===(t=e.classList)||void 0===t?void 0:t.contains(OE.TagTemplateClass))}isTagCloseButtonElement(e){var t;return!!e&&(null===(t=e.classList)||void 0===t?void 0:t.contains(OE.TagCloseButtonClass))}});class _E extends CustomEvent{constructor(e,t){super(_E.eventName,{detail:new VE(e,t),bubbles:!0,composed:!0,cancelable:!0})}}_E.eventName=el+".incrementValue";class VE{constructor(e,t){this.Increment=e,this.PreviousValue=t}}gt.register(_E.eventName,(e=>e.detail)),function(e){e.allowMouseWheel="allow-mouse-wheel",e.needExponentialView="need-exponential-view",e.decimalSeparator="decimal-separator"}(KE||(KE={}));const zE=e=>e;class WE{}kE=WE,WE.Prefix=he.Prefix+"-spin",WE.BtnsContainer=kE.Prefix+"-btns",WE.IncBtn=kE.Prefix+"-btn-inc",WE.DecBtn=kE.Prefix+"-btn-dec";class $E extends Wl{constructor(){super(...arguments),this.regex=/^-?(\d)*$/,this.pointerDownTimer={id:-1,button:null},this.buttonObserver=new MutationObserver(this.buttonRemovedHandler.bind(this)),this.boundButtonOnPointerUpHandler=this.onButtonPointerUp.bind(this),this.allowMouseWheel=!1,this.needExponentialView=!1}get pointerDownTimerId(){return this.pointerDownTimer.id}get shouldProcessWheel(){return this.allowMouseWheel}disconnectedCallback(){this.buttonObserver.disconnect(),this.stopPointerLongTap(),super.disconnectedCallback()}connectedOrContentChanged(){super.connectedOrContentChanged(),this.buttonObserver.observe(this,{childList:!0})}onTextInput(e){if(this.isMaskDefined||!this.inputElement||!H.containsInComposedPath(e,(e=>e===this.inputElement)))return;let t=this.fieldElementValue.trim();if(this.decimalSeparator){t=t.replace(/[.,]/g,this.decimalSeparator);const e=t.split(this.decimalSeparator);t=e.length>1?e[0]+this.decimalSeparator+e.slice(1).join(""):e[0]}this.regex.test(t)||(t=t.replace(this.decimalSeparator?new RegExp(`[^0-9${this.decimalSeparator}]`):/[^0-9]/g,"")),t!==this.fieldElementValue&&(this.fieldElementValue=t),super.onTextInput(e)}processKeyDown(e){const t=this.getFieldElement();return!!H.containsInComposedPath(e,(e=>e===t))&&(this.isNavigationKey(e)?(H.markHandled(e),this.incrementValue(e.keyCode===Be.KeyCode.Up),!0):!!super.processKeyDown(e))}processWheel(e){this.incrementValue(e.deltaY<0)}processPointerDown(e){const t=this.getButton(e);if(t&&this.inputElement){e.preventDefault(),this.useAdaptiveLayout||T.DomUtils.setFocus(this.inputElement);const i=T.DomUtils.hasClassName(t,WE.IncBtn);this.incrementValue(i),this.pointerDownTimer={id:window.setTimeout(this.startPointerLongTap.bind(this),1e3,i),button:t},t.addEventListener("pointerup",this.boundButtonOnPointerUpHandler),t.addEventListener("pointerout",this.boundButtonOnPointerUpHandler)}return super.processPointerDown(e)}getButton(e){const t=e.composedPath();for(const e in t){const i=t[e];if(i&&this.hasSpinBtnClass(i))return i}return null}hasSpinBtnClass(e){return T.DomUtils.hasClassName(e,WE.IncBtn)||T.DomUtils.hasClassName(e,WE.DecBtn)}startPointerLongTap(e,t){this.pointerDownTimer={id:window.setInterval(this.incrementValue.bind(this),50,e),button:t}}stopPointerLongTap(){-1!==this.pointerDownTimer.id&&(clearTimeout(this.pointerDownTimer.id),this.pointerDownTimer={id:-1,button:null},this.bindValueMode===wl.OnDelayedInput?this.applyDefferedValue():this.raiseApplyValue())}onButtonPointerUp(e){let t=e.target;this.hasSpinBtnClass(t)||(t=T.DomUtils.getParentByTagName(t,"button")),this.stopPointerLongTap(),t.removeEventListener("pointerup",this.boundButtonOnPointerUpHandler),t.removeEventListener("pointerout",this.boundButtonOnPointerUpHandler)}buttonRemovedHandler(e,t){if(-1===this.pointerDownTimer.id)return;const i=e.some((e=>Array.from(e.removedNodes).some((e=>{var t,i;return T.DomUtils.isElementNode(e)&&e.classList.contains(WE.BtnsContainer)&&((null===(t=this.pointerDownTimer.button)||void 0===t?void 0:t.isEqualNode(T.DomUtils.getChildNodesByClassName(e,WE.IncBtn)[0]))||(null===(i=this.pointerDownTimer.button)||void 0===i?void 0:i.isEqualNode(T.DomUtils.getChildNodesByClassName(e,WE.DecBtn)[0])))}))));i&&this.stopPointerLongTap()}incrementValue(e){this.dispatchEvent(new _E(e,this.fieldElementValue))}isNavigationKey(e){return e.keyCode===Be.KeyCode.Up||e.keyCode===Be.KeyCode.Down}updated(e){super.updated(e),(e.has(zE("decimalSeparator"))||e.has(zE("needExponentialView")))&&this.applyRegex()}applyRegex(){this.decimalSeparator&&(this.regex=this.needExponentialView?/^-?(\d+|[,.]\d+|\d+[,.]\d+|\d+[,.]|[,.])?([eE]?[+-]?(\d)*)?$/:/^-?(\d+|[,.]\d+|\d+[,.]\d+|\d+[,.]|[,.])?$/)}shouldProcessKeyUp(e){switch(e.key){case"ArrowUp":case"ArrowDown":return this.isMaskDefined||this.bindValueMode===wl.OnDelayedInput}return super.shouldProcessKeyUp(e)}}var GE,qE,YE,XE,JE;C([An({type:Boolean,attribute:KE.allowMouseWheel})],$E.prototype,"allowMouseWheel",void 0),C([An({type:Boolean,attribute:KE.needExponentialView})],$E.prototype,"needExponentialView",void 0),C([An({type:String,attribute:KE.decimalSeparator})],$E.prototype,"decimalSeparator",void 0),customElements.define(el,$E);class jE{}GE=jE,jE.DefaultCssClass=he.Prefix+"-color-palette",jE.SelectedTileCssClass=GE.DefaultCssClass+"-selected-tile",jE.NoColorContainerCssClass=GE.DefaultCssClass+"-no-color-container",jE.ColorValueAttribute="color-value",function(e){e[e.Undefined=0]="Undefined",e[e.ColorTile=1]="ColorTile",e[e.NoColorTile=2]="NoColorTile"}(qE||(qE={})),function(e){e[e.First=0]="First",e[e.LastSelected=1]="LastSelected",e[e.Last=2]="Last"}(YE||(YE={}));class ZE extends Mi{constructor(e,t,i){super(e,i),this.rootStrategy=t}getItemStrategy(e){return super.getItemStrategy(e)}getSelectedItemStrategy(){return super.getSelectedItemStrategy()}getShortcutContext(){return{ElementType:this.getElementType(),Value:this.getElementValue()}}selectItem(e){this.resetFocusableState(),super.selectItem(e)}resetFocusableState(){const e=this.findLastSelectedStrategy().selectedItemElement;e&&fi.removeTabIndex(e)}getElementType(){return qE.Undefined}getElementValue(){return null}move(e,t,i=!0){const n=this.selectedItemIndex+(e?1:-1);if(!this.isIndexWithinBoundaries(n))return!1;if(i){const i=this.getItemStrategy(n);if(!i||!this.canMove(i,e,t))return!1;this.setSelectedItemIndex(i,e,t)}return e?this.moveToNextItem():this.moveToPrevItem(),!0}canMove(e,t,i){return!0}}class eI extends ZE{constructor(e,t,i){super(e,t,i)}handleKeyDown(e){switch(Be.KeyUtils.getEventKeyCode(e)){case Be.KeyCode.Left:case Be.KeyCode.Right:return!0;case Be.KeyCode.Enter:case Be.KeyCode.Space:return this.performShortcutEvent(e),!0}return super.handleKeyDown(e)}setSelectedItemIndex(e,t,i){}getElementType(){return qE.NoColorTile}}class tI extends ZE{constructor(e,t,i){super(e,t,i)}handleKeyDown(e){switch(Be.KeyUtils.getEventKeyCode(e)){case Be.KeyCode.Left:return this.move(!1,!1,!1);case Be.KeyCode.Right:return this.move(!0,!1,!1);case Be.KeyCode.Home:return this.moveToFirstItem(),!0;case Be.KeyCode.End:return this.moveToLastItem(),!0;case Be.KeyCode.Enter:case Be.KeyCode.Space:return this.performShortcutEvent(e),!0}return super.handleKeyDown(e)}focusSelectedItem(){var e;super.focusSelectedItem(),null===(e=this.rootStrategy)||void 0===e||e.setLastColumnIndex(this.selectedItemIndex)}setRowSelectedItemIndex(e){var t,i;switch(e){case YE.First:this.selectedItemIndex=0;break;case YE.LastSelected:this.selectedItemIndex=null!==(i=null===(t=this.rootStrategy)||void 0===t?void 0:t.getLastColumnIndex())&&void 0!==i?i:0;break;case YE.Last:this.selectedItemIndex=this.itemCount-1}}findAndSetRowSelectedTile(){for(let e=0;e<this.itemCount;e++){const t=this.getItem(e);if(t&&t.classList.contains(jE.SelectedTileCssClass))return this.selectedItemIndex=e,!0}return!1}queryItems(){return this.queryItemsBySelector("td > div")}getElementType(){return qE.ColorTile}getElementValue(){return this.selectedItemElement.getAttribute(jE.ColorValueAttribute)}setSelectedItemIndex(e,t,i){}}class iI{static isGroupStrategy(e){return e instanceof nI}static isRowStrategy(e){return e instanceof tI}static isButtonStrategy(e){return e instanceof eI}}class nI extends ZE{constructor(e,t,i){super(e,t,i)}queryItems(){return this.queryItemsBySelector("tbody > tr")}createItemStrategy(e){if(e.matches("tr"))return new tI(this.navigator,this.rootStrategy,e);throw new Error("Color palete kbd strategy not implemented ")}handleKeyDown(e){switch(Be.KeyUtils.getEventKeyCode(e)){case Be.KeyCode.Left:return this.move(!1,!1);case Be.KeyCode.Up:return this.move(!1,!0);case Be.KeyCode.Right:return this.move(!0,!1);case Be.KeyCode.Down:return this.move(!0,!0)}return super.handleKeyDown(e)}getShortcutContext(){return{}}setGroupSelectedItemIndex(e,t){this.selectedItemIndex=t===YE.First?0:this.itemCount-1;const i=this.getItemStrategy(this.selectedItemIndex);iI.isRowStrategy(i)&&i.setRowSelectedItemIndex(e)}findAndSetGroupSelectedTile(){for(let e=0;e<this.itemCount;e++){const t=this.getItemStrategy(e);if(iI.isRowStrategy(t)&&t.findAndSetRowSelectedTile())return void(this.selectedItemIndex=e)}}setSelectedItemIndex(e,t,i){iI.isRowStrategy(e)&&e.setRowSelectedItemIndex(i?YE.LastSelected:t?YE.First:YE.Last)}}class sI extends ZE{constructor(e,t){super(e,null,t),this.lastColumnIndex=0}queryItems(){return new Array(...this.queryItemsBySelector("& > table"),...this.queryItemsBySelector(`& > div.${jE.NoColorContainerCssClass}`))}createItemStrategy(e){if(e.matches("table"))return new nI(this.navigator,this,e);if(e.matches(`div.${jE.NoColorContainerCssClass}`))return new eI(this.navigator,this,e);throw new Error("Color palete kbd strategy not implemented ")}handleKeyDown(e){switch(Be.KeyUtils.getEventKeyCode(e)){case Be.KeyCode.Left:return this.move(!1,!1);case Be.KeyCode.Up:return this.move(!1,!0);case Be.KeyCode.Right:return this.move(!0,!1);case Be.KeyCode.Down:return this.move(!0,!0);case Be.KeyCode.Tab:return this.handleTab(e)}return super.handleKeyDown(e)}getShortcutContext(){return{}}setLastColumnIndex(e){this.lastColumnIndex=e}getLastColumnIndex(){return this.lastColumnIndex}setSelectedItemIndex(e,t,i){iI.isGroupStrategy(e)&&(t?e.setGroupSelectedItemIndex(i?YE.LastSelected:YE.First,YE.First):e.setGroupSelectedItemIndex(i?YE.LastSelected:YE.Last,YE.Last))}canMove(e,t,i){return!t||i||!iI.isButtonStrategy(e)}handleTab(e){const t=this.selectedItemIndex+(e.shiftKey?-1:1);if(this.isIndexWithinBoundaries(t)){const e=this.getItemStrategy(t);return iI.isGroupStrategy(e)&&e.findAndSetGroupSelectedTile(),this.selectItem(t),!0}return e.shiftKey?(this.leaveBackward(),!0):super.handleKeyDown(e)}}customElements.define("dxbl-color-palette",class extends Es{constructor(){super()}contentChanged(){super.contentChanged(),this.initializeKeyboardNavigator()}disconnectedCallback(){delete this.keyboardNavigator,super.disconnectedCallback()}initializeKeyboardNavigator(){this.keyboardNavigator=this.querySelector(Qi),this.keyboardNavigator&&!this.keyboardNavigator.initialized&&this.keyboardNavigator.initialize(this,new sI(this.getKeyboardNavigator(),this))}getKeyboardNavigator(){return this.keyboardNavigator}}),function(e){e[e.TopStart=1]="TopStart",e[e.Top=2]="Top",e[e.TopEnd=4]="TopEnd",e[e.RightStart=8]="RightStart",e[e.Right=16]="Right",e[e.RightEnd=32]="RightEnd",e[e.BottomStart=64]="BottomStart",e[e.Bottom=128]="Bottom",e[e.BottomEnd=256]="BottomEnd",e[e.LeftStart=512]="LeftStart",e[e.Left=1024]="Left",e[e.LeftEnd=2048]="LeftEnd"}(JE||(JE={}));class rI extends no{constructor(e,t,i,n,s,r){super(t,i,n,s,r),this.flyoutPosition=e}}let oI=XE=class extends fo{get actualDistance(){var e;return null!==(e=this.flyoutDistance)&&void 0!==e?e:2}get actualOffset(){var e;return null!==(e=this.flyoutOffset)&&void 0!==e?e:0}get branchType(){return Us.DropDown}constructor(){super(),this.slotChangedHandler=this.handleSlotChange.bind(this),this.dialog=null,this.flyoutDistance=null,this.flyoutOffset=null,this.calcStartAlignment=()=>0,this.calcEndAlignment=(e,t)=>t-e,this.calcAlignment=(e,t)=>t/2-e/2,this.placement=Jr.Custom,this.fitToRestriction=!0,this.flyoutPosition=0}get child(){return this.root}processCustomPlacement(e,t){return this.calcCustomPlacements(e,t)}calcCustomPlacements(e,t){const i=[];if(!this.dialog||!this.dialog.arrow)return i;const n=this.getBounds(t),s=this.getBounds(e),r=this.dialog.arrow.arrowSize;return this.flyoutPosition&JE.Bottom&&i.push(this.calcBottomPlacement(n,r,this.calcAlignment(s.width,n.width),JE.Bottom)),this.flyoutPosition&JE.BottomStart&&i.push(this.calcBottomPlacement(n,r,this.calcStartAlignment(),JE.BottomStart)),this.flyoutPosition&JE.BottomEnd&&i.push(this.calcBottomPlacement(n,r,this.calcEndAlignment(s.width,n.width),JE.BottomEnd)),this.flyoutPosition&JE.Top&&i.push(this.calcTopPlacement(s,r,this.calcAlignment(s.width,n.width),JE.Top)),this.flyoutPosition&JE.TopStart&&i.push(this.calcTopPlacement(s,r,this.calcStartAlignment(),JE.TopStart)),this.flyoutPosition&JE.TopEnd&&i.push(this.calcTopPlacement(s,r,this.calcEndAlignment(s.width,n.width),JE.TopEnd)),this.flyoutPosition&JE.Left&&i.push(this.calcLeftPlacement(s,r,this.calcAlignment(s.height,n.height),JE.Left)),this.flyoutPosition&JE.LeftStart&&i.push(this.calcLeftPlacement(s,r,this.calcStartAlignment(),JE.LeftStart)),this.flyoutPosition&JE.LeftEnd&&i.push(this.calcLeftPlacement(s,r,this.calcEndAlignment(s.height,n.height),JE.LeftEnd)),this.flyoutPosition&JE.Right&&i.push(this.calcRightPlacement(n,r,this.calcAlignment(s.height,n.height),JE.Right)),this.flyoutPosition&JE.RightStart&&i.push(this.calcRightPlacement(n,r,this.calcStartAlignment(),JE.RightStart)),this.flyoutPosition&JE.RightEnd&&i.push(this.calcRightPlacement(n,r,this.calcEndAlignment(s.height,n.height),JE.RightEnd)),i}calcLeftPlacement(e,t,i,n){const s=new et(-e.width-t.width-this.actualDistance,i+this.actualOffset);return new rI(n,s,eo.Horizontal,!0,jr.Near,Zr.bottom)}calcTopPlacement(e,t,i,n){const s=new et(i+this.actualOffset,-e.height-t.height-this.actualDistance);return new rI(n,s,eo.Vertical,!0,jr.Near,Zr.top)}calcRightPlacement(e,t,i,n){const s=new et(e.width+t.width+this.actualDistance,i+this.actualOffset);return new rI(n,s,eo.Horizontal,!1,jr.Far,Zr.bottom)}calcBottomPlacement(e,t,i,n){const s=new et(i+this.actualOffset,e.height+t.height+this.actualDistance);return new rI(n,s,eo.Vertical,!1,jr.Near,Zr.bottom)}processBestTranslationResults(e,t,i,n,s,r,o,a,l){if(super.processBestTranslationResults(e,t,i,n,s,r,o,a,l),!this.dialog||!this.dialog.arrow)return;const A=this.calcArrowAlignment(r,o,a);this.dialog.arrowAlignment=A;const d=this.dialog.arrow;d.position=this.getArrowPosition(d,t,i,n,a,null==l?void 0:l.flyoutPosition),d.alignment=A}getArrowPosition(e,t,i,n,s,r){const o=s===eo.Vertical,a=o?e.arrowSize.width:e.arrowSize.height,l=nt.rectToRange(i,o),A=nt.rectToRange(t,o),d=nt.rectToRange(n,o);let c=A.start,h=A.end;this.fitToRestriction&&(A.start<=d.start?(c=d.start,h=c+A.size):A.end>=d.end&&(c=d.end-A.size,h=c+A.size));const[u,p]=[Math.max(c,l.start),Math.min(h,l.end)];let m;m=r&(JE.RightStart|JE.RightEnd|JE.LeftStart|JE.LeftEnd)?l.start:l.start+l.size/2;const g=this.alignWithinBoundaries(m-a/2,u,p),C=this.calculateArrowOffsetFromEdge(l,a,A);return o?new br(Math.min(Math.max(g-c,C),t.width-C-a),0):new br(0,Math.min(Math.max(g-h,C-t.height),-C-a))}calcArrowAlignment(e,t,i){return i===eo.Vertical?t===Zr.bottom?ba.bottom:ba.top:e===jr.Near?ba.start:ba.end}alignWithinBoundaries(e,t,i){return t>=i?(t+i)/2:Math.min(Math.max(e,t),i)}calculateArrowOffsetFromEdge(e,t,i){const n=Math.min(e.size-t,e.size/2-t/2);return Math.max(XE.DefaultArrowOffsetFromEdge,Math.min(n,.2*i.size))}renderTemplate(){return Xn`
            <dxbl-branch
                id="branch"
                branch-id="${this.branchId}"
                parent-branch-id="${this.parentBranchId}"
                type="${Us.Flyout}">
                <dxbl-flyout-root
                    id="root"
                    style="${this.rootCssStyle}">
                    ${this.renderDefaultSlot()}
                    ${this.renderBridgeSlot()}
                </dxbl-flyout-root>
            </dxbl-branch>
        `}renderDefaultSlot(){return Xn`<slot @slotchange="${this.slotChangedHandler}"></slot>`}handleSlotChange(e){const t=e.target.assignedNodes();this.dialog=t.find((e=>e instanceof Ea)),this.dialog&&(this.dialog.animationEnabled=this.animationEnabled),this.reposition()}updated(e){super.updated(e),this.dialog&&e.has("animationEnabled")&&(this.dialog.animationEnabled=this.animationEnabled)}createKeyboardNavigationStrategy(){return new Ta(this.keyboardNavigator,this)}};oI.DefaultArrowOffsetFromEdge=8,C([cn("#root",!0)],oI.prototype,"root",void 0),C([An({type:Number,attribute:"flyout-position"})],oI.prototype,"flyoutPosition",void 0),C([An({type:Number,attribute:"flyout-distance"})],oI.prototype,"flyoutDistance",void 0),C([An({type:Number,attribute:"flyout-offset"})],oI.prototype,"flyoutOffset",void 0),oI=XE=C([on("dxbl-flyout")],oI);let aI=class extends gs{constructor(){super(...arguments),this.dropOpposite=!1,this.dropDirection=jr.Near,this.dropAlignment=Zr.bottom}static get styles(){return fn`
            :host {
                display: flex;
                flex: 1 1 auto;
                flex-direction: column;
                align-items: stretch;
                justify-items: stretch;
                min-height: 0;
            }
        }`}render(){return Xn`
            <slot></slot>
            <slot name="arrow"/>
        `}};function lI(){return new Promise(((e,t)=>{requestAnimationFrame((()=>{setTimeout(e)}))}))}C([An({type:Object,attribute:"drop-opposite"})],aI.prototype,"dropOpposite",void 0),C([An({type:String,attribute:"drop-direction"})],aI.prototype,"dropDirection",void 0),C([An({type:String,attribute:"drop-alignment"})],aI.prototype,"dropAlignment",void 0),aI=C([on("dxbl-flyout-root")],aI);class AI{constructor(){let e,t;this.promise=new Promise(((i,n)=>{e=i,t=n})),this.resolve=e,this.reject=t}}class dI extends Error{}var cI;!function(e){e[e.Set=0]="Set",e[e.Disposed=1]="Disposed"}(cI||(cI={}));class hI{constructor(e=!1){this.state=e?cI.Set:void 0}wait(){var e;return this.state===cI.Set?Promise.resolve():this.state===cI.Disposed?Promise.reject():(null!==(e=this.state)&&void 0!==e||(this.state=new AI),this.state.promise)}then(e,t){if(this.state===cI.Set)try{const t=null==e?void 0:e();return Promise.resolve(t)}catch(e){return Promise.reject(e)}if(this.state===cI.Disposed)try{const e=new dI;return null==t||t(e),Promise.reject(e)}catch(e){return Promise.reject(e)}return this.wait().then(e,t)}set(){var e;this.state!==cI.Set&&this.state!==cI.Disposed&&(null===(e=this.state)||void 0===e||e.resolve(),this.state=cI.Set)}reset(){this.state!==cI.Disposed&&this.state===cI.Set&&(this.state=void 0)}dispose(){var e;this.state!==cI.Disposed&&(this.state!==cI.Set&&(null===(e=this.state)||void 0===e||e.reject(new dI)),this.state=cI.Disposed)}get isSet(){return this.state===cI.Set}get isDisposed(){return this.state===cI.Disposed}}function uI(e,t,i){let n;const s=(r=`sync ${t.toString()}`,o=function(...e){return this.syncPoint.then((()=>n.apply(this).apply(this,e)))},{[r]:function(...e){return o.apply(this,e)}}[r]);var r,o;if(null!=i||(i={enumerable:!1,configurable:!0}),void 0===i.value&&i.get)n=i.get,i.get=()=>s;else{if(!i.value)throw new Error("syncMethod decorator can only be applied to methods or method getters.");{const e=i.value;n=()=>e,i.value=s}}return i}var pI,mI,gI;!function(e){e.Center="Center",e.Left="Left",e.Right="Right"}(mI||(mI={})),function(e){e.Top="Top",e.Center="Center",e.Bottom="Bottom"}(gI||(gI={}));let CI=class extends Ko{constructor(){super(...arguments),this.allowResize=!1}get header(){return this.querySelector(".dxbl-window-header")}render(){return this.allowResize?Xn`<dxbl-popup-resizable-container><slot></slot></dxbl-popup-resizable-container>`:Xn`<slot></slot>`}};C([An({type:Boolean,attribute:"allow-resize",reflect:!1})],CI.prototype,"allowResize",void 0),CI=C([on("dxbl-window-dialog")],CI);let fI=class extends QB{constructor(){super()}};fI=C([on(cr)],fI);let vI=pI=class extends UB{constructor(){super(),this.actualSize=null,this.actualPosition=null,this.initialSize=null,this.initialPosition=null,this.actualMinWidth=null,this.actualMaxWidth=null,this.actualMinHeight=null,this.actualMaxHeight=null,this.sizeDirty=!1,this.positionYDirty=!1,this.positionXDirty=!1,this.showAnchorElement=null,this._showOptionsToApply=null,this.childContentObserver=null,this.isAdjustDialogEnabled=!0,this.horizontalAlignment=mI.Center,this.verticalAlignment=gI.Center,this.closeOnEscape=!1,this.placement=Jr.Custom,this.closeMode=Yr.None,pa(this)}get branchType(){return Us.Window}get canAdjustZIndexOnShow(){return!1}get positionY(){return this.offset.y}set positionY(e){this.positionYDirty=!0,this.offset=new et(this.positionX||0,e||0)}get positionX(){return this.offset.x}set positionX(e){this.positionXDirty=!0,this.offset=new et(e||0,this.positionY||0)}get showOptionsToApply(){return this._showOptionsToApply}set showOptionsToApply(e){this._showOptionsToApply=e,this.positionXDirty=!1,this.positionYDirty=!1}move(e){return this.showOptionsToApply=e,this.forceReposition(),lI()}showAt(e){return this.showOptionsToApply=e,this.observeChildContent(this),super.show(),lI()}show(){this.showAt(this.showOptionsToApply).catch((e=>{}))}observeChildContent(e){var t;null===(t=this.childContentObserver)||void 0===t||t.disconnect(),this.contentLoaded()?this.enableVisibility():(this.childContentObserver=new MutationObserver(this.handleChildContentChanged.bind(this)),this.childContentObserver.observe(e,{childList:!0}))}handleChildContentChanged(e){var t;const i=this.querySelector(hr);i?i.childElementCount>0?(this.enableVisibility(),null===(t=this.childContentObserver)||void 0===t||t.disconnect()):this.observeChildContent(i):this.observeChildContent(this)}contentLoaded(){const e=this.querySelector(hr);return null!==e&&e.childElementCount>0}disconnectedCallback(){var e;super.disconnectedCallback(),null===(e=this.childContentObserver)||void 0===e||e.disconnect()}static getPlacementTargetClientRect(e){if(null!==e){if(null!==e.targetReference&&e.targetReference instanceof HTMLElement)return e.targetReference.getBoundingClientRect();if(null!==e.targetSelector){const t=document.querySelector(e.targetSelector);if(null!==t)return t.getBoundingClientRect()}}return{x:0,y:0,width:window.innerWidth,height:window.innerHeight}}static getShowAtBox(e){return null===e?null:null!==e.targetReference&&e.targetReference instanceof HTMLElement?pI.getElementTopLeftPoint(e.targetReference):null!==e.targetSelector?pI.getElementTopLeftPoint(document.querySelector(e.targetSelector)):e.targetPoint}static getElementTopLeftPoint(e){if(null===e)return null;const t=e.getBoundingClientRect();return new et(t.left,t.top)}canProcessEscapeKeyDown(){return this.closeOnEscape}activatePopupContent(){this.dispatchEvent(new mo(this.initialVisibility))}renderTemplate(){return Xn`
            <dxbl-branch
                id="branch"
                branch-id="${this.branchId}"
                parent-branch-id="${this.parentBranchId}"
                type="${this.branchType}"
                style="${this.dragCssStyle}">
                <dxbl-window-root
                    id="root"
                    style="${this.rootCssStyle}"
                    ?resizing="${this.resizing}"
                    drop-opposite="${this.actualDropOpposite}"
                    drop-direction="${this.actualDropDirection}"
                    drop-alignment="${this.actualDropAlignment}">
                    ${this.renderDefaultSlot()}
                    ${this.renderAdditionalSlots()}
                    ${this.renderBridgeSlot()}
                </dxbl-window-root>
            </dxbl-branch>
        `}raiseResizeCompleted(e,t){this.sizeDirty=!0,super.raiseResizeCompleted(e,t)}processCustomPlacement(e,t){if(this.positionXDirty||this.positionYDirty||this.isInDragOperation||this.sizeDirty)return null;const i=this.showOptionsToApply;if(i){const e=i.targetPoint||this.calcShowPoint(i);return[new no(e,eo.None,!1,jr.Near,Zr.bottom)]}return null}calcShowPoint(e){const t=pI.getPlacementTargetClientRect(e),i=this.getBoundingClientRect(),n=document.body.getBoundingClientRect(),s=null!=window.visualViewport?{x:0,y:0,width:window.visualViewport.width,height:window.visualViewport.height}:n,r=this.calcShowXPoint(i,t),o=this.calcShowYPoint(i,t),a=s.y+s.height-i.height;return new et(Math.max(0,r+window.scrollX-Math.max(0,r-(s.x+s.width-i.width))),Math.max(0,o+window.scrollY-Math.max(0,o-a)))}calcShowXPoint(e,t){return Math.floor((()=>{switch(this.horizontalAlignment){case mI.Left:return t.x;case mI.Right:return t.x+t.width-e.width;case mI.Center:return t.x+t.width/2-e.width/2}throw new Error("calcShowXPoint not supported for horizontalAlignment:"+this.horizontalAlignment)})())}calcShowYPoint(e,t){return Math.floor((()=>{switch(this.verticalAlignment){case gI.Top:return t.y;case gI.Bottom:return t.y+t.height-e.height;case gI.Center:return t.y+t.height/2-e.height/2}throw new Error("calcShowYPoint not supported for horizontalAlignment:"+this.verticalAlignment)})())}updated(e){super.update(e),e.has("zIndex")&&this.zIndex&&this.raiseZIndexChange()}raiseZIndexChange(){this.updateComplete.then((e=>{this.dispatchEvent(new co(new Ao(this.zIndex)))}))}createKeyboardNavigationStrategy(){return new Fa(this.keyboardNavigator,this,!0)}};C([An({type:mI,attribute:"horizontal-alignment",reflect:!1})],vI.prototype,"horizontalAlignment",void 0),C([An({type:mI,attribute:"vertical-alignment",reflect:!1})],vI.prototype,"verticalAlignment",void 0),C([An({type:Number,attribute:"position-y",reflect:!1})],vI.prototype,"positionY",null),C([An({type:Number,attribute:"position-x",reflect:!1})],vI.prototype,"positionX",null),C([An({type:Boolean,attribute:"close-on-escape"})],vI.prototype,"closeOnEscape",void 0),vI=pI=C([on(dr)],vI);const bI="dxbl-upload";class wI{constructor(e){this.progress=e}}class yI{constructor(e){this.requestOptions=e}}class BI{constructor(e){this.lastErrorCode=e}}class EI extends CustomEvent{constructor(e){super(EI.eventName,{detail:new wI(e),bubbles:!0,composed:!0})}}EI.eventName=bI+".uploadprogress",gt.register(EI.eventName,(e=>e.detail));class II extends CustomEvent{constructor(e){super(II.eventName,{detail:new yI(e),bubbles:!0,composed:!0})}}II.eventName=bI+".customizeformdata",gt.register(II.eventName,(e=>e.detail));class SI extends CustomEvent{constructor(e){super(SI.eventName,{detail:new BI(e),bubbles:!0,composed:!0})}}SI.eventName=bI+".erroroccurred",gt.register(SI.eventName,(e=>e.detail));var xI,DI,FI,TI,HI;!function(e){e.acceptedFileTypes="accepted-file-types",e.validateByAcceptedFileTypes="validate-by-accepted-file-types",e.allowedFileExtensions="allowed-file-extensions",e.externalSelectButtonCssSelector="external-select-button-css-selector",e.showEmbeddedSelectButton="show-embedded-select-button",e.chunkSize="chunk-size",e.maxFileSize="max-file-size",e.minFileSize="min-file-size",e.maxFileCount="max-file-count",e.multiple="multiple",e.uploadMode="upload-mode",e.uploadTechnology="upload-technology",e.dragOverClassName="drag-over-class-name",e.dropZoneCssSelector="drop-zone-css-selector",e.customizeFormData="customize-form-data",e.visible="visible"}(xI||(xI={})),function(e){e[e.Instant=0]="Instant",e[e.OnButtonClick=1]="OnButtonClick"}(DI||(DI={})),function(e){e[e.Http=0]="Http",e[e.JsInterop=1]="JsInterop"}(FI||(FI={})),function(e){e[e.WaitingStart=0]="WaitingStart",e[e.PendingUpload=1]="PendingUpload",e[e.Uploading=2]="Uploading",e[e.Paused=3]="Paused",e[e.Complete=4]="Complete",e[e.Canceled=5]="Canceled",e[e.Error=6]="Error",e[e.Removing=7]="Removing"}(TI||(TI={})),function(e){e[e.MaxFileCountExceeded=0]="MaxFileCountExceeded",e[e.DragAndDropMultipleFiles=1]="DragAndDropMultipleFiles"}(HI||(HI={}));class UI{constructor(){this.guids=[],this.actions=[],this.reloadedFileGuids=[]}}class PI{constructor(e){this.FileName=e.fileInfo.name,this.FileSize=e.fileInfo.size,this.FileType=e.fileInfo.type,this.LastModified=e.fileInfo.lastModified,this.FileGuid=e.fileInfo.guid,this.Index=e.chunkIndex,this.TotalCount=e.totalChunkCount}}class QI{constructor(e,t,i){this._value=e,this._status=i.uploadMode===DI.Instant?TI.PendingUpload:TI.WaitingStart,this._chunkIndex=0,this._loadedBytes=0,this._totalChunkCount=0,this._isFileExtensionValid=QI.validateFileExtension(e,i),this._isMinSizeValid=QI.validateMinFileSize(e,i),this._isMaxSizeValid=QI.validateMaxFileSize(e,i),this._fileInfo={name:e.name,size:e.size,type:e.type,lastModified:1e4*e.lastModified+621355968e9,guid:t},this._request=null,this._onLoadStart=null,this._onProgress=null,this._onAbort=null,this._onPause=null,this._onError=null,this._onLoadEnd=null,this.isValid()||(this._status=TI.Error)}get value(){return this._value}get status(){return this._status}set status(e){this._status=e}get chunkIndex(){return this._chunkIndex}set chunkIndex(e){this._chunkIndex=e}get loadedBytes(){return this._loadedBytes}set loadedBytes(e){this._loadedBytes=e}get totalChunkCount(){return this._totalChunkCount}set totalChunkCount(e){this._totalChunkCount=e}get isFileExtensionValid(){return this._isFileExtensionValid}get isMinSizeValid(){return this._isMinSizeValid}get isMaxSizeValid(){return this._isMaxSizeValid}get fileInfo(){return this._fileInfo}get request(){return this._request}set request(e){this._request=e}get onLoadStart(){return this._onLoadStart}set onLoadStart(e){this._onLoadStart=e}get onProgress(){return this._onProgress}set onProgress(e){this._onProgress=e}get onAbort(){return this._onAbort}set onAbort(e){this._onAbort=e}get onError(){return this._onError}set onError(e){this._onError=e}get onLoadEnd(){return this._onLoadEnd}set onLoadEnd(e){this._onLoadEnd=e}isValid(){return this.isFileExtensionValid&&this.isMaxSizeValid&&this.isMinSizeValid}isUploadComplete(){return this.loadedBytes>=this.fileInfo.size}loadStart(){this.status!==TI.Uploading&&(this.status=TI.Uploading,this.onLoadStart&&this.onLoadStart.call(this))}progress(){this.onProgress&&this.onProgress.call(this)}loadEnd(){this.isUploadComplete()&&(this.status=TI.Complete,this.onLoadEnd&&this.onLoadEnd.call(this))}abort(e=!0){this.status!==TI.Canceled&&(this.status=TI.Canceled,this.request&&this.request.abort(),e&&this.onAbort&&this.onAbort.call(this),this.chunkIndex=0,this.loadedBytes=0)}error(e){this.status=TI.Error,this.onError&&this.onError.call(this,e)}static validateFileExtension(e,t){const i=t.allowedFileExtensions,n=e.name.substring(e.name.lastIndexOf(".")).toLowerCase();if(0===i.length)return!0;for(let e=0;e<i.length;e++)if(n===i[e].toLowerCase())return!0;return!1}static validateMinFileSize(e,t){const i=t.minFileSize;return!(i>0)||e.size>=i}static validateMaxFileSize(e,t){const i=t.maxFileSize;return!(i>0)||e.size<=i}updateStatus(e,t){var i,n,s,r,o,a,l;switch(this.status=e,this.status){case TI.WaitingStart:case TI.PendingUpload:break;case TI.Uploading:null===(i=this.onLoadStart)||void 0===i||i.call(this);break;case TI.Paused:break;case TI.Complete:this.loadedBytes=this.value.size,null===(n=this.onLoadEnd)||void 0===n||n.call(this);break;case TI.Canceled:null===(s=this.onAbort)||void 0===s||s.call(this);break;case TI.Error:{const e=new EventTarget;e.status=null!==(r=null==t?void 0:t.status)&&void 0!==r?r:-1,e.statusText=null!==(o=null==t?void 0:t.statusText)&&void 0!==o?o:"Unexpected error",e.responseText=null!==(a=null==t?void 0:t.responseText)&&void 0!==a?a:"Unexpected error",null===(l=this.onError)||void 0===l||l.call(this,e);break}}}}class NI{constructor(e){this.control=e,this.requestMetadata=null}customizeFormData(e){return this.control.dispatchEvent(new II(e)),Promise.resolve()}}class RI extends NI{constructor(e){super(e)}upload(e,t,i,n){if(!e)return Promise.reject();e.totalChunkCount||(e.chunkIndex=0,e.totalChunkCount=RI.calculateTotalChunkCount(e.fileInfo.size,t));const s=t.chunkSize*e.chunkIndex,r=e.value.slice(s,s+t.chunkSize);return this.requestMetadata={formData:new FormData,request:t,file:e,loadEnd:n},this.createFormData(t.name,r,e,i)}createFormData(e,t,i,n){var s,r;const o=new PI(i);return null===(s=this.requestMetadata)||void 0===s||s.formData.append(e,t),null===(r=this.requestMetadata)||void 0===r||r.formData.append("chunkMetadata",JSON.stringify(o)),this.control.customizeFormData||n||(n={}),n?this.onCustomizeChunkMetadataResponse(n):this.customizeFormData(o)}onCustomizeChunkMetadataResponse(e){return new Promise(((t,i)=>{if(null==this.requestMetadata)return void i();const{formData:n,request:s,file:r,loadEnd:o}=this.requestMetadata;if(r.status!==TI.Paused&&r.status!==TI.Canceled){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t)){const i=e[t];n.append(t,i instanceof Object?JSON.stringify(i):i)}for(const e in s.requestData)Object.prototype.hasOwnProperty.call(s.requestData,e)&&n.append(e,s.requestData[e]);r.request=MI.sendRequest(n,{crossDomain:!1,url:s.uploadUrl,method:"POST",headers:s.requestHeaders,onAbort:()=>{r.abort(),i()},onProgress:()=>{},onError:e=>{e.target&&r.error(e.target),i()},onLoadStart:()=>{r.loadStart()},onLoad:e=>{if(e.target)if(200===e.target.status){const a=n.get(s.name);r.chunkIndex++,r.loadedBytes+=a.size,r.progress(),o(r).then(t,i).catch((()=>{i(),r.error(e.target)}))}else r.error(e.target),i()},onLoadEnd:null})}else i()}))}static calculateTotalChunkCount(e,t){let i=Math.trunc(e/t.chunkSize);return e%t.chunkSize>0&&i++,i}}class LI extends NI{constructor(e){super(e)}upload(e,t,i,n){return e?(this.requestMetadata={formData:new FormData,request:t,file:e,loadEnd:n},this.createFormData(t.name,e,i)):Promise.reject()}createFormData(e,t,i){var n;return null===(n=this.requestMetadata)||void 0===n||n.formData.append(e,t.value),this.onCustomizeChunkMetadataResponse(i||{})}onCustomizeChunkMetadataResponse(e){return new Promise(((e,t)=>{if(null==this.requestMetadata)return void t();const{formData:i,request:n,file:s,loadEnd:r}=this.requestMetadata;for(const e in n.requestData)Object.prototype.hasOwnProperty.call(n.requestData,e)&&i.append(e,n.requestData[e]);let o=!1;s.request=MI.sendRequest(i,{url:n.uploadUrl,method:"POST",headers:n.requestHeaders,crossDomain:!1,onProgress:e=>{o=!0,s.loadedBytes=e.loaded>s.fileInfo.size?s.fileInfo.size:e.loaded,s.progress()},onAbort:e=>{s.abort(),t()},onError:e=>{e.target&&s.error(e.target),t()},onLoadStart:e=>{s.loadStart()},onLoad:i=>{i.target&&(200===i.target.status?(o||(s.loadedBytes=s.fileInfo.size,s.progress()),r(s,i).then(e,t).catch((()=>{t(),s.error(i.target)}))):(s.error(i.target),t()))},onLoadEnd:null})}))}}class MI{static sendRequest(e,t){const i=new XMLHttpRequest;t.crossDomain=MI.isCrossDomain(t.url);const n=MI.getRequestHeaders(t);i.open(t.method,t.url,!0),t.onLoadStart&&(i.upload.onloadstart=t.onLoadStart),t.onLoad&&(i.onload=t.onLoad),t.onLoadEnd&&(i.upload.onloadend=t.onLoadEnd),t.onProgress&&(i.upload.onprogress=t.onProgress),t.onError&&(i.upload.onerror=t.onError),t.onAbort&&(i.upload.onabort=t.onAbort);for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&n[e]&&i.setRequestHeader(e,n[e]);return i.send(e),i}static getRequestHeaders(e){const t=e.headers||{};return t.Accept=t.Accept||MI.getAcceptHeader(),e.crossDomain||t["X-Requested-With"]||(t["X-Requested-With"]="XMLHttpRequest"),t}static getAcceptHeader(){return"*/*"}static isCrossDomain(e){let t=!1;const i=document.createElement("a"),n=document.createElement("a");i.href=window.location.href;try{n.href=e,n.href=n.href,t=i.protocol+"//"+i.host!=n.protocol+"//"+n.host}catch(e){t=!0}return t}}class kI{constructor(e){this.control=e,this.state=new KI,this.indexMap=new Map,this.dispatchTimerId=-1,this.idleTimerId=-1}dispatch(e,t,i=null){const n=this.getFileIndex(t),s=new OI(n,e,t.loadedBytes,t.status);this.state.progressInfos.push(s),i&&this.state.errors.push(i),this.tryPerformDispatch()}forceDelayedDispatch(){-1!==this.dispatchTimerId&&clearTimeout(this.dispatchTimerId),this.performDispatch()}tryPerformDispatch(){if(-1===this.dispatchTimerId){let e=50;-1!==this.idleTimerId&&(clearTimeout(this.idleTimerId),this.idleTimerId=-1,e=200),this.dispatchTimerId=setTimeout((()=>this.performDispatch()),e)}}performDispatch(){this.dispatchTimerId=-1,this.control.dispatchEvent(new EI(this.state)),this.state=new KI,this.indexMap.clear(),this.idleTimerId=setTimeout((()=>{this.idleTimerId=-1}),1e3)}cancelSendingOfLastEvent(){clearTimeout(this.dispatchTimerId),this.dispatchTimerId=-1}getFileIndex(e){let t=this.indexMap.get(e.fileInfo.guid);return void 0!==t||(t=this.state.fileGuids.length,this.state.fileGuids.push(e.fileInfo.guid),this.indexMap.set(e.fileInfo.guid,t)),t}}class KI{constructor(){this.fileGuids=[],this.progressInfos=[],this.errors=[]}}class OI{constructor(e,t,i,n){this.index=e,this.type=t,this.loaded=i,this.status=n}}var _I,VI;!function(e){e[e.Started=0]="Started",e[e.Progress=1]="Progress",e[e.Uploaded=2]="Uploaded",e[e.Aborted=3]="Aborted",e[e.Error=4]="Error"}(_I||(_I={}));class zI{}zI.MainElement=he.Prefix+"-upload",zI.SelectButton=zI.MainElement+"-select-btn",function(e){e.accept="accept",e.multiple="multiple"}(VI||(VI={}));var WI=e((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.TouchUtils=void 0;var i=function(){function e(){}return e.onEventAttachingToDocument=function(t,i){return!h.Browser.MacOSMobilePlatform||!e.isTouchEventName(t)||(e.documentTouchHandlers[t]||(e.documentTouchHandlers[t]=[]),e.documentTouchHandlers[t].push(i),e.documentEventAttachingAllowed)},e.isTouchEventName=function(e){return h.Browser.WebKitTouchUI&&(e.indexOf("touch")>-1||e.indexOf("gesture")>-1)},e.isTouchEvent=function(e){return h.Browser.WebKitTouchUI&&p.isDefined(e.changedTouches)},e.getEventX=function(e){return h.Browser.IE?e.pageX:e.changedTouches[0].pageX},e.getEventY=function(e){return h.Browser.IE?e.pageY:e.changedTouches[0].pageY},e.touchMouseDownEventName=h.Browser.WebKitTouchUI?"touchstart":h.Browser.Edge&&h.Browser.MSTouchUI&&window.PointerEvent?"pointerdown":"mousedown",e.touchMouseUpEventName=h.Browser.WebKitTouchUI?"touchend":h.Browser.Edge&&h.Browser.MSTouchUI&&window.PointerEvent?"pointerup":"mouseup",e.touchMouseMoveEventName=h.Browser.WebKitTouchUI?"touchmove":h.Browser.Edge&&h.Browser.MSTouchUI&&window.PointerEvent?"pointermove":"mousemove",e.msTouchDraggableClassName="dxMSTouchDraggable",e.documentTouchHandlers={},e.documentEventAttachingAllowed=!0,e}();t.TouchUtils=i}));t(WI);var $I=e((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.EvtUtils=void 0;var i=function(){function e(){}return e.preventEvent=function(e){e.cancelable&&(e.preventDefault?e.preventDefault():e.returnValue=!1)},e.getEventSource=function(t){return p.isDefined(t)?e.getEventSourceCore(t):null},e.getEventSourceByPosition=function(t){if(!p.isDefined(t))return null;if(!document.elementFromPoint)return e.getEventSourceCore(t);var i=e.getEventX(t)-(e.clientEventRequiresDocScrollCorrection()?T.DomUtils.getDocumentScrollLeft():0),n=e.getEventY(t)-(e.clientEventRequiresDocScrollCorrection()?T.DomUtils.getDocumentScrollTop():0);return void 0===i||void 0===n?e.getEventSourceCore(t):document.elementFromPoint(i,n)},e.getEventSourceCore=function(e){return e.srcElement?e.srcElement:e.target},e.getMouseWheelEventName=function(){return h.Browser.Safari?"mousewheel":h.Browser.NetscapeFamily&&h.Browser.MajorVersion<17?"DOMMouseScroll":"wheel"},e.isLeftButtonPressed=function(t){return!!WI.TouchUtils.isTouchEvent(t)||!!(t=h.Browser.IE&&p.isDefined(event)?event:t)&&(h.Browser.IE&&h.Browser.Version<11?!!h.Browser.MSTouchUI||t.button%2==1:h.Browser.WebKitFamily?"pointermove"===t.type||"pointerenter"===t.type||"pointerleave"===t.type?1===t.buttons:1===t.which:h.Browser.NetscapeFamily||h.Browser.Edge||h.Browser.IE&&h.Browser.Version>=11?e.isMoveEventName(t.type)?1===t.buttons:1===t.which:!h.Browser.Opera||0===t.button)},e.isMoveEventName=function(t){return t===WI.TouchUtils.touchMouseMoveEventName||t===e.getMoveEventName()},e.getMoveEventName=function(){return window.PointerEvent?"pointermove":h.Browser.TouchUI?"touchmove":"mousemove"},e.preventEventAndBubble=function(t){e.preventEvent(t),t.stopPropagation&&t.stopPropagation(),t.cancelBubble=!0},e.clientEventRequiresDocScrollCorrection=function(){return h.Browser.AndroidDefaultBrowser||h.Browser.AndroidChromeBrowser||!(h.Browser.Safari&&h.Browser.Version<3||h.Browser.MacOSMobilePlatform&&h.Browser.Version<5.1)},e.getEventX=function(t){return WI.TouchUtils.isTouchEvent(t)?WI.TouchUtils.getEventX(t):t.clientX+(e.clientEventRequiresDocScrollCorrection()?T.DomUtils.getDocumentScrollLeft():0)},e.getEventY=function(t){return WI.TouchUtils.isTouchEvent(t)?WI.TouchUtils.getEventY(t):t.clientY+(e.clientEventRequiresDocScrollCorrection()?T.DomUtils.getDocumentScrollTop():0)},e.cancelBubble=function(e){e.cancelBubble=!0},e.getWheelDelta=function(e){var t;return t=h.Browser.NetscapeFamily&&h.Browser.MajorVersion<17?-e.detail:h.Browser.Safari?e.wheelDelta:-e.deltaY,h.Browser.Opera&&h.Browser.Version<9&&(t=-t),t},e}();t.EvtUtils=i}));t($I);class GI extends Es{constructor(){super(),this.DRAG_EVENT_DELTA=1,this.onInputChangeHandler=this.onFileInputChange.bind(this),this.onSelectButtonClickHandler=this.onSelectButtonClick.bind(this),this.onFilesDropHandler=this.onFilesDrop.bind(this),this.onFilesDragOverHandler=this.onFilesDragOver.bind(this),this.onFilesDragLeaveHandler=this.onFilesDragLeave.bind(this),this.acceptedFileTypes=null,this.validateByAcceptedFileTypes=!0,this.allowedFileExtensions=[],this.externalSelectButtonCssSelector="",this.showEmbeddedSelectButton=!0,this.chunkSize=0,this.maxFileSize=0,this.minFileSize=0,this.maxFileCount=1e3,this.multiple=!1,this.uploadMode=DI.Instant,this.uploadTechnology=FI.Http,this.dragOverClassName="",this.dropZoneCssSelector="",this.customizeFormData=!1,this.visible=!1,this.files=new Map,this.progressDispatcher=new kI(this),this.recentlyAddedFilesStream=null}firstUpdated(e){super.firstUpdated(e),this.initEvents(),this.prepareInputElement()}initDotNetReference(e){this.dotnetHelper=e,this.dotnetHelper&&this.tryAttachSelectButtonClickHandler()}updateFileStatus(e,t,i){var n,s;null===(s=null===(n=this.files.get(e))||void 0===n?void 0:n.updateStatus)||void 0===s||s.call(n,t,i)}getFileBytes(e){var t;return null===(t=this.files.get(e))||void 0===t?void 0:t.value}getFileInput(){return this.querySelector("input")}getSelectButton(e){return null!=e||(e=this.externalSelectButtonCssSelector),e?document.querySelector(e):this.querySelector(`.${zI.SelectButton}`)}getDropZoneContainer(){return this.dropZoneCssSelector?document.querySelector(this.dropZoneCssSelector):null}initEvents(){this.getFileInput().addEventListener("change",this.onInputChangeHandler),this.dotnetHelper&&this.tryAttachSelectButtonClickHandler();const e=this.getDropZoneContainer();e&&(e.addEventListener("drop",this.onFilesDropHandler),e.addEventListener("dragover",this.onFilesDragOverHandler),e.addEventListener("dragleave",this.onFilesDragLeaveHandler))}tryAttachSelectButtonClickHandler(){var e;null===(e=this.getSelectButton())||void 0===e||e.addEventListener("click",this.onSelectButtonClickHandler)}tryDetachSelectButtonClickHandler(e){var t;null===(t=this.getSelectButton(e))||void 0===t||t.removeEventListener("click",this.onSelectButtonClickHandler)}prepareInputElement(){const e=this.getFileInput();this.multiple?e.setAttribute(VI.multiple,""):e.removeAttribute(VI.multiple),this.acceptedFileTypes&&e.setAttribute(VI.accept,this.acceptedFileTypes.join(","))}onFileInputChange(e){this.addFiles(this.createFileItems(this.getFileInput().files)),this.getFileInput().value=""}onSelectButtonClick(e){this.getFileInput().click()}onFilesDrop(e){e.preventDefault(),this.addFiles(this.createFileItems(this.getFileFromDataTransfer(e.dataTransfer))),this.tryRemoveExternalDropZoneDragOverClass(e,!0)}onFilesDragOver(e){const t=this.getDropZoneContainer();this.dragOverClassName&&t&&T.DomUtils.addClassName(t,this.dragOverClassName),e.preventDefault()}onFilesDragLeave(e){e.preventDefault(),this.tryRemoveExternalDropZoneDragOverClass(e)}tryRemoveExternalDropZoneDragOverClass(e,t=!1){const i=this.getDropZoneContainer();this.dragOverClassName&&i&&(t||!this.isMouseOverElement(e,i,-this.DRAG_EVENT_DELTA))&&T.DomUtils.removeClassName(i,this.dragOverClassName)}isMouseOverElement(e,t,i=this.DRAG_EVENT_DELTA){if(!t)return!1;const n=this.getOffset(t).left,s=this.getOffset(t).top,r=t.offsetWidth,o=t.offsetHeight,a=$I.EvtUtils.getEventX(e),l=$I.EvtUtils.getEventY(e);return a+i>=n&&a-i<n+r&&l+i>=s&&l-i<s+o}getOffset(e){if(!e.getClientRects().length)return{top:0,left:0};const t=e.getBoundingClientRect(),i=e.ownerDocument.documentElement;return{top:t.top+window.scrollY-i.clientTop,left:t.left+window.scrollX-i.clientLeft}}raiseErrorOccurred(e){this.dispatchEvent(new SI(e))}createFileItems(e){if(!e)return[];const t=[],i=this.getAllowedFileTypes();for(let n=0,s=e[n];s;n++,s=e[n]){const r=new QI(s,this.getUUID4(),this);this.validateByAcceptedFileTypes&&i&&r.isValid()&&!this.isFileTypeAllowed(e[n],i)||t.push(r)}return t}isFileTypeAllowed(e,t){return t.some((function(t){if("."===t[0]){if(t=t.replace(".","\\."),e.name.match(new RegExp(t+"$","i")))return!0}else if(t=t.replace("*",""),e.type.match(new RegExp(t,"i")))return!0}))}addFiles(e){this.dotnetHelper&&0!==e.length&&(this.maxFileCount>0&&this.files.size+e.length>this.maxFileCount?this.raiseErrorOccurred(HI.MaxFileCountExceeded):(e.forEach((e=>this.files.set(e.fileInfo.guid,e))),this.registerFileInfos(e)))}registerFileInfos(e){var t;this.recentlyAddedFilesStream=(new TextEncoder).encode(JSON.stringify(this.getFileInfosCollection(e))),null===(t=this.dotnetHelper)||void 0===t||t.invokeMethodAsync("RegisterAddedFiles",this.recentlyAddedFilesStream.length)}getRecentlyAddedFileInfosStream(){return this.recentlyAddedFilesStream}getFileFromDataTransfer(e){const t=[];if(e)if(e.items){if(!this.multiple&&this.files.size+e.items.length>1)return this.raiseErrorOccurred(HI.DragAndDropMultipleFiles),null;for(let i=0,n=e.items[i];n;i++,n=e.items[i])if("file"===n.kind){const e=n.getAsFile();e&&t.push(e)}}else for(let i=0,n=e.files[i];n;i++,n=e.files[i])t.push(n);return t}getFileInfosCollection(e){return e.map(this.createFileViewInfo)}createFileViewInfo(e){return{name:e.fileInfo.name,size:e.fileInfo.size,type:e.fileInfo.type,lastModified:e.fileInfo.lastModified,guid:e.fileInfo.guid,loadedBytes:e.loadedBytes,status:e.status,isFileExtensionValid:e.isFileExtensionValid,isMinSizeValid:e.isMinSizeValid,isMaxSizeValid:e.isMaxSizeValid}}getAllowedFileTypes(){return this.acceptedFileTypes&&this.acceptedFileTypes.length>0?this.acceptedFileTypes.map((e=>e.trim())):null}getUUID4(){const e=new Uint8Array(16);crypto.getRandomValues(e),e[8]&=63,e[8]|=128,e[6]&=15,e[6]|=64;let t=0;return"XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX".replace(/XX/g,(()=>e[t++].toString(16).padStart(2,"0")))}reloadFile(e,t){if(e.status===TI.Canceled&&t){const i=this.createFileItems([e.value])[0];i.status=TI.PendingUpload,i.fileInfo.guid=t,this.files=GI.replaceFileInFilesMap(this.files,e.fileInfo.guid,i)}}static replaceFileInFilesMap(e,t,i){const n=new Map;for(const s of e.values()){const e=s.fileInfo.guid===t?i:s;n.set(e.fileInfo.guid,e)}return n}attachEventsToFileItem(e){e.onLoadStart||(e.onLoadStart=()=>{this.fileUploadStarted(e)}),e.onProgress||(e.onProgress=()=>{this.fileProgress(e)}),e.onAbort||(e.onAbort=()=>{this.fileUploadAborted(e)}),e.onError||(e.onError=t=>{this.fileUploadError(e,t.status,t.statusText,t.responseText)}),e.onLoadEnd||(e.onLoadEnd=()=>{this.fileUploaded(e)})}fileUploadStarted(e){this.progressDispatcher.dispatch(_I.Started,e)}fileUploaded(e){this.progressDispatcher.dispatch(_I.Uploaded,e)}fileUploadAborted(e){this.progressDispatcher.dispatch(_I.Aborted,e)}fileProgress(e){e.status!==TI.WaitingStart&&e.status!==TI.PendingUpload&&e.status!==TI.Uploading||this.progressDispatcher.dispatch(_I.Progress,e)}fileUploadError(e,t,i,n){this.progressDispatcher.dispatch(_I.Error,e,{status:t,statusText:i,responseText:n})}processUploadedFilesOptions(e){this.updateFileStates(e),this.processUploadedFilesOptionsCore(e)}updateFileStates(e){var t;for(const i of e){const e=this.files.get(null!==(t=i.beforeReloadGuid)&&void 0!==t?t:i.fileGuid);e&&(e.status!==i.status&&this.changeStatus(e,i.status,i.fileGuid))}}createActionRequest(e){const t=new UI,i=new Map;return e.forEach((e=>{const n=e.file.fileInfo.guid;let s=i.get(n);void 0===s&&(s=t.guids.length,t.guids.push(n),i.set(n,s)),t.actions.push(e.action,s),e.action===TI.PendingUpload&&e.newReloadedFile&&t.reloadedFileGuids.push(e.newReloadedFile.fileInfo.guid)})),t}changeStatus(e,t,i){switch(t){case TI.PendingUpload:this.reloadFile(e,i);break;case TI.Paused:e.status=TI.Paused;break;case TI.Canceled:this.progressDispatcher.cancelSendingOfLastEvent(),e.abort(!1);break;case TI.Removing:this.progressDispatcher.cancelSendingOfLastEvent(),e.abort(!1),this.files.delete(e.fileInfo.guid);break;default:throw new Error("Status not supported.")}}update(e){super.update(e);const t=e.has("showEmbeddedSelectButton"),i=e.has("externalSelectButtonCssSelector"),n=e.has("visible");this.dotnetHelper&&(t||i||n)&&this.tryDetachSelectButtonClickHandler(e.get("externalSelectButtonCssSelector"))}updated(e){(e.has("acceptedFileTypes")||e.has("multiple"))&&this.prepareInputElement();const t=e.has("showEmbeddedSelectButton")&&this.showEmbeddedSelectButton,i=e.has("externalSelectButtonCssSelector")&&this.externalSelectButtonCssSelector,n=e.has("visible");this.dotnetHelper&&(t||i||n)&&this.tryAttachSelectButtonClickHandler()}disconnectedCallback(){super.disconnectedCallback(),this.tryDetachSelectButtonClickHandler()}showFileSelectorDialog(){var e;null===(e=this.getFileInput())||void 0===e||e.click()}}function qI(e,t){var i,n;null===(n=null===(i=XI(e))||void 0===i?void 0:i.initDotNetReference)||void 0===n||n.call(i,t)}function YI(e){var t;return(null===(t=XI(e))||void 0===t?void 0:t.getRecentlyAddedFileInfosStream())||null}function XI(e){return e.isConnected?e:null}C([An({attribute:xI.acceptedFileTypes,type:Array})],GI.prototype,"acceptedFileTypes",void 0),C([An({attribute:xI.validateByAcceptedFileTypes,type:Boolean,converter:{fromAttribute:(e,t)=>"True"===e||""===e||"true"===e,toAttribute:(e,t)=>e?"True":"False"}})],GI.prototype,"validateByAcceptedFileTypes",void 0),C([An({attribute:xI.allowedFileExtensions,type:Array})],GI.prototype,"allowedFileExtensions",void 0),C([An({attribute:xI.externalSelectButtonCssSelector})],GI.prototype,"externalSelectButtonCssSelector",void 0),C([An({attribute:xI.showEmbeddedSelectButton,type:Boolean})],GI.prototype,"showEmbeddedSelectButton",void 0),C([An({attribute:xI.chunkSize,type:Number})],GI.prototype,"chunkSize",void 0),C([An({attribute:xI.maxFileSize,type:Number})],GI.prototype,"maxFileSize",void 0),C([An({attribute:xI.minFileSize,type:Number})],GI.prototype,"minFileSize",void 0),C([An({attribute:xI.maxFileCount,type:Number})],GI.prototype,"maxFileCount",void 0),C([An({attribute:xI.multiple,type:Boolean})],GI.prototype,"multiple",void 0),C([An({attribute:xI.uploadMode,type:Number})],GI.prototype,"uploadMode",void 0),C([An({attribute:xI.uploadTechnology,type:Number})],GI.prototype,"uploadTechnology",void 0),C([An({attribute:xI.dragOverClassName})],GI.prototype,"dragOverClassName",void 0),C([An({attribute:xI.dropZoneCssSelector})],GI.prototype,"dropZoneCssSelector",void 0),C([An({attribute:xI.customizeFormData,type:Boolean})],GI.prototype,"customizeFormData",void 0),C([An({attribute:xI.visible,type:Boolean})],GI.prototype,"visible",void 0);customElements.define("dxbl-upload",class extends GI{constructor(){super(),this.uploaders=new Map,this.uploadPromises=new Set,this.pendingFiles=new Array}processUploadedFilesOptionsCore(e){for(const t of e)t.status===TI.PendingUpload&&t.uploadStartOptions&&this.onUploadStartCallback(t.uploadStartOptions,t.customFormDataOptions)}onUploadStartCallback(e,t){const{guid:i,requestJSOptions:n}=e,s=this.files.get(i);s&&(this.attachEventsToFileItem(s),n?this.uploadTechnology!==FI.Http||n.uploadUrl?this.startUpload(s,n,(null==t?void 0:t.customData)||{}):s.error(new EventTarget):s.abort())}startUpload(e,t,i){e.status=TI.PendingUpload,this.scheduleUpload(e,t,i)}handleUploadError(e,t){var i;e&&e.status&&e.statusText&&e.responseText&&(null===(i=t.onError)||void 0===i||i.call(t,e))}scheduleUpload(e,t,i){if(this.uploadPromises.size<10){const n=this.uploadFileCore(e,t,i);this.uploadPromises.add(n),n.catch((t=>this.handleUploadError(t,e))).finally((()=>{this.onAfterUpload(n)}))}else this.pendingFiles.push({file:e,requestOptions:t,customData:i})}onAfterUpload(e){if(this.uploadPromises.delete(e),this.pendingFiles.length>0){const e=this.pendingFiles.shift(),t=e.file,i=this.uploadFileCore(t,e.requestOptions,e.customData);this.uploadPromises.add(i),i.catch((e=>this.handleUploadError(e,t))).finally((()=>{this.onAfterUpload(i)}))}}getUploadStrategy(e){const t=this.chunkSize>0?new RI(this):new LI(this),i=this.uploaders.get(e.fileInfo.guid);return(i!==t&&e.status!==TI.Uploading||!i)&&this.uploaders.set(e.fileInfo.guid,t),this.uploaders.get(e.fileInfo.guid)}uploadFileCore(e,t,i){return this.getUploadStrategy(e).upload(e,t,i,(e=>(e.loadEnd(),e.isUploadComplete()||e.status!==TI.Uploading?Promise.resolve():this.uploadFileCore(e,t,null))))}onCustomizeFormDataCallback(e){var t;const i=e.fileGuid;null===(t=this.uploaders.get(i))||void 0===t||t.onCustomizeChunkMetadataResponse(e.customData),this.uploaders.delete(i)}});const JI={initDotNetReference:qI,getRecentlyAddedFileInfosStream:YI};customElements.define("dxbl-file-input",class extends GI{processUploadedFilesOptionsCore(e){var t;const i=e.filter((e=>e.status===TI.PendingUpload&&e.uploadStartOptions));for(const e of i){const t=this.files.get(e.fileGuid);t&&(this.attachEventsToFileItem(t),t.loadStart())}const n=i.map((e=>e.fileGuid));n.length&&(null===(t=this.dotnetHelper)||void 0===t||t.invokeMethodAsync("UploadFileViaJsInterop",n))}});const jI={initDotNetReference:qI,getFileBytes:function(e,t){var i,n;return null===(n=null===(i=XI(e))||void 0===i?void 0:i.getFileBytes)||void 0===n?void 0:n.call(i,t)},updateFileStatus:function(e,t,i,n){var s;null===(s=XI(e))||void 0===s||s.updateFileStatus(t,i,n)},getRecentlyAddedFileInfosStream:YI};class ZI extends Kd{constructor(){super(ZI.eventName)}}ZI.eventName=Sy.Carousel+".swipe-start";class eS extends CustomEvent{constructor(e){super(eS.eventName,{detail:new tS(e),bubbles:!0,composed:!0,cancelable:!0})}}eS.eventName=Sy.Carousel+".swipe-end";class tS{constructor(e){this.Direction=e}}class iS extends CustomEvent{constructor(e){super(iS.eventName,{detail:e,bubbles:!0,composed:!0,cancelable:!0})}}iS.eventName=Sy.Carousel+".mouse-scroll";class nS extends CustomEvent{constructor(e){super(nS.eventName,{detail:e,bubbles:!0,composed:!0,cancelable:!0})}}nS.eventName=Sy.Carousel+".shortcut",gt.register(ZI.eventName,(e=>e.detail)),gt.register(eS.eventName,(e=>e.detail)),gt.register(iS.eventName,(e=>{const t=e.detail;return{DeltaX:t.deltaX,DeltaY:t.deltaY,DeltaZ:t.deltaZ,DeltaMode:t.deltaMode}})),gt.register(nS.eventName,(e=>{const t=e.detail;return{Key:t.key,Code:t.code,CtrlKey:t.ctrlKey,AltKey:t.altKey,ShiftKey:t.shiftKey,MetaKey:t.metaKey}}));const sS="none";var rS;!function(e){e[e.None=0]="None",e[e.Touch=1]="Touch",e[e.TouchAndPointer=2]="TouchAndPointer"}(rS||(rS={}));let oS=class extends Es{get content(){return this.querySelector(".dxbl-carousel-content")}constructor(){super(),this.width=0,this.swipingStart=new et(0,0),this.isSwiping=!1,this.lastWheelExecutionTime=null,this.gestureCover=null,this.keyDownHandler=this.onKeyDown.bind(this),this.mouseWheelHandler=this.onMouseWheel.bind(this),this.touchMoveHandler=this.onTouchMove.bind(this),this.pointerDownHandler=this.onPointerDown.bind(this),this.stopSwipingHandler=this.stopSwiping.bind(this),this.cancelSwipingHandler=this.cancelSwiping.bind(this),this.performSwipingHandler=this.performSwiping.bind(this),this.allowMouseWheel=!1,this.animation="",this.activeIndex=-1,this.displayIndex=-1,this.loop=!1,this.swipeMode=rS.Touch,this.resizeObserver=new ResizeObserver((e=>{for(const t of e)this.width=t.contentRect.width}))}moveNext(e=this.animation){var t;if(this.setTransition(e),this.activeIndex===this.displayIndex){const e=this.getTransform(this.activeIndex);this.content&&this.content.style.transform!==e&&this.applyTransform(e)}else{const e=this.getTransform(this.displayIndex);if(this.content&&this.content.style.transform!==e){const i=this.activeIndex;this._moveFast=()=>{var e,t;null===(e=this.content)||void 0===e||e.removeEventListener("transitionend",this._moveFast),this.setTransition(sS),this.applyTransform(this.getTransform(i)),null===(t=this.content)||void 0===t||t.getBoundingClientRect(),this._moveFast=void 0},null===(t=this.content)||void 0===t||t.addEventListener("transitionend",this._moveFast),this.applyTransform(e)}}}createRenderRoot(){return this}updated(e){super.updated(e),e.has("loop")?this.moveNext(sS):e.has("activeIndex")&&(this._moveFast&&this._moveFast(),this.moveNext())}connectedOrContentChanged(){super.connectedOrContentChanged(),this.applyTransform(this.getTransform(this.activeIndex))}connectedCallback(){this.addEventListener("pointerdown",this.pointerDownHandler),this.addEventListener("wheel",this.mouseWheelHandler),this.addEventListener("keydown",this.keyDownHandler),super.connectedCallback(),this.resizeObserver.observe(this)}disconnectedCallback(){var e;this.removeEventListener("pointerdown",this.pointerDownHandler),this.removeEventListener("wheel",this.mouseWheelHandler),this.removeEventListener("keydown",this.keyDownHandler),super.disconnectedCallback(),null===(e=this.resizeObserver)||void 0===e||e.unobserve(this)}onKeyDown(e){if(e.target!==this)return;const t=Be.KeyUtils.getEventKeyCode(e);t!==Be.KeyCode.Left&&t!==Be.KeyCode.Right&&t!==Be.KeyCode.Space||(e.preventDefault(),this.dispatchEvent(new nS(e)))}onMouseWheel(e){if(this.allowMouseWheel){e.preventDefault();const t=new Date;if(this.lastWheelExecutionTime&&t.getTime()-this.lastWheelExecutionTime.getTime()<100)return;this.lastWheelExecutionTime=t,this.dispatchEvent(new iS(e))}}onPointerDown(e){if(0!==e.button)return;if(this.swipeMode===rS.None)return;const t="touch"===e.pointerType;if(this.swipeMode===rS.Touch&&!t)return;const i=e.target;if(i&&(this.content.contains(i)||i.classList.contains("dxbl-carousel-substrate-button"))){if(i instanceof HTMLElement&&(i.isContentEditable||i.hasAttribute("contenteditable"))||i instanceof HTMLInputElement||i instanceof HTMLTextAreaElement||i instanceof HTMLSelectElement){if(!t)return;if(document.activeElement===i)return}this.onStartSwiping(e.clientX,e.clientY)}}onStartSwiping(e,t){this.swipingStart=new et(e,t),document.addEventListener("pointermove",this.performSwipingHandler),document.addEventListener("pointerup",this.stopSwipingHandler),document.addEventListener("pointercancel",this.cancelSwipingHandler),document.addEventListener("touchmove",this.touchMoveHandler,{passive:!1})}stopSwiping(e){this.onStopSwiping(e.clientX)}cancelSwiping(e){this.onStopSwiping(this.swipingStart.x)}onStopSwiping(e){var t;if(this.isSwiping){const i=e-this.swipingStart.x,n=this.width/3,s=Math.abs(i)<n?0:Math.sign(i);this.setTransition(this.animation),(0===s||1===s&&!this.loop&&0===this.activeIndex||-1===s&&!this.loop&&this.activeIndex===this.content.childElementCount-1)&&this.applyTransform(this.getTransform(this.activeIndex)),null===(t=this.gestureCover)||void 0===t||t.remove(),this.isSwiping=!1,this.dispatchEvent(new eS(s))}this.swipingStart=new et(0,0),document.removeEventListener("pointermove",this.performSwipingHandler),document.removeEventListener("pointerup",this.stopSwipingHandler),document.removeEventListener("pointercancel",this.cancelSwipingHandler),document.removeEventListener("touchmove",this.touchMoveHandler)}onTouchMove(e){if(!e.cancelable)return;const t=Math.abs(e.touches[0].clientX-this.swipingStart.x);t>Math.abs(e.touches[0].clientY-this.swipingStart.y)&&t>5&&e.preventDefault()}performSwiping(e){this.isSwiping||(this.isSwiping=!0,this.setTransition(sS),this.gestureCover=document.createElement("div"),this.gestureCover.classList.add("dxbl-gesture-cover"),this.appendChild(this.gestureCover),this.dispatchEvent(new ZI));this.applyTransform(this.getTransform(this.activeIndex,e.clientX-this.swipingStart.x))}getTransform(e,t=0){return`translateX(${-100*e+(0===t?0:Math.min(100,Math.max(-100,Math.round(t/this.width*100))))}%)`}applyTransform(e){this.content&&(this.content.style.transform=e)}setTransition(e){this.content&&(this.content.style.transition=e)}};C([An({attribute:"allow-mouse-wheel",type:Boolean})],oS.prototype,"allowMouseWheel",void 0),C([An({attribute:"animation",type:String})],oS.prototype,"animation",void 0),C([An({attribute:"active-index",type:Number})],oS.prototype,"activeIndex",void 0),C([An({attribute:"display-index",type:Number})],oS.prototype,"displayIndex",void 0),C([An({attribute:"loop",type:Boolean})],oS.prototype,"loop",void 0),C([An({attribute:"swipe-mode",type:rS,converter:NE(rS)})],oS.prototype,"swipeMode",void 0),oS=C([on(Sy.Carousel)],oS);let aS=class extends Es{constructor(){super(...arguments),this._focusInHandler=this.focusIn.bind(this),this._focusOutHandler=this.focusOut.bind(this),this.focusLoop=!1}disconnectedCallback(){super.disconnectedCallback(),this.focusLoop&&this.removeFocusTrapEvents()}updated(e){super.updated(e),e.has("focusLoop")&&this.onFocusLoopUpdated()}onFocusLoopUpdated(){this.focusLoop?(this.addFocusTrapEvents(),this.contains(document.activeElement)&&this.activateFocusTrap()):(this.removeFocusTrapEvents(),this.deactivateFocusTrap())}addFocusTrapEvents(){this.addEventListener("focusin",this._focusInHandler),this.addEventListener("focusout",this._focusOutHandler)}removeFocusTrapEvents(){this.removeEventListener("focusin",this._focusInHandler),this.removeEventListener("focusout",this._focusOutHandler)}focusIn(e){this.contains(e.relatedTarget)||this.activateFocusTrap()}focusOut(e){this.contains(e.relatedTarget)||this.contains(document.activeElement)||this.deactivateFocusTrap()}activateFocusTrap(){Kr.activate(this,!0,!0,!1)}deactivateFocusTrap(){Kr.deactivate(this,!1)}};C([An({type:Boolean,attribute:"focus-loop"})],aS.prototype,"focusLoop",void 0),aS=C([on(Sy.DrawerPanel)],aS);class lS{constructor(e){this.eventTokens=[],this.context=e}attachEventWithContext(e,t,i,n){if(!this.eventTokens||!n||!e)return{item:null,name:null,delegate:null,dispose:()=>{}};const s=i.bind(n);e.addEventListener(t,s);const r={item:e,name:t,delegate:s,dispose:()=>{this.detachEvent(r)}};return this.eventTokens.push(r),r}attachEvent(e,t,i){return this.attachEventWithContext(e,t,i,this.context)}detachEvent(e){if(!this.eventTokens)return null;if(!(e&&e.item&&e.name&&e.delegate))return!1;const t=this.eventTokens.indexOf(e);return t>=0&&(e.item.removeEventListener(e.name,e.delegate),this.eventTokens.splice(t,1),e.item=null,e.delegate=null,e.dispose=()=>{},!0)}dispose(){return!!this.eventTokens&&(this.eventTokens.forEach((function(e){e.item&&e.name&&e.delegate&&(e.item.removeEventListener(e.name,e.delegate),e.item=null,e.delegate=null,e.dispose=()=>{})})),this.eventTokens=[],!0)}}const AS="is-animating",dS="data-items-container";var cS;!function(e){e.None="None",e.Slide="Slide"}(cS||(cS={}));let hS=class extends Es{constructor(){super(),this.isAnimating=!1,this.mutationObserver=null,this._expandedState="False",this._previousNodeCount=null,this._getNodeCount=e=>{var t;return e?this.childElementCount:(null===(t=this.firstElementChild)||void 0===t?void 0:t.childElementCount)||null},this.animationType=cS.None,this.expanded=!1,this.events=new lS(this),this.isRendered=!1,this._expandedState="False"}connectedCallback(){super.connectedCallback(),this.isRendered=!0,this.expanded||this.setElementVisibility(!1)}disconnectedCallback(){super.disconnectedCallback(),this.isRendered=!1}set expandedState(e){const t=this._expandedState;this._expandedState=e,this.expanded="True"===e,this.requestUpdate("expandedState",t),this.isRendered||"True"!==e?this.onExpandedChanged():this.notifyActualExpandedChanged()}get expandedState(){return this._expandedState}onExpandedChanged(){this.applyExpandedStateToElements()}notifyActualExpandedChanged(){this.dispatchEvent(new Event("change",{bubbles:!0}))}get value(){return this.expandedState}applyExpandedStateToElements(){var e,t,i,n;const s=this.expanded;if(this.animationType===cS.None)return this.notifyActualExpandedChanged(),void this.setContainerElementVisibility(s);const r=null===(e=this.firstElementChild)||void 0===e?void 0:e.hasAttribute(dS),o=this._getNodeCount(!r);if(s){if(0===this.childElementCount)return void this.waitForContent(this);if((null===(t=this.firstElementChild)||void 0===t?void 0:t.hasAttribute(dS))&&!o)return void this.waitForContent(this.firstElementChild)}if(s&&this.firstElementChild&&(this._previousNodeCount===o||!r)&&(null===(i=this.mutationObserver)||void 0===i||i.disconnect(),r&&!o))return;this._previousNodeCount=this._getNodeCount(!r);const a=this.token,l=s&&!a?0:this.getContainerStartHeight(s);this.toggleAttribute(AS,!1),a&&(this.style.maxHeight=l+"px");const A=this.getContainerEndHeight(s);if(null===(n=this.token)||void 0===n||n.dispose(),this.token=null,this.prepareElementsForAnimation(s,0,!!a),l!==A){const e=()=>{this.onAnimationComplete(),this.token.dispose(),this.token=null};this.startAnimation(l,A,(()=>{e()}))}else this.onAnimationComplete()}waitForContent(e){var t;null===(t=this.mutationObserver)||void 0===t||t.disconnect(),this.mutationObserver=new MutationObserver((e=>{this.applyExpandedStateToElements()})),this.mutationObserver.observe(e,{childList:!0})}setContainerElementVisibility(e){this.setElementVisibility(e)}setElementVisibility(e){e?(this.style.display="",this.style.height=""):(this.style.display="none",this.style.height="0px")}getContainerStartHeight(e){return e?this.getClearClientHeight():this.offsetHeight}getContainerEndHeight(e){if(!e)return 0;const t=this.getClearClientHeight(),i=this.getElementVisibility(!1);this.style.maxHeight="",this.setElementVisibility(!0);const n=this.getClearClientHeight();return this.setElementVisibility(i),this.style.maxHeight=t+"px",n}prepareElementsForAnimation(e,t,i){if(this.style.overflow="hidden",e)this.setContainerElementVisibility(!0),this.style.maxHeight=(i?0:this.getClearClientHeight())+"px";else{const e=this.offsetHeight+t;e>=0&&this.setOffsetHeight(e,null)}}getClearClientHeight(){return this.offsetHeight}getElementVisibility(e){if(e){const e=T.DomUtils.getCurrentStyle(this);if(e)return"none"!==e.display}return"none"!==this.style.display}setOffsetHeight(e,t){t||(t=T.DomUtils.getCurrentStyle(this));let i=e-T.DomUtils.pxToInt(t.marginTop)-T.DomUtils.pxToInt(t.marginBottom);i-=zt(this,t),i>-1&&(this.style.maxHeight=i+"px")}startAnimation(e,t,i){this.isAnimating=!0,e!==t?(this.token=this.events.attachEvent(this,"transitionend",i),Gt((()=>{this.isAnimating&&(this.toggleAttribute(AS,!0),setTimeout((()=>this.style.maxHeight=t+"px")))}))):i()}onAnimationComplete(){this.toggleAttribute(AS,!1),this.setContainerElementVisibility(this.expanded),Zt((()=>{this.style.overflow="",this.style.maxHeight=""})),this.notifyActualExpandedChanged(),this.checkChildContent()}checkChildContent(){if(!this.expanded&&0!==this.childElementCount&&null!==this.firstElementChild&&this.firstElementChild.hasAttribute(dS)){const e=this.querySelectorAll(" ul[data-items-container]");if(!e)return;for(let t=0;t<e.length;t+=1)e[t].style.overflowY="hidden"}}};C([An({type:String,attribute:"expanded-state"})],hS.prototype,"expandedState",null),C([An({type:cS,attribute:"animation-type"})],hS.prototype,"animationType",void 0),C([dn()],hS.prototype,"expanded",void 0),hS=C([on(Sy.ExpandableContainer)],hS);class uS{}var pS;uS.Root=he.Prefix+"-fl",uS.Loading=uS.Root+"-loading",uS.RowBreak=uS.Root+"-row-break",uS.Group=uS.Root+"-group",uS.GroupBody=uS.Group+"-body",uS.GroupDecoration=uS.Root+"-gd",uS.GroupTab=uS.Root+"-gt",uS.GroupHeaderTemplate=uS.Root+"-group-header-tmpl",uS.Item=uS.Root+"-item",uS.TabItem=uS.Root+"-tab-item",uS.Caption=uS.Root+"-cpt",uS.EmptyCaption=uS.Root+"-empty-caption",uS.BeginRow=uS.Root+"-begin-row",uS.TabContent=uS.Root+"-tab-content",uS.ItemContentWithCaption=uS.Root+"-ctrl",uS.ItemContentWithoutCaption=uS.Root+"-ctrl-nc",uS.ItemHorizontal=uS.Root+"-item-horizontal",uS.HeaderContentTemplate=uS.Root+"-header-content-tmpl",uS.CaptionTemplate=uS.Root+"-caption-tmpl",uS.ItemCaptionWidthCalculation=uS.Root+"-calc",uS.Row=he.Prefix+"-row",function(e){e.v4="v4",e.v5="v5"}(pS||(pS={}));const mS={};function gS(e){!function(e,t,i){const n=mS[e]||(mS[e]=T.DomUtils.getCurrentStyle(document.body).getPropertyValue(e)||t);if(n){const e=Pt();e&&e.insertRule("@media (min-width: "+n+") {\n"+i+"\n}\n",e.cssRules.length)}}("--breakpoint-lg","992px",e)}var CS,fS;!function(e){e[e.None=0]="None",e[e.InGroups=1]="InGroups",e[e.All=2]="All"}(CS||(CS={})),function(e){e[e.Small=0]="Small",e[e.Medium=1]="Medium",e[e.Large=2]="Large"}(fS||(fS={}));const vS=` > .${uS.Caption}`,bS=e=>`${Sy.FormLayoutItem}[fl-id=${e}].${uS.Item}.${uS.ItemHorizontal}`,wS=/\./g;class yS extends Es{constructor(){super(...arguments),this.captionAlignment=CS.InGroups}get itemSelector(){return` > .${uS.Row} > ${bS(this.mainElementId)}`}get mainElementId(){return this.id}getMainElement(){return document.getElementById(this.mainElementId)}calculateAdaptivityCssRules(){}startCalculationItems(e){const t=this.querySelectorAll(`:scope${` .${e}`}[fl-id=${this.mainElementId}]`);for(let e=0;e<t.length;e++)t[e].calculateAdaptivityCssRules()}updateGroups(){this.startCalculationItems(uS.Group)}updateTabs(){this.startCalculationItems(uS.TabContent)}createAdaptivityCssRules(){var e;let t=0;T.DomUtils.addClassName(this,uS.ItemCaptionWidthCalculation);const i=` .${uS.Group}[fl-id=${this.mainElementId}] .${uS.GroupBody}[expanded-state=False]`,n=null===(e=this.getMainElement())||void 0===e?void 0:e.querySelectorAll(`:scope${i}`),s=e=>{for(let t=0;t<(null==n?void 0:n.length);t++)n[t].style.display=e?"":"none",n[t].style.visibility=e?"hidden":""};s(!0);const r=this.findCaptions();r&&r.length>0&&(t=this.getMaxCaptionWidth(r),this.createAdaptivityCssRulesForElements(t)),s(!1),T.DomUtils.removeClassName(this,uS.ItemCaptionWidthCalculation)}findCaptions(){return[...this.querySelectorAll(`:scope${this.itemSelector}${vS}`)]}createAdaptivityCssRulesForElements(e){this.createCssRulesForElementsInternal(e,!1,!1)}getMaxCaptionWidth(e){let t=0;if(e.length>0){const i=e.find((e=>e.classList.contains(uS.EmptyCaption)));let n="0 px";i&&(n=window.getComputedStyle(i,null).getPropertyValue("height"));for(let i=0;i<e.length;i++){const s=e[i].offsetWidth;this.isEmptyCaption(e[i])&&(e[i].style.height=n);const r=e[i].parentNode;r&&s>t&&s<r.offsetWidth&&(t=s)}}return t>0?t+1:0}isEmptyCaption(e){return e.classList.contains(uS.EmptyCaption)}getFilteredElements(e){return function(e,t){const i=[];for(let n=0;n<e.length;n++){const s=e[n];t&&!t(s)||i.push(s)}return i}(e,(e=>Rt(e,uS.Root)===this))}encodeDotsForMediaQuiery(e){return e.replace(wS,"\\$&")}getAdaptivityCssRulesPrefix(){const e=this.getMainElement();if(!e)return null;let t=`.${uS.Root}`,i=e;for(;i;)t=" #"+this.encodeDotsForMediaQuiery(i.id)+t,i=Rt(i.parentNode,uS.Root);t.slice(1);let n="",s=this;for(;s&&s!==e&&e.contains(s);)s.id&&(n=" #"+this.encodeDotsForMediaQuiery(s.id)+n),s=Rt(s.parentNode,uS.Group);return t+=n,t}createCssRulesForElementsInternal(e,t,i){if(0===e)return;this.itemCaptionWidth=e;const n=this.getAdaptivityCssRulesPrefix(),s=this.captionAlignment===CS.InGroups?this.itemSelector:` ${bS(this.mainElementId)}`;let r=n+s+`${vS} {\n width:`+e+"px;\n}\n";r+=n+s+` > .${uS.ItemContentWithCaption}:not(img):not(.${uS.EmptyCaption} + .${uS.ItemContentWithCaption}):not(.${uS.ItemContentWithoutCaption}) {\n width: calc(100% - `+e+"px);\n}\n",gS(r)}}C([An({attribute:"caption-alignment",type:CS,converter:NE(CS)})],yS.prototype,"captionAlignment",void 0);class BS extends yS{constructor(){super(),this._enchancedCallback=()=>{},this._calculationProcess=null,this.sizeMode=fS.Medium,this._isRendered=!1,this._mutationObserver=new MutationObserver((e=>{this.itemVisibilityChangeHandler(e)})),this._enchancedCallback=()=>this.calculateAdaptivityCssRules(),this._formSizeObserver=new ResizeObserver(this.calculateAdaptivityCssRules.bind(this))}needReasignAttributes(){return!1}connectedCallback(){var e;super.connectedCallback(),(null===(e=window.Blazor)||void 0===e?void 0:e.addEventListener)&&window.Blazor.addEventListener("enhancedload",this._enchancedCallback),this._mutationObserver.observe(this,{childList:!0,subtree:!0}),this._formSizeObserver.observe(this)}disconnectedCallback(){var e;super.disconnectedCallback(),this._isRendered=!1,this._mutationObserver.disconnect(),(null===(e=window.Blazor)||void 0===e?void 0:e.removeEventListener)&&window.Blazor.removeEventListener("enhancedload",this._enchancedCallback),this._formSizeObserver.disconnect()}itemVisibilityChangeHandler(e){if(this._isRendered){const t=e.some((e=>(e.addedNodes.length||e.removedNodes.length)&&e.target.classList.contains("dxbl-row")));t&&this.calculateAdaptivityCssRules()}}willUpdate(e){(e.has("sizeMode")||e.has("captionAlignment"))&&this.calculateAdaptivityCssRules()}findCaptions(){return this.captionAlignment===CS.All?this.getFilteredElements(this.querySelectorAll(`${bS(this.mainElementId)}:not(.${he.Invisible})`+vS)):super.findCaptions()}calculateAdaptivityCssRules(){this._calculationProcess&&clearTimeout(this._calculationProcess),this._calculationProcess=setTimeout((()=>{this.captionAlignment!==CS.None&&this.createAdaptivityCssRules(),this.captionAlignment===CS.InGroups&&(this.updateGroups(),this.updateTabs()),T.DomUtils.removeClassName(this,uS.Loading),this._isRendered=!0}))}}C([An({attribute:"size-mode",type:fS,converter:NE(fS)})],BS.prototype,"sizeMode",void 0);class ES extends yS{constructor(e){super(),this._isMainTabElement=e,this.flId=""}get mainElementId(){return this.flId}calculateAdaptivityCssRules(){this.captionAlignment!==CS.None&&this.createAdaptivityCssRules()}}C([An({attribute:"fl-id",type:String})],ES.prototype,"flId",void 0);class IS extends Es{constructor(){super(),this._currentCaption=null,this.captionFor=null}get useShadowDom(){return!1}_findFormLayout(){let e=this.parentNode;for(;e&&!(e instanceof BS);)e=null==e?void 0:e.parentNode;return e}contentChanged(){var e;super.contentChanged();const t=this.initAndGetCaptionForInput();if((null===(e=this._currentCaption)||void 0===e?void 0:e.innerHTML)!==(null==t?void 0:t.innerHTML)){const e=this._findFormLayout();null==e||e.calculateAdaptivityCssRules()}this._currentCaption=t}initAndGetCaptionForInput(){var e;const t=this.getCaption();if(t&&""!==this.captionFor){const i=this.captionFor||(null===(e=this.getEditorInput())||void 0===e?void 0:e.id);i&&(t.htmlFor=i)}return t}getCaption(){return this.querySelector(`:scope > .${uS.Caption}`)}getEditorInput(){return this.querySelector(`.${Bl.TextEdit} > input, .${Bl.TextEdit} > textarea, .dxbl-checkbox-check-element > input, .${Bl.EditBoxTemplate} input`)}}C([An({attribute:"caption-for"})],IS.prototype,"captionFor",void 0);class SS{}SS.Group=he.Prefix+"-group",SS.Header=SS.Group+"-header",SS.Body=SS.Group+"-body",SS.BodyContent=SS.Body+"-content";let xS=class extends ES{constructor(){super(!0),this.isActiveTab=!1}get itemSelector(){return` > .${uS.Row} > .${uS.TabItem}.${uS.ItemHorizontal}`}willUpdate(e){e.has("isActiveTab")&&this.isActiveTab&&(this.captionAlignment===CS.InGroups&&(this.calculateAdaptivityCssRules(),this.updateTabs(),this.updateGroups()),this.captionAlignment===CS.All&&this.getMainElement().calculateAdaptivityCssRules())}createAdaptivityCssRulesForElements(e){this.createCssRulesForElementsInternal(e,!0,!1)}};C([An({attribute:"is-active-tab",type:Boolean})],xS.prototype,"isActiveTab",void 0),xS=C([on(Sy.FormLayoutTab)],xS);let DS=class extends ES{constructor(){super(!1)}get itemSelector(){const e=` > .${uS.Row} > ${bS(this.flId)}`,t=` > .${SS.Group} > .${SS.Body} > .${SS.BodyContent}${e}`;return this.isMainElementCardGroup()?t:e}isMainElementCardGroup(){return this.classList.contains(uS.GroupDecoration)}createAdaptivityCssRulesForElements(e){this.createCssRulesForElementsInternal(e,!1,this.isMainElementCardGroup())}};DS=C([on(Sy.FormLayoutGroup)],DS);let FS=class extends IS{};FS=C([on(Sy.FormLayoutItem)],FS);let TS=class extends BS{};TS=C([on(Sy.FormLayout)],TS);class HS{}class US extends CustomEvent{constructor(e){super(US.eventName,{detail:e,bubbles:!0,composed:!0,cancelable:!0})}static create(){return new US(new HS)}}US.eventName="dxbl-grid-layout-root-element-base.contentchanged",gt.register(US.eventName,(e=>e.detail));class PS extends Es{constructor(){super(...arguments),this.layoutInfo=""}willUpdate(e){e.has("layoutInfo")&&this.applyLayout()}applyLayout(){if(this.layoutInfo){const e=JSON.parse(this.layoutInfo);for(const t in e)this.style.setProperty(t,`${e[t]}`)}}}C([An({attribute:"layout-info"})],PS.prototype,"layoutInfo",void 0);class QS extends PS{createRenderRoot(){return this.applyLayout(),super.createRenderRoot()}contentChanged(){this.makeChildrenVisible(),this.dispatchEvent(US.create())}restoreState(){super.restoreState(),this.makeChildrenVisible()}makeChildrenVisible(){T.DomUtils.removeClassName(this,he.Invisible)}}let NS=class extends PS{createRenderRoot(){return this}};NS=C([on(Sy.GridLayoutItem)],NS);let RS=class extends QS{};RS=C([on(Sy.GridLayoutRoot)],RS);let LS=class extends Es{};LS=C([on(Sy.GridLayout)],LS);let MS=class extends de{};var kS;MS=C([on(Sy.GroupControl)],MS),function(e){e[e.Horizontal=0]="Horizontal",e[e.Vertical=1]="Vertical"}(kS||(kS={}));class KS{}KS.Splitter=he.Prefix+"-splitter",KS.SplitterPane=KS.Splitter+"-pane",KS.SplitterButton=KS.Splitter+"-button";let OS=class extends Es{constructor(){super(...arguments),this._orientation=null}get isVertical(){return this._orientation===kS.Vertical}get size(){return this.isVertical?this.style.height:this.style.width}set size(e){this.isVertical?this.style.height=e:this.style.width=e}getPanes(){return Array.from(this.querySelectorAll(`:scope > .${KS.SplitterPane}`))}};C([An({type:kS,converter:NE(kS),attribute:"orientation"})],OS.prototype,"_orientation",void 0),OS=C([on(Sy.Splitter)],OS);let _S=class extends Es{constructor(){super(...arguments),this.isFlexible=!1,this.minSize=null,this.maxSize=null}get size(){return this.style.flexBasis}set size(e){this.style.flex=e?`0 0 ${e}`:""}};C([An({type:Boolean,attribute:"is-flexible"})],_S.prototype,"isFlexible",void 0),C([An({type:String,attribute:"min-size"})],_S.prototype,"minSize",void 0),C([An({type:String,attribute:"max-size"})],_S.prototype,"maxSize",void 0),_S=C([on(Sy.SplitterPane)],_S);class VS{constructor(e,t,i){this.prevPaneSize=e,this.nextPaneSize=t,this.splitterSize=i}}class zS{constructor(e,t){this.prevPaneSize=e,this.nextPaneSize=t}}class WS extends CustomEvent{constructor(e){super(WS.eventName,{detail:e,bubbles:!0,composed:!1,cancelable:!0})}}WS.eventName=Sy.Splitter+".separator-dragged";class $S extends CustomEvent{constructor(e){super($S.eventName,{detail:e,bubbles:!0,composed:!1,cancelable:!0})}}$S.eventName=Sy.Splitter+".separator-collapse-toggled",gt.register(WS.eventName,(e=>e.detail)),gt.register($S.eventName,(e=>e.detail));class GS{constructor(e){this.separator=e,this.splitterInitialClientSize=this.getClientSize(this.splitter),this.initialOffsetSizes={splitter:this.getOffsetSize(this.splitter),prevPane:this.getOffsetSize(this.prevPane),nextPane:this.getOffsetSize(this.nextPane)},this.initialInlineSizes={splitter:this.splitter.size,prevPane:this.prevPane.size,nextPane:this.nextPane.size},this.paneMinMaxSizes={prevMin:this.calculateMinMaxSize(this.prevPane.minSize,0),prevMax:this.calculateMinMaxSize(this.prevPane.maxSize,this.splitterInitialClientSize),nextMin:this.calculateMinMaxSize(this.nextPane.minSize,0),nextMax:this.calculateMinMaxSize(this.nextPane.maxSize,this.splitterInitialClientSize)};const t=this.splitter.getPanes().filter((e=>e.isFlexible));this.isLastFlexiblePane={prevPane:1===t.length&&t[0]===this.prevPane,nextPane:1===t.length&&t[0]===this.nextPane||2===t.length&&t.includes(this.prevPane)&&t.includes(this.nextPane)},this.splitter.size=this.toPxString(this.getOffsetSize(this.splitter))}get splitter(){return this.separator.splitter}get nextPane(){return this.separator.nextPane}get prevPane(){return this.separator.prevPane}get accumulatedOffset(){return this.getOffsetSize(this.prevPane)-this.initialOffsetSizes.prevPane}cancel(){this.splitter.size=this.initialInlineSizes.splitter,this.prevPane.size=this.initialInlineSizes.prevPane,this.nextPane.size=this.initialInlineSizes.nextPane}stop(){if(0===this.accumulatedOffset)this.cancel();else{const e=new VS(this.prevPane.size,this.nextPane.size,this.getNewSplitterSize());this.separator.dispatchEvent(new WS(e))}}getNewSplitterSize(){const e=this.splitter.size;return this.splitter.size=this.initialInlineSizes.splitter,this.initialOffsetSizes.splitter===this.getOffsetSize(this.splitter)?"":(this.splitter.size=e,e)}resizePanes(e){const t=this.paneMinMaxSizes.prevMax-this.initialOffsetSizes.prevPane,i=this.initialOffsetSizes.nextPane-this.paneMinMaxSizes.nextMin,n=Math.max(this.paneMinMaxSizes.prevMin-this.initialOffsetSizes.prevPane,this.initialOffsetSizes.nextPane-this.paneMinMaxSizes.nextMax),s=Math.min(t,i);n>s||(e=Math.min(s,Math.max(n,e)),this.setPaneSize(this.prevPane,this.initialOffsetSizes.prevPane+e,this.isLastFlexiblePane.prevPane),this.setPaneSize(this.nextPane,this.initialOffsetSizes.nextPane-e,this.isLastFlexiblePane.nextPane))}setPaneSize(e,t,i){i||(e.size=e.size.includes("%")?t/this.splitterInitialClientSize*100+"%":this.toPxString(t))}toPxString(e){return e+"px"}getOffsetSize(e){return this.splitter.isVertical?e.offsetHeight:e.offsetWidth}getClientSize(e){return this.splitter.isVertical?e.clientHeight:e.clientWidth}calculateMinMaxSize(e,t){return e?this.parseMinMaxSize(e):t}parseMinMaxSize(e){const t=parseFloat(e);return e.includes("%")?t*this.splitterInitialClientSize/100:t}}var qS;let YS=qS=class extends Es{constructor(){super(...arguments),this.allowCollapse=!1,this.allowResize=!1,this._pointerEventsHelper=new q(this),this._dragStartHandler=this.onDragStart.bind(this),this._dragCancelHandler=this.onDragCancel.bind(this),this._dragStopHandler=this.onDragStop.bind(this),this._keyDownResizeHandler=this.onKeyDownResize.bind(this),this._keyUpResizeHandler=this.onKeyUpResize.bind(this),this._keyDownCollapseHandler=this.onKeyDownCollapse.bind(this),this._dblClickCollapseHandler=this.onDblClickCollapse.bind(this)}disconnectedCallback(){super.disconnectedCallback(),this.allowResize&&this.disposeResizing(),this.allowCollapse&&this.disposeCollapsing()}updated(e){super.updated(e),e.has("allowResize")&&(this.allowResize?this.initializeResizing():this.disposeResizing()),e.has("allowCollapse")&&(this.allowCollapse?this.initializeCollapsing():this.disposeCollapsing())}get splitter(){return this.closest(Sy.Splitter)}get prevPane(){return this.previousElementSibling}get nextPane(){return this.nextElementSibling}initializeResizing(){this._pointerEventsHelper.initialize(),this.addEventListener(a.eventName,this._dragStartHandler),this.addEventListener(A.eventName,this._dragCancelHandler),this.addEventListener(l.eventName,this._dragStopHandler),this.addEventListener("keydown",this._keyDownResizeHandler),this.addEventListener("keyup",this._keyUpResizeHandler)}disposeResizing(){this._pointerEventsHelper.dispose(),this.removeEventListener(a.eventName,this._dragStartHandler),this.removeEventListener(A.eventName,this._dragCancelHandler),this.removeEventListener(l.eventName,this._dragStopHandler),this.removeEventListener("keydown",this._keyDownResizeHandler),this.removeEventListener("keyup",this._keyUpResizeHandler)}initializeCollapsing(){this.addEventListener("keydown",this._keyDownCollapseHandler),this.addEventListener("dblclick",this._dblClickCollapseHandler)}disposeCollapsing(){this.removeEventListener("keydown",this._keyDownCollapseHandler),this.removeEventListener("dblclick",this._dblClickCollapseHandler)}onDragStart(e){qS.dragHelper.start(this,e.detail.source),e.stopPropagation()}onDragCancel(e){qS.dragHelper.cancel(),e.stopPropagation()}onDragStop(e){qS.dragHelper.stop(),e.stopPropagation()}onKeyDownResize(e){var t;const i=this.getResizeDirection(e);0!==i&&(null!==(t=this.resizeHelper)&&void 0!==t||(this.resizeHelper=new GS(this)),this.resizeHelper.resizePanes(this.resizeHelper.accumulatedOffset+i*qS.KeyboardResizeStep),this.clearKeyboardResizeTimeout(),e.preventDefault())}onKeyUpResize(e){this.resizeHelper&&0!==this.getResizeDirection(e)&&(this.keyboardResizeTimeoutId=setTimeout((()=>{var e;null===(e=this.resizeHelper)||void 0===e||e.stop(),this.resizeHelper=void 0,this.clearKeyboardResizeTimeout()}),qS.KeyboardResizeTimeout))}getResizeDirection(e){var t;const i=Be.KeyUtils.getEventKeyCode(e);if(null===(t=this.splitter)||void 0===t?void 0:t.isVertical){if(i===Be.KeyCode.Up)return-1;if(i===Be.KeyCode.Down)return 1}else{if(i===Be.KeyCode.Left)return-1;if(i===Be.KeyCode.Right)return 1}return 0}clearKeyboardResizeTimeout(){this.keyboardResizeTimeoutId&&(clearTimeout(this.keyboardResizeTimeoutId),delete this.keyboardResizeTimeoutId)}onKeyDownCollapse(e){Be.KeyUtils.getEventKeyCode(e)===Be.KeyCode.Enter&&(this.toggleCollapsed(),e.preventDefault())}onDblClickCollapse(e){this.toggleCollapsed(),e.preventDefault()}toggleCollapsed(){var e;const t=(null===(e=this.splitter)||void 0===e?void 0:e.isVertical)?new zS(this.prevPane.offsetHeight,this.nextPane.offsetHeight):new zS(this.prevPane.offsetWidth,this.nextPane.offsetWidth);this.dispatchEvent(new $S(t))}get handlePointerEventsMode(){return r.Dragging}get handlePointerEventsTarget(){return this}get hoverTitleElementsSelector(){return null}get bypassNonInlineHoverTitleElementChildSelector(){return null}shouldProcessPointerEvent(e){return!e.target.closest(`.${KS.SplitterButton}`)}handlePointerEventsDelay(e){return s.Default}};YS.KeyboardResizeTimeout=500,YS.KeyboardResizeStep=5,YS.dragHelper=new class extends NA{cancel(){this.splitterDragContext.resizeHelper.cancel(),super.stop()}stop(){this.splitterDragContext.resizeHelper.stop(),super.stop()}getDraggableElement(e){return document.createElement("div")}hideDraggableElement(){}get splitterDragContext(){return this.draggableContext}createDraggableContext(e,t,i){const n=e;return{...super.createDraggableContext(e,t,i),resizeHelper:new GS(n),isVertical:n.splitter.isVertical}}refreshUICore(){if(super.refreshUICore(),!this.splitterDragContext)return;this.splitterDragContext.resizeHelper.resizePanes(this.splitterDragContext.isVertical?this.splitterDragContext.currentCursorPosition.y-this.splitterDragContext.initialCursorPosition.y:this.splitterDragContext.currentCursorPosition.x-this.splitterDragContext.initialCursorPosition.x)}},C([An({type:Boolean,attribute:"allow-collapse"})],YS.prototype,"allowCollapse",void 0),C([An({type:Boolean,attribute:"allow-resize"})],YS.prototype,"allowResize",void 0),YS=qS=C([on(Sy.SplitterSeparator)],YS);let XS=class extends PS{};XS=C([on(Sy.StackLayoutItem)],XS);let JS=class extends QS{};JS=C([on(Sy.StackLayoutRoot)],JS);let jS=class extends Es{};jS=C([on(Sy.StackLayout)],jS);var ZS;let ex=ZS=class extends Es{constructor(){super(...arguments),this.boundOnDragStartHandler=this.handleDragStart.bind(this),this.boundOnDragStopHandler=this.handleDrop.bind(this),this.boundOnDragCancelHandler=this.handleDragEnd.bind(this),this.pointerEventsHelper=new q(this),this.allowReorder=!1,this.index=-1}handleDragStart(e){ZS.draggingHelper.start(this,e.detail.source),e.stopPropagation()}handleDragEnd(e){ZS.draggingHelper.stop(),e.stopPropagation()}handleDrop(e){if(ZS.draggingHelper.isValidTarget(this)){const e=ZS.draggingHelper.getDragIndex(),t=ZS.draggingHelper.getDropIndex();e!==t&&this.dispatchEvent(new Dy(e,t))}ZS.draggingHelper.stop(),e.stopPropagation()}isDraggableTab(){return this.allowReorder}get tabs(){return this.closest(Sy.Tabs)}connectedCallback(){super.connectedCallback(),this.isDraggableTab()&&this.addDragEventSubscriptions()}disconnectedCallback(){this.isDraggableTab()&&this.removeDragEventSubscriptions(),super.disconnectedCallback()}updated(e){e.has("allowReorder")&&this.onAllowTabReorderChanged(),super.updated(e)}addDragEventSubscriptions(){this.addEventListener(a.eventName,this.boundOnDragStartHandler),this.addEventListener(A.eventName,this.boundOnDragCancelHandler),this.addEventListener(l.eventName,this.boundOnDragStopHandler),this.pointerEventsHelper.initialize()}removeDragEventSubscriptions(){this.removeEventListener(a.eventName,this.boundOnDragStartHandler),this.removeEventListener(A.eventName,this.boundOnDragCancelHandler),this.removeEventListener(l.eventName,this.boundOnDragStopHandler),this.pointerEventsHelper.dispose()}onAllowTabReorderChanged(){this.isDraggableTab()?this.addDragEventSubscriptions():this.removeDragEventSubscriptions()}get handlePointerEventsMode(){return r.Dragging}get handlePointerEventsTarget(){return this}get hoverTitleElementsSelector(){return null}get bypassNonInlineHoverTitleElementChildSelector(){return null}shouldProcessPointerEvent(e){return!e.target.closest(`.${Iy.CloseButton}`)}handlePointerEventsDelay(e){return s.Default}};ex.draggingHelper=new class extends NA{constructor(){super(...arguments),this.dragIndex=-1,this.dropIndex=-1,this.dxTabs=null,this.tabsUl=null,this.dxTabItems=null,this.dropTargetIndicator=null,this.restoreDisabled=!1,this.boundOnScroll=this.onScroll.bind(this)}start(e,t){var i;this.dxTabs=e.tabs,this.tabsUl=e.closest("ul"),this.dxTabItems=Array.from(this.tabsUl.querySelectorAll(`:scope > li > .${Iy.Item}`)),this.dragIndex=this.dxTabItems.indexOf(e),this.dropIndex=this.dragIndex,super.start(e,t),this.dropTargetIndicator=this.addDropTargetIndicator(),this.dxTabs.classList.add(he.Dragging),document.body.classList.add(he.GrabbingCursor),e.classList.contains(he.Disabled)||(e.classList.add(he.Disabled),this.restoreDisabled=!0);const n=this.dxTabs.scrollViewer;n&&(n.startAutoScrolling(this.dxTabs.isVertical?Re.Vertical:Re.Horizontal),null===(i=this.dxTabs.scrollViewerContentContainer)||void 0===i||i.addEventListener("scroll",this.boundOnScroll)),document.addEventListener("wheel",this.boundOnScroll)}stop(){var e,t;const i=this.draggableContext.srcElement;super.stop(),this.removeDropTargetIndicator(),this.dxTabs.classList.remove(he.Dragging),this.restoreDisabled&&(i.classList.remove(he.Disabled),this.restoreDisabled=!1),document.body.classList.remove(he.GrabbingCursor);this.dxTabs.scrollViewer&&(null===(e=this.dxTabs.scrollViewer)||void 0===e||e.stopAutoScrolling(),null===(t=this.dxTabs.scrollViewerContentContainer)||void 0===t||t.removeEventListener("scroll",this.boundOnScroll)),document.removeEventListener("wheel",this.boundOnScroll),this.dxTabs=null,this.tabsUl=null,this.dxTabItems=null,this.dragIndex=-1,this.dropIndex=-1}isValidTarget(e){return this.dxTabs===e.tabs}getDragIndex(){return Number(this.dxTabItems[this.dragIndex].index)}getDropIndex(){return Number(this.dxTabItems[this.dropIndex].index)}getDraggableElement(e){const t=e.getBoundingClientRect(),i=e.cloneNode(!0);return i.id="",i.style.position="fixed",i.style.top=`${t.top}px`,i.style.left=`${t.left}px`,i.classList.add(he.Dragging),e.parentElement.insertBefore(i,e),i}hideDraggableElement(){super.hideDraggableElement(),this.draggableContext.dragableElement.remove()}addDropTargetIndicator(){const e=document.createElement("div");return e.classList.add(he.DropTargetIndicator,he.Invisible),this.tabsUl.parentElement.insertBefore(e,null),e}removeDropTargetIndicator(){this.dropTargetIndicator.remove(),this.dropTargetIndicator=null}showDropTargetIndicator(){this.dropTargetIndicator.classList.remove(he.Invisible)}hideDropTargetIndicator(){this.dropIndex=this.dragIndex,this.dropTargetIndicator.classList.add(he.Invisible)}onScroll(){this.hideDropTargetIndicator()}onDocumentScroll(e){super.onDocumentScroll(e),this.onScroll()}onDocumentMouseMove(e){if(super.onDocumentMouseMove(e),e.target===this.dropTargetIndicator)return;const t=e.target.closest(`.${Iy.Item}`);t&&this.isValidTarget(t)?(this.updateDropIndex(e,t),this.updateDropTargetIndicatorPosition()):this.hideDropTargetIndicator()}updateDropIndex(e,t){var i;const n=this.dxTabItems.indexOf(t);let s,r;const o=t.getBoundingClientRect();(null===(i=this.dxTabs)||void 0===i?void 0:i.isVertical)?(r=o.y+o.height/2,s=e.clientY):(r=o.x+o.width/2,s=e.clientX),this.dropIndex=s>r?n+1:n,this.dragIndex<this.dropIndex&&(this.dropIndex=this.dropIndex-1)}updateDropTargetIndicatorPosition(){if(this.dragIndex===this.dropIndex)return void this.hideDropTargetIndicator();this.showDropTargetIndicator();const e=this.dxTabItems[this.dropIndex].getBoundingClientRect();let t=e.y,i=e.x;this.dragIndex<this.dropIndex&&(this.dxTabs.isVertical?t+=e.height-this.dropTargetIndicator.offsetHeight:i+=e.width-this.dropTargetIndicator.offsetWidth),this.dropTargetIndicator.style.top=`${t}px`,this.dropTargetIndicator.style.left=`${i}px`,this.dxTabs.isVertical?this.dropTargetIndicator.style.width=`${e.width}px`:this.dropTargetIndicator.style.height=`${e.height}px`}updateDraggableElementPosition(){if(super.updateDraggableElementPosition(),!this.draggableContext)return;const e=this.draggableContext;e.draggableElementPosition={x:e.draggableElementPosition.x-e.draggableElementOffset.x,y:e.draggableElementPosition.y-e.draggableElementOffset.y}}},C([An({type:Boolean,attribute:"allow-reorder"})],ex.prototype,"allowReorder",void 0),C([An({type:Number,attribute:"index"})],ex.prototype,"index",void 0),ex=ZS=C([on(Sy.TabItem)],ex);class tx{}var ix,nx,sx,rx;tx.Toolbar=he.Prefix+"-toolbar",tx.ToolbarItem=tx.Toolbar+"-item",tx.ToolbarEdit=tx.Toolbar+"-edit",tx.ToolbarTitle=tx.Toolbar+"-title",tx.ToolbarPlaceholder=tx.Toolbar+"-placeholder",tx.ToolbarGroup=tx.Toolbar+"-group",tx.ToolbarGroupSeparator=tx.ToolbarGroup+"-separator",tx.ToolbarDefaultLayer="default",tx.ToolbarHiddenItem=tx.Toolbar+"-hidden-item",tx.ToolbarItemCollapsed=tx.ToolbarItem+"-collapsed",tx.ToolbarNoItemText=tx.Toolbar+"-no-item-text",tx.ToolbarHasEllipsis=tx.Toolbar+"-has-ellipsis",tx.ButtonToolbar=he.Prefix+"-btn-toolbar",tx.ButtonPlainToolbar=he.Prefix+"-btn-plain-toolbar",tx.ButtonEllipsis=tx.Toolbar+"-btn-ellipsis",tx.ToolbarAdaptive=tx.Toolbar+"-adaptive",tx.AdaptiveItem=tx.ToolbarAdaptive+"-item",tx.AdaptiveItemText=tx.AdaptiveItem+"-text",tx.AdaptiveItemAllHidden=tx.AdaptiveItem+"-all-hidden",tx.AdaptiveItemHidden=tx.AdaptiveItem+"-hidden",tx.AdaptiveItemTextHidden=tx.AdaptiveItemText+"-hidden",tx.AdaptivePreviewImage=tx.AdaptiveItem+"-preview-image",tx.DropDownToggle=tx.Toolbar+"-dropdown-toggle",tx.Loading=he.Prefix+"-loading",tx.Loaded=he.Prefix+"-loaded",tx.VirtualToolbar=he.Prefix+"-virtual-toolbar",tx.VirtualToolbarItem=tx.VirtualToolbar+"-item",function(e){e.Default="Default",e.AllTabs="AllTabs",e.OnDemand="OnDemand"}(ix||(ix={})),function(e){e.Auto="Auto",e.NavButtons="NavButtons",e.Swipe="Swipe",e.NoScroll="NoScroll"}(nx||(nx={})),function(e){e.Small="Small",e.Medium="Medium",e.Large="Large"}(sx||(sx={})),function(e){e.Top="Top",e.Bottom="Bottom",e.Left="Left",e.Right="Right"}(rx||(rx={}));const ox={};var ax,lx;ox.getIsParent=function(e,t){if(!e||!t)return!1;for(;t;){if(t===e)return!0;if("BODY"===t.tagName)return!1;t=t.parentNode}return!1},ox.getChildElementNodes=function(e){return e?T.DomUtils.getChildNodes(e,(function(e){return 1===e.nodeType})):null},ox.getChildElementNodesByPredicate=function(e,t){return e?t?T.DomUtils.getChildNodes(e,(function(e){return 1===e.nodeType&&t(e)})):ox.getChildElementNodes(e):null},ox.getChildByClassName=function(e,t,i){if(null!=e){return Tt(T.DomUtils.getChildNodesByClassName(e,t),i)}return null},ox.elementMatchesSelector=function(e){return t=e.matches||e.matchesSelector||e.webkitMatchesSelector||e.mozMatchesSelector||e.msMatchesSelector||e.oMatchesSelector,function(e,i){return!!e&&!!i&&t.call(e,i)};var t}(Element.prototype),function(e){e[e.None=0]="None",e[e.Back=1]="Back",e[e.Forward=2]="Forward"}(ax||(ax={}));class Ax{static calculate(e,t,i,n,s,r){const o=t?i.height:i.width,a=t?n.bottom:n.right,l=t?n.top:n.left,A=t?i.bottom:i.right,d=t?i.top:i.left,c=r?t?r.bottom:r.right:0,h=s?t?s.top:s.left:0;let u=l-d;switch(e){case ax.Forward:u=Math.round(a-A),0===Math.round(u)&&r&&(u=Math.round(c-A)),u=Math.min(Math.max(0,u),o),0===u&&(u=o);break;case ax.Back:u=Math.round(l)-Math.round(d),0===Math.round(u)&&s&&(u=Math.round(h-d)),u=-Math.min(Math.max(0,Math.abs(u)),o),0===u&&(u=-o);break;default:{const e=l<d,t=a>A;if(!e&&!t)return 0;if(t){const e=r?c-A:0;u=r&&l-e>=d?u=e:a-A}else if(e){const e=-l+d,t=s?-h+d:0;u=s&&a+t<=A?-t:a+e<=A?-e:0}break}}return Math.ceil(u)}}const dx="data-dxtabs-tab-id",cx="data-dxtabs-content-id",hx="tab-count",ux="scroll-mode",px="render-mode",mx="active-tab",gx="size-mode",Cx="tabs-position";let fx=lx=class extends Es{constructor(){super(...arguments),this.mainElementContentWidthSubscription=null,this.contentPanelWidthSubscription=null,this.currentSize={width:null,height:null},this.contentSize={width:null,height:null},this.scrollContainerElement=null,this.canTrackScroll=!1,this.tabListElement=null,this.updateOverflowStateTimeout=0,this.isReady=!1,this.neededCheckSize=!1,this.unsubscribeFocusUtils=null,this.unsubscribe=null,this.onScrollHandler=this.onScroll.bind(this),this.onNextButtonClickHandler=this.onScrollToNext.bind(this),this.onPrevButtonClickHandler=this.onScrollToPrev.bind(this),this.onClickHandler=this.onClick.bind(this),this.tabCount=0,this.scrollMode=nx.Auto,this.renderMode=ix.Default,this.activeTab="",this.sizeMode=sx.Medium,this.tabsPosition=rx.Top}get isVertical(){return this.tabsPosition===rx.Left||this.tabsPosition===rx.Right}get listElement(){return this.tabListElement.getElementsByTagName("ul")[0]}getActiveTab(){return this.querySelector(lx.getSelector(dx,this.activeTab))}getActiveTabContent(){return this.querySelector(lx.getSelector(cx,this.activeTab))}get activeTabIndex(){return Array.from(this.querySelectorAll(`.${Iy.Item}`)).findIndex((e=>e.classList.contains(he.Active)))}get scrollViewer(){return this.querySelector(`.${xe.ClassName}`)}get scrollViewerContentContainer(){return this.tabListElement?T.DomUtils.getNodesByClassName(this.tabListElement,xe.ContentContainerClassName)[0]:null}get prevButton(){var e;return null===(e=this.findScrollContainer())||void 0===e?void 0:e.querySelector(`:scope > .${Iy.ButtonScrollPrev}`)}get nextButton(){var e;return null===(e=this.findScrollContainer())||void 0===e?void 0:e.querySelector(`:scope > .${Iy.ButtonScrollNext}`)}get tabsContentElement(){return this.querySelector(`:scope > .${Iy.ContentPanel}`)}connectedOrContentChanged(){const e=this.querySelector(`:scope > .${Iy.TabList}`);e&&e!==this.tabListElement&&(this.tabListElement=e,this.dispose(),this.subscribeToEvents(),this.initialize(),this.isReady=!0)}disconnectedCallback(){super.disconnectedCallback(),this.disposeEvents(),this.dispose()}disposeEvents(){var e,t;null===(e=this.unsubscribe)||void 0===e||e.call(this),this.unsubscribe=null,null===(t=this.unsubscribeFocusUtils)||void 0===t||t.call(this),this.unsubscribeFocusUtils=null}subscribeToEvents(){if(!this.tabListElement)return;if(this.disposeEvents(),this.scrollMode!==nx.NavButtons&&this.scrollMode!==nx.Swipe)return;const e=this.scrollViewerContentContainer;null==e||e.addEventListener("scroll",this.onScrollHandler),null==e||e.addEventListener("click",this.onClickHandler);const t=this.prevButton;null==t||t.addEventListener("click",this.onPrevButtonClickHandler);const i=this.nextButton;null==i||i.addEventListener("click",this.onNextButtonClickHandler),this.unsubscribe=()=>{null==e||e.removeEventListener("scroll",this.onScrollHandler),null==e||e.removeEventListener("click",this.onClickHandler),null==t||t.removeEventListener("click",this.onPrevButtonClickHandler),null==i||i.removeEventListener("click",this.onNextButtonClickHandler)},this.unsubscribeFocusUtils=Di(this.tabListElement)}dispose(){this.isReady=!1,this.updateOverflowStateTimeout&&(clearTimeout(this.updateOverflowStateTimeout),this.updateOverflowStateTimeout=0),this.mainElementContentWidthSubscription&&ni(this.mainElementContentWidthSubscription),this.contentPanelWidthSubscription&&ni(this.contentPanelWidthSubscription),this.neededCheckSize=!1}activate(e){if(!e)return;const t=document.querySelector(lx.getSelector(dx,e));if(null!=(null==t?void 0:t.parentNode)){const e=this.listElement;for(let i=0;i<this.tabCount;i++)if(ox.getChildByClassName(e.children[i],Iy.Item)===t){this.scrollToIndex(i);break}}}onScroll(e){this.updateOverflowState()}initialize(){Gt((()=>{this.prepareScrollMode(),T.DomUtils.addClassName(this.tabListElement,tx.Loaded),this.checkForOverflow()})),this.mainElementContentWidthSubscription=si(this.tabListElement,(e=>{this.currentSize.width===e.width&&this.currentSize.height===e.height||(this.currentSize={width:e.width,height:e.height},this.checkForOverflow())}));const e=this.tabsContentElement;e&&(this.contentPanelWidthSubscription=si(e,(e=>{this.contentSize.width===e.width&&this.contentSize.height===e.height||(this.contentSize={width:e.width,height:e.height},this.onContentElementResize())})))}onContentElementResize(){this.updateSelectedContent()}updated(e){this.isReady&&((e.has("scrollMode")||e.has("tabCount")||e.has("sizeMode")||e.has("tabsPosition"))&&(Gt((()=>{this.prepareScrollMode(),this.checkForOverflow()})),this.subscribeToEvents()),e.has("activeTab")&&this.activate(this.activeTab),(e.has("renderMode")||e.has("activeTab"))&&this.updateSelectedContent(this.dispatchActiveTabChangedEvent.bind(this)),super.updated(e))}dispatchActiveTabChangedEvent(){this.dispatchEvent(new xy)}queryUpdateOverflowState(e){this.updateOverflowStateTimeout&&clearTimeout(this.updateOverflowStateTimeout),this.updateOverflowStateTimeout=setTimeout((()=>{this.updateOverflowStateTimeout=0,this.updateOverflowState()}),e)}prepareScrollMode(){this.neededCheckSize=!!this.tabListElement&&this.scrollMode===nx.NavButtons}checkForOverflow(){if(!this.neededCheckSize||!this.tabListElement)return;const e=this.isVertical?this.tabListElement.getBoundingClientRect().height-zt(this.tabListElement):this.tabListElement.getBoundingClientRect().width-Vt(this.tabListElement);this.togleScrollState(e-this.calcNeededSize()<=-1)}togleScrollState(e){Gt((()=>{T.DomUtils.toggleClassName(this.tabListElement,Iy.HasOverflow,e),this.canTrackScroll=e,e&&this.queryUpdateOverflowState()}))}calcNeededSize(){var e;const t=null===(e=this.tabListElement)||void 0===e?void 0:e.getElementsByTagName("ul")[0];if(!t)return 0;let i=this.isVertical?zt(t):Vt(t);const n=t.getElementsByTagName("li");for(const e of n)i+=this.isVertical?e.getBoundingClientRect().height+_t(e):e.getBoundingClientRect().width+Ot(e);return i}updateOverflowState(){if(!this.canTrackScroll||this.scrollMode!==nx.NavButtons)return;if(!this.findScrollContainer())return;const e=this.scrollViewerContentContainer;if(!e)return;const[t,i]=this.getScrollAccess(e),n=this.nextButton,s=this.prevButton;Zt((()=>{n&&Kt(n,"disabled",!i),s&&Kt(s,"disabled",!t)}))}getScrollAccess(e){if(this.isVertical){const t=Math.ceil(e.scrollTop);return[t>0,Math.round(e.scrollHeight-t)-Math.round(e.clientHeight)>lx.minScrollStep]}{const t=Math.ceil(e.scrollLeft);return[t>0,Math.round(e.scrollWidth-t)-Math.round(e.clientWidth)>lx.minScrollStep]}}findScrollContainer(){if(!this.scrollContainerElement){if(!this.tabListElement)return null;this.scrollContainerElement=ox.elementMatchesSelector(this.tabListElement,`.${Iy.Scrollable}`)?this.tabListElement:this.tabListElement.querySelector(`.${Iy.Scrollable}`)}return this.scrollContainerElement}onScrollToPrev(e){e.preventDefault();const t=this.findExtremeTabItemIndex(ax.Back);this.scrollToIndex(t,ax.Back)}onScrollToNext(e){e.preventDefault();const t=this.findExtremeTabItemIndex(ax.Forward);this.scrollToIndex(t,ax.Forward)}onClick(e){let t=e.target;for(;t;){if(xt(t,Iy.Item)){const e=t.getAttribute(dx);e&&this.activate(e);break}t=t.parentElement}}getTabElement(e){return this.listElement.querySelectorAll(":scope > li > ."+Iy.Item)[e]}scrollToIndex(e,t=ax.None){var i,n;if(e>-1&&this.scrollViewerContentContainer){const s=e=>e.closest("li"),r=this.getTabElement(e),o=null===(i=s(r))||void 0===i?void 0:i.nextElementSibling,a=null===(n=s(r))||void 0===n?void 0:n.previousElementSibling;this.scrollToTab(r,a,o,t)}}findExtremeTabItemIndex(e){if(e===ax.None)return-1;const t=this.scrollViewerContentContainer;if(!t)return-1;const i=this.listElement.querySelectorAll(":scope > li > ."+Iy.Item),n=this.getContentFrameRect(t),[s,r,o]=e===ax.Forward?[0,this.tabCount,1]:[this.tabCount-1,-1,-1];for(let t=s;t!==r;t+=o){const s=i[t].getBoundingClientRect();if(this.isVertical){if(e===ax.Back&&s.top<n.top||e===ax.Forward&&s.bottom>n.bottom)return t}else if(e===ax.Back&&s.left<n.left||e===ax.Forward&&s.right>n.right)return t}return-1}getContentFrameRect(e){const t=T.DomUtils.getCurrentStyle(e),i=e.querySelector("ul"),n=T.DomUtils.getCurrentStyle(i),s=e.getBoundingClientRect();return new st(s.left+T.DomUtils.pxToInt(t.paddingLeft)+T.DomUtils.pxToInt(t.borderLeftWidth)+T.DomUtils.pxToInt(n.paddingLeft),s.top+T.DomUtils.pxToInt(t.paddingTop)+T.DomUtils.pxToInt(t.borderTopWidth)+T.DomUtils.pxToInt(n.paddingTop),s.width-T.DomUtils.pxToInt(t.paddingRight)-T.DomUtils.pxToInt(t.paddingLeft)-T.DomUtils.pxToInt(t.borderRightWidth)-T.DomUtils.pxToInt(t.borderLeftWidth)-T.DomUtils.pxToInt(n.paddingRight)-T.DomUtils.pxToInt(n.paddingLeft),s.height-T.DomUtils.pxToInt(t.paddingBottom)-T.DomUtils.pxToInt(t.paddingTop)-T.DomUtils.pxToInt(t.borderBottomWidth)-T.DomUtils.pxToInt(t.borderTopWidth)-T.DomUtils.pxToInt(n.paddingBottom)-T.DomUtils.pxToInt(n.paddingTop))}scrollToTab(e,t,i,n){const s=this.scrollViewerContentContainer;if(!s)return;const r=Ax.calculate(n,this.isVertical,this.getContentFrameRect(s),rt.fromDomRect(e.getBoundingClientRect()),t?rt.fromDomRect(t.getBoundingClientRect()):void 0,i?rt.fromDomRect(i.getBoundingClientRect()):void 0);0!==r?this.isVertical?s.scrollTop+=r:s.scrollLeft+=r:s.scrollLeft>0&&n===ax.Back&&(this.isVertical?s.scrollTop=0:s.scrollLeft=0)}updateSelectedContent(e=null){const t=this.tabsContentElement;if(t){const i=this.activeTab?t.querySelector(lx.getSelector(cx,this.activeTab)):null,n=Array.from(t.querySelectorAll(`:scope > .${Iy.Content}${this.activeTab?`:not(${lx.getSelector(cx,this.activeTab)})`:""}`));Gt((()=>{if(i&&(i.style.cssText="",i.setAttribute("data-dx-tab-loaded","")),this.renderMode!==ix.Default){const e=`position:absolute;visibility:hidden;left:-10000px;top:-10000px;width:${t.clientWidth}px;height:${t.clientHeight}px`;n.forEach((t=>{t.style.cssText=e}))}t&&T.DomUtils.addClassName(t,tx.Loaded),e&&setTimeout((()=>e()),0)}))}}static getSelector(e,t){return`[${e}=${t}]`}};fx.minScrollStep=1,C([An({type:Number,attribute:hx})],fx.prototype,"tabCount",void 0),C([An({type:nx,attribute:ux})],fx.prototype,"scrollMode",void 0),C([An({type:ix,attribute:px})],fx.prototype,"renderMode",void 0),C([An({attribute:mx})],fx.prototype,"activeTab",void 0),C([An({attribute:gx})],fx.prototype,"sizeMode",void 0),C([An({attribute:Cx})],fx.prototype,"tabsPosition",void 0),fx=lx=C([on(Sy.Tabs)],fx);class vx extends Mi{constructor(e,t,i){super(t,i),this.tabs=e}queryItems(){return this.queryItemsBySelector(`:scope.${Iy.Item}`)}}class bx extends Mi{constructor(e,t,i){super(t,i),this.tabs=e}queryItems(){return this.queryItemsBySelector(`:scope .${Iy.Item}`)}createItemStrategy(e){return new vx(this.tabs,this.navigator,e)}handleKeyDown(e){const t=Be.KeyUtils.getEventKeyCode(e);if(this.tabs.isVertical){if(t===Be.KeyCode.Down)return this.moveForward(e),!0;if(t===Be.KeyCode.Up)return this.moveBackward(e),!0}else{if(t===Be.KeyCode.Right)return this.moveForward(e),!0;if(t===Be.KeyCode.Left)return this.moveBackward(e),!0}return t===Be.KeyCode.Tab?(e.shiftKey?this.leaveBackward():this.leaveForward(),!0):(t===Be.KeyCode.Delete&&this.performShortcutEvent(e),!1)}moveForward(e){this.moveToNextItem(!0),this.performShortcutEvent(e)}moveBackward(e){this.moveToPrevItem(!0),this.performShortcutEvent(e)}getShortcutContext(){return{TabId:this.getSelectedTabId()}}focusSelectedItem(){var e;((null===(e=document.activeElement)||void 0===e?void 0:e.classList.contains(Iy.Prefix))||this.isTabActive())&&fi.focusElement(this.selectedItemElement)}isTabActive(){var e;return null===(e=document.activeElement)||void 0===e?void 0:e.classList.contains(Iy.Item)}getSelectedTabId(){const e=this.getItem(this.selectedItemIndex);return null==e?void 0:e.getAttribute(dx)}updateSelectedItemByChildElement(e,t=null){if(e===this.targetElement){const e=this.tabs.getActiveTab(),t=this.items.findIndex((t=>t===e));this.updateSelectedItemByIndex(this.validateItemIndex(t))}else super.updateSelectedItemByChildElement(e,t)}}let wx=class extends Es{constructor(){super(...arguments),this.tabs=null,this.tabId=""}connectedOrContentChanged(){if(this.keyboardNavigator=this.querySelector(`:scope > ${Qi}`),this.keyboardNavigator&&"initialized"in this.keyboardNavigator&&!this.keyboardNavigator.initialized){this.tabs=document.querySelector(`#${this.tabId}`);const e=new bx(this.tabs,this.keyboardNavigator,this);this.keyboardNavigator.initialize(this,e)}}initializeKeyboardNavigator(){if(this.keyboardNavigator=this.querySelector(`:scope > ${Qi}`),this.keyboardNavigator&&"initialized"in this.keyboardNavigator&&!this.keyboardNavigator.initialized){const e=new bx(this.tabs,this.keyboardNavigator,this);this.keyboardNavigator.initialize(this,e)}}};var yx;C([An({attribute:"data-dxtabs-id"})],wx.prototype,"tabId",void 0),wx=C([on(Sy.TabList)],wx),function(e){e.Left="left",e.Right="right",e.FitPositionTarget="fitpositiontarget"}(yx||(yx={}));let Bx=class extends UB{constructor(){super(...arguments),this.windowAlignment=yx.Left}get dropFromRight(){return this.windowAlignment===yx.Right}createKeyboardNavigationStrategy(){return new Ha(this.keyboardNavigator,this)}};var Ex,Ix;C([An({type:String,attribute:"window-alignment"})],Bx.prototype,"windowAlignment",void 0),Bx=C([on("dxbl-itemlist-dropdown")],Bx);class Sx{}Ex=Sx,Sx.prefix="dxbl",Sx.invisible=`${Ex.prefix}-invisible`,Sx.menu=`${Ex.prefix}-menu`,Sx.menuItem=`${Ex.prefix}-menu-item`,Sx.menuTitle=`${Ex.menu}-title`,Sx.menuListItem=`${Ex.prefix}-menu-list-item`,Sx.menuItemTemplate=`${Ex.prefix}-menu-item-tmpl`,Sx.menuBar=`${Ex.prefix}-menu-bar`,Sx.menuLoading=`${Ex.prefix}-menu-loading`,Sx.menuItemTextContainer=`${Ex.prefix}-menu-item-text-container`,Sx.navigation=`${Ex.prefix}-menu-item-list`,Sx.menuItemTextHiddenClass=`${Ex.prefix}-menu-text-hidden`,Sx.menuListItemHiddenClass=`${Ex.prefix}-menu-list-item-hidden`,Sx.dropdown=`${Ex.prefix}-menu-dropdown`,Sx.dropdownItem=`${Ex.prefix}-menu-dropdown-item`,Sx.menuNav=`${Ex.prefix}-menu-nav`,Sx.menuNavBar=`${Ex.prefix}-menu-nav-bar`,Sx.subMenuTemplate=`${Ex.prefix}-sub-menu-template`;class xx{}Ix=xx,xx.prefix="dxbl",xx.menuComponentName=Ix.prefix+"-menu",xx.menuItemComponentName=Ix.menuComponentName+"-item",xx.menuNavBarComponentName=Ix.menuComponentName+"-navbar",xx.menuItemsContainerSelector=`.${Sx.menuBar} ul.${Sx.navigation}`,xx.menuItemDataIdAttribute="data-dxmenu-item-id";let Dx=class extends Es{constructor(){super(),this._prevActiveElement=null,this.adaptivePriority=-1,this.canCrop=!1,this.isVisible=!1,this._onButtonFocusInHandler=this.onButtonFocusIn.bind(this),this.subscribeToEvents()}desktopMenuSelector(e){return`${xx.menuComponentName}:has(.${Sx.menuBar} > ul > li[${xx.menuItemDataIdAttribute}=${e}])`}mobileMenuSelector(e){return`${xx.menuComponentName}:has(ul > li[${xx.menuItemDataIdAttribute}=${e}])`}get menu(){return this.getClosestMenu()}getClosestMenu(){return document.querySelector(`${this.desktopMenuSelector(this.id)}, ${this.mobileMenuSelector(this.id)}`)}connectedCallback(){var e;super.connectedCallback();const t=this.menu;t&&t.isDOMAttached&&(null===(e=this.menu)||void 0===e||e.onItemConnected())}disconnectedCallback(){var e;null===(e=this.menu)||void 0===e||e.onItemDisconnected(),super.disconnectedCallback()}isDropDownItem(e){return e.classList.contains(Sx.dropdownItem)}subscribeToEvents(){this.addEventListener("pointerdown",(e=>{e.target instanceof HTMLElement&&this.isDropDownItem(e.target)&&(document.activeElement instanceof HTMLElement&&(this._prevActiveElement=document.activeElement),e.target.addEventListener("focusin",this._onButtonFocusInHandler))}))}onButtonFocusIn(e){e.currentTarget&&(e.currentTarget.removeEventListener("focusin",this._onButtonFocusInHandler),this._prevActiveElement?this._prevActiveElement.focus():e.currentTarget.blur())}};C([An({type:Number,attribute:"adaptive-priority"})],Dx.prototype,"adaptivePriority",void 0),C([An({type:Boolean,attribute:"can-crop"})],Dx.prototype,"canCrop",void 0),Dx=C([on(xx.menuItemComponentName)],Dx);class Fx extends ys{constructor(){super(),this.boundOnDropDownElementChangedHandler=this.onDropDownElementChanged.bind(this),this.boundOnDropDownShownHandler=this.onDropDownShown.bind(this),this.boundOnDropDownClosedHandler=this.onDropDownClosed.bind(this),this.boundOnDropDownPortalElementsChangedHandler=this.onDropDownPortalElementsChanged.bind(this),this.boundSlotChangedHandler=this.onSlotChanged.bind(this),this.dropDownPortal=null,this._dropDownElement=null,this._adaptiveDropDownElement=null}get dropDownElement(){return this._dropDownElement}get useMobileFocusBehaviour(){var e;return(null===(e=this._adaptiveDropDownElement)||void 0===e?void 0:e.adaptivityEnabled)||!1}connectedCallback(){super.connectedCallback(),this.ensureDropDownInfrastructure(),this.addEventListener(Cr.eventName,this.boundOnDropDownElementChangedHandler)}disconnectedCallback(){this.removeEventListener(Cr.eventName,this.boundOnDropDownElementChangedHandler),this.disposeDropDownInfrastructure(),super.disconnectedCallback()}render(){return Xn`
            <slot @slotchange="${this.boundSlotChangedHandler}">
            </slot>
        `}processCapturedKeyDownAsync(e,t){return this.invokeKeyDownServerCommand(e)?(e.preventDefault(),t.handled=!0,Promise.resolve()):super.processCapturedKeyDownAsync(e,t)}processCapturedPointerAsync(e,t){return this.canHandlePointerDown(e)?(t.handled=!0,Promise.resolve()):super.processCapturedPointerAsync(e,t)}canHandlePointerDown(e){return!1}invokeKeyDownServerCommand(e){return!1}onSlotChanged(e){this.disposeDropDownInfrastructure(),this.ensureDropDownInfrastructure()}getDropDownPortal(){if(!this.shadowRoot)return null;const e=this.shadowRoot.querySelector("slot");if(!e)return null;return e.assignedNodes().find((e=>at(e)))}onDropDownElementChanged(e){this.dropDownPortal||this.ensureDropDownInfrastructure(),H.getOriginalSource(e)===this.dropDownPortal&&(this.disposeDropDownElement(),this.ensureDropDownElement())}onDropDownShown(e){this.dropDownElement&&At(this.dropDownElement)&&this.addLogicalChild(this.dropDownElement)}onDropDownClosed(e){this.dropDownElement&&At(this.dropDownElement)&&this.removeLogicalChild(this.dropDownElement)}onDropDownPortalElementsChanged(e){this.ensureDropDownElement()}ensureDropDownInfrastructure(){var e;this.dropDownPortal=this.getDropDownPortal(),null===(e=this.dropDownPortal)||void 0===e||e.addEventListener(Cr.eventName,this.boundOnDropDownPortalElementsChangedHandler),this.ensureDropDownElement()}ensureDropDownElement(){var e,t,i;this.dropDownPortal&&(this._dropDownElement=null===(e=this.dropDownPortal)||void 0===e?void 0:e.popup,null===(t=this._dropDownElement)||void 0===t||t.addEventListener(ao.eventName,this.boundOnDropDownShownHandler),null===(i=this._dropDownElement)||void 0===i||i.addEventListener(lo.eventName,this.boundOnDropDownClosedHandler),this._dropDownElement&&ct(this._dropDownElement)&&(this._adaptiveDropDownElement=this._dropDownElement))}disposeDropDownInfrastructure(){var e;null===(e=this.dropDownPortal)||void 0===e||e.removeEventListener(Cr.eventName,this.boundOnDropDownPortalElementsChangedHandler),this.dropDownPortal=null,this._adaptiveDropDownElement=null,this.disposeDropDownElement()}disposeDropDownElement(){var e,t;null===(e=this._dropDownElement)||void 0===e||e.removeEventListener(ao.eventName,this.boundOnDropDownShownHandler),null===(t=this._dropDownElement)||void 0===t||t.removeEventListener(lo.eventName,this.boundOnDropDownClosedHandler),this._dropDownElement=null}}let Tx=class extends Fx{constructor(){super(),this.desiredWidth=null,this.dropDownWidthSourceResizeObserver=new ResizeObserver(this.onDropDownWidthSourceSizeChanged.bind(this))}connectedCallback(){super.connectedCallback(),this.observeForDropDownWidthSourceElementSize()}disconnectedCallback(){this.dropDownWidthSourceResizeObserver.disconnect(),super.disconnectedCallback()}ensureDropDownElement(){super.ensureDropDownElement(),this.updateDropDownDesiredWidth()}onDropDownWidthSourceSizeChanged(e,t){if(e.length<1)return;this.desiredWidth=e[0].contentRect.width+"px",this.updateDropDownDesiredWidth()}updateDropDownDesiredWidth(){this.dropDownElement&&(this.dropDownElement.desiredWidth=this.desiredWidth)}observeForDropDownWidthSourceElementSize(){this.dropDownWidthSourceResizeObserver.disconnect();const e=this.getDropDownWidthSourceElement();e&&this.dropDownWidthSourceResizeObserver.observe(e)}getDropDownWidthSourceElement(){return this}};Tx=C([on(xx.menuNavBarComponentName)],Tx);class Hx extends CustomEvent{constructor(e){super(Hx.eventName,{bubbles:!0,composed:!0,detail:new Ux(e)})}}Hx.eventName=`${xx.menuComponentName}.collapse-changed`;class Ux{constructor(e){this.collapsed=e}}gt.register(Hx.eventName,(e=>e.detail));class Px{constructor(e){var t;this.menuItem=e,this.id=null!==(t=e.id)&&void 0!==t?t:"",this.width=-1,this.adaptivePriority=e.adaptivePriority,this.canCrop=e.canCrop,this.textElement=null,this.textWidth=-1,this.container=e.closest(`[data-dxmenu-item-id="${this.id}"]`),this.initialize()}canCollapse(){return this.canCrop&&null!==this.textElement}canReduce(){return this.canCollapse()&&!T.DomUtils.hasClassName(this.textElement,Sx.menuItemTextHiddenClass)}canIncrease(){return this.canCollapse()&&T.DomUtils.hasClassName(this.textElement,Sx.menuItemTextHiddenClass)}showTextElement(){this.toggleCssClass(this.textElement,Sx.menuItemTextHiddenClass,!1),this.toggleCssClass(this.container,Sx.menuListItemHiddenClass,!1)}hideTextElement(){this.toggleCssClass(this.textElement,Sx.menuItemTextHiddenClass,!0),this.toggleCssClass(this.container,Sx.menuListItemHiddenClass,!0)}initialize(){let e=0;this.container&&(e=this.calculateChildrenOffsetWidth(this.container));const t=this.menuItem.querySelector(`*:not(${X})`);if(t){e+=this.calculateChildrenOffsetWidth(t);for(let i=0;i<t.children.length;i++){const n=t.children[i],s=this.calculateElementWidth(n);n.matches(`div.${Sx.menuItemTextContainer}`)&&(this.textElement=n,this.textWidth=s),e+=s}}this.width=e}isHTMLElement(e){return!!e.offsetWidth}calculateElementWidth(e){const t=getComputedStyle(e);return(this.isHTMLElement(e)?e.offsetWidth:e.getBoundingClientRect().width)+parseFloat(t.marginLeft)+parseFloat(t.marginRight)}calculateChildrenOffsetWidth(e){const t=T.DomUtils.getCurrentStyle(e);return parseFloat(t.paddingLeft)+parseFloat(t.paddingRight)+parseFloat(t.marginLeft)+parseFloat(t.marginRight)+parseFloat(t.borderLeftWidth)+parseFloat(t.borderRightWidth)}toggleCssClass(e,t,i){e&&e.classList.toggle(t,i)}}class Qx{constructor(e,t){this.width=e,this.minWidth=t}}class Nx{constructor(e){this._currentWidth=0,this._itemsWidth=new Qx(0,0),this._itemsOffset=0,this._collapseToHamburgerWidth=-1,this._menuItemInfos=[],this._resizeObserver=null,this._menuView=e}get isCollapsed(){return this._menuView.isCollapsed}get isVertical(){return this._menuView.isVertical}get canCollapse(){return this._menuView.canCollapse}get collapseToIcons(){return this._menuView.collapseToIcons}get collapseToIconsAll(){return this._menuView.collapseToIconsAll}get collapseToHamburgerMenu(){return this._menuView.collapseToHamburgerMenu}async initialize(e,t){this.unsubsribeFromSizeChanges(),void 0!==t&&this.canCollapse&&(this.collapseToIcons||this.collapseToIconsAll||this.collapseToHamburgerMenu)?(this._menuItemInfos=this.createMenuItemInfos(e),this._currentWidth=t,this.isCollapsed||(this.isVertical?(this._itemsOffset=0,this._itemsWidth=new Qx(Math.max(...this._menuItemInfos.map((e=>e.width))),0),this._collapseToHamburgerWidth=-1):(this._itemsOffset=this._menuView.itemsOffset,this._itemsWidth=new Qx(this.calculateItemsWidth(),this.calculateItemsMinWidth()),this._collapseToHamburgerWidth=this.collapseToIcons||this.collapseToIconsAll?this._itemsWidth.minWidth+this._itemsOffset:this._itemsWidth.width+this._itemsOffset)),this.resize(this._currentWidth),this.subscribeToSizeChanges()):(this.isCollapsed?this._menuView.onCollapseChanged(!1):this.increaseAllItems(),this._menuItemInfos=[])}resize(e){if(this.isCollapsed)(e>this._collapseToHamburgerWidth||!this.collapseToHamburgerMenu)&&this._menuView.onCollapseChanged(!1);else{const t=e-this._currentWidth;if(this.isVertical)this.collapseToIconsAll&&(t<=0&&this._itemsWidth.width>e?this.reduceAllItems():this._itemsWidth.width<e&&this.increaseAllItems());else{if(this.collapseToIcons){let i=this._itemsOffset;this._menuItemInfos.forEach((e=>{i+=e.width,e.canIncrease()&&(i-=e.textWidth)})),t<=0&&i>e?this.reduceItems(e,i):t>=0&&this.increaseItems(e,i)}else if(this.collapseToIconsAll){const i=this._itemsWidth.width+this._itemsOffset;t<=0&&i>e?this.reduceAllItems():t>=0&&i<e&&this.increaseAllItems()}else this.increaseAllItems();this.collapseToHamburgerMenu&&t<=0&&e<this._collapseToHamburgerWidth&&this._menuView.onCollapseChanged(!0)}}this._currentWidth=e}dispose(){this.unsubsribeFromSizeChanges(),this._menuItemInfos=[]}subscribeToSizeChanges(){this.subscribeToRootElementSizeChange()}unsubsribeFromSizeChanges(){this.unsubscribeFromRootElementSizeChange()}subscribeToRootElementSizeChange(){this._resizeObserver=new ResizeObserver((e=>{const t=e[0];t&&this.resize(t.contentRect.width)})),this._resizeObserver.observe(this._menuView.root)}unsubscribeFromRootElementSizeChange(){var e;null===(e=this._resizeObserver)||void 0===e||e.disconnect(),this._resizeObserver=null}createMenuItemInfos(e){const t=[];return e&&(e.forEach((e=>{t.push(new Px(e))})),t.sort(((e,t)=>e.adaptivePriority-t.adaptivePriority))),t}calculateItemsWidth(){let e=0;return this._menuItemInfos.forEach((t=>e+=t.width)),e}calculateItemsMinWidth(){let e=0;return this._menuItemInfos.forEach((t=>{e+=t.width,t.canCollapse()&&(e-=t.textWidth)})),e}reduceItems(e,t){for(let i=this._menuItemInfos.length-1;i>=0&&t>e;i--){const e=this._menuItemInfos[i];e.canReduce()&&(e.hideTextElement(),t-=e.textWidth)}}increaseItems(e,t){for(let i=0;i<this._menuItemInfos.length;i++){const n=this._menuItemInfos[i];if(n.canIncrease()){if(t+n.textWidth>e)break;n.showTextElement(),t+=n.textWidth}}}reduceAllItems(){for(let e=0;e<this._menuItemInfos.length;e++){const t=this._menuItemInfos[e];t.canReduce()&&t.hideTextElement()}}increaseAllItems(){for(let e=0;e<this._menuItemInfos.length;e++){const t=this._menuItemInfos[e];t.canIncrease()&&t.showTextElement()}}}class Rx{constructor(){this._objCaptured=new Tr,this._objReleased=new Tr,this._obj=null}get subject(){return this._obj}capture(e){if(null==e)throw new Error(`Value cannot be ${e}`);null!==this._obj&&this._objReleased.tryReject(`The object ${this._obj} was not released.`),this._objReleased=new Tr,this._obj=e,this._objCaptured.tryResolve(e)}release(){const e=this._obj;this._obj=null,e&&this._objReleased.tryResolve(e),this._objCaptured=new Tr}waitCapture(){return this._objCaptured.promise}waitRelease(){return this._objReleased.promise}}class Lx{constructor(){this._selectedItemIndices=[],this._initialSelectedItem=null,this._initNewState=!1,this._selectedItemIndex=0}get currentLevel(){return this._selectedItemIndices.length}get selectedItemIndex(){return this._selectedItemIndex}updateState(e,t){var i;this._initNewState?(this._selectedItemIndices.push(e),this._selectedItemIndex=this._initialSelectedItem===zx.Last?t-1:0):this._selectedItemIndex=null!==(i=this._selectedItemIndices.pop())&&void 0!==i?i:e}moveToNextLevel(e){this._initNewState=!0,this._initialSelectedItem=e}moveToPrevLevel(){this._initNewState=!1}clearState(){this._selectedItemIndices=[],this._selectedItemIndex=0,this._initNewState=!1,this._initialSelectedItem=zx.First}}class Mx{constructor(){this.allowCount=0}get Allowed(){return this.allowCount>0}allow(){this.allowCount++}disallow(){this.Allowed&&this.allowCount--}reset(){this.allowCount=0}doAllowedAction(e){this.allow();try{e()}finally{this.disallow()}}doAllowedFunc(e){this.allow();try{return e()}finally{this.disallow()}}doIfAllowed(e){this.Allowed&&e()}}function kx(e){return e&&"hasPopup"in e.dataset}function Kx(e){return!!e&&"expanded"in e.dataset}function Ox(e,t){return e.classList.contains(t)}function _x(e){return e.isConnected&&e.matches(":scope:focus-within")}var Vx,zx;!function(e){e[e.Expand=0]="Expand",e[e.Collapse=1]="Collapse",e[e.Execute=2]="Execute"}(Vx||(Vx={}));class Wx extends CustomEvent{constructor(e){super(Wx.eventName,{detail:{action:e},bubbles:!0,composed:!1,cancelable:!0})}}Wx.eventName="dxbl-dropdown.action-request",gt.register(Wx.eventName,(e=>e.detail)),function(e){e[e.First=0]="First",e[e.Last=1]="Last"}(zx||(zx={}));class $x extends Sa{canSwitchToNestedContentMode(){return!0}isImmediatelyClickEnabled(){return!1}updateSelectedItemByIndex(e){e<0&&(e=Math.min(this.selectedItemIndex,this.itemCount-1)),super.updateSelectedItemByIndex(e)}handleKeyDown(e){return!(Be.KeyUtils.getEventKeyCode(e)===Be.KeyCode.Tab&&!this.nestedContentSelected)&&(!!super.handleKeyDown(e)||!this.nestedContentSelected&&this.handleKeyDownCore(e))}focusFirstItem(){this.focusItem(0)}focusLastItem(){this.focusItem(this.itemCount-1)}focusItem(e){Si(this.targetElement),this.updateSelectedItemByIndex(e),this.selectedItemElement.hasAttribute("data-is-templated-item")?this.switchToNestedContent():this.focusSelectedItem()}doClick(e,t){this.raiseClickEvent(e,t.ctrlKey,t.metaKey,t.shiftKey)}onPopupShown(){Ii(this.targetElement),super.onPopupShown()}}class Gx extends $x{constructor(e,t,i=!1){super(e,t,i),this._subMenuHolder=new Rx,this.boundOnPopupKeyboardStrategyCreating=this.onPopupKeyboardStrategyCreating.bind(this),this._shouldRestoreFocus=!1,this.subscribeToEvents()}get subMenuStrategy(){return this._subMenuHolder.subject}canSwitchToNestedContentMode(){return!this.subMenuStrategy}handleKeyDownCore(e){switch(Be.KeyUtils.getEventKeyCode(e)){case Be.KeyCode.Down:return!(e.ctrlKey||e.shiftKey||e.altKey)&&(this.moveToNextItem(!0),!0);case Be.KeyCode.Up:return!(e.ctrlKey||e.shiftKey||e.altKey)&&(this.moveToPrevItem(!0),!0);case Be.KeyCode.Home:return this.selectItem(0),!0;case Be.KeyCode.End:return this.selectItem(this.itemCount-1),!0;case Be.KeyCode.Enter:case Be.KeyCode.Space:return this.selectedItemElement===this.targetElement&&this.switchToNestedContent()||this.doAction(e),!0;case Be.KeyCode.Right:return this.handleRightKey(e);case Be.KeyCode.Left:return this.handleLeftKey(e);default:return!1}}handleRightKey(e){return!(!kx(this.selectedItemElement)||Kx(this.selectedItemElement))&&(this.openSubMenu(zx.First),!0)}handleLeftKey(e){return this.closeSelf(Be.KeyCode.Left)}onSubMenuClosed(e){this._subMenuHolder.subject===e&&this._subMenuHolder.release(),this.navigator.leaveDirection===Ni.None&&this._shouldRestoreFocus&&this.restoreFocus(),this._shouldRestoreFocus=!1}restoreFocus(){this.focusSelectedItem()}onSubMenuShown(e){this._subMenuHolder.capture(e),this._shouldRestoreFocus=this._shouldRestoreFocus||_x(this.targetElement)}waitSubMenuShown(){return this._subMenuHolder.waitCapture()}waitSubMenuClosed(){return this._subMenuHolder.waitRelease()}requestSubMenuOpen(){var e;null===(e=this.selectedItemElement)||void 0===e||e.dispatchEvent(new Wx(Vx.Expand))}requestSubMenuClose(){var e;null===(e=this.selectedItemElement)||void 0===e||e.dispatchEvent(new Wx(Vx.Collapse))}subscribeToEvents(){this.targetElement.addEventListener(Co.eventName,this.boundOnPopupKeyboardStrategyCreating)}onPopupKeyboardStrategyCreating(e){e.detail.factory={createPopup:(e,t)=>this.createSubMenuStrategy(e,t)}}}const qx=`.${Sx.menuItem} > .dxbl-btn, .${Sx.menuItem} > .dxbl-menu-item-tmpl`,Yx=`.${Sx.menuTitle}`,Xx="data-keyboard-navigator-is-ready",Jx="data-is-templated-item",jx="dxbl-btn-split-dropdown",Zx=`.${bB.SplitButton}`;class eD extends Mi{initialize(){super.initialize(),this.targetElement.setAttribute(Xx,"")}updateSelectedItemByIndex(e){e<0&&(e=Math.min(this.selectedItemIndex,this.itemCount-1)),super.updateSelectedItemByIndex(e)}isImmediatelyClickEnabled(){return!1}canSwitchToNestedContentMode(){return!0}handleKeyDown(e){return!!super.handleKeyDown(e)||!this.nestedContentSelected&&this.handleKeyDownCore(e)}isTitle(e){return e.classList.contains(Sx.menuTitle)}needToAddTitle(){const e=this.targetElement.querySelector(Yx);return null!=e&&e.querySelectorAll(k).length>0}handleTabKeyDown(e){return e.shiftKey?this.selectedItemIndex>0&&this.isTitle(this.items[0])?this.selectItem(0):this.leaveBackward():this.isTitle(this.selectedItemElement)?this.selectItem(this.selectedItemIndex+1):this.leaveForward(),!0}}class tD extends eD{constructor(e,t){super(e,t),this.boundOnPopupKeyboardStrategyCreating=this.onPopupKeyboardStrategyCreating.bind(this),this._subMenuHolder=new Rx,this._shouldRestoreFocus=!1,this._allowedToRestoreFocus=!1,this.subscribeToEvents()}get allowedToRestoreFocus(){return this._allowedToRestoreFocus}get shouldRestoreFocus(){return this._shouldRestoreFocus}set shouldRestoreFocus(e){this._shouldRestoreFocus=e}hasMenu(){return kx(this.selectedItemElement)||Ox(this.selectedItemElement,jx)}isMenuExpanded(){return Kx(this.selectedItemElement)||Ox(this.selectedItemElement,jx)&&Kx(this.selectedItemElement.closest(Zx))}subscribeToEvents(){this.targetElement.addEventListener(Co.eventName,this.boundOnPopupKeyboardStrategyCreating)}onPopupKeyboardStrategyCreating(e){e.detail.factory={createPopup:(e,t)=>this.createPopupStrategy(e,t),createModal:(e,t)=>this.createModalStrategy(e,t)}}get subMenuStrategy(){return this._subMenuHolder.subject}canSwitchToNestedContentMode(){return!this.subMenuStrategy}onSubMenuShown(e){this.tryAddLogicalChild(e.targetElement),this._subMenuHolder.capture(e),this.shouldRestoreFocus=this.shouldRestoreFocus||_x(this.targetElement)}onSubMenuClosed(e){this._subMenuHolder.subject===e&&this._subMenuHolder.release(),this.navigator.leaveDirection===Ni.None&&this.shouldRestoreFocus&&this.focusSelectedItem(),this.shouldRestoreFocus=!1,this.tryRemoveLogicalChild(e.targetElement)}closeSubMenu(){}tryAddLogicalChild(e){dt(this.targetElement)&&At(e)&&(e.logicalParent||this.targetElement.addLogicalChild(e))}tryRemoveLogicalChild(e){dt(this.targetElement)&&At(e)&&e.logicalParent===this.targetElement&&this.targetElement.removeLogicalChild(e)}waitSubMenuShown(){return this._subMenuHolder.waitCapture()}waitSubMenuClosed(){return this._subMenuHolder.waitRelease()}async focusSubMenuItemAsync(e){const t=await this.waitSubMenuShown();e===zx.First?t.focusFirstItem():t.focusLastItem()}allowRestoreFocus(){this._allowedToRestoreFocus=!0}disallowRestoreFocus(){this._allowedToRestoreFocus=!1}}class iD extends Gx{constructor(e,t,i,n,s=!1){super(e,t,s),this._focusSemaphore=new Mx,this._menuItemSelector=i,this._parentStrategy=n}get parentStrategy(){return this._parentStrategy}get menuItemSelector(){return this._menuItemSelector}queryItems(){return this.queryItemsBySelector(this._menuItemSelector)}doAction(e){this.doClick(this.selectedItemElement,e),kx(this.selectedItemElement)&&this.focusSubMenuItemAsync(zx.First)}allowRestoreFocus(){}handleKeyDown(e){return this._focusSemaphore.doAllowedFunc((()=>Be.KeyUtils.getEventKeyCode(e)===Be.KeyCode.Right&&this.subMenuStrategy&&_x(this.targetElement)?(this.subMenuStrategy.focusFirstItem(),!0):super.handleKeyDown(e)))}openSubMenu(e){this.openSubMenuAsync(e)}async openSubMenuAsync(e){this.requestSubMenuOpen(),await this.focusSubMenuItemAsync(e)}async focusSubMenuItemAsync(e){const t=await this.waitSubMenuShown();Si(t.targetElement),e===zx.Last?t.focusLastItem():t.focusFirstItem()}closeSubMenu(){this.selectedItemElement.dispatchEvent(new Wx(Vx.Collapse))}handlePopupShown(){this._parentStrategy.onSubMenuShown(this)}handlePopupClosed(){this._parentStrategy.onSubMenuClosed(this)}focusFirstItem(){this.subMenuStrategy?this.subMenuStrategy.focusFirstItem():super.focusFirstItem()}focusLastItem(){this.subMenuStrategy?this.subMenuStrategy.focusLastItem():super.focusLastItem()}focusItem(e){this._focusSemaphore.doAllowedAction((()=>{super.focusItem(e)}))}restoreFocus(){this._focusSemaphore.doAllowedAction((()=>{super.restoreFocus()}))}focusSelectedItem(){this._focusSemaphore.doIfAllowed((()=>{super.focusSelectedItem()}))}hasTransitContainer(e){return e.hasAttribute(Jx)}findFocusableElements(){return fi.findFocusableElements(this.selectedItemElement).filter((e=>!e.classList.contains("dxbl-dropdown-dialog")))}leaveTransitContainer(e){this.parentStrategy.closeSubMenu()}}class nD extends iD{createSubMenuStrategy(e,t){return new sD(e,t,this.menuItemSelector,this,this.hasTransitContainer(t))}closeSelf(e){return!1}}class sD extends iD{createSubMenuStrategy(e,t){return new sD(e,t,this.menuItemSelector,this)}closeSelf(e){return this.parentStrategy.closeSubMenu(),!0}}var rD;!function(e){e[e.Unknown=0]="Unknown",e[e.MoveToNextItem=2]="MoveToNextItem",e[e.MoveToPrevItem=4]="MoveToPrevItem",e[e.MoveToFirstItem=8]="MoveToFirstItem",e[e.MoveToLastItem=16]="MoveToLastItem",e[e.OpenSubMenu=32]="OpenSubMenu",e[e.Execute=64]="Execute",e[e.Leave=128]="Leave"}(rD||(rD={}));class oD extends tD{constructor(e,t){super(e,t),this._keyCodeToCommandMap=this.createKeyCodeToCommandMap()}get menuItemSelector(){return qx}queryItems(){return this.needToAddTitle()?this.queryItemsBySelector(`${qx}, ${Yx}`):this.queryItemsBySelector(qx)}getCommands(e){var t;return null!==(t=this._keyCodeToCommandMap.get(e))&&void 0!==t?t:rD.Unknown}createPopupStrategy(e,t){return new nD(e,t,qx,this,this.hasTransitContainer(t))}hasTransitContainer(e){return e.hasAttribute(Jx)}createModalStrategy(e,t){throw new Error("This strategy type is not supported in the current context.")}moveToNextItem(e=!1){this.isTitle(this.selectedItemElement)||(this.selectedItemIndex<this.itemCount-1?this.selectItem(this.selectedItemIndex+1):e&&!this.isTitle(this.items[0])&&this.selectItem(0))}moveToPrevItem(e=!1){this.isTitle(this.selectedItemElement)||(this.selectedItemIndex>0&&!this.isTitle(this.items[this.selectedItemIndex-1])?this.selectItem(this.selectedItemIndex-1):e&&!this.isTitle(this.items[this.itemCount-1])&&this.selectItem(this.itemCount-1))}handleKeyDownCore(e){switch(this.getCommands(Be.KeyUtils.getEventKeyCode(e))){case rD.MoveToNextItem:return this.subMenuStrategy?this.closeSubMenuAndMoveToNextItem():this.moveToNextItem(!0),!0;case rD.MoveToPrevItem:return this.subMenuStrategy?this.closeSubMenuAndMoveToPrevItem():this.moveToPrevItem(!0),!0;case rD.OpenSubMenu|rD.MoveToLastItem:return!(!kx(this.selectedItemElement)||!_x(this.targetElement))&&(this.subMenuStrategy?this.subMenuStrategy.focusLastItem():this.openSubMenuAndFocusItem(zx.Last),!0);case rD.OpenSubMenu|rD.MoveToFirstItem:return!(!kx(this.selectedItemElement)||!_x(this.targetElement))&&(this.subMenuStrategy?this.subMenuStrategy.focusFirstItem():this.openSubMenuAndFocusItem(zx.First),!0);case rD.MoveToFirstItem:return this.isTitle(this.items[0])?this.itemCount>1&&this.selectItem(1):this.selectItem(0),!0;case rD.MoveToLastItem:return this.isTitle(this.items[this.itemCount-1])?this.itemCount>1&&this.selectItem(this.itemCount-2):this.selectItem(this.itemCount-1),this.selectItem(this.itemCount-1),!0;case rD.Execute:return this.isTitle(this.selectedItemElement)||this.doAction(e),!0;case rD.Leave:return this.subMenuStrategy&&this.requestSubMenuClose(),this.handleTabKeyDown(e);default:return!1}}doAction(e){this.raiseClickEvent(this.selectedItemElement,e.ctrlKey,e.metaKey,e.shiftKey),kx(this.selectedItemElement)&&this.focusSubMenuItemAsync(zx.First)}closeSubMenu(){this.requestSubMenuClose()}closeSubMenuAndMoveToPrevItem(){this.requestSubMenuClose(),this.moveToPrevItem(!0),this.requestSubMenuOpen()}closeSubMenuAndMoveToNextItem(){this.requestSubMenuClose(),this.moveToNextItem(!0),this.requestSubMenuOpen()}openSubMenuAndFocusItem(e){return this.requestSubMenuOpen(),this.focusSubMenuItemAsync(e)}requestSubMenuOpen(){var e;null===(e=this.selectedItemElement)||void 0===e||e.dispatchEvent(new Wx(Vx.Expand))}requestSubMenuClose(){var e;null===(e=this.selectedItemElement)||void 0===e||e.dispatchEvent(new Wx(Vx.Collapse))}}class aD extends oD{createKeyCodeToCommandMap(){return new Map([[Be.KeyCode.Down,rD.MoveToNextItem],[Be.KeyCode.Up,rD.MoveToPrevItem],[Be.KeyCode.Right,rD.OpenSubMenu|rD.MoveToFirstItem],[Be.KeyCode.Left,rD.OpenSubMenu|rD.MoveToLastItem],[Be.KeyCode.Home,rD.MoveToFirstItem],[Be.KeyCode.End,rD.MoveToLastItem],[Be.KeyCode.Enter,rD.Execute],[Be.KeyCode.Space,rD.Execute],[Be.KeyCode.Tab,rD.Leave]])}closeSubMenuAndMoveToNextItem(){this.requestSubMenuClose()}closeSubMenuAndMoveToPrevItem(){this.requestSubMenuClose()}createPopupStrategy(e,t){return new lD(e,t,qx,this,this.hasTransitContainer(t))}}class lD extends iD{createSubMenuStrategy(e,t){return new sD(e,t,this.menuItemSelector,this,this.hasTransitContainer(t))}closeSelf(e){return this.parentStrategy.closeSubMenu(),!0}}class AD extends oD{createKeyCodeToCommandMap(){return new Map([[Be.KeyCode.Right,rD.MoveToNextItem],[Be.KeyCode.Left,rD.MoveToPrevItem],[Be.KeyCode.Down,rD.OpenSubMenu|rD.MoveToFirstItem],[Be.KeyCode.Up,rD.OpenSubMenu|rD.MoveToLastItem],[Be.KeyCode.Home,rD.MoveToFirstItem],[Be.KeyCode.End,rD.MoveToLastItem],[Be.KeyCode.Enter,rD.Execute],[Be.KeyCode.Space,rD.Execute],[Be.KeyCode.Tab,rD.Leave]])}}class dD extends eD{constructor(){super(...arguments),this._levelController=new Lx}get menuLevel(){return this._levelController.currentLevel}initialize(){super.initialize(),this._levelController.updateState(this.selectedItemIndex,this.itemCount),this.selectedItemIndex=this._levelController.selectedItemIndex}queryItems(){return this.needToAddTitle()?this.queryItemsBySelector(`${qx}, .${Sx.subMenuTemplate}, ${Yx}`):this.queryItemsBySelector(`${qx}, .${Sx.subMenuTemplate}`)}moveToNextItem(e=!1){this.isTitle(this.selectedItemElement)||(this.selectedItemIndex<this.itemCount-1?this.selectItem(this.selectedItemIndex+1):e&&!this.isTitle(this.items[0])&&this.selectItem(0))}moveToPrevItem(e=!1){this.isTitle(this.selectedItemElement)||(this.selectedItemIndex>0&&!this.isTitle(this.items[this.selectedItemIndex-1])?this.selectItem(this.selectedItemIndex-1):e&&!this.isTitle(this.items[this.itemCount-1])&&this.selectItem(this.itemCount-1))}handleKeyDownCore(e){switch(Be.KeyUtils.getEventKeyCode(e)){case Be.KeyCode.Down:return this.moveToNextItem(!0),!0;case Be.KeyCode.Up:return this.moveToPrevItem(!0),!0;case Be.KeyCode.Enter:case Be.KeyCode.Space:return this.isTitle(this.selectedItemElement)||(this.raiseClickEvent(this.selectedItemElement,e.ctrlKey,e.metaKey,e.shiftKey),this.selectedItemElement.hasAttribute("data-header")?this.onMoveToPrevLevel():kx(this.selectedItemElement)&&this.onMoveToNextLevel(zx.First)),!0;case Be.KeyCode.Right:return!!kx(this.selectedItemElement)&&(this.performShortcutEvent(e),this.onMoveToNextLevel(zx.First),!0);case Be.KeyCode.Left:return this.menuLevel>0?(this.performShortcutEvent(e),this.onMoveToPrevLevel(),!0):kx(this.selectedItemElement)?(this.performShortcutEvent(e),this.onMoveToNextLevel(zx.Last),!0):this.menuLevel>0&&(this.performShortcutEvent(e),this.onMoveToPrevLevel(),!0);case Be.KeyCode.Tab:return this.handleTabKeyDown(e);default:return!1}}getShortcutContext(){const e=this.menuLevel>0||this.needToAddTitle()?this.selectedItemIndex-1:this.selectedItemIndex;return{level:this.menuLevel,selectedItemIndex:e}}onMoveToNextLevel(e){this._levelController.moveToNextLevel(e)}onMoveToPrevLevel(){this._levelController.moveToPrevLevel()}}const cD=`.${Sx.menuNav} > .${Sx.menuNavBar} > .dxbl-btn`;class hD extends tD{createModalStrategy(e,t){throw new Error("This strategy type is not supported in the current context.")}createPopupStrategy(e,t){return new uD(e,t,this)}queryItems(){return this.needToAddTitle()?this.queryItemsBySelector(`${cD}, ${Yx}`):this.queryItemsBySelector(cD)}handleKeyDownCore(e){if(!this.isTitle(this.selectedItemElement))switch(Be.KeyUtils.getEventKeyCode(e)){case Be.KeyCode.Up:return this.performShortcutEvent(e),this.focusSubMenuItemAsync(zx.Last),!0;case Be.KeyCode.Down:case Be.KeyCode.Enter:case Be.KeyCode.Space:return this.performShortcutEvent(e),this.focusSubMenuItemAsync(zx.First),!0}return Be.KeyUtils.getEventKeyCode(e)===Be.KeyCode.Tab&&(this.performShortcutEvent(e),this.handleTabKeyDown(e))}isImmediatelyClickEnabled(){return!1}}class uD extends $x{constructor(e,t,i){super(e,t),this._itemIdToParentIdMap=new Map,this._parentStrategy=i}initialize(){super.initialize(),this._itemIdToParentIdMap.clear();const e=this.targetElement.querySelector(`.${Sx.navigation}`);e&&this.mapItemsToParent(e,null)}mapItemsToParent(e,t){for(const i of e.children){const e=i.dataset.dxmenuItemId;if(!e)continue;this._itemIdToParentIdMap.set(e,t);const n=Array.from(i.children).find((e=>e instanceof HTMLUListElement));n&&this.mapItemsToParent(n,e)}}queryItems(){return this.queryItemsBySelector(`${qx}, .${Sx.subMenuTemplate}`)}handleKeyDown(e){const t=Be.KeyUtils.getEventKeyCode(e);return!(!this.nestedContentSelected&&t===Be.KeyCode.Tab)&&super.handleKeyDown(e)}handleKeyDownCore(e){switch(Be.KeyUtils.getEventKeyCode(e)){case Be.KeyCode.Down:return this.moveToNextItem(!0),!0;case Be.KeyCode.Up:return this.moveToPrevItem(!0),!0;case Be.KeyCode.Home:return this.focusFirstItem(),!0;case Be.KeyCode.End:return this.focusLastItem(),!0;case Be.KeyCode.Right:return kx(this.selectedItemElement)&&(Kx(this.selectedItemElement)?this.moveToNextItem(!0):this.requestSubMenuOpen()),!0;case Be.KeyCode.Left:if(Kx(this.selectedItemElement))this.requestSubMenuClose();else{const e=this.getParentNode(this.selectedItemElement);e&&(this.updateSelectedItemByChildElement(e),this.focusSelectedItem())}return!0;case Be.KeyCode.Enter:case Be.KeyCode.Space:return this.doClick(this.selectedItemElement,e),!0;default:return!1}}getParentNode(e){var t;const i=null===(t=e.closest(`.${Sx.menuItem}`))||void 0===t?void 0:t.getAttribute("id");if(i){const e=this._itemIdToParentIdMap.get(i);if(e)return this.targetElement.querySelector(`#${e}${qx}`)}return null}requestSubMenuOpen(){var e;null===(e=this.selectedItemElement)||void 0===e||e.dispatchEvent(new Wx(Vx.Expand))}requestSubMenuClose(){var e;null===(e=this.selectedItemElement)||void 0===e||e.dispatchEvent(new Wx(Vx.Collapse))}handlePopupShown(){this._parentStrategy.onSubMenuShown(this)}handlePopupClosed(){this._parentStrategy.onSubMenuClosed(this)}}var pD;!function(e){e[e.Small=0]="Small",e[e.Medium=1]="Medium",e[e.Large=2]="Large"}(pD||(pD={}));let mD=class extends Es{constructor(){super(),this._menuItems=[],this._sizeController=null,this._handlePromise=Promise.resolve(),this._keyboardNavigator=null,this._hasVisibleItems=!1,this.isVertical=!1,this.isCollapsed=!1,this.canCollapse=!1,this.collapseToIcons=!1,this.collapseToIconsAll=!1,this.collapseToHamburgerMenu=!1,this.loadMode=!1,this._hasVisibleItems=!1,this.sizeMode=pD.Medium,this.isMobileMode=!1,this._menuItemsChanged=!1,this._firstUpdate=!0,this._intersectionObserver=new IntersectionObserver(this.onItemsIntersectionChanged.bind(this),{root:this,threshold:[0,1]})}onItemConnected(){this.updateItems()}onItemDisconnected(){this.updateItems()}get hasVisibleItems(){return this._hasVisibleItems}set hasVisibleItems(e){this._hasVisibleItems=e,e&&this._menuItemsChanged&&this.showMenuItems()}async showMenuItems(){var e;this._menuItemsChanged=!1;const t=this.offsetWidth;await(null===(e=this._sizeController)||void 0===e?void 0:e.initialize(this._menuItems,t)),this.toggleItemsContainerCssClasses(Sx.invisible,!1),this.toggleItemsContainerCssClasses(Sx.menuLoading,!1)}updateItems(e=!0){this._menuItems=e?this.collectMenuItems():[],this._intersectionObserver.disconnect(),this._menuItems.forEach((e=>this._intersectionObserver.observe(e))),this._menuItemsChanged=!0}get root(){return this}get items(){return this._menuItems}get itemsOffset(){return this.calculateItemsOffset()}restoreState(){n.setLoaded(this),this.getAttribute("tabindex")||this.initializeKeyboardNavigatior()}connectedCallback(){super.connectedCallback(),this._sizeController=new Nx(this)}disconnectedCallback(){var e;super.disconnectedCallback(),null===(e=this._sizeController)||void 0===e||e.dispose(),this._sizeController=null,this._intersectionObserver.disconnect()}initializeKeyboardNavigatior(){this._keyboardNavigator=this.querySelector(Qi),this._keyboardNavigator&&this._keyboardNavigator.initialize(this,this.createKeyboardStrategy(this._keyboardNavigator))}createKeyboardStrategy(e){return this.isMobileMode?this.isVertical?new dD(e,this):new hD(e,this):this.isVertical?new aD(e,this):new AD(e,this)}async getUpdateComplete(){return await this._handlePromise,super.getUpdateComplete()}firstUpdated(){this._firstUpdate=!1}willUpdate(e){this._handlePromise=this.handleChangedProperties(e,this._firstUpdate)}async handleChangedProperties(e,t){var i;if(this.anyOf(e,"isMobileMode","isVertical")&&this.initializeKeyboardNavigatior(),this.anyOf(e,"canCollapse","isCollapsed","isVertical")){this.updateItems(!this.isCollapsed)}!t&&this.canCollapse&&e.has("sizeMode")&&(this.isCollapsed||(this._menuItemsChanged=!0,this.toggleItemsContainerCssClasses(Sx.invisible,!0)),await(null===(i=this._sizeController)||void 0===i?void 0:i.initialize(this._menuItems))),this.hasVisibleItems&&await this.showMenuItems()}onCollapseChanged(e){this.dispatchEvent(new Hx(e))}anyOf(e,...t){for(const i of t)if(e.has(i))return!0;return!1}collectMenuItems(){const e=this.querySelectorAll(`:scope ${xx.menuItemComponentName}`),t=[];return e&&e.forEach((e=>t.push(e))),t}onItemsIntersectionChanged(e){e.forEach((e=>e.target.isVisible=e.isIntersecting)),this.hasVisibleItems=this._menuItems.filter((e=>e.isVisible)).length>0}toggleItemsContainerCssClasses(e,t){const i=this.querySelector(xx.menuItemsContainerSelector);i&&requestAnimationFrame((()=>i.classList.toggle(e,t)))}calculateItemsOffset(){const e=this.querySelector(xx.menuItemsContainerSelector);return e?e.offsetLeft-this.offsetLeft:0}};C([An({type:Boolean,attribute:"is-vertical"})],mD.prototype,"isVertical",void 0),C([An({type:Boolean,attribute:"is-collapsed"})],mD.prototype,"isCollapsed",void 0),C([An({type:Boolean,attribute:"can-collapse"})],mD.prototype,"canCollapse",void 0),C([An({type:Boolean,attribute:"collapse-to-icons"})],mD.prototype,"collapseToIcons",void 0),C([An({type:Boolean,attribute:"collapse-to-icons-all"})],mD.prototype,"collapseToIconsAll",void 0),C([An({type:Boolean,attribute:"collapse-to-hamburger-menu"})],mD.prototype,"collapseToHamburgerMenu",void 0),C([An({type:Boolean,attribute:"load-mode"})],mD.prototype,"loadMode",void 0),C([An({type:pD,attribute:"size-mode"})],mD.prototype,"sizeMode",void 0),C([An({type:Boolean,attribute:"data-dx-menu-mobile"})],mD.prototype,"isMobileMode",void 0),mD=C([on(xx.menuComponentName)],mD);const gD=document;function CD(e,t,i){const n=gD.querySelectorAll(t),s=n.length;for(let t=0;t<s;t++)e.upgrade(n[t]);e.define(t,i)}class fD extends HTMLElement{constructor(){super()}static get observedAttributes(){return["menu-id"]}attributeChangedCallback(e,t,i){"menu-id"===e&&this.updateAttributes(i)}updateAttributes(e){const t=document.querySelector(`[data-dxmenu-id=${e}]`);if(t){$().isMobileDevice&&t.toggleAttribute("data-dx-menu-mobile",!0),t.toggleAttribute("data-dx-menu-loaded",!0)}}}CD(customElements,"dxbl-menu-preloader",fD);class vD{constructor(e,t){this.toolbarModel=e,this.id=t,this.state="",this._isWidthCalculationLocked=!1,this.index=-1,this.adaptivePriority=0,this._width=0}getWidth(){return this.isVisible()?vF(this.getElement(),!1,cF):0}getNoTextWidth(){return this.getWidth()}isVisible(){return!0}get isWidthCalculationLocked(){return this._isWidthCalculationLocked}updateState(e){this.state=e,this.updateStateCore(e)}updateStateCore(e){}lockWidthCalculation(){this._isWidthCalculationLocked=!0}unlockWidthCalculation(){this._isWidthCalculationLocked=!1}getGroupElement(){return null}reset(){}}class bD extends vD{constructor(e,t){var i,n,s,r,o;super(e,null!==(s=null!==(n=null===(i=t.element)||void 0===i?void 0:i.id)&&void 0!==n?n:t.id)&&void 0!==s?s:"-1"),this.item=t,this.adaptivePriority=null!==(o=null===(r=null==t?void 0:t.adaptivePriority)||void 0===r?void 0:r.value)&&void 0!==o?o:0}getElement(){return this.item.getElement()}updateStateCore(e){this.item.isDisplayed.update(e.indexOf("has-"+this.getName())>-1)}updateVisible(e){e||this.lockWidthCalculation(),this.item.updateVisible(e),e&&this.unlockWidthCalculation()}reset(){const e=this.getElement();e&&e.classList.remove(tx.ToolbarHiddenItem)}}class wD extends bD{constructor(e,t){super(e,t)}getNoTextWidth(){return this.item.isDisplayed.value?function(e){let t=vF(e,!1,cF);if(0===t)return t;if(e){if(e.querySelector(gF))return t;const i=e.querySelector(pF);if(i){const n=e.querySelector(mF);t-=wF(i);let s=i;for(;s=s.nextElementSibling;)!yF(s)&&BF(s)&&s!==n&&(t-=vF(s))}}return t}(this.getElement()):0}getName(){return"item"}isVisible(){return this.item.isDisplayed.value}updateStateCore(e){const t=this.item.toolbar,i=-1===e.indexOf(tx.ToolbarHasEllipsis);this.updateVisible(t.minRootItems>0?i||this.index<t.minRootItems:i)}getGroupElement(){return this.item.getGroupElement()}}class yD extends bD{constructor(e,t){super(e,t)}getName(){return"ellipsis"}updateStateCore(e){super.updateStateCore(e),this.updateVisible(this.item.isDisplayed.value)}reset(){this.updateVisible(!0)}}class BD extends wD{constructor(e,t){super(e,t),this.itemBlocks=[],this.addItem(t)}addItem(e){this.itemBlocks.push(new wD(this.toolbarModel,e))}isVisible(){const e=this.itemBlocks.reduce((function(e,t){return e&&t.isVisible()}),!0);return e}getWidth(){return this.itemBlocks.reduce((function(e,t){return e+t.getWidth()}),0)}getNoTextWidth(){return this.itemBlocks.reduce((function(e,t){return e+t.getNoTextWidth()}),0)}updateVisible(e){this.itemBlocks.forEach((function(t){t.updateVisible(e)}))}tryAddItem(e){const t=this.itemBlocks[this.itemBlocks.length-1].item,i=t.groupName===e.groupName&&t.group===e.group&&t.adaptivePriority.value===e.adaptivePriority.value;return i&&this.addItem(e),i}}class ED extends vD{constructor(e,t,i){super(e,i),this.item=t}getName(){return"title"}getWidth(){return vF(this.getElement(),!1,cF)}getElement(){return this.item.getElement()}}class ID{constructor(e){this.items=[],this.isLocked=!1,this.subscriptions=[],e&&this.addRange(e)}subscribe(e){return this.isLocked||e(this.getChanges(this.items,[])),this.subscriptions.push(e),new bi((()=>{const t=this.subscriptions.indexOf(e);t>-1&&this.subscriptions.splice(t,1)}))}getChanges(e,t){return{addedItems:e||[],removedItems:t||[]}}forEach(e,t){this.items.forEach(e,t)}selectMany(e,t){return this.map(e,t).reduce((function(e,t){return e.concat(t)}),[])}reduce(e,t){return this.items.reduce(e,t)}map(e,t){return this.items.map(e,t)}filter(e,t){return this.items.filter(e,t)}any(){return this.count()>0}count(){return this.items.length}get(e){return this.items[e]}add(e){this.addItemCore(e)&&this.raiseChanges([e],[])}remove(e){this.removeItemCore(e)&&this.raiseChanges([],[e])}addRange(e){this.raiseChanges(e.map(this.addItemCore.bind(this)).filter((function(e){return!!e})),[])}removeRange(e){this.raiseChanges([],e.map(this.removeItemCore.bind(this)).filter((function(e){return!!e})))}addItemCore(e){return this.items.indexOf(e)>-1?null:this.items[this.items.length]=e}removeItemCore(e){const t=this.items.indexOf(e);return-1===t?null:this.items.splice(t,1)[0]}raiseChanges(e,t){const i=this.getChanges(e,t);(i.addedItems.length>0||i.removedItems.length>0)&&this.subscriptions.forEach((function(e){e(i)}))}lock(){this.isLocked=!0}unlock(){this.isLocked=!1}}class SD{constructor(e){this.id=e,this._margins=void 0,this.blocks=[]}push(e){this.blocks.includes(e)||this.blocks.push(e),this.update()}toArray(){return Array.from(this.blocks)}get margins(){return this._margins||0}update(){if(!this._margins&&this.blocks.length){const e=this.blocks[0].getGroupElement();if(e){const t=T.DomUtils.getCurrentStyle(e);this._margins=T.DomUtils.pxToInt(t.marginRight)+T.DomUtils.pxToInt(t.marginLeft)}}}}class xD{constructor(e,t,i){var n;this.layer=e,this.block=t,this.width=0,this._blockCollection=void 0;const s=t.getGroupElement();s&&(this._blockCollection=this.layer.getBlockCollection(s),null===(n=this._blockCollection)||void 0===n||n.push(t)),i.subscribe(t,((e,i=!1)=>{var n;null===e&&(e=null===(n=this.layer.getPrevLayer())||void 0===n?void 0:n.getActualBlocks().filter((function(e){return e.block===t}))[0].width),e!==this.width&&(this.width=null!=e?e:0,i||this.layer.requestUpdateLayoutModel())}))}get blockCollection(){return this._blockCollection||new SD(null)}getMinWidth(){return this.width}getMaxWidth(e){return this.getMinWidth()}}class DD extends xD{getPrevLayerMinWidth(){const e=this.layer.getPrevLayer();return e?e.getActualBlocks().filter((e=>e.block===this.block))[0].getMinWidth():0}getMaxWidth(e){return e===this.layer?this.getPrevLayerMinWidth():this.getMinWidth()}}class FD extends xD{}class TD extends xD{}class HD{constructor(e,t){this.widthCalculator=e,this.triggersResolver=t,this.widthSubscriber=null,this.widthCalculator=e,this.triggersResolver=t}subscribe(e,t){this.widthSubscriber=t;const i=this.widthCalculator.bind(this);this.triggersResolver(e).forEach((function(n){n.subscribe((function(){e.isWidthCalculationLocked||ei((function(){t(i(e),!1)}))}),!0)})),ei((function(){t(i(e),!0)}))}updateWidth(e){const t=this.widthSubscriber,i=this.widthCalculator.bind(this);ei((function(){t(i(e),!0)}))}}let UD;UD={fullWidthItem:new HD((function(e){return e.getWidth()}),bF),fullWidthSystemItem:new HD((function(e){return e.getWidth()}),(function(e){return[]})),titleItem:new HD((function(e){return e.getWidth()}),(function(e){var t,i;return[null===(t=e.toolbarModel.title)||void 0===t?void 0:t.hasTitle,null===(i=e.toolbarModel.title)||void 0===i?void 0:i.text]})),noTextItem:new HD((function(e){return e.getNoTextWidth()}),bF),contextItem:function(e){return new HD((function(t){const i=e.items.filter((function(e){return"item"===e.getName()&&e.index<t.index&&e.isVisible()}));return i.length>=t.toolbarModel.minRootItems||!t.isVisible()?0:null}),bF)},hiddenItem:new HD((function(){return 0}),(function(){return[]}))};class PD{getMin(e){return e.map((e=>e.minSize)).reduce(((e,t)=>e+t))}getMax(e){return e.map((e=>e.fullSize)).reduce(((e,t)=>e+t))}}class QD extends PD{getRange(e,t,i){return{min:this.getMin(e)+t,max:this.getMax(e)+t}}}class ND extends PD{getRange(e,t,i){return{min:this.getMin(e),max:this.getMax(e)+t}}}class RD extends PD{constructor(){super(...arguments),this.prevLayerRangeCalculator=new ND}getRange(e,t,i=[]){return{min:this.getMin(e)+t,max:this.getMax(i)+t-1}}}class LD{constructor(e,t,i,n){this.name=e,this.canApply=t,this.blocks=i,this.margin=n}orderBlock(e,t){const i=this.blocks.find((t=>t.id===e));if(!i)throw new Error(`No block with id ${e} in layer with type: ${this.type}`);i.index=t,this.blocks.sort(((e,t)=>VD(e,t)))}getBlock(e){const t=this.blocks.find((t=>t.id===e));if(!t)throw new Error(`No block with id ${e} in layer with type: ${this.type}`);return t}}class MD extends LD{constructor(){super(...arguments),this.type=WD.Default}updateBlock(e,t){const i=this.getBlock(e.id);if(0===e.width)return!1;const n=i.minWidth!==e.width||i.maxWidth!==e.width;return i.minWidth=e.width,i.maxWidth=e.width,n}}class kD extends LD{constructor(){super(...arguments),this.type=WD.FullSequential}updateBlock(e,t){const i=this.getBlock(e.id);let n=i.maxWidth!==e.width;return i.maxWidth=e.width,i.minWidth&&(n=n||i.minWidth!==e.width,i.minWidth=e.width),t||(n=n||0!==i.minWidth,i.minWidth=0),n}}class KD extends LD{constructor(){super(...arguments),this.type=WD.NoText}updateBlock(e,t){const i=this.getBlock(e.id);if(0===e.width)return!1;const n=i.minWidth!==e.width||i.maxWidth!==e.width;return i.minWidth=e.width,i.maxWidth=e.width,n}}class OD extends LD{constructor(){super(...arguments),this.type=WD.NoTextSequential}updateBlock(e,t){const i=this.getBlock(e.id);let n=i.maxWidth!==e.width;return i.maxWidth=e.width,i.minWidth&&(n=n||i.minWidth!==e.width,i.minWidth=e.width),t||(n=n||0!==i.minWidth,i.minWidth=0),n}}class _D{constructor(){this.layers=[],this.fullLayerTypes=[WD.Default,WD.FullSequential],this.noTextLayerTypes=[WD.NoText,WD.NoTextSequential]}get isEmpty(){if(0===this.layers.length)return!0;const e=this.layers.find((e=>e.type===WD.Default));return 0===e.blocks.filter((e=>!e.isEllipse&&!e.isTitle&&0!==e.maxWidth)).length}get blockIds(){const e=this.layers.find((e=>e.type===WD.Default));return e&&0!==e.blocks.length?e.blocks.filter((e=>!e.isEllipse)).map((e=>e.id)):[]}resetLayers(e){this.layers=this.convertLayers(e).map(this.toLayer)}initLayers(e){return!!this.isEmpty&&(this.resetLayers(e),!0)}convertLayers(e){return e.map((e=>{const t=e.getActualBlocks();return{name:e.stateName,canApply:e.canApply,type:e.type,blocks:IF(t,e).sort(((e,t)=>VD(e,t))),margin:(i=t,[...new Set(i.map((e=>e.blockCollection)))].map((e=>e.margins)).reduce(((e,t)=>e+t),0))};var i}))}updateFullSizeBlock(e,t){return this.updateBlock(e,t,this.fullLayerTypes)}updateNoTextBlock(e,t){return this.updateBlock(e,t,this.noTextLayerTypes)}updateBlock(e,t,i){let n=!1;for(const s of this.layers.filter((e=>i.includes(e.type))))n=s.updateBlock(e,t)||n;return n}orderBlock(e,t){for(const i of this.layers)i.orderBlock(e,t)}updateBlockByLayer(e,t,i){const n=this.layers.find((e=>e.type===i));return n.updateBlock(e,t)}getItemsByName(e){const t=this.layers.find((t=>t.name===e));return this.getBlocks(t)}getItemsByType(e){const t=this.layers.find((t=>t.type===e));return this.getBlocks(t)}getBlocks(e){return e.blocks.filter((e=>-1!==e.index))}getBlock(e,t){const i=this.layers.find((t=>t.name===e));if(i)return i.blocks.find((e=>e.index===t))}getBlockInEveryLayer(e){return this.layers.map((e=>e.blocks)).flat().filter((t=>t.id===e))}toLayer(e){const{name:t,canApply:i,type:n,blocks:s,margin:r}={...e};switch(n){case WD.Default:return new MD(t,i,s,r);case WD.FullSequential:return new kD(t,i,s,r);case WD.NoText:return new KD(t,i,s,r);case WD.NoTextSequential:return new OD(t,i,s,r)}}}function VD(e,t){return e.isTitle||t.isTitle?e.index-t.index:e.isEllipse||t.isEllipse?t.index-e.index:e.adaptivePriority===t.adaptivePriority||t.isEllipse?e.index>t.index?1:-1:e.adaptivePriority-t.adaptivePriority}class zD{constructor(){this._layers=[],this.checkpointsByLayers=new Map}get layers(){return this._layers.filter((e=>e.canApply))}initialize(e){var t;this._layers=e,this.checkpointsByLayers.clear();let i=0;for(const e of this.layers){const n=this.getPoints(e,i).filter((e=>0!==e)),s=n.filter((e=>this.getCheckpoints().indexOf(e)<0));this.checkpointsByLayers.set(e.type,s),i=null!==(t=n[n.length-1])&&void 0!==t?t:0}}getLayerTypeByWidth(e){for(const t of this.layers.map((e=>e.type))){if(this.checkpointsByLayers.get(t).indexOf(e)>-1)return t}return WD.Default}getCheckpointPair(e){const t=this.getCheckpoints();let i=0,n=0;for(const s of t){if(s<e){n=s;break}i=s}return[i,n]}getCheckpoints(){const e=[...this.checkpointsByLayers.values()].flat();return[...new Set(e.sort(((e,t)=>e<t?1:-1)))]}getPoints(e,t=0){switch(e.type){case WD.Default:return this.getConstantLayerPoints(e);case WD.FullSequential:return this.getSeqPoints(e,!0,t);case WD.NoText:return this.getConstantLayerPoints(e);case WD.NoTextSequential:return this.getSeqPoints(e,!0,t)}return[]}getConstantLayerPoints(e){return[e.blocks.map((e=>e.fullSize)).reduce(((e,t)=>e+t),0)]}getSeqPoints(e,t,i){const n=e.blocks.map((e=>e.fullSize)).reduce(((e,t)=>e+t),0),s=[];let r=n;for(const t of e.blocks.slice().reverse()){const e=r-(t.fullSize-t.minWidth);e!==r&&t.index>-1&&(!i||e<i)&&s.push(e),r=e}return s}}var WD,$D,GD;!function(e){e[e.Default=0]="Default",e[e.FullSequential=1]="FullSequential",e[e.NoText=2]="NoText",e[e.NoTextSequential=3]="NoTextSequential"}(WD||(WD={}));class qD{get syncPoint(){return this.ready}constructor(e){this.onLayerApplied=e,this.layers=[],this.blockCollection=null,this.currentLayer=null,this.currentWidth=null,this.currentHeight=null,this.ready=((e=!1)=>new hI(e))(),this._defaultLayer=null,this._sequentialLayer=null,this.minWidth=null,this.virtualLayout=new _D,this.layerCheckpointService=new zD,this.layersCheckpoints=[],this.prevPoint=0,this.nextPoint=0,this.toolbarWidthUpdate=()=>{},this.toolbarHeightUpdate=()=>{},this.toolbarIsVisible=()=>!0}initialize(e,t,i){this.blockCollection=e,this.disposeSubscriptions(),this.elementContentWidthSubscription=function(e,t){let i=si(e,t);return{dispose:()=>{i&&(ni(i),i=void 0)}}}(t,(e=>{var t,n;this.currentWidth===e.width&&this.currentHeight===e.height||(null===this.currentWidth&&(null!==(t=this.blockCollectionSubscription)&&void 0!==t||(this.blockCollectionSubscription=null===(n=this.blockCollection)||void 0===n?void 0:n.subscribe((e=>{e.addedItems.forEach(this.addItemBlock.bind(this)),e.removedItems.forEach(this.removeItemBlock.bind(this))}))),this.ready.set()),this.getCheckpoints(),this.currentWidth=e.width,this.currentHeight&&this.currentHeight===e.height||(this.currentHeight=e.height,this.toolbarHeightUpdate(this.currentHeight)),this.minWidth||this.setMinWidth(),this.currentLayer&&!this.checkForLayoutUpdate()||(this.virtualLayout.isEmpty&&(this.virtualLayout.resetLayers(this.layers),this.getCheckpoints()),this.setCheckpoints(),this.setLayout()),i&&i(e))}))}addBlockToCollection(e){var t;null===(t=this.blockCollection)||void 0===t||t.add(e)}removeBlockToCollection(e){var t;null===(t=this.blockCollection)||void 0===t||t.remove(e)}dispose(){this.disposeSubscriptions(),this.ready.dispose()}getLastLayer(){return this.layers[this.layers.length-1]||null}setDefaultLayer(e,t){const i=this._defaultLayer=new XD("default",e,this,t);this.layers.push(i)}setSimultaneousTransitionLayer(e,t,i){this.layers.push(new jD(e,WD.NoText,t,this.getLastLayer(),i))}setSequentialTransitionLayer(e,t,i,n){const s=this._sequentialLayer=new JD(e,t,i,this.getLastLayer(),n);this.layers.push(s)}addItemBlock(e){this.layers.forEach((function(t){t.addBlock(e)}))}removeItemBlock(e){this.layers.forEach((function(t){t.removeBlock(e)}))}removeItemBlocks(e){for(const t of e)this.removeItemBlock(t)}checkForLayoutUpdate(){const e=this.currentWidth;return this.nextPoint>0&&e<this.nextPoint||this.prevPoint>0&&e>this.prevPoint}updateFromVirtualLayer(e){const t=this.layers.find((t=>t.type===e.type));t.canApply=e.canApply;for(const i of t.layoutBlocks){const t=e.blocks.find((e=>e.id===i.block.id));t&&(i.width=t.minWidth)}}orderFromVirtualLayer(e){const t=this.layers.find((t=>t.type===e.type)),i=t.layoutBlocks,n=e.blocks;for(const i of t.layoutBlocks){const t=e.blocks.find((e=>e.id===i.block.id));t&&(i.block.index=t.index)}t.layoutBlocks=[...i].sort(((e,t)=>n.indexOf(n.find((t=>t.id===e.block.id)))-n.indexOf(n.find((e=>e.id===t.block.id)))))}recalculateLayout(){this.setLayout()}setCheckpoints(){[this.prevPoint,this.nextPoint]=this.layerCheckpointService.getCheckpointPair(this.currentWidth)}updateCheckpoints(e){const[t,i]=[this.prevPoint,this.nextPoint];this.resetCheckpoints();const n=this.currentWidth;e&&(t!==this.prevPoint&&n<this.prevPoint||i!==this.nextPoint&&n>this.nextPoint)&&this.setLayout()}resetCheckpoints(){this.virtualLayout.resetLayers(this.layers),this.layerCheckpointService.initialize(this.virtualLayout.layers),this.layersCheckpoints=this.layerCheckpointService.getCheckpoints(),this.setCheckpoints(),this.setMinWidth()}setLayout(){const e=this.layerCheckpointService.getLayerTypeByWidth(this.nextPoint>0&&this.currentWidth>this.nextPoint?this.nextPoint:this.prevPoint),t=this.layers.find((t=>t.type===e));this.virtualLayout.resetLayers(this.layers),this.applyLayer(t)}setMinWidth(){const e=this.getCheckpoints();this.minWidth=e[e.length-1],this.toolbarWidthUpdate()}updateLayout(){const e=this.findLayersForWidth(this.currentWidth)[0];e&&(this.applyLayer(e),this.minWidth=Math.min(...this.layers.filter((e=>e.latestRange)).map((e=>e.latestRange.min))))}getCheckpoints(){return this.layersCheckpoints.length||this.virtualLayout.isEmpty||!this.toolbarIsVisible()||this.resetCheckpoints(),this.layersCheckpoints}resetToDefault(){this.applyLayer(this.layers[0],!0)}applyLayer(e,t=!1){if(this.currentLayer=e,t)e.activateAndReset(this.currentWidth);else{this.virtualLayout.initLayers(this.layers);const t=this.virtualLayout.layers.find((e=>e.type===this.currentLayer.type));e.activate(this.currentWidth,t.blocks)}this.onLayerApplied&&this.onLayerApplied(e)}findLayersForWidth(e){return this.layers.filter((function(t){return t.isValidWidth(e)}))}forceUpdate(){null!==this.currentWidth&&this.updateLayout()}getMinWidth(){return this.minWidth?this.minWidth:this._sequentialLayer?this._sequentialLayer.getActualBlocks().map((e=>e.getMinWidth())).reduce(((e,t)=>e+t),0):null}disposeSubscriptions(){var e,t;null===(e=this.elementContentWidthSubscription)||void 0===e||e.dispose(),this.elementContentWidthSubscription=void 0,null===(t=this.blockCollectionSubscription)||void 0===t||t.dispose(),this.blockCollectionSubscription=void 0}}class YD{constructor(e,t,i,n,s){this.stateName=e,this.type=t,this.blockUpdaterGetter=i,this.prevLayer=n,this.canApply=s,this.nextLayer=null,this.layoutBlocks=[],this.nextLayer=null,n&&(n.nextLayer=this)}getNextLayer(){return null!=this.nextLayer?this.nextLayer.canApply?this.nextLayer:this.nextLayer.getNextLayer():null}getPrevLayer(){return null!=this.prevLayer?this.prevLayer.canApply?this.prevLayer:this.prevLayer.getPrevLayer():null}requestUpdateLayoutModel(){var e;null===(e=this.getPrevLayer())||void 0===e||e.requestUpdateLayoutModel()}getBlockCollection(e){var t;return null===(t=this.getPrevLayer())||void 0===t?void 0:t.getBlockCollection(e)}isValidWidth(e){if(!this.canApply||!e)return!1;const t=this.getRangeNew();return!this.getNextLayer()&&t.min>e||!this.getPrevLayer()&&t.max<e||t.min<=e&&t.max>=e}getRange(){const e=new Set,t=this.latestRange=this.getActualBlocks().reduce(((t,i)=>(e.add(i.blockCollection),{min:t.min+i.getMinWidth(),max:t.max+i.getMaxWidth(this)})),{min:0,max:0});return e.forEach((e=>{t.min+=e.margins,t.max+=e.margins})),t}getRangeNew(){const e=IF(this.getActualBlocks(),this),t=this.type===WD.NoText&&this.prevLayer?IF(this.prevLayer.getActualBlocks(),this.prevLayer):[];return this.latestRange=this.rangeCalculator.getRange(e,0,t)}getActualBlocks(){const e=this.getPrevLayer();return e?e.getActualBlocks().map((e=>this.layoutBlocks.filter((function(t){return t.block===e.block}))[0]||e)):this.layoutBlocks}activate(e,t){e&&this.layoutBlocks.forEach((e=>{e.block.updateState(this.stateName)}))}addBlock(e){const t=this.blockUpdaterGetter(e);if(t){const i=this.createBlock(e,t);this.layoutBlocks.push(i)}}removeBlock(e){const t=this.layoutBlocks.find((t=>t.block.id===e));if(t){const e=this.layoutBlocks.indexOf(t);this.layoutBlocks.splice(e,1)}}activateAndReset(e){}}class XD extends YD{constructor(e,t,i,n){super(e,WD.Default,t,null,n),this.layoutModel=i,this.rangeCalculator=new QD,this.blockCollection=new Map}requestUpdateLayoutModel(){this.layoutModel.updateLayout()}createBlock(e,t){return new TD(this,e,t)}activateAndReset(e){this.activate(e,[]),this.layoutBlocks.forEach((e=>{e.block.reset()}))}getBlockCollection(e){return this.getBlockCollectionCore(e)}getBlockCollectionCore(e){let t=this.blockCollection.get(e);return t||this.blockCollection.set(e,t=new SD(e)),t}}class JD extends YD{constructor(){super(...arguments),this.rangeCalculator=new ND}activate(e,t){const i=this.getActualBlocks();this.getRangeNew();let n=this.latestRange.max,s=this.stateName;const r=new Map;for(let o=t.length-1;o>=0;o--){const a=t[o],l=i.find((e=>e.block.id===a.id));if(n>e){n-=a.fullSize-a.minSize;const t=l.blockCollection.id,i=(r.has(t)?r:r.set(t,l.blockCollection.toArray())).get(t);if(i&&i.splice(i.indexOf(l.block),1),n<=e){l.block.updateState(s);const e=this.getPrevLayer();s=e?e.stateName:"";continue}}l.block.updateState(s)}}getRange(){const e=new Set;return this.latestRange=this.getActualBlocks().reduce(((t,i)=>(e.add(i.blockCollection),{min:t.min+i.getMinWidth(),max:t.max+i.getMaxWidth(this)})),{min:0,max:0}),e.forEach((e=>{this.latestRange.max+=e.margins})),this.latestRange}createBlock(e,t){return new DD(this,e,t)}}class jD extends YD{constructor(){super(...arguments),this.rangeCalculator=new RD}createBlock(e,t){return new FD(this,e,t)}getRange(){const e=new Set;let t=this.getActualBlocks().reduce((function(t,i){return e.add(i.blockCollection),t+i.getMinWidth()}),0);e.forEach((e=>{t+=e.margins}));const i=this.getPrevLayerRangeMax();return this.latestRange={min:t,max:i}}getPrevLayerRangeMax(){const e=this.getPrevLayer();return e?e.getRangeNew().max-1:0}}!function(e){e[e.Contained=0]="Contained",e[e.Plain=1]="Plain"}($D||($D={})),function(e){e[e.Default=0]="Default",e[e.Large=1]="Large"}(GD||(GD={}));class ZD{constructor(e,t){this.element=e,this.toolbar=t,this.index=new Py(-1),this.isVisible=new Py(this.defaultIsVisible()),this.isVisible.subscribe((e=>{this.onIsVisibleChanged(e)}),!0)}defaultIsVisible(){return!0}getElement(){return this.element}updateVisible(e){this.isVisible.update(e)}onIsVisibleChanged(e){const t=this.getElement();t&&(e?this.show(t):this.hide(t))}show(e){e.classList.remove(tx.ToolbarHiddenItem)}hide(e){e.classList.add(tx.ToolbarHiddenItem)}}class eF extends ZD{constructor(){super(...arguments),this.isDisplayed=new Py(!0),this.text=new Py(""),this.iconCssClass=new Py("")}show(e){e.style.display=""}hide(e){e.style.display="none"}getGroupElement(){return null}}class tF extends eF{constructor(e,t,i){super(e,t),this.group=i,this.groupName=new Py(""),this.adaptivePriority=new Py(-1)}onIsVisibleChanged(e){super.onIsVisibleChanged(e),this.group.onItemVisibleChanged()}getElement(){return document.querySelector(`#${this.id}`)}getParent(){const e=this.getElement();return e&&e.parentElement?e.parentElement:null}getGroupElement(){return this.group.getElement()}}class iF extends eF{constructor(e,t){super(e,t)}defaultIsVisible(){return null}}class nF extends ZD{constructor(e,t){super(e,t),this.items=[]}addItem(e){this.items.push(e)}onItemVisibleChanged(){if(0===this.items.length)return;const e=this.items.some((e=>e.isVisible.value));this.updateVisible(e)}getElement(){if(0===this.items.length)return null;const e=di(this.items[0].getElement(),EF(hF,this.toolbar.id));return e||this.items[0].getParent()}}class sF extends ZD{constructor(e,t){super(null,e),this.elementSelector=t,this.hasTitle=new Py(!1),this.text=new Py(""),this.text.subscribe((e=>{this.hasTitle.update(null!=e&&""!==e)}))}getElement(){return document.querySelector(this.elementSelector)}}class rF{constructor(e,t){this.element=e,this.id=t,this.items=[],this.itemMap=new Map,this.groupMap=new Map,this.canHideRootItems=!1,this.canCollapseToIcons=!1,this.minRootItems=0}}const oF=[ll,ll].map((e=>e.toUpperCase())),aF=["DXBL-POPUP-PORTAL"];class lF{constructor(e){this.dataToolbarId=e,this.virtualElementCreator={[tx.ToolbarGroup]:this.createVirtualGroup,[tx.ToolbarItem]:this.createVirtualRootItem,[tx.ToolbarPlaceholder]:this.createVirtualPlaceholder,[tx.ButtonEllipsis]:this.createVirtualRootItem},this.toolbar=document.querySelector(`[${CF}='${this.dataToolbarId}']`),this.buttonToolbar=this.toolbar.querySelector(`.${tx.ButtonToolbar}`),this.virtualButtonToolbar=document.createElement("div"),this.copyToolbar(),this.toolbar.appendChild(this.virtualButtonToolbar)}destroy(){this.toolbar.removeChild(this.virtualButtonToolbar)}copyToolbar(){this.virtualButtonToolbar.classList.remove(...this.virtualButtonToolbar.classList),this.virtualButtonToolbar.classList.add(tx.VirtualToolbar),this.virtualButtonToolbar.classList.add(...this.buttonToolbar.classList);const e=[...this.buttonToolbar.children],t=[];for(const i of e){const e=[...i.classList].find((e=>null!=this.virtualElementCreator[e]));t.push(this.virtualElementCreator[e].bind(this,i)())}this.numberToolbarGroups(t.filter((e=>e.classList.contains(tx.ToolbarGroup)))),this.virtualButtonToolbar.innerHTML="",t.forEach((e=>this.virtualButtonToolbar.appendChild(e)))}numberToolbarGroups(e){for(let t=0;t<e.length;t++)0===t&&e[t].classList.add(bB.ButtonGroupFirst)}getElementWidth(e){this.buttonToolbar.style.width=this.buttonToolbar.offsetWidth+"px";const t=this.virtualButtonToolbar.querySelector(`[virtual-id=${e}]`),i=t.parentElement;let n=0,s=0;const r=[...i.children].find((e=>e.classList.contains(tx.ToolbarGroupSeparator)));let o=0;if(null!=t.parentElement&&t.parentElement.classList.contains(tx.ToolbarGroup)){const e=T.DomUtils.getCurrentStyle(t.parentElement);if(t.parentElement.lastElementChild===t&&(s=T.DomUtils.pxToInt(e.marginRight)),t.parentElement.firstElementChild===t&&(n=T.DomUtils.pxToInt(e.marginLeft)),i.classList.contains(bB.ButtonGroupFirst)&&i.children[1]===t)n=T.DomUtils.pxToInt(e.marginLeft);else if(i.firstElementChild===r&&r.nextElementSibling===t){const e=r;if(e){const t=T.DomUtils.getCurrentStyle(i),n=T.DomUtils.getCurrentStyle(e);o+=T.DomUtils.pxToInt(t.marginLeft)+e.offsetWidth+T.DomUtils.pxToInt(n.marginRight)}}}return this.buttonToolbar.style.width="",0===t.offsetWidth?0:t.offsetWidth+n+s+o}setRenderMode(e){e==$D.Plain?this.virtualButtonToolbar.classList.add(tx.ButtonPlainToolbar):this.virtualButtonToolbar.classList.remove(tx.ButtonPlainToolbar)}applyFullLayer(){this.applyAdaptivityState(tx.ToolbarDefaultLayer)}applyNoTextLayer(){this.applyAdaptivityState(tx.ToolbarNoItemText)}applyAdaptivityState(e){e.indexOf(tx.ToolbarNoItemText)>-1?this.virtualButtonToolbar.classList.add(tx.ToolbarNoItemText):this.virtualButtonToolbar.classList.remove(tx.ToolbarNoItemText)}createVirtualGroup(e){const t=document.createElement("div"),i=t.querySelectorAll(`.${tx.ToolbarItem} > .${bB.Button}`),n=i.length>0?i[0].id:"",s=i.length>0?i[i.length-1].id:"";for(const i of e.attributes)t.setAttribute(i.name,i.value);for(let i=0;i<e.children.length;i++)t.appendChild(this.createVirtualItem(e.children[i],n,s));return t.classList.remove(tx.ToolbarHiddenItem),t}createVirtualRootItem(e){return this.createVirtualItem(e,"","")}createVirtualItem(e,t,i){const n=document.createElement("div");for(const t of[...e.attributes].filter((e=>"id"!==e.name)))n.setAttribute(t.name,t.value);if(n.setAttribute("virtual-id",e.id),n.style.display="block",e.children.length>0)for(const s of e.children){const e=s.tagName===tx.ToolbarItem?this.createVirtualItem(s,t,i):this.createVirtualChild(s,t,i);n.appendChild(e)}else n.innerHTML=e.innerHTML;return n}createVirtualPlaceholder(e){const t=document.createElement("DIV");for(const i of[...e.attributes].filter((e=>"id"!==e.name)))t.setAttribute(i.name,i.value);return t.style.width=e.clientWidth+"px",t}createVirtualChild(e,t,i){const n=e.cloneNode(!0),s=(t,i=null)=>{if(!aF.some((e=>t.tagName===e))){if(i&&oF.indexOf(t.tagName)>-1){const n=document.createElement("DIV");return n.style.width=e.getBoundingClientRect().width+"px",void i.replaceChild(n,t)}for(const e of t.attributes)e.name.toLowerCase().endsWith("id")&&t.setAttribute(e.name,e.value+"__virtual");t.setAttribute(hn.virtualElementAttributeName,"true");for(const e of t.children)s(e,t)}};return s(n),n.setAttribute("virtual-id",e.id),n.classList.remove(tx.ToolbarHiddenItem),e.classList.contains(bB.Button)&&(t===n.id&&n.classList.add(bB.ButtonFirst),i===n.id&&n.classList.add(bB.ButtonLast)),n}}class AF{constructor(e,t,i){this.layoutModel=e,this.layoutOptions=t,this.minRootItemIds=[],this.virtualLayout=new _D,this.virtualToolbar=new lF(i),this.setRenderMode(this.layoutOptions.renderMode),this.setMinRootItems()}destroy(){this.virtualToolbar.destroy()}get syncPoint(){return this.layoutModel.syncPoint}updateMinRootItems(e){this.virtualLayout.resetLayers(this.layoutModel.layers);const t=this.virtualLayout.layers.find((e=>e.type===WD.FullSequential)),i=this.virtualLayout.layers.find((e=>e.type===WD.NoTextSequential));t.canApply=e>0;const n=this.virtualLayout.getItemsByName(this.layoutModel.currentLayer.stateName),s=this.getAffectedItemIds(n.map((e=>e.id)),this.layoutOptions.minRootItems,e);e-this.layoutOptions.minRootItems>0?(t.blocks.filter((e=>s.includes(e.id))).forEach((e=>e.minWidth=e.maxWidth)),i.blocks.filter((e=>s.includes(e.id))).forEach((e=>e.minWidth=e.maxWidth))):(t.blocks.filter((e=>s.includes(e.id))).forEach((e=>e.minWidth=0)),i.blocks.filter((e=>s.includes(e.id))).forEach((e=>e.minWidth=0))),this.layoutOptions.minRootItems=e,this.setMinRootItems(),this.layoutModel.updateFromVirtualLayer(t),this.layoutModel.updateFromVirtualLayer(i),this.layoutModel.updateCheckpoints(!0)}updateRenderMode(e){this.virtualLayout.resetLayers(this.layoutModel.layers),this.virtualToolbar.copyToolbar(),this.setRenderMode(e);for(const e of this.virtualLayout.blockIds){const t={id:e,width:0};for(const e of this.virtualLayout.layers){e.type===WD.NoText?this.virtualToolbar.applyNoTextLayer():this.virtualToolbar.applyFullLayer();const i=this.renderVirtualResizeModel(t);e.updateBlock(i,this.checkIfIsInMinRootItems(t.id))}}this.updateAllRealLayers(!0)}updateCanHideRootItems(e){if(this.refreshVirtualLayout(),this.layoutOptions.canHideRootItems===e)return;this.layoutOptions.canHideRootItems=e;const t=this.virtualLayout.layers.find((e=>e.type===WD.FullSequential)),i=this.virtualLayout.layers.find((e=>e.type===WD.NoTextSequential));t.canApply=this.layoutOptions.canHideRootItems&&(this.layoutOptions.minRootItems>0||!this.layoutOptions.canCollapseToIcons),i.canApply=this.layoutOptions.canHideRootItems,this.updateAllRealLayers(!0)}updateCanCollapseToIcons(e){if(this.refreshVirtualLayout(),this.layoutOptions.canCollapseToIcons===e)return;this.layoutOptions.canCollapseToIcons=e;const t=this.virtualLayout.layers.find((e=>e.type===WD.NoText)),i=this.virtualLayout.layers.find((e=>e.type===WD.NoTextSequential));t.canApply=this.layoutOptions.canCollapseToIcons,i.canApply=this.layoutOptions.canCollapseToIcons&&this.layoutOptions.canHideRootItems,this.updateAllRealLayers(!0)}addBlock(e){this.virtualLayout.initLayers(this.layoutModel.layers)}removeBlocks(e){this.virtualLayout.initLayers(this.layoutModel.layers),this.refreshVirtualToolbar(),this.layoutModel.updateCheckpoints(!0)}orderBlock(e){this.virtualLayout.orderBlock(e.id,e.index),this.setMinRootItems(),this.updateAllRealLayers(!0),this.orderAllRealLayers()}updateBlockSize(e,t){this.refreshVirtualLayout(),t&&this.virtualToolbar.copyToolbar();let i=!1;var n;i=e.isTitle?this.virtualLayout.updateBlock(e,this.checkIfIsInMinRootItems(e.id),(n=WD,Object.keys(n).filter((e=>Number.isNaN(Number(e)))).map((e=>n[e]))))||i:this.renderVirtualInLayers(e)||i,this.updateAllRealLayers(i)}setMinRootItems(){if(0===this.virtualLayout.layers.length)return;const e=this.virtualLayout.layers.find((e=>e.type===WD.FullSequential)),t=e.blocks.filter((e=>!e.isTitle&&!e.isEllipse));this.minRootItemIds=this.getAffectedItemIds(t.map((e=>e.id)),0,this.layoutOptions.minRootItems)}setRenderMode(e){this.layoutOptions.renderMode=e,this.virtualToolbar.setRenderMode(this.layoutOptions.renderMode)}refreshVirtualLayout(){this.virtualLayout.resetLayers(this.layoutModel.layers),this.setMinRootItems()}renderVirtualInLayers(e){let t=!1;for(const i of this.virtualLayout.layers){i.type===WD.NoText?this.virtualToolbar.applyNoTextLayer():this.virtualToolbar.applyFullLayer();const n=this.renderVirtualResizeModel(e);t=i.updateBlock(n,this.checkIfIsInMinRootItems(e.id))||t}return t}renderVirtualResizeModel(e){const t=this.virtualToolbar.getElementWidth(e.id);return{id:e.id,width:t}}getAffectedItemIds(e,t,i){const n=e.slice(0,t),s=e.slice(0,i);return i>t?s.filter((e=>!n.includes(e))):n.filter((e=>!s.includes(e)))}updateAllRealLayers(e){for(const e of this.virtualLayout.layers)this.layoutModel.updateFromVirtualLayer(e);this.layoutModel.updateCheckpoints(e)}orderAllRealLayers(){for(const e of this.virtualLayout.layers)this.layoutModel.orderFromVirtualLayer(e);this.layoutModel.updateCheckpoints(!0)}refreshVirtualToolbar(){this.virtualToolbar.copyToolbar()}checkIfIsInMinRootItems(e){return this.minRootItemIds.includes(e)}}C([uI],AF.prototype,"updateMinRootItems",null),C([uI],AF.prototype,"updateRenderMode",null),C([uI],AF.prototype,"updateCanHideRootItems",null),C([uI],AF.prototype,"updateCanCollapseToIcons",null),C([uI],AF.prototype,"addBlock",null),C([uI],AF.prototype,"removeBlocks",null),C([uI],AF.prototype,"orderBlock",null),C([uI],AF.prototype,"updateBlockSize",null);class dF{constructor(e,t,i,n,s,r,o,a){this.id=e,this.index=t,this.adaptivePriority=i,this.minWidth=n,this.maxWidth=s,this.margin=r,this.isTitle=o,this.isEllipse=a}get fullSize(){return this.maxWidth}get minSize(){return this.minWidth}}const cF=!1,hF="data-dxtoolbar-group-id",uF=".dxbl-btn-toolbar",pF=".dxbl-image:not(.dxbl-toolbar-dropdown-toggle)",mF=".dxbl-image.dxbl-toolbar-dropdown-toggle",gF=".dxbl-toolbar-item-tmpl",CF="data-dxtoolbar-id",fF=1;function vF(e,t=!1,i=!1){if(!e)return 0;let n=Math.ceil(gi(e)+(t?0:wF(e)));if(e.parentElement&&!i){const t=[...e.parentElement.children].find((e=>e.classList.contains(tx.ToolbarGroupSeparator)));if(e.parentElement.lastElementChild===e){const t=T.DomUtils.getCurrentStyle(e.parentElement);n+=T.DomUtils.pxToInt(t.marginRight)}if(e.parentElement.firstElementChild===t&&t.nextElementSibling===e){const i=t;if(i){const t=T.DomUtils.getCurrentStyle(e.parentElement),s=T.DomUtils.getCurrentStyle(i);n+=0!==i.offsetWidth?i.offsetWidth:fF+T.DomUtils.pxToInt(t.marginLeft)+T.DomUtils.pxToInt(s.marginRight)}}if(e.parentElement.firstElementChild===e){const t=T.DomUtils.getCurrentStyle(e.parentElement);n+=T.DomUtils.pxToInt(t.marginLeft)}}return n}function bF(e){return[e.item.text,e.item.isDisplayed,e.item.iconCssClass]}function wF(e){return Ot(e)}function yF(e){return T.DomUtils.hasClassName(e,"popout")}function BF(e){return"absolute"!==T.DomUtils.getCurrentStyle(e).position}function EF(e,t){return`[${e}=${t}]`}function IF(e,t){return[...new Set(e)].map((e=>new dF(e.block.id,e.block.index,e.block.adaptivePriority,e.getMinWidth(),e.getMaxWidth(t),e.blockCollection.margins,e.block instanceof ED,e.block instanceof yD)))}class SF{constructor(e){this.items=e}}class xF extends CustomEvent{constructor(e){super(xF.eventName,{detail:new SF(e),bubbles:!0})}}xF.eventName="dxbl-toolbar.update",gt.register(xF.eventName,(e=>e.detail));class DF{constructor(e){this.state=e}}class FF extends CustomEvent{constructor(e){super(FF.eventName,{detail:new DF(e),bubbles:!0,composed:!0})}}FF.eventName="dxbl:toolbar-group.state-change",gt.register(FF.eventName,(e=>e.detail));class TF{constructor(e){this.item=e}}class HF extends CustomEvent{constructor(e){super(HF.eventName,{detail:new TF(e),bubbles:!0})}}HF.eventName="dxbl-toolbar-item.update";class UF{constructor(e,t=!1){this.size=e,this.force=t}}class PF extends CustomEvent{constructor(e,t=!1){super(PF.eventName,{detail:new UF(e,t),bubbles:!0})}}PF.eventName="dxbl-toolbar-item.resized";class QF extends CustomEvent{constructor(e){super(QF.eventName,{detail:{visible:e},bubbles:!0})}}QF.eventName="dxbl-toolbar-item.visibility-changed";class NF{constructor(e){this.item=e}}class RF extends CustomEvent{constructor(e){super(RF.eventName,{detail:new NF(e),bubbles:!0,composed:!0})}}RF.eventName="dxbl-toolbar-item.ordered";const LF=[...[".dxbl-btn:not([disabled]):not(.dxbl-toolbar-hidden-item)",".dxbl-btn-split:not(.dxbl-toolbar-hidden-item):has(.dxbl-btn:not([disabled]))"].map((e=>`.dxbl-toolbar-dropdown-item > .dxbl-toolbar-menu-item > ${e}`)),".dxbl-toolbar-dropdown-item.dxbl-toolbar-item-tmpl:not(.dxbl-toolbar-edit)",".dxbl-toolbar-dropdown-item.dxbl-toolbar-item-tmpl.dxbl-toolbar-edit:has(.dxbl-text-edit:not(.dxbl-disabled))"].join(",");class MF extends nD{constructor(e,t,i,n=LF){super(e,t,n,i)}switchToNestedContent(){return!this.isSplitButtonMenuItem(this.selectedItemElement)&&super.switchToNestedContent()}doAction(e){if(this.isSplitButtonMenuItem(this.selectedItemElement)){const t=this.selectedItemElement.querySelector(".dxbl-dropdown-item.dxbl-btn");if(t)return void this.doClick(t,e)}super.doAction(e)}isSplitButtonMenuItem(e){return Ox(e,bB.SplitButton)}}var kF,KF;!function(e){e[e.Header=0]="Header",e[e.Body=1]="Body"}(kF||(kF={})),function(e){e[e.Shown=0]="Shown",e[e.Closed=1]="Closed"}(KF||(KF={}));class OF extends Ua{constructor(e,t,i,n){super(e,t),this._dispatcherAction=new je,this._activeSection=null,this._initialized=null,this._focusSemaphore=new Mx,this._parentStrategy=i,this._sectionElementMap={[kF.Header]:null,[kF.Body]:null},this._modalStatusSignal=new Pr,this._menuItemSelector=n}get headerElement(){return this._sectionElementMap[kF.Header]}set headerElement(e){this._sectionElementMap[kF.Header]=e}get bodyElement(){return this._sectionElementMap[kF.Body]}set bodyElement(e){this._sectionElementMap[kF.Body]=e}initialize(){this._initialized=this.initializeCore()}initializeCore(){return super.initialize(),this.headerElement&&this.bodyElement?Promise.resolve():this.shcheduleInitialization()}shcheduleInitialization(){return this._dispatcherAction.cancel(),new Promise((e=>{this._dispatcherAction.execute((()=>{super.initialize(),e()}))}))}queryItems(){return this.headerElement=this.targetElement.querySelector(".dxbl-modal-header"),this.bodyElement=this.targetElement.querySelector(".dxbl-modal-body"),[this.headerElement,this.bodyElement]}async activate(){var e;await this._initialized,mt.cancelRestoreFocus();const t=null!==(e=this._activeSection)&&void 0!==e?e:kF.Body;this.setActiveSection(t)}createItemStrategy(e){return e===this.headerElement?new _F(this.navigator,this.headerElement):e===this.bodyElement?new VF(this.navigator,this.bodyElement,this._parentStrategy,this._focusSemaphore,this._modalStatusSignal,this._menuItemSelector):null}handleKeyDown(e){return Be.KeyUtils.getEventKeyCode(e)===Be.KeyCode.Tab?(this.setActiveSection(this.toggleActiveSection()),!0):super.handleKeyDown(e)}toggleActiveSection(){return this._activeSection===kF.Body?kF.Header:kF.Body}setActiveSection(e){const t=null!=e?e:kF.Body,i=this.navigator.getStrategy(this._sectionElementMap[t]);this._focusSemaphore.doAllowedAction((()=>{null==i||i.activate()})),this._activeSection=t}onPopupShown(){super.onPopupShown(),this._modalStatusSignal.raise(this.targetElement,KF.Shown)}onPopupClosed(){super.onPopupClosed(),this._modalStatusSignal.raise(this.targetElement,KF.Closed)}}class _F extends Mi{initialize(){super.initialize(),this.selectedItemIndex=0}queryItems(){return this.queryItemsBySelector(".dxbl-btn").filter((e=>e&&!Ox(e,"dxbl-invisible")))}handleKeyDown(e){switch(Be.KeyUtils.getEventKeyCode(e)){case Be.KeyCode.Enter:case Be.KeyCode.Space:return this.raiseClickEvent(this.selectedItemElement,e.ctrlKey,e.metaKey,e.shiftKey),!0;case Be.KeyCode.Left:return this.moveToPrevItem(!0),!0;case Be.KeyCode.Right:return this.moveToNextItem(!0),!0;case Be.KeyCode.Up:case Be.KeyCode.Down:return!0;default:return super.handleKeyDown(e)}}}class VF extends MF{constructor(e,t,i,n,s,r){super(e,t,i,r),this._boundModalStatusChanged=this.modalStatusChanged.bind(this),this._levelController=new Lx,this._focusSemaphore=n,this._modalStatusSignal=s,this._modalStatusSignal.subscribe(this._boundModalStatusChanged)}get menuLevel(){return this._levelController.currentLevel}modalStatusChanged(e,t){t===KF.Shown?this.onPopupShown():this.onPopupClosed()}initialize(){super.initialize(),this._levelController.updateState(this.selectedItemIndex,this.itemCount),this.selectedItemIndex=this._levelController.selectedItemIndex}activate(){this._focusSemaphore.doIfAllowed((()=>{super.activate()})),this._focusSemaphore.disallow()}handleLeftKey(e){return this.menuLevel>0?(this.moveToPrevLevel(e),!0):!!kx(this.selectedItemElement)&&(this.moveToNextLevel(e,zx.Last),!0)}handleRightKey(e){return!!kx(this.selectedItemElement)&&(this.moveToNextLevel(e,zx.First),!0)}doAction(e){kx(this.selectedItemElement)&&this.moveToNextLevel(e,zx.First),super.doAction(e)}moveToNextLevel(e,t){this.performShortcutEvent(e),this._levelController.moveToNextLevel(t),this._focusSemaphore.allow()}moveToPrevLevel(e){this.performShortcutEvent(e),this._levelController.moveToPrevLevel(),this._focusSemaphore.allow()}getShortcutContext(){return{level:this.menuLevel,selectedItemIndex:this.selectedItemIndex}}handlePopupClosed(){super.handlePopupClosed(),this._levelController.clearState()}addEventSubscriptions(){}removeEventSubscriptions(){this._modalStatusSignal.unsubscribe(this._boundModalStatusChanged)}}const zF=":scope > .dxbl-btn-toolbar:not(.dxbl-virtual-toolbar)",WF=[...[".dxbl-btn:not([disabled]):not(.dxbl-toolbar-hidden-item)",".dxbl-btn-split:not(.dxbl-toolbar-hidden-item) > .dxbl-btn:not([disabled])"].map((e=>`${zF} .dxbl-toolbar-item[visible]:not(.dxbl-toolbar-edit) > ${e}`)),`${zF} .dxbl-toolbar-btn-ellipsis[visible]:not([disabled]):not(.dxbl-toolbar-hidden-item) > .dxbl-btn`,`${zF} .dxbl-toolbar-item[visible].dxbl-toolbar-edit:has(.dxbl-text-edit:not(.dxbl-disabled))`,`${zF} .dxbl-toolbar-item[visible].dxbl-toolbar-item-tmpl:not(.dxbl-toolbar-edit)`,`${zF} .dxbl-toolbar-title`].join(",");class $F extends tD{queryItems(){return this.queryItemsBySelector(WF)}getShortcutContext(){return{itemIndex:this.selectedItemIndex}}handleKeyDownCore(e){switch(Be.KeyUtils.getEventKeyCode(e)){case Be.KeyCode.Right:return this.subMenuStrategy||this.moveToNextItem(!0),!0;case Be.KeyCode.Left:return this.subMenuStrategy||this.moveToPrevItem(!0),!0;case Be.KeyCode.Home:return this.selectItem(0),!0;case Be.KeyCode.End:return this.selectItem(this.itemCount-1),!0;case Be.KeyCode.Up:if(e.altKey&&!e.shiftKey){if(this.isMenuExpanded())return this.requestSubMenuClose(),!0}else if(this.subMenuStrategy)return this.subMenuStrategy.focusLastItem(),!0;return!1;case Be.KeyCode.Down:if(e.altKey&&!e.shiftKey){if(this.hasMenu())return this.requestSubMenuOpen(),this.focusSubMenuItemAsync(zx.First),!0}else if(this.subMenuStrategy)return this.subMenuStrategy.focusFirstItem(),!0;return!1;case Be.KeyCode.Tab:return!this.nestedContentSelected&&(this.requestSubMenuClose(),super.handleTabKeyDown(e));case Be.KeyCode.Enter:case Be.KeyCode.Space:return this.hasMenu()&&this.focusSubMenuItemAsync(zx.First),!1;default:return!1}}focusSubMenuItemAsync(e){return this.shouldRestoreFocus=_x(this.targetElement),super.focusSubMenuItemAsync(e)}requestSubMenuOpen(){var e;null===(e=this.selectedItemElement)||void 0===e||e.dispatchEvent(new Wx(Vx.Expand))}requestSubMenuClose(){var e;null===(e=this.selectedItemElement)||void 0===e||e.dispatchEvent(new Wx(Vx.Collapse))}createPopupStrategy(e,t){return new MF(e,t,this)}createModalStrategy(e,t){return new OF(e,t,this)}}class GF{}GF.Ribbon=he.Prefix+"-ribbon";const qF=new class{constructor(){this.toolbars=new Map}addToolbar(e){this.toolbars.set(e.id,e)}removeToolbar(e){this.toolbars.delete(e.id)}addToolbarItem(e){const t=this.getToolbar(e.id);if(t)return t.addItem(e),new bi((()=>this.removeToolbarItem(e)))}removeToolbarItem(e){for(const t of this.toolbars.values())t.removeItem(e)}getToolbar(e){const t=document.querySelector(`#${e}`);if(!t)return;const i=t.closest(`.${tx.Toolbar}`);return i?this.toolbars.get(i.id):void 0}};let YF=class extends Es{constructor(){super(...arguments),this.isLoading=!0,this.isLayoutCalculated=!1,this.model=null,this._keyboardNavigator=null,this.layoutModel=null,this.minWidth=null,this.reinitRequested=!1,this.items=[],this.toolbarItemResizedHandler=this.resizeToolbarItem.bind(this),this.toolbarItemUpdatedHandler=this.updateToolbarItem.bind(this),this.toolbarItemVisibilityChangedHandler=this.toolbarItemVisibilityChanged.bind(this),this.toolbarItemOrderHandler=this.orderToolbarItem.bind(this),this.toolbarTitle="",this.minRootItemCount=0,this.collapseItemsToIcons=!1,this.hideRootItems=!1,this.itemSize=0,this.renderMode=$D.Contained,this.itemSpacingMode=GD.Default,this.ellipsisId=null,this.layoutUpdateService=null}connectedCallback(){super.connectedCallback(),qF.addToolbar(this),this.addEventListener(PF.eventName,this.toolbarItemResizedHandler),this.addEventListener(HF.eventName,this.toolbarItemUpdatedHandler),this.addEventListener(QF.eventName,this.toolbarItemVisibilityChangedHandler),this.addEventListener(RF.eventName,this.toolbarItemOrderHandler)}disconnectedCallback(){this.removeEventListener(PF.eventName,this.toolbarItemResizedHandler),this.removeEventListener(HF.eventName,this.toolbarItemUpdatedHandler),this.removeEventListener(QF.eventName,this.toolbarItemVisibilityChangedHandler),this.removeEventListener(RF.eventName,this.toolbarItemOrderHandler),qF.removeToolbar(this),super.disconnectedCallback()}updated(e){var t,i,n,s;super.updated(e),e.has("ellipsisId")&&this.initializeToolbar(null!=this.ellipsisId),e.has("collapseItemsToIcons")&&(null===(t=this.layoutUpdateService)||void 0===t||t.updateCanCollapseToIcons(this.collapseItemsToIcons)),e.has("hideRootItems")&&(null===(i=this.layoutUpdateService)||void 0===i||i.updateCanHideRootItems(this.hideRootItems)),e.has("minRootItemCount")&&(this.model&&(this.model.minRootItems=this.minRootItemCount),null===(n=this.layoutUpdateService)||void 0===n||n.updateMinRootItems(this.minRootItemCount)),e.has("renderMode")&&(null===(s=this.layoutUpdateService)||void 0===s||s.updateRenderMode(this.renderMode))}updateLayout(){var e;null===(e=this.layoutModel)||void 0===e||e.updateLayout()}addItem(e){var t,i,n,s;if(e.isEllipse)return;const r=null===(i=null===(t=this.model)||void 0===t?void 0:t.items)||void 0===i?void 0:i.find((t=>t.id===e.id));if(!r&&this.model){const t=this.initItem(e,!0),i=this.getItemsBlocks(this.model,[t]);null===(n=this.layoutModel)||void 0===n||n.addItemBlock(i[0])}e&&!this.items.some((t=>t.id===e.id))&&(this.items.push(e),null===(s=this.layoutUpdateService)||void 0===s||s.addBlock(e))}removeItem(e){var t,i,n,s;const r=null===(t=this.model)||void 0===t?void 0:t.items.find((t=>t.id===e.id));if(r&&this.model){const e=this.model.items.indexOf(r);null===(i=this.model)||void 0===i||i.items.splice(e,1),null===(n=this.layoutModel)||void 0===n||n.removeItemBlock(r.id),null===(s=this.layoutUpdateService)||void 0===s||s.removeBlocks([r.id])}}resizeToolbarItem(e){this.processToolbarItem(e.detail.size,e.detail.force)}updateToolbarItem(e){this.processToolbarItem(e.detail.item)}toolbarItemVisibilityChanged(e){this.initializeKeyboardNavigator()}initializeKeyboardNavigator(){this._keyboardNavigator&&(this._keyboardNavigator.initialized?this._keyboardNavigator.reinitialize():this._keyboardNavigator.initialize(this,new $F(this._keyboardNavigator,this)))}orderToolbarItem(e){var t;const i=e.detail.item,n=this.items.find((e=>e.id===i.id));n&&(n.index=i.index,null===(t=this.layoutUpdateService)||void 0===t||t.orderBlock(i))}processToolbarItem(e,t=!1){var i;if(0===this.offsetHeight)return;const n=this.items.find((t=>t.id===e.id));n&&(n.width!==e.width||t)&&(n.width=e.width,"none"!==window.getComputedStyle(this).display&&(e.isEllipse||null===(i=this.layoutUpdateService)||void 0===i||i.updateBlockSize(e,!0)))}initializeToolbar(e){const t={mainElement:this,canCollapseToIcons:this.collapseItemsToIcons,canHideRootItems:this.hideRootItems,minRootItems:this.minRootItemCount,title:this.toolbarTitle,items:this.items,itemSize:this.itemSize,renderMode:this.renderMode,itemSpacingMode:this.itemSpacingMode,adaptiveMenuModel:{id:this.ellipsisId}};e?this.reinit(t):this.init(t)}initItem(e,t=!1){const i=document.querySelector(`#${e.id}[dxbl-toolbar-adaptive-item]`);const n=this.model.groupMap;i&&i.classList.remove(tx.ToolbarHiddenItem);const s=di(i,EF(hF,this.dataset.dxtoolbarId));let r=null;n.has(s)&&(r=n.get(s)),r||(r=new nF(s,this.model),n.set(s,r));const o=new tF(i,this.model,r);return o.text.update(e.text),o.groupName.update(e.groupName),o.adaptivePriority.update(e.adaptivePriority),o.iconCssClass.update(e.iconCssClass),o.isDisplayed.update(e.visible),o.index.update(e.index),o.id=e.id,this.model.itemMap.set(o.id,o),this.model.items.every((e=>e.id!==o.id))&&(r.addItem(o),this.model.items.push(o)),o}init(e){var t;const i=e.mainElement;if(!i)return;this.isLayoutCalculated=!1;const n=i.dataset.dxtoolbarId,s=EF("data-dxtoolbar-title-id",n),r=EF("data-dxtoolbar-ellipsis-id",n),o=document.querySelector(r),a=this.model=new rF(i,n),l=a.groupMap;Array.from(e.items).forEach((e=>this.initItem(e))),a.canHideRootItems=e.canHideRootItems,a.canCollapseToIcons=e.canCollapseToIcons,a.minRootItems=e.minRootItems,a.itemSize=e.itemSize,a.renderMode=e.renderMode,a.itemSpacing=e.itemSpacingMode;const A=new ID([]),d=new sF(a,s);d.text.update(e.title),a.title=d;const c=document.querySelector(s);A.add(new ED(a,d,null!==(t=null==c?void 0:c.id)&&void 0!==t?t:"-1"));const h=Array.from(l.values()),u=h.some((e=>e))?h.map((e=>e.items)).reduce(((e,t)=>e.concat(t))):[];A.addRange(this.getItemsBlocks(a,u.filter((e=>e.element))));const p=new iF(o,a);p.id=e.adaptiveMenuModel.id,A.add(new yD(a,p)),a.ellipsisViewModel=p,this._keyboardNavigator=[...this.children].filter((e=>e.tagName.toLowerCase()===Qi))[0],this.initializeKeyboardNavigator();const m=UD.contextItem(A);let g;const C=this.layoutModel=new qD((t=>{this.isLayoutCalculated||(this.isLayoutCalculated=!0,ei((()=>{this.updateToolbarHeight(),this.isLoading=!1})));const n=a.element.querySelector(uF)||a.element;if(t.stateName.indexOf(tx.ToolbarNoItemText)>-1?T.DomUtils.addClassName(n,tx.ToolbarNoItemText):T.DomUtils.removeClassName(n,tx.ToolbarNoItemText),T.DomUtils.removeClassName(i,tx.Loading),pi(i))return;const s=n.classList.contains(tx.ToolbarNoItemText),r=a.items.concat(a.ellipsisViewModel).map((e=>({Id:e.id,IsVisible:e.isVisible.value,TextHidden:s}))),o=JSON.stringify(r);g!==o&&e.adaptiveMenuModel.id&&(g=o,this.dispatchEvent(new xF(Array.from(r))))}));C.setDefaultLayer((function(e){switch(e.getName()){case"item":return UD.fullWidthItem;case"title":return UD.titleItem}return UD.hiddenItem}),!0),C.setSequentialTransitionLayer(tx.ToolbarHasEllipsis,WD.FullSequential,(function(e){switch(e.getName()){case"ellipsis":return UD.fullWidthSystemItem;case"item":return m}}),a.canHideRootItems&&(a.minRootItems>0||!a.canCollapseToIcons)),C.setSimultaneousTransitionLayer(tx.ToolbarNoItemText,(function(e){switch(e.getName()){case"item":return UD.noTextItem;case"ellipsis":return UD.hiddenItem}}),a.canCollapseToIcons),C.setSequentialTransitionLayer(a.canCollapseToIcons?`${tx.ToolbarNoItemText} ${tx.ToolbarHasEllipsis}`:tx.ToolbarHasEllipsis,WD.NoTextSequential,(function(e){switch(e.getName()){case"item":return m;case"ellipsis":return UD.fullWidthSystemItem}}),a.canHideRootItems&&a.canCollapseToIcons),A.forEach((e=>e._width=e.getWidth())),C.initialize(A,a.element.querySelector(uF)||a.element,(e=>{this.height!==e.height&&(this.isLayoutCalculated=!1,this.height=e.height),this.checkUpdateMinWidth(a)})),C.toolbarWidthUpdate=()=>this.checkUpdateMinWidth(a),C.toolbarHeightUpdate=e=>this.updateToolbarHeight(),C.toolbarIsVisible=()=>"none"!==window.getComputedStyle(this).display&&0!==this.offsetWidth,setTimeout((()=>{document.querySelector(`#${this.id}`)&&(this.layoutUpdateService&&this.layoutUpdateService.destroy(),this.layoutUpdateService=new AF(C,{canCollapseToIcons:this.collapseItemsToIcons,canHideRootItems:this.hideRootItems,minRootItems:this.minRootItemCount,renderMode:this.renderMode},this.getAttribute(CF)))}))}reinit(e){this.reinitRequested||(this.reinitRequested=!0,Gt((()=>{this.resetToDefault(),this.disposeModel(),Gt((()=>{this.reinitRequested=!1,this.init(e)}))})))}resetToDefault(){var e;null===(e=this.layoutModel)||void 0===e||e.resetToDefault()}updateSettings(){}oldUpdateSettings(e){var t,i;if(!this.model)return;let n=!1,s=!1;if(this.model.canHideRootItems!==e.canHideRootItems&&(this.model.canHideRootItems=e.canHideRootItems,n=!0),this.model.canCollapseToIcons!==e.canCollapseToIcons&&(this.model.canCollapseToIcons=e.canCollapseToIcons,n=!0),this.model.minRootItems!==e.minRootItems&&(this.model.minRootItems=e.minRootItems,s=!0),this.model.itemSize!==e.itemSize&&(this.model.itemSize=e.itemSize,s=!0),this.model.renderMode!==e.renderMode&&(this.model.renderMode=e.renderMode,s=!0),this.model.itemSpacing!==e.itemSpacingMode&&(this.model.itemSpacing=e.itemSpacingMode,s=!0),null===(t=this.model.title)||void 0===t||t.text.update(e.title),!s){const t=Array.from(e.items).map((e=>e.id)),i=Array.from(this.model.itemMap.values()).map((e=>e.id));s=!((r=t).length===(o=i).length&&r.every(((e,t)=>e===o[t])))}var r,o;s?this.reinit(e):(Array.from(e.items).forEach((e=>{if(!this.model)return;const t=this.model.itemMap.get(e.id);t&&(t.text.update(e.text),t.groupName.update(e.groupName),t.adaptivePriority.update(e.adaptivePriority),t.index.update(e.index),t.iconCssClass.update(e.iconCssClass),t.isDisplayed.update(e.visible))})),n&&(null===(i=this.layoutModel)||void 0===i||i.forceUpdate()))}disposeModel(){var e;null===(e=this.layoutModel)||void 0===e||e.dispose()}dispose(){this.disposeModel()}getItemsBlocks(e,t){return t.reduce(((t,i)=>t.group&&t.group.tryAddItem(i)?t:i.groupName.value?{group:t.blocks[t.blocks.length]=new BD(e,i),blocks:t.blocks}:{group:null,blocks:t.blocks.concat([new wD(e,i)])}),{blocks:[],group:null}).blocks.sort((function(e,t){return e.item.adaptivePriority.value-t.item.adaptivePriority.value})).map((function(e,t){return e.index=t,e}))}updateToolbarHeight(){const e=this.querySelector(uF);this.style.height=(!this.isLoading&&e?e.offsetHeight:this.offsetHeight)+"px"}checkUpdateMinWidth(e){var t;const i=null===(t=this.layoutModel)||void 0===t?void 0:t.getMinWidth();i&&this.minWidth!==i&&(this.minWidth=i,e.element.style.minWidth=i+"px")}};C([dn()],YF.prototype,"layoutModel",void 0),C([dn()],YF.prototype,"items",void 0),C([An({type:String,attribute:"toolbar-title"})],YF.prototype,"toolbarTitle",void 0),C([An({type:Number,attribute:"min-root-item-count"})],YF.prototype,"minRootItemCount",void 0),C([An({type:Boolean,attribute:"auto-collapse-items-to-icons"})],YF.prototype,"collapseItemsToIcons",void 0),C([An({type:Boolean,attribute:"auto-hide-root-items"})],YF.prototype,"hideRootItems",void 0),C([An({type:Number,attribute:"item-size"})],YF.prototype,"itemSize",void 0),C([An({type:$D,attribute:"render-mode"})],YF.prototype,"renderMode",void 0),C([An({type:GD,attribute:"item-spacing-mode"})],YF.prototype,"itemSpacingMode",void 0),C([An({type:String,attribute:"ellipsis-id"})],YF.prototype,"ellipsisId",void 0),YF=C([on(tx.Toolbar)],YF);const XF=new class{constructor(e){this.resizeObserver=new ResizeObserver(e)}observe(e){return this.resizeObserver.observe(e),new bi((()=>this.resizeObserver.unobserve(e)))}}((e=>{for(const t of e){const e=t.target;e&&e.updateSize()}}));let JF=class extends Es{constructor(){super(...arguments),this.text="",this.groupName="",this.adaptivePriority=0,this.iconCssClass="",this.visible=!1,this.index=0,this.justHidden=!1}get isEllipse(){return this.classList.contains(tx.ButtonEllipsis)}get isTitle(){return this.classList.contains(tx.ToolbarTitle)}get isPlaceholder(){return this.classList.contains(tx.ToolbarPlaceholder)}get isHidden(){return"none"===this.style.display}update(e){this.isInRibbon||(e.has("text")&&this.updateSize(!0),e.has("visible")&&this.dispatchEvent(new QF(this.visible)),e.has("index")&&this.itemOrdered(),super.update(e))}updateSize(e=!1){(!this.isHidden||this.justHidden||(this.justHidden=!0,e))&&(this.isHidden||!this.justHidden?this.dispatchEvent(new PF({id:this.id,width:this.offsetWidth,isTitle:this.isTitle,isEllipse:this.isEllipse,isHidden:this.isHidden},e)):this.justHidden=!1)}connectedCallback(){super.connectedCallback(),this.isInRibbon||(this.subscriptions=new bi(qF.addToolbarItem(this.toolbarItem),this.isEllipse||this.isPlaceholder?void 0:XF.observe(this)))}disconnectedCallback(){var e;super.disconnectedCallback(),null===(e=this.subscriptions)||void 0===e||e.dispose(),this.subscriptions=void 0}itemOrdered(){this.index>-1&&this.dispatchEvent(new RF(this.toolbarItem))}get toolbarItem(){return{id:this.id,groupName:this.groupName,text:this.text,adaptivePriority:this.adaptivePriority,iconCssClass:this.iconCssClass,visible:this.visible,index:this.index,width:this.offsetWidth,isEllipse:this.isEllipse,isTitle:this.isTitle}}get isInRibbon(){return null!==this.closest(GF.Ribbon)}};C([An({type:String,attribute:"text"})],JF.prototype,"text",void 0),C([An({type:String,attribute:"group-name"})],JF.prototype,"groupName",void 0),C([An({type:Number,attribute:"adaptive-priority"})],JF.prototype,"adaptivePriority",void 0),C([An({type:String,attribute:"icon-css-class"})],JF.prototype,"iconCssClass",void 0),C([An({type:Boolean,attribute:"visible"})],JF.prototype,"visible",void 0),C([An({type:Number,attribute:"index"})],JF.prototype,"index",void 0),JF=C([on(tx.ToolbarItem)],JF),customElements.define("dxbl-toolbar-menu-item",class extends Fx{constructor(){super(...arguments),this.boundOnButtonClick=this.onButtonClick.bind(this)}connectedCallback(){super.connectedCallback(),this.addEventListener("click",this.boundOnButtonClick)}disconnectedCallback(){this.removeEventListener("click",this.boundOnButtonClick),super.disconnectedCallback()}canHandlePointerDown(e){return K.containsInComposedPath(e,this)}onButtonClick(e){if(null===this.getAttribute("submit-form-on-click"))return;const t=this.getAttribute("data-dxtoolbar-container-id");if(t){const e=document.querySelector(`[${CF}=${t}]`);if(e){const t=document.createElement("input");t.type="submit",t.hidden=!0,e.appendChild(t),t.click(),e.removeChild(t)}}}});let jF=class extends Es{};jF=C([on("dxbl-ribbon-item")],jF);let ZF=class extends Es{constructor(){super(),this._keyboardNavigator=null,this.loading=!1}willUpdate(e){e.has("loading")&&!this.loading&&this.initializeNavigator()}initializeNavigator(){this._keyboardNavigator||(this._keyboardNavigator=this.querySelector(`:scope > ${Qi}`)),this._keyboardNavigator.initialized||this._keyboardNavigator.initialize(this,new $F(this._keyboardNavigator,this))}};C([An({type:Boolean,attribute:"loading"})],ZF.prototype,"loading",void 0),ZF=C([on(GF.Ribbon)],ZF);class eT{constructor(e){this.container=null,this.owner=e}querySelectorAll(e){var t;return this.querySelectorAllInternal(e||"#"+(null===(t=this.getContainer())||void 0===t?void 0:t.id))}toggleClassName(e,t,i){return this.owner?this.owner.toggleClassName(e,t,i):this.toggleClassNameInternal(e,t,i)}toggleClassNameInternal(e,t,i){}querySelectorAllInternal(e){return this.owner?this.owner.querySelectorAll(e):this.getNodes(e)}getNodes(e){const t=this.container;let i=t.querySelectorAll(e);return i.length||(e="#"+t.id+e,t.parentNode&&(i=t.parentNode.querySelectorAll(e))),i}getContainer(){return this.owner?this.owner.getContainer():this.container}getBoxSize(e){return Math.ceil(gi(e))+this.getBoxOuterOffset(e)}getBoxInnerOffset(e){return Vt(e)}getBoxOuterOffset(e){return Ot(e)}getBoxOffset(e){return this.getBoxOuterOffset(e)+this.getBoxInnerOffset(e)}getNodeWidth(e,t=!1){const i=e;return i?Math.ceil(i.offsetWidth+(t?0:this.getBoxOuterOffset(i)))+Wt(i):0}dispose(){}setActive(e){}createLayoutEntity(e,...t){return null!==this.owner?this.owner.createLayoutEntity(e,...t):this.createLayoutEntityCore(e,...t)}createLayoutEntityCore(e,...t){return new(this.resolveLayoutEntityType(e))(...t)}resolveLayoutEntityType(e){return e}}const tT=`.${tx.ButtonToolbar}`,iT=`.${tx.ButtonEllipsis}`;class nT extends eT{constructor(e,t,i){super(e),this.nextBlock=null,this.prevBlock=null,this.ribbonOwner=e,this.group=t,this.element=i,this.width=0,this.isActiveValue=null,this.index=t.blocks.length,this.nextBlock=null,this.prevBlock=i.layoutBlockObj||null,this._element=i,this._element.layoutBlockObj=this._element.layoutBlockObj?this._element.layoutBlockObj.nextBlock=this:this,this._element.onHide=()=>{this.toggleClassName(this.element,tx.ToolbarHiddenItem,!0)},this._element.onShow=()=>{this.toggleClassName(this.element,tx.ToolbarHiddenItem,!1)}}dispose(){delete this._element.onHide,delete this._element.onShow,this.ribbonOwner=null,super.dispose()}afterCreate(e){delete this._element.layoutBlockObj,e.maxWidth+=this.width,e.minWidth+=this.getMinWidth(),0===this.width&&this.raiseVisibilityChange(!1)}setActive(e){this.isActiveValue!==e&&(this.isActiveValue=e,this.group.activeBlock=e?this:null,this.group.groupsCollection.lastGroup=this.group,this.group.state.prevState&&this.toggleClassName(this.group.element.parentNode,this.group.state.prevState.name,this.isActiveValue),this.toggleClassName(this.element,this.group.state.name,this.isActiveValue),this.toggleClassName(this.group.element,this.group.state.name,this.isActiveValue))}raiseVisibilityChange(e){var t,i;const n=e?this._element.onShow:this._element.onHide;n&&(null===(t=this.owner)||void 0===t||t.domChanges.push(n)),null===(i=this.ribbonOwner)||void 0===i||i.toggleVisibility(this.element,e)}getMinWidth(){return this.nextBlock?this.nextBlock.getMinWidth():this.width}getNextBlock(e){let t=this.group,i=t.blocks[this.index-e];return!i&&(t=t.groupsCollection.blockGroups[t.totalIndex+e])&&(i=t.blocks[Math.pow(t.blocks.length,e>0?1:0)-1]),i}}class sT extends eT{constructor(e,t,i,n){super(e),this.builders=t||[],this.name=i,this.index=n?n.index+1:0,this.prevState=n,this.nextState=null,n&&(n.nextState=this)}for(e){return this.builders[this.builders.length]=this.createLayoutEntity(aT,this.owner,this.name,e)}}class rT extends eT{constructor(e,t,i,n,s){super(e),this.groupsCollection=t,this.state=n,this.element=i,this.elementOffset=this.getBoxOffset(i)+this.getMarginLeftOffset(i),this.blocks=[],this.activeBlock=null,this.fullWidth=this.elementOffset,this.isSmallest=!n.nextState,this.isLargest=!n.prevState,this.domIndex=s,this.totalIndex=this.groupsCollection.blockGroups.length,this.createBlocks(n.builders);const r=i;n.prevState&&(this.isSmallest||(r.layoutBlockGroupObj.isSmallest=0===this.blocks.length))?delete r.layoutBlockGroupObj:r.layoutBlockGroupObj=this}dispose(){for(let e=0;e<this.blocks.length;e++)this.blocks[e].dispose();super.dispose()}afterCreate(e){this.blocks.forEach((function(t){t.afterCreate(e)})),e.groupsOffset+=this.elementOffset,e.groupBlocksLengthLookup[this.domIndex]=this.blocks.length,e.lastGroup=this}setActive(e){let t=0;!this.isSmallest&&this.isLargest&&(t=this.blocks.length-1),this.blocks[t].setActive(e)}createBlocks(e){for(let t=0;t<e.length;t++){const i=e[t],n=i.findBlockElements(this.element);for(let e=0;e<n.length;e++){const t=this.createLayoutEntity(nT,this.owner,this,n[e]);this.fullWidth+=t.width=i.getBlockWidth(t),this.blocks.push(t)}}this.isLargest&&this.setActive(!0)}calculateWidth(e){return this!==e.group?this.fullWidth:this.getActualBlocks(e).reduce((function(e,t){return e+t.width}),this.elementOffset)}getActualBlocks(e){return this.blocks.map(function(t){return t.prevBlock&&t.index<e.index?t.prevBlock:t}.bind(this))}getBeforeOffset(e){const t=window.getComputedStyle(e,":before");return T.DomUtils.pxToInt(t.width)+T.DomUtils.pxToInt(t.marginRight)}getMarginLeftOffset(e){const t=window.getComputedStyle(e);return T.DomUtils.pxToInt(t.marginLeft)}}class oT extends eT{constructor(e,t,i){super(e),this.ribbonOwner=e,this.groupsContainer=t,this.testElement="function"==typeof i?i:function(e){return ox.elementMatchesSelector(e,i)},this.blockGroups=[],this.states=[],this.width=0,this.groupsOffset=0,this.maxWidth=0,this.minWidth=0,this.groupElementsCount=0,this.currentLayoutElements=[],this.lastGroup=null,this.selector=i,this.groupLookupMap={},this.groupBlocksLengthLookup={}}createBlockGroup(e,t,i){let n=this.createLayoutEntity(rT,this.owner,this,e,t,i);return n&&(n=n.blocks.length>0?this.blockGroups[this.blockGroups.length]=n:null),n&&(this.groupLookupMap[i]||(this.groupLookupMap[i]=[])).splice(0,0,n.totalIndex),n}createBlockGroups(){var e;const t=null===(e=this.ribbonOwner)||void 0===e?void 0:e.getGroupElements(this.groupsContainer,this.selector);if(t){this.groupElementsCount=t.length;for(let e=0;e<this.states.length;e++)for(let i=this.groupElementsCount-1;i>=0;i--){const n=t[i];!n||this.testElement(n)&&this.createBlockGroup(n,this.states[e],i)||(t[i]=null)}this.states=[];for(let e=0;e<this.blockGroups.length&&this.blockGroups[e].isLargest;e++)this.blockGroups[e].afterCreate(this);this.minWidth+=this.groupsOffset,this.maxWidth+=this.groupsOffset,this.width=this.maxWidth,this.currentLayoutElements=this.findActiveBlocks()}}defineState(e,t){const i=this.createLayoutEntity(sT,this.owner,[],e,this.states[this.states.length-1]||null);this.states.push(i),t(i)}initialize(){}applyLayout(e){this.currentLayoutElements&&this.currentLayoutElements.forEach((function(e){e.setActive(!1)})),this.currentLayoutElements=e,this.currentLayoutElements.forEach((function(e){e.setActive(!0)})),this.detectBlockItemVisibilityChanges()}adjust(e){if(e===this.width||e<=this.minWidth&&this.width===this.minWidth||e>=this.maxWidth&&this.width===this.maxWidth)return;const t=this.width;if(this.width=Math.max(this.minWidth,Math.min(this.maxWidth,e)),this.width===this.maxWidth)return this.applyLayout(this.blockGroups.filter((function(e){return e.isLargest})));if(this.width===this.minWidth)return this.applyLayout(this.blockGroups.filter((function(e){return e.isSmallest})));const i=t-this.width,n=i/Math.abs(i),s=this.findActiveBlocks();let r=s?s[0]:null,o=r;const a=r;for(;r;){if(e=this.calculateWidth(r),n>0&&e<=this.width||n<0&&e>=this.width){const e=n<0?o:r;e!==a&&null!==e&&this.applyLayout([e]);break}o=r,r=r.getNextBlock(n)}}detectBlockItemVisibilityChanges(){const e=this.findActualBlockGroups();for(let t=0;t<e.length;t++){const i=e[t];let n=!1;for(let e=0;e<i.blocks.length;e++){let t=i.blocks[e];i!==this.lastGroup||(n=n||t.isActiveValue)||(t=t.prevBlock||t),t.raiseVisibilityChange(t.width>0)}}}calculateWidth(e){if(!e){const t=this.findActiveBlocks();t&&(e=t[0])}return this.findActualBlockGroups(e.group).reduce((function(t,i){return t+i.calculateWidth(e)}),0)}findActualBlockGroups(e=null){const t=[];if(!(e=e||this.lastGroup))return t;for(let i=0;i<this.groupElementsCount;i++){const n=this.groupLookupMap[i];for(let s=0;s<n.length;s++){const r=this.blockGroups[n[s]];if(i<e.domIndex?r.state.index<e.state.index:r.state.index<=e.state.index){t.push(r);break}}}return t}findActiveBlocks(){return this.lastGroup?this.lastGroup.blocks.filter((function(e){return e.isActiveValue})):null}dispose(){for(let e=0;e<this.blockGroups.length;e++)this.blockGroups[e].dispose();this.blockGroups=[],super.dispose()}}class aT extends eT{constructor(e,t,i){super(e),this.name=t,this.selectorOrFunc=i,this.prepareBlockFunc=null}getBlockWidth(e){return this.prepareBlockFunc?this.prepareBlockFunc(e):0}findBlockElements(e){const t=ox.getChildElementNodesByPredicate(e,(e=>ox.elementMatchesSelector(e,this.selectorOrFunc)));return null!=t?t:[]}setPrepareFunc(e){return this.prepareBlockFunc=e,this}setWidth(){return this.setPrepareFunc((e=>this.getBoxSize(e.element)))}setHidden(){return this.setPrepareFunc((function(e){return 0}))}setOnlyImageWidth(){return this.setPrepareFunc((e=>{let t=this.getBoxSize(e.element),i=ox.getChildByClassName(e.element,`${he.Image}:not(.${tx.AdaptivePreviewImage})`);i||(i=ox.getChildByClassName(ox.getChildByClassName(e.element,tx.DropDownToggle),`${he.Image}:not(.${tx.AdaptivePreviewImage})`));let n=ox.getChildByClassName(e.element,tx.AdaptivePreviewImage);if(n||(n=ox.getChildByClassName(ox.getChildByClassName(e.element,tx.DropDownToggle),tx.AdaptivePreviewImage)),i){if(t=this.getBoxSize(i)-this.getBoxOuterOffset(i),n){const e=this.getBoxSize(n)-this.getBoxOuterOffset(n);t=Math.max(t,e)}let s=this.getBoxOffset(e.element),r=i.parentNode;for(;r!==e.element;)s+=this.getBoxOffset(r),r=r.parentNode;return t+s}return t}))}setNoTextWidth(){return this.setPrepareFunc((e=>{let t=this.getBoxSize(e.element);if(ox.getChildByClassName(e.element,tx.ToolbarEdit))return t;const i=ox.getChildByClassName(e.element,tx.ToolbarItem);if(ox.getChildByClassName(i,tx.ToolbarEdit))return t;const n=this.findImageElement(e.element);if(n){const e=n.nextElementSibling;e&&(t-=this.getBoxSize(e),t-=this.getBoxOuterOffset(n))}return t}))}findImageElement(e){var t;let i=ox.getChildByClassName(e,he.Image);if(i||(i=ox.getChildByClassName(ox.getChildByClassName(e,he.Button),he.Image)),!i&&(null===(t=null==e?void 0:e.classList)||void 0===t?void 0:t.contains(tx.ToolbarItem))){const t=ox.getChildByClassName(e,tx.ToolbarItem);return this.findImageElement(t)}return i}}class lT extends eT{constructor(e){super(null),this.clientStateMap=new Map,this.dotNetReference=e.dotNetReference,this.container=e.getMainElement(),this.containerOffsets=this.calculateContainerOffsets(),this.blockGroupsArray=[],this.isReady=!1,this.classesToApply=[],this.domChanges=[],this.nextAdjustGroupWidth=null}getClientState(e){if(null===e.getAttribute("dxbl-toolbar-adaptive-item"))return null;const t=e.id;if(!t)return null;let i=this.clientStateMap.get(t);return i||(i={id:t},this.clientStateMap.set(t,i)),i}toggleClassNameInternal(e,t,i){this.getBatchCssUpdateCache(e)[t]=i;const n=this.getClientState(e);n&&(n[t]=i)}getBatchCssUpdateCache(e){let t=e._layoutBuilderCache;return t||(t=e._layoutBuilderCache={},this.classesToApply.push(this.createBatchCssUpdateDelegate(e))),t}createBatchCssUpdateDelegate(e){return function(){const t=e._layoutBuilderCache;if(t){delete e._layoutBuilderCache;for(const i in t)Object.prototype.hasOwnProperty.call(t,i)&&T.DomUtils.toggleClassName(e,i,t[i])}}}createBlockGroupsCore(e,t,i){const n=[],s=this.querySelectorAll(e);for(let e=0;e<s.length;e++){const r=this.createLayoutEntity(oT,this,s[e],t);this.blockGroupsArray.push(r),i&&i(r),r.createBlockGroups(),n.push(r)}return this.nextAdjustGroupWidth=this.getGroupsWidth(),n}initialize(){for(let e=0;e<this.blockGroupsArray.length;e++)this.blockGroupsArray[e].initialize();this.isReady=!0,this.adjust()}adjust(e=null){if(this.isReady){const t=this.classesToApply,i=this.domChanges;let n=this.classesToApply=[],s=this.domChanges=[];const r=this.clientStateMap;let o;null!==this.nextAdjustGroupWidth?(o=this.nextAdjustGroupWidth,this.nextAdjustGroupWidth=null):o=this.getGroupsWidth();for(let e=0;e<this.blockGroupsArray.length;e++)this.blockGroupsArray[e].adjust(o);e&&e(),n=t.concat(n),s=i.concat(s);const a=Array.from(r.values()).concat(Array.from(this.clientStateMap.values()));this.queueUpdates((()=>{for(;n.length;){const e=n.shift();e&&e()}this.queueUpdates((()=>{for(;s.length;){const e=s.shift();e&&e()}a.length&&this.dotNetReference.invokeMethodAsync("OnModelUpdated",a).catch((e=>{pi(this.container)||console.error(e)}))}))}))}}toggleVisibility(e,t){const i=this.getClientState(e);i&&(i.isVisible=t)}queueUpdates(e){Gt(e)}getGroupsWidth(){const e=this.getContainer();return e?e.offsetWidth-this.containerOffsets:0}dispose(){this.containerOffsets=this.calculateContainerOffsets();for(let e=0;e<this.blockGroupsArray.length;e++)this.blockGroupsArray[e].dispose();this.blockGroupsArray=[],this.classesToApply=[],this.isReady=!1,super.dispose()}getGroupElements(e,t){return ox.getChildElementNodesByPredicate(e,(function(e){return ox.elementMatchesSelector(e,t)}))}createBlockGroups(){this.createBlockGroupsCore(`.${tx.Toolbar} > ${tT}`,`.${tx.ToolbarGroup}`,(function(e){e.defineState(tx.AdaptiveItem,(function(e){e.for(`:not(${iT})`).setWidth(),e.for(iT).setHidden()})),e.defineState(tx.AdaptiveItemTextHidden,(function(e){e.for(`:not(${iT})`).setNoTextWidth(),e.for(iT).setHidden()})),e.defineState(tx.AdaptiveItemHidden,(function(e){e.for(`:only-child:not(${iT})`).setWidth(),e.for(`:not(:only-child):not(${iT})`).setHidden(),e.for(iT).setWidth()})),e.defineState(tx.AdaptiveItemAllHidden,(function(e){e.for(`:only-child:not(${iT})`).setNoTextWidth(),e.for(`:not(:only-child):not(${iT})`).setHidden(),e.for(iT).setNoTextWidth()}))}))}calculateContainerOffsets(){var e;if(!this.container)return 0;let t=this.getBoxInnerOffset(this.container),i=null!==(e=this.container.querySelector(".dxbl-toolbar"))&&void 0!==e?e:this.container;for(;i!==this.container&&i;)t+=this.getBoxOffset(i),i=i.parentNode;return t}}class AT{constructor(e,t){this.currentWidth=null,this.currentHeight=null,this.elementContentWidthSubscription=null,this.mainElement=e,this.layoutBreakPoints=null,this.dotNetReference=t}getMainElement(){return this.mainElement}initialize(){Gt((()=>{this.buildLayout()})),Gt((()=>{this.adjustLayout()})),this.elementContentWidthSubscription=si(this.getMainElement(),(e=>{this.currentWidth===e.width&&this.currentHeight===e.height||(this.currentWidth=e.width,this.currentHeight=e.height,this.onBrowserWindowResize())}))}applyLayoutStateAppearance(){var e;T.DomUtils.addClassName(this.getMainElement(),tx.Loaded),null===(e=this.layoutBreakPoints)||void 0===e||e.initialize(),setTimeout((()=>{T.DomUtils.removeClassName(this.getMainElement(),tx.Loading)}),500)}onBrowserWindowResize(){this.layoutBreakPoints&&this.layoutBreakPoints.adjust()}update(){this.layoutBreakPoints&&this.layoutBreakPoints.adjust()}dispose(){this.elementContentWidthSubscription&&ni(this.elementContentWidthSubscription),this.layoutBreakPoints&&this.layoutBreakPoints.dispose()}buildLayout(){this.layoutBreakPoints=this.layoutBreakPoints||new lT(this),this.layoutBreakPoints.createBlockGroups()}adjustLayout(){var e;this.applyLayoutStateAppearance(),null===(e=this.layoutBreakPoints)||void 0===e||e.adjust()}}let dT=class extends Es{constructor(){super(),this._keyboardNavigator=null,this.loading=!1}willUpdate(e){e.has("loading")&&!this.loading&&this.initializeNavigator()}initializeNavigator(){this._keyboardNavigator||(this._keyboardNavigator=this.querySelector(`:scope > ${Qi}`)),this._keyboardNavigator.initialized||this._keyboardNavigator.initialize(this,new $F(this._keyboardNavigator,this))}};C([An({type:Boolean,attribute:"loading"})],dT.prototype,"loading",void 0),dT=C([on("dxbl-ribbon-internal")],dT);const cT=new Map;function hT(e,t,i){if(!e)return Promise.reject("failed");let n=cT.get(e);n?n.update():(n=new AT(e,i),n.initialize(),cT.set(e,n));return Fi(e.querySelector(tT)||e),Gt((()=>{e.setAttribute("data-dx-ribbon-toolbar-loaded","")})),Promise.resolve("ok")}function uT(e){return t(e,cT),Array.from(cT.keys()).forEach((e=>{pi(e)&&t(e,cT)})),Promise.resolve("ok");function t(e,t){if(!e)return;const i=e.querySelector(tT);i&&yi(i);const n=t.get(e);null==n||n.dispose(),t.delete(e)}}const pT=Object.freeze({__proto__:null,init:hT,dispose:uT,default:{init:hT,dispose:uT}});var mT,gT;!function(e){e[e.Expand=0]="Expand",e[e.Collapse=1]="Collapse",e[e.Check=2]="Check"}(mT||(mT={}));class CT extends CustomEvent{constructor(e){super(CT.eventName,{detail:{action:e},bubbles:!0,composed:!1,cancelable:!0})}}CT.eventName="dxbl-navigation.action-request",gt.register(CT.eventName,(e=>e.detail));class fT{}gT=fT,fT.prefix="dxbl",fT.root=`${gT.prefix}-treeview`,fT.templatedItem=`${gT.root}-tmpl`,fT.item=`${gT.root}-item`,fT.itemsContainer=`${gT.root}-items-container`,fT.itemContent=`${gT.item}-content`,fT.itemContainer=`${gT.item}-container`,fT.checkAllBox=`${gT.root}-checkbox-check-all`,fT.filterPanel=`${gT.prefix}-navigation-filter`;class vT{}vT.parentId="parent-id",vT.notTemplatedItemSelector=`li > .${fT.itemContent}`,vT.templatedItemSelector=`li > .${fT.templatedItem}`;const bT=`:scope > .${fT.itemContainer}, :scope.${fT.templatedItem}`;class wT extends Mi{constructor(e,t){super(e.getKeyBoardNavigator(),t),this._treeView=e}canSwitchToNestedContentMode(){return!0}queryItems(){return this.queryItemsBySelector(bT)}}const yT=`:scope ${vT.templatedItemSelector}, :scope ${vT.notTemplatedItemSelector}`;class BT extends Mi{activate(){!this._activatedByClick&&this._focusedFromOutside&&null==this._treeView.getAttribute(Ei)&&(this.selectedItemIndex=this.navigator.focusedFromForwardElement?this.itemCount-1:0),this._focusedFromOutside=!1,this._activatedByClick=!1,super.activate()}onActiveStateChanged(e){this._focusedFromOutside=e,super.onActiveStateChanged(e)}onPointerDown(e){this._activatedByClick=!0}constructor(e,t){super(e.getKeyBoardNavigator(),t),this._focusedFromOutside=!0,this.boundOnPointerDownHandler=this.onPointerDown.bind(this),this._activatedByClick=!0,this._treeView=e,this.targetElement.addEventListener("pointerdown",this.boundOnPointerDownHandler)}queryItems(){return this.queryItemsBySelector(yT)}createItemStrategy(e){return new wT(this._treeView,e)}getFocusableContainer(){return this.isTemplatedItem()?this.selectedItemElement:this.selectedItemElement.querySelector(`:scope > .${fT.itemContainer}`)}selectedItemExpandedState(){const e=this.getFocusableContainer().getAttribute(N.ariaExpanded);return null===e?null:"true"===e}selectedItemIsCheckable(){return this.getFocusableContainer().hasAttribute(N.ariaChecked)}selectedItemIsParentNode(){return"1"===this.getFocusableContainer().getAttribute(N.ariaLevel)}selectedItemIsEndNode(){return null===this.getFocusableContainer().getAttribute(N.ariaExpanded)}getSelectedItemParent(){const e=this.getFocusableContainer(),t=this.isTemplatedItem()?e.parentElement:e,i=null==t?void 0:t.getAttribute(vT.parentId),n=document.querySelector(`#${i}`);return this.isTemplatedItem()?n.firstElementChild:n.parentElement}isTemplatedItem(){return this.selectedItemElement.classList.contains(fT.templatedItem)}handleKeyDown(e){return super.handleKeyDown(e),!this.nestedContentSelected&&this.handleKeyDownCore(e)}handleKeyDownCore(e){switch(Be.KeyUtils.getEventKeyCode(e)){case Be.KeyCode.Enter:return this.raiseClickEvent(this.getFocusableContainer(),e.ctrlKey,e.metaKey,e.shiftKey),!0;case Be.KeyCode.Space:return this.handleSpace(),!0;case Be.KeyCode.Up:return this.moveToPrevItem(!0),!0;case Be.KeyCode.Down:return this.moveToNextItem(!0),!0;case Be.KeyCode.Left:return!0===this.selectedItemExpandedState()?this.performAction(mT.Collapse):this.selectedItemIsParentNode()||this.moveToParent(),!0;case Be.KeyCode.Right:return!1===this.selectedItemExpandedState()?this.performAction(mT.Expand):this.selectedItemIsEndNode()||this.moveToFirstChild(),!0;case Be.KeyCode.Home:return this.selectItem(0),!0;case Be.KeyCode.End:return this.selectItem(this.itemCount-1),!0;default:return!1}}onDispose(){this.targetElement.removeEventListener("pointerdown",this.boundOnPointerDownHandler)}moveToParent(){const e=this.getSelectedItemParent(),t=this.items.indexOf(e);this.selectItem(t)}moveToFirstChild(){this.moveToNextItem(!1)}handleSpace(){this.handleChecking()}selectedItemIsSelectable(){return null!==this.getFocusableContainer().getAttribute(N.ariaSelected)}handleChecking(){(this.selectedItemIsCheckable()||this.selectedItemIsSelectable())&&this.performAction(mT.Check)}performAction(e){this.getFocusableContainer().dispatchEvent(new CT(e))}}class ET extends Mi{constructor(e,t){super(e.getKeyBoardNavigator(),t),this._treeView=e}queryItems(){return this.queryItemsBySelector("input")}}class IT extends Mi{get activatedByCheckAllClick(){return this._activatedByCheckAllClick}set activatedByCheckAllClick(e){this._activatedByCheckAllClick=e}constructor(e){super(e.getKeyBoardNavigator(),e),this.boundOnPointerDownHandler=this.onPointerDown.bind(this),this._activatedByCheckAllClick=!1,this._checkAllBox=null,this._treeView=e}onDispose(){if(this._checkAllBox){this._checkAllBox.querySelector("label").removeEventListener("pointerdown",this.boundOnPointerDownHandler)}}activate(){super.activate(),this.activatedByCheckAllClick||this._checkAllBox&&Si(this._checkAllBox)}onActiveStateChanged(e){super.onActiveStateChanged(e),e||(this.activatedByCheckAllClick=!1)}onPointerDown(e){this._checkAllBox&&(Ii(this._checkAllBox),this.activatedByCheckAllClick=!0)}queryItems(){return this.queryItemsBySelector(`:scope .${fT.checkAllBox}, :scope .${fT.filterPanel} input, :scope .${fT.itemsContainer}[role=tree]`)}isItemsContainer(e){return e.classList.contains(fT.itemsContainer)}isCheckAllBox(e){return e.classList.contains(fT.checkAllBox)}createItemStrategy(e){if(this.isItemsContainer(e))return new BT(this._treeView,e);if(this.isCheckAllBox(e)){this._checkAllBox=e;return this._checkAllBox.querySelector("label").addEventListener("pointerdown",this.boundOnPointerDownHandler),new ET(this._treeView,e)}return null}handleKeyDown(e){return super.handleKeyDown(e),this.handleKeyDownCore(e)}handleKeyDownCore(e){return Be.KeyUtils.getEventKeyCode(e)===Be.KeyCode.Tab&&(e.shiftKey?this.firstItemSelected?this.leaveBackward():this.moveToPrevItem(!1):this.lastItemSelected?this.leaveForward():this.moveToNextItem(!1),!0)}}var ST;!function(e){e.Disabled="Disabled",e.Multiple="Multiple",e.Recursive="Recursive"}(ST||(ST={}));class xT extends Es{constructor(){super(...arguments),this._keyboardNavigator=null,this.checkMode=ST.Disabled}connectedOrContentChanged(){this._keyboardNavigator=this.querySelector(`:scope > ${Qi}`),this._keyboardNavigator&&this.initializeKeyboardNavigation(),super.connectedOrContentChanged()}initializeKeyboardNavigation(){this._keyboardNavigator&&"initialized"in this._keyboardNavigator&&!this._keyboardNavigator.initialized&&this._keyboardNavigator.initialize(this,new IT(this))}disconnectedCallback(){var e;null===(e=this._keyboardNavigator)||void 0===e||e.disposeComponent()}getKeyBoardNavigator(){return this._keyboardNavigator}}C([An({type:ST,attribute:"check-mode"})],xT.prototype,"checkMode",void 0);let DT=class extends xT{};var FT;DT=C([on("dxbl-treeview")],DT);class TT{}FT=TT,TT.prefix="dxbl",TT.root=`${FT.prefix}-accordion`,TT.group=`${FT.root}-group`,TT.header=`${FT.group}-header`,TT.body=`${FT.group}-body`,TT.item=`${FT.root}-item`,TT.itemContent=`${FT.item}-content`,TT.itemsContainer=`${FT.root}-items-container`,TT.itemTemplate=`${FT.root}-tmpl`;class HT extends Mi{get selector(){return this.isTemplatedItem(this.targetElement)?`:scope.${TT.itemTemplate}`:`:scope.${TT.itemContent}`}constructor(e,t){super(e.getKeyBoardNavigator(),t),this._accordion=e}canSwitchToNestedContentMode(){return!0}isTemplatedItem(e){return e.classList.contains(TT.itemTemplate)}queryItems(){return this.queryItemsBySelector(this.selector)}isExpanded(){return"true"===this.selectedItemElement.getAttribute(N.ariaExpanded)}handleKeyDown(e){return!!super.handleKeyDown(e)||!this.nestedContentSelected&&this.handleKeyDownCore(e)}handleKeyDownCore(e){switch(Be.KeyUtils.getEventKeyCode(e)){case Be.KeyCode.Enter:return this.raiseClickEvent(this.targetElement,e.ctrlKey,e.metaKey,e.shiftKey),!0;case Be.KeyCode.Left:return!!this.isExpanded()&&(this.performAction(mT.Collapse),!0);case Be.KeyCode.Right:return!this.isExpanded()&&(this.performAction(mT.Expand),!0);default:return!1}}performAction(e){this.targetElement.dispatchEvent(new CT(e))}}class UT extends HT{get selector(){return`:scope.${TT.header}`}}class PT extends Mi{get activateFirstItem(){return this._activateFirstItem}set activateFirstItem(e){this._activateFirstItem=e}constructor(e,t){super(e.getKeyBoardNavigator(),t),this._activateFirstItem=!0,this._accordion=e}activate(){this.focusedFromOutsideBody()&&(this.selectedItemIndex=this.activateFirstItem?0:this.itemCount-1),super.activate()}canSwitchToNestedContentMode(){return!0}focusedFromOutsideBody(){return!this.targetElement.contains(document.activeElement)}isTemplatedBody(){return null==this.targetElement.querySelector(`:scope .${TT.item}`)}isItem(e){return e.classList.contains(TT.itemContent)}queryItems(){return this.queryItemsBySelector(this.getBodyElementsSelector())}getBodyElementsSelector(){return this.isTemplatedBody()?`:scope.${TT.body}`:`:scope .${TT.itemContent}`}createItemStrategy(e){return this.isItem(e)?new HT(this._accordion,e):null}handleKeyDown(e){const t=super.handleKeyDown(e);return t||this.nestedContentSelected?t:this.handleKeyDownCore(e)}handleKeyDownCore(e){switch(Be.KeyUtils.getEventKeyCode(e)){case Be.KeyCode.Down:return!!this.canProcessUpDownKey()&&(this.moveToNextItem(!0),!0);case Be.KeyCode.Up:return!!this.canProcessUpDownKey()&&(this.moveToPrevItem(!0),!0);default:return!1}}canProcessUpDownKey(){return this.isItem(document.activeElement)}}const QT=`:scope .${TT.header},\n:scope .${TT.body}[expanded-state=True], :scope .${TT.itemTemplate}`;class NT extends Mi{constructor(e){super(e.getKeyBoardNavigator(),e),this._accordion=e}isHeader(e){return e.classList.contains(TT.header)}isBody(e){return e.classList.contains(TT.body)}queryItems(){return this.queryItemsBySelector(QT)}createItemStrategy(e){return this.isHeader(e)?new UT(this._accordion,e):this.isBody(e)?new PT(this._accordion,e):new HT(this._accordion,e)}handleKeyDown(e){return super.handleKeyDown(e),!this.nestedContentSelected&&this.handleKeyDownCore(e)}activate(){var e,t;(null===(e=this.getSelectedItemStrategy())||void 0===e?void 0:e.targetElement.contains(document.activeElement))?null===(t=this.getSelectedItemStrategy())||void 0===t||t.activate():super.activate()}handleKeyDownCore(e){var t;switch(Be.KeyUtils.getEventKeyCode(e)){case Be.KeyCode.Enter:return this.isBody(this.selectedItemElement)&&(null===(t=this.getSelectedItemStrategy())||void 0===t||t.activate()),!0;case Be.KeyCode.Esc:return document.activeElement!==this.selectedItemElement&&this.selectItem(this.selectedItemIndex),!0;case Be.KeyCode.Down:return this.moveToNextItem(!1),!0;case Be.KeyCode.Up:return this.moveToPrevItem(!1),!0;case Be.KeyCode.Tab:return e.shiftKey?this.leaveBackward():this.leaveForward(),!0}return!1}canFocusSelectedItem(){return super.canFocusSelectedItem()||this.isBody(this.selectedItemElement)}updateSelectedItemByIndex(e){const t=this.selectedItemIndex;super.updateSelectedItemByIndex(e),this.isBody(this.selectedItemElement)&&(this.getSelectedItemStrategy().activateFirstItem=t<this.selectedItemIndex)}}class RT extends Es{constructor(){super(...arguments),this._keyboardNavigator=null}connectedOrContentChanged(){this._keyboardNavigator=this.querySelector(`:scope > ${Qi}`),this._keyboardNavigator&&this.initializeKeyboardNavigator(),super.connectedOrContentChanged()}initializeKeyboardNavigator(){this._keyboardNavigator&&"initialized"in this._keyboardNavigator&&!this._keyboardNavigator.initialized&&this._keyboardNavigator.initialize(this,new NT(this))}disconnectedCallback(){var e;null===(e=this._keyboardNavigator)||void 0===e||e.disposeComponent()}getKeyBoardNavigator(){return this._keyboardNavigator}}let LT=class extends RT{};LT=C([on("dxbl-accordion")],LT);class MT extends Gx{constructor(e,t,i){super(e,t),this._menuClosing=!1,this.focusBorderVisible=!1,this._parentStrategy=i,this.selectedItemIndex=-1}makeFocusBorderVisible(){this.focusBorderVisible=!0}get parentStrategy(){return this._parentStrategy}initialize(){super.initialize(),this.targetElement.setAttribute(Xx,"")}activate(){this.selectedItemIndex>=0&&super.activate()}updateSelectedItemByIndex(e){e>=0&&super.updateSelectedItemByIndex(e)}queryItems(){return this.queryItemsBySelector(".dxbl-context-menu-item, .dxbl-context-menu-template")}onActiveStateChanged(e){e||(this.selectedItemElement&&fi.removeTabIndex(this.selectedItemElement),fi.removeTabIndex(this.targetElement))}doAction(e){this.selectedItemElement&&(this.doClick(this.selectedItemElement,e),kx(this.selectedItemElement)&&this.openSubMenu(zx.First))}async openSubMenu(e){this.requestSubMenuOpen();const t=await this.waitSubMenuShown();e===zx.Last?t.focusLastItem():t.focusFirstItem()}handlePopupShown(){this.parentStrategy.onSubMenuShown(this),this.focusContainer()}handlePopupClosed(){this.parentStrategy.onSubMenuClosed(this)}onSubMenuClosed(e){super.onSubMenuClosed(e),this.focusBorderVisible||(Ii(this.targetElement),this.focusBorderVisible=!1),this._menuClosing||this.focusContainer(),this._menuClosing=!1}focusContainer(){const e=fi.findFocusableElements(this.targetElement);e.length>0&&fi.focusElement(e[0])}createSubMenuStrategy(e,t){return new KT(e,t,this)}handleKeyDown(e){switch(Be.KeyUtils.getEventKeyCode(e)){case Be.KeyCode.Esc:return this.closeSelf(Be.KeyCode.Esc)&&H.markHandled(e),!0;case Be.KeyCode.Tab:return this._menuClosing=!0,!1;default:return super.handleKeyDown(e)}}}class kT extends MT{closeSelf(e){return!(!kx(this.selectedItemElement)||e===Be.KeyCode.Esc)&&(this.openSubMenu(zx.Last),!0)}}class KT extends MT{closeSelf(e){const t=this.targetElement.placementTargetElement;return this.parentStrategy.makeFocusBorderVisible(),!!t&&(t.dispatchEvent(new Wx(Vx.Collapse)),this.parentStrategy.focusSelectedItem(),!0)}}class OT extends Mi{constructor(e,t){super(e,t),this._prevActiveElement=null,this.boundHandlePopupKeyboardStrategyCreating=this.handlePopupKeyboardStrategyCreating.bind(this),this.targetElement.addEventListener(Co.eventName,this.boundHandlePopupKeyboardStrategyCreating)}queryItems(){return this.queryItemsBySelector(".dxbl-dropdown-dialog")}onSubMenuShown(e){this._prevActiveElement||(this._prevActiveElement=document.activeElement)}onSubMenuClosed(e){e.targetElement.isConnected&&!_x(e.targetElement)||this.tryRestoreFocusedElement(),fi.removeTabIndex(this.targetElement)}handlePopupKeyboardStrategyCreating(e){e.detail.factory={createPopup:(e,t)=>new kT(e,t,this)},e.stopPropagation()}handleKeyDown(e){return Be.KeyUtils.getEventKeyCode(e)!==Be.KeyCode.Tab||this.nestedContentSelected?super.handleKeyDown(e):(e.shiftKey?this.leaveBackward():this.leaveForward(),this.performShortcutEvent(e),!0)}tryRestoreFocusedElement(){this._prevActiveElement&&this._prevActiveElement instanceof HTMLElement&&(this._prevActiveElement.focus(),this._prevActiveElement=null)}canFocusSelectedItem(){return this.selectedItemElement===this.targetElement?this.selectedItemElement.hasAttribute("is-open"):!this.getSelectedItemStrategy()}makeFocusBorderVisible(){}}let _T=class extends Es{constructor(){super(),this._keyboardNavigator=null,this.bindedOnChanged=this.onChanged.bind(this),this.isOpen=!1,this._observer=new MutationObserver(this.bindedOnChanged)}onChanged(e,t){null==e||e.forEach((e=>{e.addedNodes.forEach((e=>{e instanceof Li&&(this._keyboardNavigator=e,this.initializeKeyboardNavigation())}))}))}connectedCallback(){this._keyboardNavigator=this.querySelector(Qi),this._keyboardNavigator?this.initializeKeyboardNavigation():this._observer.observe(this,{childList:!0})}initializeKeyboardNavigation(){this._keyboardNavigator&&"initialized"in this._keyboardNavigator&&!this._keyboardNavigator.initialized&&this._keyboardNavigator.initialize(this,new OT(this._keyboardNavigator,this)),fi.removeTabIndex(this)}disconnectedCallback(){var e;this._observer.disconnect(),null===(e=this._keyboardNavigator)||void 0===e||e.disposeComponent()}};C([An({type:Boolean,attribute:"is-open"})],_T.prototype,"isOpen",void 0),_T=C([on("dxbl-context-menu")],_T);class VT{}VT.ClassName=he.Prefix+"-pivot-table",VT.TableDataClassName=VT.ClassName+"-data",VT.HeaderFieldClassName=VT.ClassName+"-header-field",VT.HeaderFieldEmptyClassName=VT.HeaderFieldClassName+"-empty",VT.HeaderFreeSpaceClassName=VT.ClassName+"-header-free-space",VT.RowFieldItemClassName=VT.ClassName+"-row-field-item",VT.AreaClassName=VT.ClassName+"-area",VT.AreaDataClassName=VT.AreaClassName+"-data",VT.AreaRowClassName=VT.AreaClassName+"-row",VT.AreaRowFieldClassName=VT.AreaClassName+"-row-field",VT.AreaColumnClassName=VT.AreaClassName+"-column",VT.AreaColumnInnerContainerClassName=VT.AreaColumnClassName+"-inner-container",VT.AreaMultipleHeadersInnerContainer=VT.AreaClassName+"-multiple-headers-inner-container",VT.AreaFilterClassName=VT.AreaClassName+"-filter",VT.FixedCellClassName=VT.ClassName+"-fixed-cell",VT.NoScrollClassName=VT.ClassName+"-no-scroll",VT.LastFixedLeftCellClassName=VT.ClassName+"-last-fixed-left-cell",VT.DraggableHeaderClassName=VT.ClassName+"-draggable-header",VT.HeaderContentClassName=VT.ClassName+"-header-content",VT.DraggingUpTargetClassName=VT.ClassName+"-dragging-up-target",VT.DraggingDownTargetClassName=VT.ClassName+"-dragging-down-target",VT.MoveCursorCssClassName=VT.ClassName+"-move-cursor",VT.NotAllowedCursorCssClassName=VT.ClassName+"-not-allowed-cursor",VT.FieldListClassName=VT.ClassName+"-field-list",VT.FieldListContainerClassName=VT.FieldListClassName+"-container",VT.FieldListContainerDataClassName=VT.FieldListContainerClassName+"-data",VT.FieldListContainerRowClassName=VT.FieldListContainerClassName+"-row",VT.FieldListContainerColumnClassName=VT.FieldListContainerClassName+"-column",VT.FieldListContainerFilterClassName=VT.FieldListContainerClassName+"-filter";class zT{constructor(){}}zT.Table=`.${VT.TableDataClassName}`,zT.BodyRows="tbody tr",zT.RowFieldItem=`.${VT.RowFieldItemClassName}`,zT.AreaData=`.${VT.AreaDataClassName}`,zT.AreaRow=`.${VT.AreaRowClassName}`,zT.AreaFilter=`.${VT.AreaFilterClassName}`,zT.AreaRowField=`.${VT.AreaRowFieldClassName}`,zT.AreaColumnInnerContainer=`.${VT.AreaColumnInnerContainerClassName}`,zT.ColElementSelector=`:scope > .${xe.ClassName} > .${xe.ContentContainerClassName} > .${VT.TableDataClassName} > colgroup > col`,zT.AreaMultipleHeadersInnerContainerSelector=`.${VT.AreaMultipleHeadersInnerContainer}`,zT.HeaderFieldSelector=`.${VT.HeaderFieldClassName}`;const WT="dxbl-pivot-table";class $T{constructor(){}}var GT;$T.DataColumnIndex="data-column-index",$T.TableState="table-state",$T.Uid="data-dx-pivot-uid",function(e){e[e.Disabled=0]="Disabled",e[e.LeftBorder=1]="LeftBorder",e[e.BetweenBorders=2]="BetweenBorders",e[e.RightBorder=3]="RightBorder"}(GT||(GT={}));class qT{constructor(e){this._pivotUid="",this._lastGeneratedStyle="",this._scrollStatus=GT.Disabled,this._pivot=e}get highlightLeftBorder(){switch(this._scrollStatus){case GT.BetweenBorders:case GT.RightBorder:return!0;default:return!1}}updateStyle(e){this._scrollStatus=this.calcScrollStatus(e),requestAnimationFrame((()=>this.updateFixedCellsStyle()))}hasAnyFixedColumn(){return this._pivot.columnsInfo.some((e=>!!e.fixedPosition))}updateFixedCellsStyle(){this._pivotUid=this._pivot.getAttribute($T.Uid);const e=this._pivot.querySelector("style");if(!e)return;let t="";this.hasAnyFixedColumn()&&(t+=this.createPositionStyles(),t+=this.createBorderStyles()),this._lastGeneratedStyle!==t&&(e.innerText=t,this._lastGeneratedStyle=t)}createPositionStyles(){const e=this._pivot.getColElements(),t=this.getOffsetWidths(e),i=new Array(t.length);i[0]=0;for(let e=1;e<t.length;++e)i[e]=i[e-1]+t[e-1];let n="";for(let e=0;e<this._pivot.columnsInfo.length;++e){const t=this._pivot.columnsInfo[e].fixedPosition;t&&"left"===t&&(n+=this.createPositionStyleForColumn(e,t,i[e]))}return n}createPositionStyleForColumn(e,t,i){return this.getTableRowsSelector()+` > .${VT.FixedCellClassName}[data-column-index="${e}"]`+` { ${t}: ${i}px; }`}createBorderStyles(){const e=[];return this.highlightLeftBorder&&(e.push(this.createLeftBorderStyle("th")),e.push(this.createLeftBorderStyle("td"))),e.join("")}createLeftBorderStyle(e){return this.getTableRowsSelector()+` > ${e}.${VT.LastFixedLeftCellClassName} { border-right-color: var(--dxbl-pivot-table-fixed-column-border-color); border-right-width: var(--dxbl-pivot-table-border-width); }`}getTableRowsSelector(){return[`${WT}[${$T.Uid}="${this._pivotUid}"]`,`.${xe.ClassName}`,`.${xe.ContentContainerClassName}`,`.${VT.TableDataClassName}`,"*","tr"].join(" > ")}getOffsetWidths(e){const t=[];for(let i=0;i<e.length;++i)t.push(this._pivot.getColElementOffsetWidth(i));return t}calcScrollStatus(e){if(!(this._pivot&&this._pivot.getTable()))return GT.Disabled;const t=this._pivot.getTable().clientWidth;return t===e.clientWidth?GT.Disabled:0===e.scrollLeft?GT.LeftBorder:Math.abs(t-e.clientWidth-e.scrollLeft)<1?GT.RightBorder:GT.BetweenBorders}}class YT{get uID(){return this._uID}get width(){return this._width}get minWidth(){return this._minWidth}get hasWidth(){return!!this._width}get isPercentWidth(){return this.hasWidth&&-1!==this.width.indexOf("%")}get isAbsoluteWidth(){return this.hasWidth&&!this.isPercentWidth}get colElementWidth(){return this._colElementWidth}set colElementWidth(e){this._colElementWidth=e}get fixedPosition(){return this._fixedPosition}constructor(e,t,i,n){this._uID=e,this._width=t,this._colElementWidth=t,this._minWidth=i,this._fixedPosition=n}updateWidth(e){this._width=e,this._colElementWidth=e}}var XT,JT;!function(e){e[e.Row=0]="Row",e[e.Column=1]="Column",e[e.Filter=2]="Filter",e[e.Data=3]="Data"}(XT||(XT={})),function(e){e[e.Row=1]="Row",e[e.Column=2]="Column",e[e.Filter=4]="Filter",e[e.Data=8]="Data",e[e.All=15]="All"}(JT||(JT={}));class jT extends NA{constructor(e){super(),this.draggableContext=null,this.boundOnDocumentPointerUpHandler=this.onDocumentPointerUp.bind(this),this.boundOnHeaderMouseMoveHandler=this.onHeaderMouseMove.bind(this),this.boundOnElementMouseOutHandler=this.onElementMouseOut.bind(this),this._pivotTable=e}start(e,t){this.isHeaderDraggingAllowed(e)&&super.start(e,t)}stop(){var e;null===(e=this.draggableContext)||void 0===e||e.targets.dispose(),super.stop(),document.body.classList.remove(VT.MoveCursorCssClassName),document.body.classList.remove(VT.NotAllowedCursorCssClassName)}getDraggableElement(e){return jT.addDraggableHeaderToDOM(e)}hideDraggableElement(){jT.removeDraggableHeaderFromDom()}updateDraggableContextByEvent(e){const t=document.elementFromPoint(e.clientX,e.clientY);this.updateDraggableContextByElement(t,e)}onDocumentPointerUp(e){var t;const i=null===(t=this.draggableContext)||void 0===t?void 0:t.srcElement;i&&!i.isConnected&&this.stop()}onHeaderMouseMove(e){this.updateDraggableContextByElement(e.target,e)}isHeaderDraggingAllowed(e){var t;const i=this._pivotTable.getFieldInfo(e);return null!==(t=null==i?void 0:i.allowDrag)&&void 0!==t&&t}isPossibleDropToCurrentArea(){var e;return!!(null===(e=this.draggableContext)||void 0===e?void 0:e.draggedField.allowedAreas)&&jT.isAreaAllowed(this.draggableContext.dropArea,this.draggableContext.draggedField.allowedAreas)}static isAreaAllowed(e,t){return 0!=(t&this.flagOf(e))}static flagOf(e){return 1<<e}createFieldDraggedHandlerArgs(){return this.draggableContext&&this.draggableContext.isPossibleDropItem&&this.draggableContext.draggedField.uID?{fieldUid:this.draggableContext.draggedField.uID,newArea:this.draggableContext.dropArea,nextFieldUid:this.draggableContext.nextFieldUid}:null}updateDraggableContextByElement(e,t){if(!e)return;if(null==this.draggableContext)return;const i=this._pivotTable.findFieldHeaderElement(e);if(i)this.updateDraggableContext(i,t);else{const t=e,i=t.classList.contains(VT.HeaderFieldEmptyClassName)||t.classList.contains(VT.HeaderFreeSpaceClassName);if(!i)return;const n=this._pivotTable.getLastFieldHeaderInArea(t);if(this.draggableContext.srcElement===t||this.draggableContext.srcElement===n)return;this.draggableContext.dropArea=this.getClosestArea(t),this.draggableContext.nextFieldUid=null,this.draggableContext.isPossibleDropItem=this.isPossibleDropToCurrentArea();const s=null!=n?n:i?t:null;s&&(this.setMouseOverElementInfo(s),this.draggableContext.targets.setPositionRelativeToElement(this.draggableContext.mouseOverElementRect,n?MA.Right:MA.Left))}}updateDraggableContext(e,t){var i;if(this.clearMoveStateFromDraggableContext(),null==this.draggableContext)return;if(this.draggableContext.srcElement===e)return;if(this.setMouseOverElementInfo(e),!this.isPossibleDropToCurrentArea())return;const n=this.isThereCursorInLeftPart(t),s=this._pivotTable.getFieldHeaderSiblings(e);if(!s)return void this.clearMoveStateFromDraggableContext();const r=Array.from(s),o=r.findIndex((t=>t.isSameNode(e)))+(n?-1:1);if(r[o]!==this.draggableContext.srcElement){const t=this._pivotTable.getFieldInfo(n?e:r[o]);this.draggableContext.nextFieldUid=null!==(i=null==t?void 0:t.uID)&&void 0!==i?i:null,this.draggableContext.isPossibleDropItem=this.isPossibleDropToCurrentArea()}else this.clearMoveStateFromDraggableContext();this.draggableContext.isPossibleDropItem&&this.draggableContext.targets.setPositionRelativeToElement(this.draggableContext.mouseOverElementRect,n?MA.Left:MA.Right)}refreshUICore(){super.refreshUICore();const e=this.draggableContext;if(!e)return;e.isPossibleDropItem?e.targets.show():e.targets.hide();const t=this.isPossibleDropToCurrentArea();document.body.classList.toggle(VT.MoveCursorCssClassName,t),document.body.classList.toggle(VT.NotAllowedCursorCssClassName,!t)}setMouseOverElementInfo(e){super.setMouseOverElementInfo(e),this.draggableContext&&(this.draggableContext.dropArea=this.getClosestArea(e))}isThereCursorInLeftPart(e){if(!this.draggableContext||!this.draggableContext.mouseOverElementRect)return!1;const t=this.draggableContext.mouseOverElementRect;return e.pageX<t.x+t.width/2}updateDraggableElementPosition(){if(!this.draggableContext)return;const e=this.draggableContext;e.draggableElementPosition={x:e.srcElementPosition.x+(e.currentCursorPosition.x-e.initialCursorPosition.x)+(e.currentScrollPosition.x-e.initialScrollPosition.x)+e.currentScrollPosition.x,y:e.srcElementPosition.y+(e.currentCursorPosition.y-e.initialCursorPosition.y)+(e.currentScrollPosition.y-e.initialScrollPosition.y)+e.currentScrollPosition.y}}addEventSubscriptions(){super.addEventSubscriptions(),document.addEventListener("pointerup",this.boundOnDocumentPointerUpHandler),this.addHeaderEventSubscriptions()}addHeaderEventSubscriptions(){const e=this._pivotTable.getHeaderAreas();for(let t=0;t<e.length;t++){const i=e[t];i.addEventListener("pointermove",this.boundOnHeaderMouseMoveHandler),i.addEventListener("pointerout",this.boundOnElementMouseOutHandler)}}removeEventSubscriptions(){super.removeEventSubscriptions(),document.removeEventListener("pointerup",this.boundOnDocumentPointerUpHandler),this.removeHeaderEventSubscriptions()}removeHeaderEventSubscriptions(){const e=this._pivotTable.getHeaderAreas();for(let t=0;t<e.length;t++){const i=e[t];i.removeEventListener("pointermove",this.boundOnHeaderMouseMoveHandler),i.removeEventListener("pointerout",this.boundOnElementMouseOutHandler)}}static addDraggableHeaderToDOM(e){const t=document.createElement("div");t.className=VT.DraggableHeaderClassName;const i=e.getBoundingClientRect();t.style.width=`${i.width}px`,t.style.height=`${i.height}px`;const n=getComputedStyle(e);t.style.padding=n.padding,t.style.font=n.font,t.style.whiteSpace=n.whiteSpace;const s=e.cloneNode(!0);return t.appendChild(s),document.body.appendChild(t),t}static removeDraggableHeaderFromDom(){const e=document.querySelectorAll(`.${VT.DraggableHeaderClassName}`);for(let t=0;t<e.length;t++)e[t].remove()}createDraggableContext(e,t,i){const n=super.createDraggableContext(e,t,i),s=this._pivotTable.getScrollViewer(),r=this._pivotTable.getFieldInfo(e);return{...n,scrollViewerRect:s&&s.getRectangle(),draggedField:r,nextFieldUid:null,srcArea:this.getClosestArea(e),dropArea:this.getClosestArea(e),targets:new _A(VT.DraggingUpTargetClassName,VT.DraggingDownTargetClassName)}}getClosestArea(e){const t=e.closest(`.${VT.AreaClassName}`);if(t.classList.contains(VT.AreaDataClassName))return XT.Data;if(t.classList.contains(VT.AreaRowClassName))return XT.Row;if(t.classList.contains(VT.AreaColumnClassName))return XT.Column;if(t.classList.contains(VT.AreaFilterClassName))return XT.Filter;throw Error("draggable area not found")}clearMoveStateFromDraggableContext(){super.clearMoveStateFromDraggableContext(),this.draggableContext&&(this.draggableContext.nextFieldUid=null)}}class ZT extends CustomEvent{constructor(e){super(ZT.eventName,{detail:new eH(e),bubbles:!0,composed:!0,cancelable:!0})}}ZT.eventName="dxbl-pivot-table.field-moved";class eH{constructor(e){this.FieldUid=e.fieldUid,this.NewArea=e.newArea,this.NextFieldUid=e.nextFieldUid}}gt.register(ZT.eventName,(e=>e.detail));customElements.define(WT,class extends de{constructor(){super(),this.boundOnMouseDownHandler=this.onMouseDown.bind(this),this.boundOnDragStartHandler=this.onDragStart.bind(this),this.boundOnDragStopHandler=this.onDragStop.bind(this),this.boundOnDragCancelHandler=this.onDragCancel.bind(this),this.boundOnScrollViewerScrollHandler=this.onScrollViewerScroll.bind(this),this.boundOnScrollViewerUpdateHandler=this.onScrollViewerUpdate.bind(this),this._columnsInfo=[],this._styleGenerator=null,this._componentResizeObserver=new ResizeObserver(this.onSizeChanged.bind(this)),this._pointerEventsHelper=new q(this),this._fieldDraggingHelper=new jT(this)}getHeaderAreas(){return this.querySelectorAll(`.${VT.AreaClassName}`)}findFieldHeaderElement(e){const t=e;return t?this.isHeaderElement(t)?t:t.closest(`.${VT.HeaderFieldClassName}`):null}isHeaderElement(e){return e&&e.classList.contains(VT.HeaderFieldClassName)}getHeaderCell(e,t){throw new Error("Method not implemented.")}getFieldHeaderSiblings(e){const t=e.closest(`.${VT.AreaClassName}`);return t&&t.querySelectorAll(`.${VT.HeaderFieldClassName}`)}getLastFieldHeaderInArea(e){const t=e.closest(`.${VT.AreaClassName}`).querySelectorAll(zT.HeaderFieldSelector);return t.length?t[t.length-1]:null}getFieldInfo(e){return{uID:null==e?void 0:e.dataset.uid,allowedAreas:null==e?void 0:e.dataset.allowedAreas,allowDrag:void 0!==(null==e?void 0:e.dataset.allowDrag)}}getHeaderDataArea(){return this.querySelector(zT.AreaData)}getHeaderFilterArea(){return this.querySelector(zT.AreaFilter)}getAreaMultipleHeadersInnerContainer(e){return e.querySelector(zT.AreaMultipleHeadersInnerContainerSelector)}get styleGenerator(){return this._styleGenerator}get fieldsInfo(){return Array.from(this.querySelectorAll(`.${VT.HeaderFieldClassName}`)).map((e=>({uID:e.dataset.id})))}get columnsInfo(){return this._columnsInfo}get uId(){return this.getAttribute($T.Uid)}getScrollViewer(){return this.querySelector(`.${xe.ClassName}`)}getScrollViewerContent(){return this.querySelector(`.${xe.ContentContainerClassName}`)}getTable(){return this.querySelector(zT.Table)}getColElements(){return this.querySelectorAll(zT.ColElementSelector)}getTableContainerWidth(){const e=this.getScrollViewerContent();return e?null==e?void 0:e.getBoundingClientRect().width:0}getColElementOffsetWidth(e){return this.getColElements()[e].getBoundingClientRect().width}initializeComponent(){super.initializeComponent(),this._styleGenerator=new qT(this),this._componentResizeObserver.observe(this),this._pointerEventsHelper.initialize(),this.addEventSubscriptions(),this.setupBottomBorderForLastDataRow()}disposeComponent(){this._pointerEventsHelper.dispose(),this.removeEventSubscriptions(),this._componentResizeObserver.disconnect(),super.disposeComponent()}notifyColumnsChanged(e){this._columnsInfo=e}addEventSubscriptions(){this.addEventListener(a.eventName,this.boundOnDragStartHandler),this.addEventListener(l.eventName,this.boundOnDragStopHandler),this.addEventListener(A.eventName,this.boundOnDragCancelHandler),h.Browser.Firefox&&this.addEventListener("mousedown",this.boundOnMouseDownHandler),setTimeout((()=>{const e=this.getScrollViewer();e&&e.subscribeToScroll&&e.subscribeToScroll(this.boundOnScrollViewerScrollHandler),this.addEventListener(Ke.eventName,this.boundOnScrollViewerUpdateHandler)}))}removeEventSubscriptions(){this.removeEventListener(a.eventName,this.boundOnDragStartHandler),this.removeEventListener(l.eventName,this.boundOnDragStopHandler),this.removeEventListener(A.eventName,this.boundOnDragCancelHandler),h.Browser.Firefox&&this.removeEventListener("mousedown",this.boundOnMouseDownHandler),setTimeout((()=>{const e=this.getScrollViewer();e&&e.unsubscribeFromScroll&&e.unsubscribeFromScroll()}))}onScrollViewerScroll(){this.styleGenerator.updateStyle(this.getScrollViewerContent())}setupBottomBorderForLastDataRow(){const e=this.getScrollViewerContent(),t=this.getTable();e&&t&&(t.offsetHeight<e.clientHeight?T.DomUtils.addClassName(t,VT.NoScrollClassName):T.DomUtils.removeClassName(t,VT.NoScrollClassName))}onScrollViewerUpdate(e){this.setupBottomBorderForLastDataRow(),e.stopPropagation()}onMouseDown(e){e.ctrlKey&&e.preventDefault()}onSizeChanged(e){const t=this.getScrollViewer();t&&t.refreshUI&&t.refreshUI()}invokeHeaderFieldMoved(e){e&&this.dispatchEvent(new ZT(e))}findHeaderFieldElement(e){return e?e.closest(`.${VT.HeaderFieldClassName}`):null}onDragStart(e){const t=e.detail.source,i=this.findHeaderFieldElement(t.target);i&&(this._fieldDraggingHelper.start(i,t),i.addEventListener("click",(e=>e.stopImmediatePropagation()),{once:!0})),e.stopPropagation()}onDragStop(e){if(this._fieldDraggingHelper.isStarted()){const e=this._fieldDraggingHelper.createFieldDraggedHandlerArgs();this._fieldDraggingHelper.stop(),this.invokeHeaderFieldMoved(e)}e.stopPropagation()}onDragCancel(e){this._fieldDraggingHelper.isStarted()&&this._fieldDraggingHelper.stop(),e.stopPropagation()}updateStyle(){const e=this.getScrollViewerContent();e&&this.styleGenerator.updateStyle(e);const t=this.getScrollViewer();t&&t.reconnectResizeObservers()}get handlePointerEventsMode(){return r.Dragging}get handlePointerEventsTarget(){return this}get hoverTitleElementsSelector(){return null}get bypassNonInlineHoverTitleElementChildSelector(){return null}shouldProcessPointerEvent(e){return!0}handlePointerEventsDelay(e){return s.Default}static get observedAttributes(){return["update-style"]}attributeChangedCallback(e,t,i){if("update-style"===e)setTimeout((()=>{this.updateStyle()}))}}),customElements.define("dxbl-pivot-table-columns-info",class extends de{get data(){return this.getAttribute("data")}get columns(){return null!==this.data?this.parseColumns(this.data):[]}connectedCallback(){var e;super.connectedCallback(),this.pivot=this.closest(`.${VT.ClassName}`),null===(e=this.pivot)||void 0===e||e.notifyColumnsChanged(this.columns)}parseColumns(e){const t=JSON.parse(e),i=[];for(let e=0;e<t.length;e++){const n=t[e],s=new YT(n.UID,n.Width,n.MinWidth,n.FixedPosition);i.push(s)}return i}static get observedAttributes(){return["data"]}attributeChangedCallback(e,t,i){var n;if("data"===e)null===(n=this.pivot)||void 0===n||n.notifyColumnsChanged(this.parseColumns(i))}}),customElements.define("dxbl-pivot-table-drag-mediator",class extends de{isDropAllowed(e,t){var i;if(!t)return!0;const n=null===(i=e.querySelector(`.${VT.HeaderFieldClassName}`))||void 0===i?void 0:i.dataset.allowedAreas;if(!n)return!0;const s=this.getClosestArea(t);return!s||jT.isAreaAllowed(s,n)}getClosestArea(e){const t=e.closest(`.${VT.FieldListContainerClassName}`);return t.classList.contains(VT.FieldListContainerDataClassName)?XT.Data:t.classList.contains(VT.FieldListContainerRowClassName)?XT.Row:t.classList.contains(VT.FieldListContainerColumnClassName)?XT.Column:t.classList.contains(VT.FieldListContainerFilterClassName)?XT.Filter:null}});class tH{}tH.TimeCellsContainerClassName="dxbl-sc-timecells-container",tH.VerticalAppointmentsClassName="dxbl-sc-vertical-apts",tH.HorizontalAppointmentsClassName="dxbl-sc-horizontal-apts",tH.VerticalEditableAppointmentsClassName="dxbl-sc-editable-vertical-apts",tH.HorizontalEditableAppointmentsClassName="dxbl-sc-editable-horizontal-apts",tH.VerticalAppointmentClassName="dxbl-sc-vertical-apt",tH.HorizontalAppointmentClassName="dxbl-sc-horizontal-apt",tH.CompactAppointmentClassName="dxbl-sc-apt-compact",tH.EditableAppointmentClassName="dxbl-sc-apt-edited",tH.DateCellHeadClassName="dxbl-date-cell-head",tH.MonthViewClassName="dxbl-sc-month",tH.DateHeaderClassName="dxbl-sc-date-hr",tH.TimeCellClassName="dxbl-sc-time-cell",tH.TodayClassName="dxbl-sc-today",tH.HorizontalViewClassName="dxbl-sc-horizontal-view",tH.TimeMarkerWrapperClassName="dxbl-sc-time-marker-wrapper",tH.TimeMarkerWrapperInvisibleClassName="dxbl-sc-time-marker-wrapper-invisible",tH.TimeMarkerClassName="dxbl-sc-time-marker",tH.TimeMarkerImageClassName="dxbl-sc-time-marker-image",tH.TimeMarkerLineClassName="dxbl-sc-time-marker-line",tH.TimeIndicatorClassName="dxbl-sc-time-indicator",tH.AppointmentClassName="dxbl-sc-apt",tH.SelectedAppointmentClassName="dxbl-sc-apt-selected",tH.DisableAppointmentClassName="dxbl-sc-apt-disable",tH.VerticalResourceHeaderClassName="dxbl-v-resource-header",tH.ResourcesContainerClassName="dxbl-sc-resources-container",tH.HeadersContainerClassName="dxbl-sc-headers-container",tH.AllDayAreaClassName="dxbl-sc-all-day-area",tH.TimelineViewClassName="dxbl-sc-timeline",tH.TopHandleClassName="dxbl-top-handle",tH.BottomHandleClassName="dxbl-bottom-handle",tH.LeftHandleClassName="dxbl-left-handle",tH.RightHandleClassName="dxbl-right-handle",tH.VerticalViewClassName="dxbl-sc-vertical-view",tH.View="dxbl-view",tH.ToolbarWrapper="dxbl-sc-tb-wrapper",tH.ResourceNavigatorFooter="dxbl-rn-footer",tH.ResourceNavigatorListBoxContainer="dxbl-resource-navigator-list-box-container",tH.AppointmentTooltip="dxbl-sc-tooltip";class iH{constructor(){this.TIMEOUT=6e4,this.subscriptions=[],this.timerId=-1}subscribe(e,t){if(-1===this.getSubscriptionIndex(e)){this.subscriptions.push({scheduler:e,updateAction:t}),-1===this.timerId&&this.startTimer()}}unsubscribe(e){const t=this.getSubscriptionIndex(e);-1!==t&&this.unsubscribeByIndex(t),0===this.subscriptions.length&&this.stopTimer()}unsubscribeByIndex(e){this.subscriptions.splice(e,1)}getSubscriptionIndex(e){for(let t,i=0;t=this.subscriptions[i];i++)if(t.scheduler===e)return i;return-1}startTimer(){this.timerId=setTimeout(this.onTimeout.bind(this),this.TIMEOUT)}stopTimer(){-1!==this.timerId&&(clearTimeout(this.timerId),this.timerId=-1)}onTimeout(){for(let e,t=0;e=this.subscriptions[t];t++)if(iH.isElementValid(e.scheduler))try{e.updateAction()}catch(e){}else this.unsubscribeByIndex(t),t--;this.startTimer()}static isElementValid(e){for(;null!=e;){if("BODY"===e.tagName)return!0;e=e.parentNode}return!1}}class nH{}nH.ContainerIndex="data-container-index",nH.FirstContainerIndex="data-first-container-index",nH.LastContainerIndex="data-last-container-index",nH.FirstCellIndex="data-first-cell-index",nH.LastCellIndex="data-last-cell-index",nH.ColumnsCount="data-columns-count",nH.Column="data-column",nH.Row="data-row",nH.RowSpan="data-row-span",nH.Key="data-key",nH.Start="data-start",nH.End="data-end",nH.Duration="data-duration",nH.AllDay="data-allday",nH.Resource="data-resource",nH.SnapToCellsMode="snap-to-cells-mode",nH.AppointmentTopPosition="data-appointment-top-position",nH.IsNew="data-is-new",nH.UtcOffset="data-uct-offset";class sH{constructor(e,t){this.start=e,this.duration=t,this.isLongerOrEqualDay=t>=rH.DaySpan}getStart(){return this.start}getDuration(){return this.duration}getEnd(){return rH.dateIncreaseWithUtcOffset(this.start,this.duration)}intersectsWith(e){return e.getEnd().valueOf()-this.getStart().valueOf()>=0&&e.getStart().valueOf()-this.getEnd().valueOf()<=0}}class rH{static dateSubsWithTimezone(e,t){return e.valueOf()-t.valueOf()+(t.getTimezoneOffset()-e.getTimezoneOffset())*rH.HourSpan}static truncToDate(e){return new Date(e.getFullYear(),e.getMonth(),e.getDate())}static calculateDaysDifference(e,t){const i=rH.truncToDate(e),n=rH.truncToDate(t);return rH.dateSubsWithTimezone(n,i)/rH.DaySpan}static dateIncreaseWithUtcOffset(e,t){const i=rH.dateIncrease(e,t),n=(i.getTimezoneOffset()-e.getTimezoneOffset())*rH.HourSpan;return rH.dateIncrease(i,n)}static dateIncrease(e,t){return new Date(e.valueOf()+t)}static addTimeSpan(e,t){return new Date(e.valueOf()+t)}static toDayTime(e){return e.valueOf()-rH.truncToDate(e).valueOf()}static getCellInterval(e){const t=AH.Attr.getStart(e),i=AH.Attr.getEnd(e);return new sH(t,this.dateSubsWithTimezone(i,t))}static dateTimeComparer(e,t){const i=t.getTime()-e.getTime();return 0===i?0:i<0?1:-1}static dateTimeIndexComparer(e,t,i){return rH.dateTimeComparer(e[t],i)}static getUtcTimezoneOffset(e){return e.getTimezoneOffset()*rH.HourSpan*-1}static getCurrentLocalTime(){const e=(new Date).getTime();return new Date(e)}}var oH;rH.HourSpan=6e4,rH.HalfHourSpan=18e5,rH.DaySpan=864e5,function(e){e[e.None=0]="None",e[e.Auto=1]="Auto",e[e.Always=2]="Always"}(oH||(oH={}));const aH=oH;class lH{getContainerIndex(e){return lH.getAttributeIntValue(e,nH.ContainerIndex,-1)}getFirstContainerIndex(e){return lH.getAttributeIntValue(e,nH.FirstContainerIndex,-1)}getLastContainerIndex(e){return lH.getAttributeIntValue(e,nH.LastContainerIndex,-1)}getAppointmentFirstCellIndex(e){return lH.getAttributeIntValue(e,nH.FirstCellIndex,-1)}getAppointmentLastCellIndex(e){return lH.getAttributeIntValue(e,nH.LastCellIndex,-1)}getAppointmentColumnsCount(e){return lH.getAttributeIntValue(e,nH.ColumnsCount,0)}setAppointmentColumnsCount(e,t){e.setAttribute(nH.ColumnsCount,t)}getAppointmentColumn(e){return lH.getAttributeIntValue(e,nH.Column,0)}setAppointmentColumn(e,t){e.setAttribute(nH.Column,t)}getAppointmentRow(e){return lH.getAttributeFloatValue(e,nH.Row,-1)}getAppointmentRowSpan(e){return lH.getAttributeFloatValue(e,nH.RowSpan,0)}getAppointmentKey(e){return e.getAttribute(nH.Key)||""}getAppointmentTopPosition(e){return lH.getAttributeIntValue(e,nH.AppointmentTopPosition,0)}setAppointmentTopPosition(e,t){e.setAttribute(nH.AppointmentTopPosition,t)}removeAppointmentTopPosition(e){e.removeAttribute(nH.AppointmentTopPosition)}getStart(e){const t=new Date(parseInt(e.getAttribute(nH.Start)||""));return rH.dateIncreaseWithUtcOffset(t,t.getTimezoneOffset()*rH.HourSpan)}getEnd(e){const t=parseInt(e.getAttribute(nH.Start)||""),i=parseInt(e.getAttribute(nH.End)||"");return rH.dateIncreaseWithUtcOffset(this.getStart(e),i-t)}getDuration(e){return parseInt(e.getAttribute(nH.Duration)||"")}getAppointmentEnd(e){const t=this.getStart(e),i=this.getDuration(e);return new Date(t.getTime()+i)}getAllDay(e){return""===e.getAttribute(nH.AllDay)}getResourceKey(e){return e.getAttribute(nH.Resource)||""}getSnapToCellsMode(e){const t=e.getAttribute(nH.SnapToCellsMode);return null===t?null:aH[t]}getUtcOffset(e){return lH.getAttributeIntValue(e,nH.UtcOffset,0)}static getAttributeIntValue(e,t,i){return lH.getAttributeParsedNumberValue(e,t,parseInt,i)}static getAttributeFloatValue(e,t,i){return lH.getAttributeParsedNumberValue(e,t,parseFloat,i)}static getAttributeParsedNumberValue(e,t,i,n){const s=e.getAttribute(t);return s?i(s):n}}class AH{static getVerticalAppointmentsContainer(e){return e.querySelector(`.${tH.VerticalAppointmentsClassName}`)}static getHorizontalAppointmentsContainer(e){return e.querySelector(`.${tH.HorizontalAppointmentsClassName}`)}static getHorizontalAppointments(e){const t=e.querySelectorAll(`.${tH.HorizontalAppointmentClassName}`);return Array.from(t)}static getHorizontalEditableAppointments(e){const t=e.querySelectorAll(`.${tH.HorizontalEditableAppointmentsClassName} .${tH.HorizontalAppointmentClassName}`);return Array.from(t)}static getVerticalAppointments(e){const t=e.querySelectorAll(`.${tH.VerticalAppointmentClassName}`);return Array.from(t)}static getVerticalEditableAppointments(e){const t=e.querySelectorAll(`.${tH.VerticalEditableAppointmentsClassName} .${tH.VerticalAppointmentClassName}`);return Array.from(t)}static getHorizontalView(e){return e.querySelectorAll(`.${tH.HorizontalViewClassName}`)[0]}static getTimeMarkerWrappers(e){return e.querySelectorAll(`.${tH.TimeMarkerWrapperClassName}`)}static getTimeMarkerContainer(e){return e.querySelectorAll(`.${tH.TimeMarkerClassName}`)[0]}static getTimeMarkerImages(e){const t=e.querySelectorAll(`.${tH.TimeMarkerImageClassName}`);return Array.from(t)}static getTimeMarkerLine(e){return e.querySelectorAll(`.${tH.TimeMarkerLineClassName}`)[0]}static getTimeIndicatorContainer(e){return e.querySelectorAll(`.${tH.TimeIndicatorClassName}`)[0]}static getAppointmentContainer(e){return Rt(e,tH.AppointmentClassName)}static getTimeCellContainer(e){return Nt(e,"",(function(e,t){return AH.isTimeCellElement(e)}))}static getSelectedAppointment(e){return e.querySelectorAll(`.${tH.SelectedAppointmentClassName}:not(.${tH.DisableAppointmentClassName})`)[0]}static getEditableAppointments(e){const t=e.querySelectorAll(`.${tH.EditableAppointmentClassName}`);return Array.from(t)}static isEditableAppointment(e){return T.DomUtils.hasClassName(e,tH.EditableAppointmentClassName)}static isNewEditableAppointment(e){return e.hasAttribute(nH.IsNew)}static getVerticalResourceHeaders(e){return e.querySelectorAll(`.${tH.VerticalResourceHeaderClassName}`)}static getDateHeaders(e){const t=AH.isMonthView(e)?tH.TimeCellClassName:tH.DateHeaderClassName;return e.querySelectorAll(`.${t}`)}static getTodayDateHeaders(e){return e.querySelectorAll(`.${tH.DateHeaderClassName}.${tH.TodayClassName}`)}static getResourcesViewport(e){return e.querySelectorAll(`.${tH.ResourcesContainerClassName}`)[0]}static getTimescaleViewport(e){return e.querySelectorAll(`.${tH.HeadersContainerClassName}`)[0]}static getTimeCellsViewport(e){return e.querySelectorAll(`.${tH.TimeCellsContainerClassName}`)[0]}static getParentTimeCellsViewport(e){return Rt(e,tH.TimeCellsContainerClassName)}static isVerticalAppointment(e){return T.DomUtils.hasClassName(e,tH.VerticalAppointmentClassName)}static isHorizontalAppointment(e){return T.DomUtils.hasClassName(e,tH.HorizontalAppointmentClassName)}static isTimeCellElement(e){return T.DomUtils.hasClassName(e,tH.AllDayAreaClassName)||T.DomUtils.hasClassName(e,tH.TimeCellClassName)}static isTimelineView(e){return T.DomUtils.hasClassName(e,tH.TimelineViewClassName)}static isMonthView(e){return T.DomUtils.hasClassName(e,tH.MonthViewClassName)}static isTopHandleElement(e){return T.DomUtils.hasClassName(e,tH.TopHandleClassName)}static isBottomHandleElement(e){return T.DomUtils.hasClassName(e,tH.BottomHandleClassName)}static isLeftHandleElement(e){return T.DomUtils.hasClassName(e,tH.LeftHandleClassName)}static isRightHandleElement(e){return T.DomUtils.hasClassName(e,tH.RightHandleClassName)}static isAppointmentSelected(e){return T.DomUtils.hasClassName(e,tH.SelectedAppointmentClassName)}static isHorizontalAppointmentsContainer(e){return T.DomUtils.hasClassName(e,tH.HorizontalAppointmentsClassName)}static isDateCellHeader(e){return T.DomUtils.hasClassName(e,tH.DateCellHeadClassName)}static getToolbarWrapper(e){return e.querySelectorAll(`.${tH.ToolbarWrapper}`)[0]}static getAppointmentTooltip(e){return document.querySelector(`.${tH.AppointmentTooltip}.dxbl-scheduler-instance-${e.id}`)}}AH.Attr=new lH;class dH{constructor(e,t){this._element=e,this._cellSelector=t,this.containers=null,this.timeCells=null}get element(){return this._element}get cellSelector(){return this._cellSelector}getContainers(){if(!this.containers){const e=this.getTimeCells();this.containers={};for(let t,i=0;t=e[i];i++){const e=AH.Attr.getContainerIndex(t);this.containers[e]||(this.containers[e]={cells:[]}),this.containers[e].cells.push(t)}}return this.containers}clearObjects(){this.timeCells=null,this.containers=null}getTimeCells(){return this.timeCells||(this.timeCells=this.element.querySelectorAll(this.cellSelector)),this.timeCells}getFirstContainer(){const e=this.getContainers();for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return e[t]}findCell(e){const t=this.getContainers();for(const i in t)if(Object.prototype.hasOwnProperty.call(t,i))for(let n,s=0;n=t[i].cells[s];s++){const t=AH.Attr.getStart(n),i=AH.Attr.getEnd(n);if(t.valueOf()-e.valueOf()<=0&&e.valueOf()-i.valueOf()<0)return n}return null}findStartCell(e){const t=this.getContainers();for(const i in t)if(Object.prototype.hasOwnProperty.call(t,i))for(let n,s=0;n=t[i].cells[s];s++){const t=AH.Attr.getStart(n);if(e.valueOf()-t.valueOf()<=0)return n}return null}findEndCell(e){const t=this.getContainers();for(const i in t)if(Object.prototype.hasOwnProperty.call(t,i))for(let n,s=0;n=t[i].cells[s];s++){const t=AH.Attr.getEnd(n);if(e.valueOf()-t.valueOf()<=0)return n}return null}findCellByPos(e,t){const i=this.getTimeCells();for(let n,s=0;n=i[s];s++){const i=n.getBoundingClientRect();if(i.top<=t&&t<i.bottom&&i.left<=e&&e<i.right)return n}return null}}var cH;!function(e){e[e.Horizontal=0]="Horizontal",e[e.Vertical=1]="Vertical"}(cH||(cH={}));const hH=cH;class uH{}uH.state="state",uH.snapToCellsMode="snap-to-cells-mode",uH.editableAppointmentKey="editable-appointment-key",uH.selectedAppointmentKey="selected-appointment-key",uH.allowCreateAppointment="allow-create-appointment",uH.allowEditAppointment="allow-edit-appointment",uH.allowDragAppointment="allow-drag-appointment",uH.allowResizeAppointment="allow-resize-appointment",uH.enableAppointmentTooltip="enable-appointment-tooltip",uH.activeFormType="active-form-type",uH.clientUtcOffset="client-utc-offset",uH.startInterval="start-interval",uH.endInterval="end-interval",uH.resources="resources",uH.appointmentStart="appointment-start",uH.appointmentEnd="appointment-end",uH.appointmentAllDay="appointment-allday",uH.appointmentResources="appointment-resources",uH.showWorkTimeOnly="show-work-time-only";class pH{constructor(e,t,i){this.date=e,this.recurrenceIndex=t,this.resource=i}static from(e){const[t,i,n]=e.split(pH.ClientKeyPartSeparator);return new pH(t,i,n)}static to(e){let t=e.date+pH.ClientKeyPartSeparator+e.recurrenceIndex;return e.resource&&(t=t+pH.ClientKeyPartSeparator+e.resource),t}static IsSame(e,t,i=!1){const n=e.date===t.date&&e.recurrenceIndex===t.recurrenceIndex;return i?n:n&&e.resource===t.resource}}pH.ClientKeyPartSeparator="_";class mH{static selectSameAppointments(e,t){t.filter((t=>{const i=AH.Attr.getAppointmentKey(t),n=pH.from(i);return pH.IsSame(e,n,!0)})).forEach((e=>{T.DomUtils.hasClassName(e,tH.SelectedAppointmentClassName)||T.DomUtils.addClassName(e,tH.SelectedAppointmentClassName)}))}}class gH{static throttle(e,t){let i=!1,n=null,s=this;return function r(o){if(i)return n=o,void(s=this);e.apply(this,[o]),i=!0,setTimeout((()=>{i=!1,n&&(r.apply(s,[n]),n=null)}),t)}}}class CH{constructor(e,t,i){this.id=e,this.views=t,this.interval=i,this.allDay=AH.Attr.getAllDay(t[0]),this.resourceKey=AH.Attr.getResourceKey(t[0]),this.sourceView=this.views[0].cloneNode(!0),this.aptCont=this.views[0].parentElement}getStart(){return this.interval.start}getDuration(){return this.interval.duration}getEnd(){return this.interval.getEnd()}clearViews(){this.views.forEach((e=>{e.parentElement&&e.parentElement.removeChild(e)})),this.views=[]}static createItem(e,t){return new CH(e,t,CH.getAppointmentInterval(t))}static getAppointmentInterval(e){const t=AH.Attr.getStart(e[0]),i=AH.Attr.getDuration(e[0]);return new sH(t,i)}static createItems(e){const t={};for(let i,n=0;i=e[n];n++){const e=AH.Attr.getAppointmentKey(i);t[e]||(t[e]=[]),t[e].push(i)}const i=[];for(const e in t)Object.prototype.hasOwnProperty.call(t,e)&&i.push(CH.createItem(e,t[e]));return i}}var fH,vH,bH,wH;!function(e){e[e.None=0]="None",e[e.DragAppointment=1]="DragAppointment",e[e.DragAppointmentStart=2]="DragAppointmentStart",e[e.DragAppointmentEnd=3]="DragAppointmentEnd",e[e.DragNewAppointment=4]="DragNewAppointment"}(fH||(fH={})),function(e){e[e.Top=0]="Top",e[e.Bottom=1]="Bottom"}(vH||(vH={}));class yH{constructor(e){this.onMouseMoveHandler=this.onMouseMove.bind(this),this.onMouseMoveInternalHandler=this.onMouseMoveInternal.bind(this),this.schedulerView=e,this.appointmentInfo=null,this.sourceAppointmentInfo=null,this.startCellInfo=null,this.currentCellInfo=null,this.dateDiff=0,this.horizontalAppointmentDragged=!1,this.lastCellChanged=!1,this.initialPageY=0,this.initialTop=0,this.initialScrollTop=0,this.lastTop=0,this.lastCell=null,this.direction=vH.Top,this.mode=fH.None,this.throttledDrag=gH.throttle(this.onMouseMoveInternalHandler,20)}dragAppointmentStart(e,t,i){this.mode=fH.DragAppointmentStart,this.startDrag(e,t,i)}dragAppointmentEnd(e,t,i){this.mode=fH.DragAppointmentEnd,this.startDrag(e,t,i)}dragAppointment(e,t,i){this.mode=fH.DragAppointment,this.startDrag(e,t,i)}dragNewAppointment(e){this.mode=fH.DragNewAppointment,this.startDragNewAppointment(e)}dropAppointment(){this.mode!==fH.None&&(this.schedulerView.removeEventListener("pointermove",this.onMouseMoveHandler),this.stopAutoScrolling(),this.mode===fH.DragNewAppointment?this.schedulerView.dispatchDropNewAppointmentEvent():(this.removeAppointmentTopPositionInfo(),this.schedulerView.dispatchDropAppointmentEvent()),this.mode=fH.None)}cancelDragAppointment(){this.mode!==fH.None&&(this.schedulerView.removeEventListener("pointermove",this.onMouseMoveHandler),this.stopAutoScrolling(),this.mode!==fH.DragNewAppointment&&this.removeAppointmentTopPositionInfo(),this.schedulerView.dispatchCancelDragAppointmentEvent(),this.mode=fH.None)}startDrag(e,t,i){this.beforeStart(t),this.appointmentInfo=new CH(e.id,e.views,e.interval),this.sourceAppointmentInfo=e,this.currentCellInfo=t,this.dateDiff=rH.dateSubsWithTimezone(e.getStart(),t.interval.start),this.horizontalAppointmentDragged=t.layoutType===hH.Horizontal,this.initialTop=this.findAppointmentViewByInterval(this.appointmentInfo.views,t.interval).offsetTop,this.initialPageY=i.pageY,this.lastTop=this.initialTop,this.lastCell=t.cell,this.initialScrollTop=this.getViewportScrollTop(),this.saveAppointmentTopPositionInfo(),this.schedulerView.dispatchStartDragAppointmentEvent(e.id,this.mode===fH.DragAppointmentStart||this.mode===fH.DragAppointmentEnd,AH.isHorizontalAppointmentsContainer(e.aptCont)),this.startAutoScrolling()}startDragNewAppointment(e){this.beforeStart(e);const t=e.interval.start,i=rH.dateIncreaseWithUtcOffset(t,e.interval.duration),n=this.schedulerView.getUtcOffset(t,e.utcOffset),s=this.schedulerView.getUtcOffset(i,e.utcOffset);this.schedulerView.dispatchStartDragNewAppointmentEvent(rH.addTimeSpan(t,n),rH.addTimeSpan(i,s),e.allDay,AH.Attr.getResourceKey(e.cell)),this.startAutoScrolling()}beforeStart(e){this.startCellInfo=e,this.schedulerView.addEventListener("pointermove",this.onMouseMoveHandler)}onMouseMove(e){this.mode!==fH.None&&this.throttledDrag(e)}onMouseMoveInternal(e){const t=this.schedulerView.findCellByCoordinates(e.clientX,e.clientY);if(!t)return;this.schedulerView.getEditableAppointmentView()&&(this.mode===fH.DragNewAppointment?this.resizeNewAppointment(t):this.mode===fH.DragAppointment?this.drag(t,e):this.resize(t,this.mode===fH.DragAppointmentStart))}drag(e,t){var i;if(!(this.startCellInfo&&this.currentCellInfo&&this.appointmentInfo&&this.sourceAppointmentInfo))return;const n=this.currentCellInfo.interval;this.lastCellChanged=!1,this.updateEditedAppointmentPosition(t);const s=e.cell;if(this.lastCellChanged=this.lastCell!==s,this.lastCell=s,e.layoutType===hH.Horizontal&&!this.horizontalAppointmentDragged){const e=(null===(i=s.offsetParent)||void 0===i?void 0:i.getBoundingClientRect().top)||0;this.initialTop=t.clientY-e,this.initialPageY=t.pageY,this.initialScrollTop=this.getViewportScrollTop(s),this.lastTop=this.initialTop}const r=e.interval;if(0===rH.dateSubsWithTimezone(n.start,r.start)&&n.duration===r.duration){const e=AH.Attr.getResourceKey(s);if(!this.appointmentInfo.resourceKey||this.appointmentInfo.resourceKey===e)return}if(this.currentCellInfo.allDay!==e.allDay)this.dateDiff=0,this.appointmentInfo.interval=e.allDay?this.sourceAppointmentInfo.allDay?new sH(r.start,this.sourceAppointmentInfo.interval.duration):r:this.startCellInfo.allDay?r:new sH(r.start,this.sourceAppointmentInfo.interval.duration),this.appointmentInfo.allDay=e.allDay;else{let e=rH.addTimeSpan(r.start,this.dateDiff||0);this.appointmentInfo.allDay&&(e=rH.truncToDate(e)),this.appointmentInfo.interval=new sH(e,this.appointmentInfo.interval.duration)}this.updateResource(s),this.saveAppointmentTopPositionInfo();const o=this.schedulerView.getUtcOffset(r.getStart(),e.utcOffset),a=this.schedulerView.getUtcOffset(r.getEnd(),e.utcOffset);this.schedulerView.dispatchDragAppointmentEvent(rH.addTimeSpan(this.appointmentInfo.getStart(),o),rH.addTimeSpan(this.appointmentInfo.getEnd(),a),e.allDay,this.appointmentInfo.resourceKey),this.currentCellInfo=e}resize(e,t){if(!this.appointmentInfo||!this.currentCellInfo||!this.sourceAppointmentInfo)return;const i=e.interval,n=this.currentCellInfo.interval;if(0===rH.dateSubsWithTimezone(n.start,i.start)&&n.duration===i.duration||n.isLongerOrEqualDay!==i.isLongerOrEqualDay)return;if(t){const e=this.sourceAppointmentInfo.interval.duration+rH.dateSubsWithTimezone(this.sourceAppointmentInfo.interval.start,i.start);e>=0&&(this.appointmentInfo.interval=new sH(i.start,e))}else this.appointmentInfo.interval.duration=rH.dateSubsWithTimezone(i.getEnd(),this.sourceAppointmentInfo.interval.start);this.updateResource(this.currentCellInfo.cell);const s=this.schedulerView.getUtcOffset(this.appointmentInfo.getStart(),e.utcOffset),r=this.schedulerView.getUtcOffset(this.appointmentInfo.getEnd(),e.utcOffset);this.schedulerView.dispatchDragAppointmentEvent(rH.addTimeSpan(this.appointmentInfo.getStart(),s),rH.addTimeSpan(this.appointmentInfo.getEnd(),r),e.allDay,this.appointmentInfo.resourceKey),this.currentCellInfo=e}resizeNewAppointment(e){if(!this.startCellInfo)return;const t=e.interval,i=rH.dateSubsWithTimezone(t.start,this.startCellInfo.interval.start);if(0===i&&this.startCellInfo.interval.duration===t.duration)return;i<0&&this.startCellInfo.interval.duration===t.duration?this.direction=vH.Top:i>0&&this.startCellInfo.interval.duration===t.duration&&(this.direction=vH.Bottom),this.direction===vH.Bottom?this.startCellInfo.interval.duration=i+t.duration:this.direction===vH.Top&&(this.startCellInfo.interval.start=t.start,this.startCellInfo.interval.duration+=-1*i);const n=this.startCellInfo.interval.start,s=rH.dateIncreaseWithUtcOffset(n,this.startCellInfo.interval.duration),r=AH.Attr.getResourceKey(e.cell),o=this.schedulerView.getUtcOffset(n,e.utcOffset),a=this.schedulerView.getUtcOffset(s,e.utcOffset);this.schedulerView.dispatchDragAppointmentEvent(rH.addTimeSpan(n,o),rH.addTimeSpan(s,a),e.allDay,r)}findAppointmentViewByInterval(e,t){return e.find((e=>{if(t&&e.firstCell&&e.lastCell){const i=rH.getCellInterval(e.firstCell).getStart(),n=rH.getCellInterval(e.lastCell).getEnd();if(t.intersectsWith(new sH(i,rH.dateSubsWithTimezone(n,i))))return e}}))}updateEditedAppointmentPosition(e){const t=this.schedulerView.getEditableAppointments();if(!this.lastCell||!t||0===t.length||!this.currentCellInfo)return;const i=this.findAppointmentViewByInterval(t,this.currentCellInfo.interval);if(!i)return;if(!AH.isHorizontalAppointment(i))return void(this.horizontalAppointmentDragged=!1);let n=!1;if(this.horizontalAppointmentDragged||(this.initialTop-=i.offsetHeight/2,this.lastTop=this.initialTop,this.horizontalAppointmentDragged=!0,n=!0),e){const t=this.getViewportScrollTop(),i=e.pageY-this.initialPageY+(t-this.initialScrollTop);this.lastTop=this.initialTop+i,n=n||0!==i}if(n||this.lastCellChanged){const e=this.lastCell.offsetTop+1;this.lastTop=Math.min(this.lastTop,e+this.lastCell.offsetHeight-i.offsetHeight-2),this.lastTop=Math.max(e,this.lastTop)}const s=this.lastTop-this.lastCell.offsetTop;t.forEach((e=>{const t=e,i=t.firstCell,n=i.offsetTop+i.offsetHeight-t.offsetHeight-2;let r=i.offsetTop+s;r>=n&&(r=n),t.style.top=r+"px",t.style.zIndex="1000"}))}saveAppointmentTopPositionInfo(){if(!this.lastCell)return;AH.Attr.setAppointmentTopPosition(this.schedulerView,(this.lastTop-this.lastCell.offsetTop).toString())}removeAppointmentTopPositionInfo(){AH.Attr.removeAppointmentTopPosition(this.schedulerView)}updateResource(e){this.appointmentInfo&&this.appointmentInfo.resourceKey&&(this.appointmentInfo.resourceKey=AH.Attr.getResourceKey(e))}getViewportScrollTop(e){const t=e||this.lastCell;if(!t)return 0;const i=AH.getParentTimeCellsViewport(t);return(null==i?void 0:i.scrollTop)||0}startAutoScrolling(){var e;null===(e=this.schedulerView.getScrollViewer())||void 0===e||e.startAutoScrolling(Re.Horizontal)}stopAutoScrolling(){var e;null===(e=this.schedulerView.getScrollViewer())||void 0===e||e.stopAutoScrolling()}}class BH{}bH=BH,BH.prefix="dxbl",BH.SchedulerComponentName=bH.prefix+"-scheduler";class EH extends CustomEvent{constructor(e,t,i,n){super(EH.eventName,{bubbles:!0,composed:!0,detail:new IH(e,t,i,n)})}}EH.eventName=`${BH.SchedulerComponentName}.create-appointment`;class IH{constructor(e,t,i,n){this.start=e,this.end=t,this.allDay=i,this.resourceKey=n}}class SH extends CustomEvent{constructor(e,t){super(SH.eventName,{bubbles:!0,composed:!0,detail:new xH(e,t)})}}SH.eventName=`${BH.SchedulerComponentName}.select-appointment`;class xH{constructor(e,t){this.key=e,this.showToolTip=t}}class DH extends CustomEvent{constructor(e,t,i,n){super(DH.eventName,{bubbles:!0,composed:!0,detail:new FH(e,t,i,n)})}}DH.eventName=`${BH.SchedulerComponentName}.start-drag-new-appointment`;class FH{constructor(e,t,i,n){this.start=e,this.end=t,this.allDay=i,this.resourceKey=n}}class TH extends Kd{constructor(){super(TH.eventName)}}TH.eventName=`${BH.SchedulerComponentName}.drop-new-appointment`;class HH extends CustomEvent{constructor(e,t){super(HH.eventName,{bubbles:!0,composed:!0,detail:new UH(e,t)})}}HH.eventName=`${BH.SchedulerComponentName}.start-drag-appointment`;class UH{constructor(e,t){this.key=e,this.resize=t}}class PH extends CustomEvent{constructor(e,t,i,n){super(PH.eventName,{bubbles:!0,composed:!0,detail:new QH(e,t,i,n)})}}PH.eventName=`${BH.SchedulerComponentName}.drag-appointment`;class QH{constructor(e,t,i,n){this.start=e,this.end=t,this.allDay=i,this.resourceKey=n}}class NH extends Kd{constructor(){super(NH.eventName)}}NH.eventName=`${BH.SchedulerComponentName}.drop-appointment`;class RH extends Kd{constructor(){super(RH.eventName)}}RH.eventName=`${BH.SchedulerComponentName}.cancel-drag-appointment`;class LH extends Kd{constructor(){super(LH.eventName)}}LH.eventName=`${BH.SchedulerComponentName}.show-appointment-tooltip`;class MH extends Kd{constructor(){super(MH.eventName)}}MH.eventName=`${BH.SchedulerComponentName}.hide-appointment-tooltip`,gt.register(EH.eventName,(e=>e.detail)),gt.register(SH.eventName,(e=>e.detail)),gt.register(DH.eventName,(e=>e.detail)),gt.register(TH.eventName,(e=>e.detail)),gt.register(HH.eventName,(e=>e.detail)),gt.register(PH.eventName,(e=>e.detail)),gt.register(NH.eventName,(e=>e.detail)),gt.register(RH.eventName,(e=>e.detail)),gt.register(LH.eventName,(e=>e.detail)),gt.register(MH.eventName,(e=>e.detail)),function(e){e[e.None=0]="None",e[e.AppointmentEditForm=1]="AppointmentEditForm",e[e.AppointmentCompactEditForm=2]="AppointmentCompactEditForm",e[e.AppointmentToolTip=3]="AppointmentToolTip",e[e.RecurrentAppointmentEditForm=4]="RecurrentAppointmentEditForm",e[e.RecurrentAppointmentDeleteForm=5]="RecurrentAppointmentDeleteForm",e[e.GotoDateForm=6]="GotoDateForm"}(wH||(wH={}));const kH=wH;class KH extends Es{constructor(){super(),this.onClickEventHandler=this.onDelayedClickEvent.bind(this),this.onDoubleClickEventHandler=this.onDoubleClickEvent.bind(this),this.onDragStartEventHandler=this.onDragStartEvent.bind(this),this.onDragStopEventHandler=this.onDragStopEvent.bind(this),this.onDragCancelEventHandler=this.onDragCancelEvent.bind(this),this._handlePointerEventsMode=r.Click|r.DblClick|r.Dragging,this.startInterval=0,this.endInterval=0,this.resources="",this.snapToCellsMode=aH.Auto,this.allowCreateAppointment=!1,this.allowEditAppointment=!1,this.allowDragAppointment=!1,this.allowResizeAppointment=!1,this.enableAppointmentTooltip=!1,this.showWorkTimeOnly=!1,this.unforcedFunctions={},this.appointmentDragController=new yH(this),this._pointerEventsHelper=new q(this),this.activeFormType=kH.None,this.sourceDraggedAppointment=null}connectedCallback(){this.timeMarkerUpdater=new iH,this._pointerEventsHelper.initialize(),this.addEventSubscriptions(),super.connectedCallback()}contentChanged(){super.contentChanged(),this.scrollViewer||(this.scrollViewer=this.querySelector(`.${xe.ClassName}`),this.addScrollViewerEventSubscriptions())}disconnectedCallback(){this.removeEventSubscriptions(),this.removeScrollViewerEventSubscriptions(),this._pointerEventsHelper.dispose(),super.disconnectedCallback()}initializeLayout(){this.initializeDateHeaders(),this.initializeTimeCells()}adjust(){this.calculateAppointments(),this.updateTimeMarkersEventHandler()}calculateAppointments(){this.getHorizontalAppointmentsContainer().calculateAppointments()}recalculateAppointmentsByInterval(){this.getHorizontalAppointmentsContainer().recalculateAppointmentsByInterval(this.startInterval,this.endInterval,this.resources)}getHorizontalAppointmentsContainer(){return this.querySelector(`.${tH.HorizontalAppointmentsClassName}`)}getHorizontalEditableAppointmentsContainer(){return this.querySelector(`.${tH.HorizontalEditableAppointmentsClassName}`)}getAppointmentsContainer(e){return this.getHorizontalAppointmentsContainer()}getEditableAppointmentKey(){return this.getHorizontalEditableAppointmentsContainer().editableAppointmentKey}getSelectedAppointmentKey(){return this.getHorizontalAppointmentsContainer().selectedAppointmentKey}getAppointments(){return this.getHorizontalAppointmentsContainer().getAppointments()}getEditableAppointments(){return this.getHorizontalEditableAppointmentsContainer().getAppointments()}findCellByCoordinates(e,t){var i;const n=null===(i=this.horizontalView)||void 0===i?void 0:i.findCellByPos(e,t);return n?this.createCellInfo(n,hH.Horizontal):null}getScrollViewer(){return this.scrollViewer}restoreFocusedAppointment(e){if(!e)return;const t=this.closest(AU.TagName);if(!(null==t?void 0:t.contains(document.activeElement)))return;const i=this.querySelector(`[${nH.Key}='${e}']`);if(i)document.activeElement!==i&&(fi.makeElementFocusable(i),fi.focusElement(i));else{const t=pH.from(e);if(null===t.resource)return;const i=new pH(t.date,t.recurrenceIndex,null),n=pH.to(i),s=this.querySelector(`[${nH.Key}^='${n}']`);s&&(fi.makeElementFocusable(s),fi.focusElement(s))}}dispatchDragAppointmentEvent(e,t,i,n){this.getHorizontalEditableAppointmentsContainer().dispatchDragAppointmentEvent(e,t,i,n)}dispatchStartDragNewAppointmentEvent(e,t,i,n){this.getHorizontalEditableAppointmentsContainer().dispatchStartDragNewAppointmentEvent(e,t,i,n)}dispatchStartDragAppointmentEvent(e,t,i){this.getHorizontalEditableAppointmentsContainer().dispatchStartDragAppointmentEvent(e,t)}dispatchDropNewAppointmentEvent(){this.getHorizontalEditableAppointmentsContainer().dispatchDropNewAppointmentEvent()}dispatchDropAppointmentEvent(){this.getHorizontalEditableAppointmentsContainer().dispatchDropAppointmentEvent()}dispatchCancelDragAppointmentEvent(){this.getHorizontalEditableAppointmentsContainer().dispatchCancelDragAppointmentEvent()}dispatchCreateAppointmentEvent(e,t,i,n){this.getHorizontalEditableAppointmentsContainer().dispatchCreateAppointmentEvent(e,t,i,n)}dispatchSelectAppointmentEvent(e,t){this.getHorizontalAppointmentsContainer().dispatchSelectAppointmentEvent(AH.Attr.getAppointmentKey(e),t)}onClickEvent(e){const t=e.detail.source.target,i=AH.getAppointmentContainer(t),n=this.getEditableAppointmentKey(),s=this.getSelectedAppointmentKey(),r=i?AH.Attr.getAppointmentKey(i):null,o=AH.getTimeCellContainer(t);if(i||o)if(!n||i&&n===r){if(i)s!==r?this.selectAppointment(i,n!==r):this.isTooltipShown()||AH.isNewEditableAppointment(i)||this.dispatchEvent(new LH),e.stopPropagation();else if(this.activeFormType===kH.None){const i=AH.getTimeCellContainer(t);this.allowCreateAppointment&&i&&(this.createAppointmentByTimeCell(i),e.stopPropagation())}}else this.dispatchEvent(new MH);else{Rt(t,tH.View)&&this.dispatchEvent(new MH)}}onDelayedClickEvent(e){this.unforcedFunctionCall(this.onClickEvent.bind(this,e),"ClickEvent",200,!0)}onDoubleClickEvent(e){const t=AH.getAppointmentContainer(e.detail.source.target);if(t&&this.getEditableAppointmentKey()!==AH.Attr.getAppointmentKey(t)){this.getSelectedAppointmentKey()!==AH.Attr.getAppointmentKey(t)&&this.selectAppointment(t,!1),this.clearUnforcedFunctionByKey("ClickEvent")}}selectAppointment(e,t){if(!e)return;T.DomUtils.addClassName(e,tH.SelectedAppointmentClassName);const i=AH.Attr.getAppointmentKey(e);this.getAppointmentsContainer(e).selectAppointment(i),this.selectSameAppointments(i),this.dispatchSelectAppointmentEvent(e,t)}createAppointmentByTimeCell(e){const t=AH.Attr.getStart(e),i=AH.Attr.getEnd(e),n=this.getUtcOffset(t,AH.Attr.getUtcOffset(e)),s=this.getUtcOffset(i,AH.Attr.getUtcOffset(e));this.dispatchCreateAppointmentEvent(rH.addTimeSpan(t,n),rH.addTimeSpan(i,s),AH.Attr.getAllDay(e),AH.Attr.getResourceKey(e))}getEditableAppointmentView(){const e=this.getHorizontalEditableAppointmentsContainer();return e.getAppointmentView(e.editableAppointmentKey)}onDragStartEvent(e){const t=e.detail.source.target;if(!t||this.getEditableAppointmentKey())return;const i=this.findCellByCoordinates(e.detail.source.clientX,e.detail.source.clientY);if(!i)return;const n=AH.getAppointmentContainer(t);if(n){this.sourceDraggedAppointment=n;const s=AH.Attr.getAppointmentKey(n),r=this.getAppointmentsContainer(n).getAppointmentView(s);this.allowEditAppointment&&r&&(n.classList.add(tH.DisableAppointmentClassName),n.classList.add(tH.SelectedAppointmentClassName),this.allowResizeAppointment&&(AH.isTopHandleElement(t)||AH.isLeftHandleElement(t))?this.appointmentDragController.dragAppointmentStart(r,i,e.detail.source):this.allowResizeAppointment&&(AH.isBottomHandleElement(t)||AH.isRightHandleElement(t))?this.appointmentDragController.dragAppointmentEnd(r,i,e.detail.source):this.allowDragAppointment&&this.appointmentDragController.dragAppointment(r,i,e.detail.source))}else this.allowCreateAppointment&&this.allowResizeAppointment&&this.appointmentDragController.dragNewAppointment(i);e.stopPropagation()}onDragStopEvent(e){this.removeDraggedAppointmentStyles(this.sourceDraggedAppointment),this.appointmentDragController.dropAppointment(),e.stopPropagation()}onDragCancelEvent(e){this.removeDraggedAppointmentStyles(this.sourceDraggedAppointment),this.appointmentDragController.cancelDragAppointment(),e.stopPropagation()}removeDraggedAppointmentStyles(e){e&&(e.classList.remove(tH.DisableAppointmentClassName),e.classList.remove(tH.SelectedAppointmentClassName))}createCellInfo(e,t){return{cell:e,layoutType:t,allDay:AH.Attr.getAllDay(e),interval:rH.getCellInterval(e),utcOffset:AH.Attr.getUtcOffset(e)}}initializeTimeCells(){var e;null===(e=this.getHorizontalViewPart())||void 0===e||e.clearObjects()}findTimelineResourceHeader(e,t){if(""===t)return null;const i=AH.getVerticalResourceHeaders(e);for(let e,n=0;e=i[n];n++)if(this.getElementResourceKey(e)===t)return e;return null}getElementResourceKey(e){return AH.Attr.getResourceKey(e)}getResourceHeadersByContainers(e){const t={};for(const i in e){if(!Object.prototype.hasOwnProperty.call(e,i))continue;const n=this.getElementResourceKey(e[i].cells[0]),s=this.findTimelineResourceHeader(this,n);s&&(s.style.height="",null==t[n]?t[n]={element:s,height:0,minHeight:0,lastContainerIndex:i}:t[n].lastContainerIndex=i)}for(const e in t)Object.prototype.hasOwnProperty.call(t,e)&&(t[e].minHeight=t[e].element.offsetHeight);return t}initializeDateHeaders(){const e=AH.getDateHeaders(this),t=rH.getCurrentLocalTime();e.forEach((e=>{const i=AH.Attr.getStart(e),n=AH.Attr.getEnd(e);n.valueOf()-i.valueOf()>rH.DaySpan||(t.valueOf()-i.valueOf()>=0&&n.valueOf()-t.valueOf()>0?e.classList.add(tH.TodayClassName):e.classList.remove(tH.TodayClassName))}))}addEventSubscriptions(){var e;null===(e=this.timeMarkerUpdater)||void 0===e||e.subscribe(this,this.updateTimeMarkersEventHandler.bind(this)),this.addEventListener(d.eventName,this.onClickEventHandler),this.addEventListener(c.eventName,this.onDoubleClickEventHandler),this.addEventListener(a.eventName,this.onDragStartEventHandler),this.addEventListener(l.eventName,this.onDragStopEventHandler),this.addEventListener(A.eventName,this.onDragCancelEventHandler)}removeEventSubscriptions(){var e;null===(e=this.timeMarkerUpdater)||void 0===e||e.unsubscribe(this),this.removeEventListener(d.eventName,this.onClickEventHandler),this.removeEventListener(c.eventName,this.onDoubleClickEventHandler),this.removeEventListener(a.eventName,this.onDragStartEventHandler),this.removeEventListener(l.eventName,this.onDragStopEventHandler),this.removeEventListener(A.eventName,this.onDragCancelEventHandler)}addScrollViewerEventSubscriptions(){var e;null===(e=this.scrollViewer)||void 0===e||e.subscribeToScroll(this.viewportScrollViewerEventHandler.bind(this))}removeScrollViewerEventSubscriptions(){var e;null===(e=this.scrollViewer)||void 0===e||e.unsubscribeFromScroll()}updateTimeMarkersEventHandler(){var e;this.calculateHorizontalTimeMarker(this,null===(e=this.horizontalView)||void 0===e?void 0:e.getFirstContainer())}calculateHorizontalTimeMarker(e,t){const i=AH.getTimeMarkerImages(e),n=AH.getTimeMarkerLine(e);if(!i.length||!n||!t)return;const s=rH.getCurrentLocalTime(),r=t.cells[t.cells.length-1],o=AH.Attr.getStart(t.cells[0]),a=AH.Attr.getEnd(r).valueOf()-o.valueOf(),l=rH.dateSubsWithTimezone(s,o)/a;if(l>0&&l<1){i.forEach((e=>{e.style.display="unset"})),n.style.display="unset";const e=Math.round(1e4*l)/100,t=n.offsetWidth/2,s=`calc(${e}% - ${i[0].offsetWidth/2}px)`;i.forEach((e=>{e.style.left=s})),n.style.left=`calc(${e}% - ${t}px)`}else i.forEach((e=>{e.style.display="none"})),n.style.display="none"}viewportScrollViewerEventHandler(e,t){const i=AH.getResourcesViewport(this);i&&(i.scrollTop=e);const n=AH.getTimescaleViewport(this);n&&(n.scrollLeft=t)}getHorizontalViewPart(){return this.horizontalView||(this.horizontalView=this.createHorizontalDateTimeTableLayout()),this.horizontalView}createHorizontalDateTimeTableLayout(){return new dH(this,`.${tH.AllDayAreaClassName}, .${tH.HorizontalViewClassName} .${tH.TimeCellClassName}`)}selectSameAppointments(e){const t=pH.from(e);null!==t.resource&&mH.selectSameAppointments(t,this.getAppointments())}getUtcOffset(e,t){return rH.getUtcTimezoneOffset(e)+-1*t}syncronizeScrollViewWithHeader(){}unforcedFunctionCall(e,t,i,n){n&&this.hasUnforcedFunction(t)?this.clearUnforcedFunctionByKey(t):void 0===this.unforcedFunctions[t]&&(this.unforcedFunctions[t]=setTimeout((()=>{e(),delete this.unforcedFunctions[t]}),i))}hasUnforcedFunction(e){return!!this.unforcedFunctions[e]}clearUnforcedFunctionByKey(e){clearTimeout(this.unforcedFunctions[e]),delete this.unforcedFunctions[e]}isTooltipShown(){const e=T.DomUtils.getParentByTagName(this,AU.TagName);return!!e&&!!AH.getAppointmentTooltip(e)}get handlePointerEventsMode(){return this._handlePointerEventsMode}get handlePointerEventsTarget(){return this}get hoverTitleElementsSelector(){return null}get bypassNonInlineHoverTitleElementChildSelector(){return null}shouldProcessPointerEvent(e){return!0}handlePointerEventsDelay(e){return s.Default}updated(e){(e.has("startInterval")||e.has("endInterval")||e.has("resources")||e.has("showWorkTimeOnly"))&&(this.initializeLayout(),this.updateTimeMarkersEventHandler(),setTimeout((()=>{this.recalculateAppointmentsByInterval()}),0)),super.updated(e)}}C([An({type:Number,attribute:uH.startInterval})],KH.prototype,"startInterval",void 0),C([An({type:Number,attribute:uH.endInterval})],KH.prototype,"endInterval",void 0),C([An({type:String,attribute:uH.resources})],KH.prototype,"resources",void 0),C([An({attribute:uH.snapToCellsMode})],KH.prototype,"snapToCellsMode",void 0),C([An({attribute:uH.activeFormType,type:kH,converter:{fromAttribute:e=>parseInt(e),toAttribute:e=>parseInt(e)}})],KH.prototype,"activeFormType",void 0),C([An({attribute:uH.allowCreateAppointment,type:Boolean})],KH.prototype,"allowCreateAppointment",void 0),C([An({attribute:uH.allowEditAppointment,type:Boolean})],KH.prototype,"allowEditAppointment",void 0),C([An({attribute:uH.allowDragAppointment,type:Boolean})],KH.prototype,"allowDragAppointment",void 0),C([An({attribute:uH.allowResizeAppointment,type:Boolean})],KH.prototype,"allowResizeAppointment",void 0),C([An({attribute:uH.enableAppointmentTooltip,type:Boolean})],KH.prototype,"enableAppointmentTooltip",void 0),C([An({attribute:uH.showWorkTimeOnly,type:Boolean})],KH.prototype,"showWorkTimeOnly",void 0);class OH extends KH{constructor(){super()}}OH.TagName="dxbl-timeline-view";class _H extends KH{constructor(){super(),this.verticalAppointments=[]}updateTimeMarkersEventHandler(){var e;this.calculateVerticalTimeMarkers(this,null===(e=this.verticalView)||void 0===e?void 0:e.getTimeCells())}getVerticalAppointmentsContainer(){return this.querySelector(`.${tH.VerticalAppointmentsClassName}`)}getVerticalEditableAppointmentsContainer(){return this.querySelector(`.${tH.VerticalEditableAppointmentsClassName}`)}getAppointmentsContainer(e){return e&&(T.DomUtils.hasClassName(e,tH.VerticalAppointmentClassName)||T.DomUtils.hasClassName(e,tH.TimeCellClassName))?this.getVerticalAppointmentsContainer():super.getAppointmentsContainer(e)}getEditableAppointmentKey(){const e=this.getVerticalEditableAppointmentsContainer().editableAppointmentKey;return e||super.getEditableAppointmentKey()}getSelectedAppointmentKey(){const e=this.getVerticalAppointmentsContainer().selectedAppointmentKey;return e||super.getSelectedAppointmentKey()}getAppointments(){return super.getAppointments().concat(this.getVerticalAppointmentsContainer().getAppointments())}getEditableAppointments(){return super.getEditableAppointments().concat(this.getVerticalEditableAppointmentsContainer().getAppointments())}findCellByCoordinates(e,t){var i;const n=null===(i=this.verticalView)||void 0===i?void 0:i.findCellByPos(e,t);return n?this.createCellInfo(n,hH.Vertical):super.findCellByCoordinates(e,t)}dispatchDragAppointmentEvent(e,t,i,n){i?super.dispatchDragAppointmentEvent(e,t,i,n):this.getVerticalEditableAppointmentsContainer().dispatchDragAppointmentEvent(e,t,i,n)}dispatchStartDragNewAppointmentEvent(e,t,i,n){i?super.dispatchStartDragNewAppointmentEvent(e,t,i,n):this.getVerticalEditableAppointmentsContainer().dispatchStartDragNewAppointmentEvent(e,t,i,n)}dispatchStartDragAppointmentEvent(e,t,i){i?super.dispatchStartDragAppointmentEvent(e,t,i):this.getVerticalEditableAppointmentsContainer().dispatchStartDragAppointmentEvent(e,t)}dispatchDropNewAppointmentEvent(){this.getVerticalEditableAppointmentsContainer().editableAppointmentKey?this.getVerticalEditableAppointmentsContainer().dispatchDropNewAppointmentEvent():super.dispatchDropNewAppointmentEvent()}dispatchDropAppointmentEvent(){this.getVerticalEditableAppointmentsContainer().editableAppointmentKey?this.getVerticalEditableAppointmentsContainer().dispatchDropAppointmentEvent():super.dispatchDropAppointmentEvent()}dispatchCancelDragAppointmentEvent(){this.getVerticalEditableAppointmentsContainer().editableAppointmentKey?this.getVerticalEditableAppointmentsContainer().dispatchCancelDragAppointmentEvent():super.dispatchCancelDragAppointmentEvent()}dispatchCreateAppointmentEvent(e,t,i,n){i?super.dispatchCreateAppointmentEvent(e,t,i,n):this.getVerticalEditableAppointmentsContainer().dispatchCreateAppointmentEvent(e,t,i,n)}dispatchSelectAppointmentEvent(e,t){const i=AH.Attr.getAppointmentKey(e);T.DomUtils.hasClassName(e,tH.VerticalAppointmentClassName)?this.getVerticalAppointmentsContainer().dispatchSelectAppointmentEvent(i,t):super.dispatchSelectAppointmentEvent(e,t)}initializeTimeCells(){var e;super.initializeTimeCells(),null===(e=this.getVerticalViewPart())||void 0===e||e.clearObjects()}calculateAppointments(){super.calculateAppointments(),this.getVerticalAppointmentsContainer().calculateAppointments()}recalculateAppointmentsByInterval(){super.recalculateAppointmentsByInterval(),this.getVerticalAppointmentsContainer().recalculateAppointmentsByInterval(this.startInterval,this.endInterval,this.resources)}calculateVerticalTimeMarkers(e,t){if(!t)return;const i=rH.getCurrentLocalTime(),n=rH.truncToDate(i),s=this.getTimeMarkerInfos(e);if(0!==s.length)for(let r,o=0;r=s[o];o++)this.calculateVerticalTimeMarker(r,e,t,n,i)}getTimeMarkerInfos(e){const t=[],i=AH.getTimeMarkerWrappers(e);for(let e,n=0;e=i[n];n++){const i={wrapper:e,timeMarker:AH.getTimeMarkerContainer(e),timeIndicator:AH.getTimeIndicatorContainer(e),firstContainerIndex:AH.Attr.getFirstContainerIndex(e),lastContainerIndex:AH.Attr.getLastContainerIndex(e),startFromContainer:n>0};t.push(i)}return t}calculateVerticalTimeMarker(e,t,i,n,s){const r=e.wrapper,o=this.findCellsByTime(i,s,e.firstContainerIndex,e.lastContainerIndex);if(!o.length)return void r.classList.add(tH.TimeMarkerWrapperInvisibleClassName);r.classList.remove(tH.TimeMarkerWrapperInvisibleClassName);const a=e.timeMarker,l=e.timeIndicator,A=a.offsetHeight/2,d=o[0].offsetLeft;let c=0;if(e.startFromContainer){const t=this.findFirstCellInContainer(i,e.firstContainerIndex);t&&(c=t.offsetLeft===d?d-A:t.offsetLeft)}const h=Math.floor(this.calculateTop(s,o[0],n));if(a.style.top=h-A+"px",a.style.left=c+"px",a.style.width=d-c+A+1+"px",this.isElementDisplayed(r)){const e=AH.getTodayDateHeaders(this)[0].clientWidth;l.style.top=h-1+"px",l.style.width=e+"px",l.style.left=d+"px"}}findCellsByTime(e,t,i,n){const s=[];for(let r,o=0;r=e[o];o++)AH.Attr.getContainerIndex(r)<i||AH.Attr.getContainerIndex(r)>n||t.valueOf()-AH.Attr.getStart(r).valueOf()>=0&&AH.Attr.getEnd(r).valueOf()-t.valueOf()>0&&s.push(r);return s}getVerticalViewPart(){return this.verticalView||(this.verticalView=this.createVerticalDateTimeTableLayout()),this.verticalView}createVerticalDateTimeTableLayout(){return new dH(this,`.${tH.VerticalViewClassName} .${tH.TimeCellClassName}`)}getEditableAppointmentView(){const e=this.getVerticalEditableAppointmentsContainer(),t=e.getAppointmentView(e.editableAppointmentKey);return t||super.getEditableAppointmentView()}findFirstCellInContainer(e,t){for(let i,n=0;i=e[n];n++)if(AH.Attr.getContainerIndex(i)===t)return i;return null}isElementDisplayed(e){return e&&"none"!==e.style.display}calculateTop(e,t,i){const n=this.getAdaptedContainerTime(i,e),s=AH.Attr.getStart(t),r=AH.Attr.getEnd(t),o=rH.dateSubsWithTimezone(n,s);return t.offsetTop+t.offsetHeight*o/(r.valueOf()-s.valueOf())}getAdaptedContainerTime(e,t){const i=e,n=rH.dateSubsWithTimezone(t,i);let s=Math.abs(n)%rH.DaySpan;return n<0&&(s=rH.DaySpan-s),rH.dateIncreaseWithUtcOffset(i,s)}selectSameAppointments(e){const t=pH.from(e);null!==t.resource&&(super.selectSameAppointments(e),mH.selectSameAppointments(t,this.verticalAppointments))}syncronizeScrollViewWithHeader(){const e=this.getScrollViewer();if(e){const t=e.querySelector(`.${xe.ContentContainerClassName}`);if(t){const e=AH.getTimescaleViewport(this),i=e?e.scrollLeft:-1;i>-1&&t.scrollTo&&t.scrollTo(i,0)}}}}class VH extends _H{constructor(){super()}}VH.TagName="dxbl-day-view";class zH extends KH{constructor(){super()}}zH.TagName="dxbl-month-view";class WH extends Mi{constructor(e,t,i=!1){super(e.getKeyboardNavigator(),t,i),this.scheduler=e}canSwitchToNestedContentMode(){return!0}getToolbarWrapper(){return AH.getToolbarWrapper(this.scheduler)}getVerticalAppointmentsContainer(){const e=AH.getVerticalAppointmentsContainer(this.scheduler);return(null==e?void 0:e.childElementCount)>0?e:null}getHorizontalAppointmentsContainer(){const e=AH.getHorizontalAppointmentsContainer(this.scheduler);return(null==e?void 0:e.childElementCount)>0?e:null}handleTabKeyDown(e,t=!1){if(!t&&e.altKey)return!1;if(e.shiftKey){if(this.firstItemSelected)return!1;this.moveToPrevItem()}else{if(this.lastItemSelected)return!1;this.moveToNextItem()}return!0}}class $H extends WH{constructor(e,t){super(e,t),this.itemSelector=`:scope > .${tH.HorizontalAppointmentClassName}`}queryItems(){return this.queryItemsBySelector(this.itemSelector)}handleKeyDown(e){const t=Be.KeyUtils.getEventKeyCode(e);if(t===Be.KeyCode.Tab)return this.handleTabKeyDown(e);switch(t){case Be.KeyCode.Enter:case Be.KeyCode.Delete:case Be.KeyCode.Key_n:case Be.KeyCode.Key_r:return this.performShortcutEvent(e),!0}return!1}handleTabKeyDown(e){return!!super.handleTabKeyDown(e,e.altKey)}getShortcutContext(){var e;return{AppointmentKey:null===(e=this.selectedItemElement.getAttributeNode("data-key"))||void 0===e?void 0:e.value}}focusSelectedItem(){var e;super.focusSelectedItem(),null===(e=this.scheduler.getView())||void 0===e||e.syncronizeScrollViewWithHeader()}}class GH extends WH{constructor(e,t){super(e,t,!0)}handleKeyDown(e){return Be.KeyUtils.getEventKeyCode(e)===Be.KeyCode.Key_n&&(this.performShortcutEvent(e),!0)}}class qH extends WH{constructor(e,t){super(e,t),this.itemSelector=`:scope > .${tH.VerticalAppointmentClassName}`}queryItems(){return this.queryItemsBySelector(this.itemSelector)}handleKeyDown(e){const t=Be.KeyUtils.getEventKeyCode(e);if(t===Be.KeyCode.Tab)return this.handleTabKeyDown(e);switch(t){case Be.KeyCode.Enter:case Be.KeyCode.Delete:case Be.KeyCode.Key_n:case Be.KeyCode.Key_r:return this.performShortcutEvent(e),!0}return!1}handleTabKeyDown(e){return!!super.handleTabKeyDown(e,e.altKey)}getShortcutContext(){var e;return{AppointmentKey:null===(e=this.selectedItemElement.getAttributeNode("data-key"))||void 0===e?void 0:e.value}}}class YH extends WH{constructor(e){super(e,e)}queryItems(){return new Array(this.getToolbarWrapper(),this.getHorizontalAppointmentsContainer(),this.getVerticalAppointmentsContainer())}createItemStrategy(e){if(e===this.getToolbarWrapper())return new GH(this.scheduler,e);if(e===this.getVerticalAppointmentsContainer())return new qH(this.scheduler,e);if(e===this.getHorizontalAppointmentsContainer())return new $H(this.scheduler,e);throw new Error("Not implemented")}handleKeyDown(e){return Be.KeyUtils.getEventKeyCode(e)===Be.KeyCode.Tab&&this.handleTabKeyDown(e)}handleTabKeyDown(e){return super.handleTabKeyDown(e,e.altKey)||(e.shiftKey?this.leaveBackward():this.leaveForward()),!0}}class XH extends Mi{constructor(e,t){super(e.getKeyboardNavigator(),t,!0),this._dateNavigator=e}canSwitchToNestedContentMode(){return!0}leaveTransitContainer(e){const t=this._dateNavigator.getCalendar();if(t){const i=Rr.getTabbables(t,!1);if(!i.length||e===Ni.None)return;(e===Ni.Forward?i[0]:i[i.length-1]).focus()}}}class JH extends Es{getKeyboardNavigator(){return this._keyboardNavigator}getCalendar(){return this.querySelector(tl)}contentChanged(){super.contentChanged(),this.initializeKeyboardNavigator()}initializeKeyboardNavigator(){this._keyboardNavigator=this.querySelector(Qi),this._keyboardNavigator&&!this._keyboardNavigator.initialized&&this._keyboardNavigator.initialize(this,new XH(this,this))}}JH.TagName="dxbl-date-navigator";class jH extends Mi{constructor(e,t){super(e.getKeyboardNavigator(),t),this._resourceNavigator=e}queryItems(){return new Array(this._resourceNavigator.getResourceListBoxContainer(),this._resourceNavigator.getOkButton(),this._resourceNavigator.getCancelButton())}createItemStrategy(e){return e.matches(this._resourceNavigator.getResourceListBoxContainerSelector())?new ZH(this._resourceNavigator.getKeyboardNavigator(),e,this):null}handleKeyDown(e){return Be.KeyUtils.getEventKeyCode(e)===Be.KeyCode.Tab?(e.shiftKey?this.moveToPrevItem(!0):this.moveToNextItem(!0),!0):super.handleKeyDown(e)}canSwitchToNestedContentMode(){return!0}moveForward(){this.moveToNextItem(!0)}moveBackward(){super.moveToPrevItem(!0)}}class ZH extends Mi{constructor(e,t,i){super(e,t,!0),this._rootStrategy=i}leaveTransitContainer(e){e===Ni.Forward?this._rootStrategy.moveForward():e===Ni.Backward&&this._rootStrategy.moveBackward()}canSwitchToNestedContentMode(){return!0}}class eU extends Es{getKeyboardNavigator(){return this._keyboardNavigator}getResourceListBoxContainerSelector(){return`.${tH.ResourceNavigatorListBoxContainer}`}getResourceListBoxContainer(){return this.querySelector(this.getResourceListBoxContainerSelector())}getOkButton(){return this.querySelector(`.${tH.ResourceNavigatorFooter} button:first-child`)}getCancelButton(){return this.querySelector(`.${tH.ResourceNavigatorFooter} button:last-child`)}contentChanged(){super.contentChanged(),this.initializeKeyboardNavigator()}initializeKeyboardNavigator(){this._keyboardNavigator=this.querySelector(Qi),this._keyboardNavigator&&!this._keyboardNavigator.initialized&&this._keyboardNavigator.initialize(this,new jH(this,this))}}eU.TagName="dxbl-resource-navigator";class tU{constructor(e,t){this.start=e,this.end=t}containsExcludeEndBound(e){return this.start<=e&&this.end>e}}function iU(e,t,i){const n=e[t];return n===i?0:n<i?-1:1}function nU(e,t,i,n,s){i||(i=iU);let r=null==n?0:n;null==s&&(s=e.length-r);let o=r+s-1;for(;r<=o;){const n=r+(o-r>>1),s=i(e,n,t);if(0===s)return n;s<0?r=n+1:o=n-1}return-(r+1)}class sU extends Es{constructor(){super(),this.editableAppointmentKey="",this.selectedAppointmentKey="",this.elements=[],this.appointments=[],this.dateTimeTableLayout=null,this.observer=new MutationObserver((()=>{this.handleMutations()})),this.startInterval=0,this.endInterval=0,this.resources=""}connectedCallback(){super.connectedCallback(),this.initObserver()}contentChanged(){super.contentChanged(),this.contentChangedCore()}disconnectedCallback(){super.disconnectedCallback(),this.observer.disconnect()}initObserver(){this.observer.observe(this,{subtree:!0,characterData:!0,attributes:!0,attributeFilter:["data-key","data-container-index","data-first-cell-index","data-last-cell-index","data-columns-count","data-column","data-row","data-row-span","data-start","data-duration","data-allday","data-resource"]})}contentChangedCore(){this.recalculateAppointments()}handleMutations(){this.recalculateAppointments()}recalculateAppointmentsByInterval(e,t,i){e===this.startInterval&&t===this.endInterval&&i===this.resources||this.recalculateAppointments()}getDateTimeTableLayout(){return this.dateTimeTableLayout||(this.dateTimeTableLayout=this.createDateTimeTableLayout()),this.dateTimeTableLayout}recalculateAppointments(){this.dateTimeTableLayout=null,this.initializeAppointments(),this.calculateAppointments()}initializeAppointments(){var e;this.elements=this.getAppointments(),this.prepareAppointments(null===(e=this.getDateTimeTableLayout())||void 0===e?void 0:e.getTimeCells(),this.elements),this.appointments=CH.createItems(this.elements)}selectAppointment(e){this.selectedAppointmentKey=e}getEditableAppointments(){return AH.getEditableAppointments(this)}getAppointmentView(e){return this.appointments.filter((t=>t.id===e))[0]}isEditableAppointment(e){return AH.Attr.getAppointmentKey(e)===this.editableAppointmentKey}dispatchDragAppointmentEvent(e,t,i,n){this.dispatchEvent(new PH(e,t,i,n))}dispatchStartDragNewAppointmentEvent(e,t,i,n){this.dispatchEvent(new DH(e,t,i,n))}dispatchStartDragAppointmentEvent(e,t){this.dispatchEvent(new HH(e,t))}dispatchDropNewAppointmentEvent(){this.dispatchEvent(new TH)}dispatchDropAppointmentEvent(){this.dispatchEvent(new NH)}dispatchCancelDragAppointmentEvent(){this.dispatchEvent(new RH)}dispatchCreateAppointmentEvent(e,t,i,n){this.dispatchEvent(new EH(e,t,i,n))}dispatchSelectAppointmentEvent(e,t){this.dispatchEvent(new SH(e,t))}showContainer(){this.style.setProperty("display","")}hideContainer(){this.style.setProperty("display","none")}cacheAppointmentsHeight(e){for(let t,i=0;t=e[i];i++)t.cachedOffsetHeight=t.offsetHeight}updateAppointmentCompactStyle(e,t){T.DomUtils.toggleClassName(e.children[0],tH.CompactAppointmentClassName,t<50)}initIntersects(e){e.intersects=[]}prepareAppointments(e,t){if(!e)return;const i={};for(let t,n=0;t=e[n];n++){this.initIntersects(t);const e=AH.Attr.getContainerIndex(t);i[e]||(i[e]=[]),i[e].push(t)}for(let e,n=0;e=t[n];n++){const t=AH.Attr.getContainerIndex(e),n=AH.Attr.getAppointmentFirstCellIndex(e),s=AH.Attr.getAppointmentLastCellIndex(e);if(i[t]){e.firstCell=i[t][n],e.lastCell=i[t][s],e.info={cellCount:s-n+1};for(let r=n;r<=s;r++){this.addIntersect(i[t][r],e)}}}}addIntersect(e,t){const i=e.intersects;i.findIndex((e=>AH.Attr.getAppointmentKey(e)===AH.Attr.getAppointmentKey(t)))<0&&i.push(t)}}C([An({attribute:uH.editableAppointmentKey})],sU.prototype,"editableAppointmentKey",void 0),C([An({attribute:uH.selectedAppointmentKey})],sU.prototype,"selectedAppointmentKey",void 0);class rU extends sU{constructor(){super()}calculateAppointments(){var e;const t=null===(e=this.getDateTimeTableLayout())||void 0===e?void 0:e.getContainers(),i=AH.getHorizontalAppointments(this);t&&i.length>0&&(this.hideContainer(),this.calculateHorizontalAppointmentsWidthAndLeftPosition(i),this.showContainer(),this.cacheAppointmentsHeight(i)),this.calculateHorizontalAppointmentsAndCells(t),this.saveCalculatedParameters()}getAppointments(){return AH.getHorizontalAppointments(this)}createDateTimeTableLayout(){return this.getView().createHorizontalDateTimeTableLayout()}getView(){return this.view||(this.view=this.closest(`.${tH.View}`)),this.view}calculateHorizontalAppointmentsWidthAndLeftPosition(e){for(let t,i=0;t=e[i];i++)t.info={cellCount:t.info.cellCount},this.calculateHorizontalAppointmentWidthAndLeft(t,-1)}calculateHorizontalAppointmentsInCell(e){const t=this.getCalculatedHorizontalAppointmentsInCell(e),i=this.getNotCalculatedHorizontalAppointmentsInCell(e);t.forEach((e=>e.calculated=!0)),i.forEach((e=>e.calculated=!1)),this.calculateHorizontalAptsInCellCore(e,t.concat(i),t.length)}calculateHorizontalAptsInCellCore(e,t,i){this.calculateAppointmentRelativeTopOffset(t,i),this.calculateAppointmentsTopPosition(e,t)}calculateAppointmentsTopPosition(e,t){let i=e.offsetTop;if(e.firstElementChild&&AH.isDateCellHeader(e.firstElementChild)){const t=window.getComputedStyle(e).paddingTop;i+=e.firstElementChild.offsetHeight+parseInt(t)}for(let e=0;e<t.length;e++){const n=t[e];let s=n.relativePosition+i;if(this.isEditableAppointment(n)){const e=t.find((e=>e.classList.contains(tH.DisableAppointmentClassName)));if(!e)continue;s=e.relativePosition+i}n.info.calculatedTop=s}}calculateAppointmentRelativeTopOffset(e,t){this.adjustAppointmentCellIndexes(e),this.calculateAppointmentRelativePositionsCore(e,t)}calculateAppointmentRelativePositionsCore(e,t){const i=e.length,n=this.createBusyIntervals(2*i);let s=0;for(;s<t;)this.isEditableAppointment(e[s])||this.makeIntervalBusy(e[s],n),s++;for(;s<i;){const t=e[s];if(!t.calculated){const e=this.findAvailableRelativePosition(t,n);t.relativePosition=e}this.isEditableAppointment(t)||this.makeIntervalBusy(t,n),s++}}findAvailableRelativePosition(e,t){e.relativePosition=0;let i=0;const n=e.info.busyIntervalFirstCellIndex,s=e.info.busyIntervalLastCellIndex;let r=n;for(;r<=s;){const s=this.findPossibleIntersectionInterval(t[r],i);null===s||s.start>=i+e.offsetHeight?r++:(i=s.end,r=n)}return i}findPossibleIntersectionInterval(e,t){for(let i=0;i<e.length;i++){const n=e[i];if(n.containsExcludeEndBound(t)||n.start>t)return new tU(n.start,n.end)}return null}calculateHorizontalAppointmentsAndCells(e){var t;const i=null===(t=this.view)||void 0===t?void 0:t.getResourceHeadersByContainers(e);if(!i)return;this.view&&(this.view.style.height=Te.toPx(this.view.offsetHeight)),this.resetCellHeight(e);for(const t in e){if(!Object.prototype.hasOwnProperty.call(e,t))continue;let n=0;const s=e[t].cells;for(let e,t=0;e=s[t];t++){this.calculateHorizontalAppointmentsInCell(e);const t=this.getHorizontalCellHeight(e);t>n&&(n=t)}const r=s[0];let o=n?n+15:0;o=Math.max(r.offsetHeight,o);const a=i[AH.Attr.getResourceKey(r)];a&&(a.lastContainerIndex===t&&(o=Math.max(a.minHeight-a.height,o)),a.height+=o),r.style.height=Te.toPx(o)}this.view&&(this.view.style.height="");for(const e in i)Object.prototype.hasOwnProperty.call(i,e)&&(i[e].element.style.height=i[e].height+"px");const n=AH.getHorizontalAppointments(this);for(let e,t=0;e=n[t];t++)e.style.top=e.info.calculatedTop+"px"}calculateHorizontalAppointmentWidthAndLeft(e,t){const i=e.firstCell,n=i.offsetWidth,s=AH.Attr.getAppointmentRow(e)-AH.Attr.getAppointmentFirstCellIndex(e),r=i.offsetLeft+Math.floor(n*s);let o=n-Math.floor(n*s),a=i.nextElementSibling,l=0;const A=AH.Attr.getAppointmentRowSpan(e);for(let e=1;e<Math.trunc(A)&&null!=a;e++)l=a.offsetWidth,o+=l,a=a.nextElementSibling;const d=A-Math.trunc(A);d>0&&(A<1?o-=n-n*d:null!=a&&(o+=(l||a.offsetWidth)*d)),this.updateAppointmentCompactStyle(e,o);const c=t>=0?i.offsetTop+t:-1e4;e.style.height="",e.style.width=`${o}px`,e.style.left=`${r}px`,e.style.top=`${c}px`}getCalculatedHorizontalAppointmentsInCell(e){return e.intersects.filter((e=>void 0!==e.info.calculatedTop)).sort(((e,t)=>e.info.calculatedTop-t.info.calculatedTop))}getNotCalculatedHorizontalAppointmentsInCell(e){return e.intersects.filter((e=>void 0===e.info.calculatedTop)).sort(((e,t)=>{const i=t.info.cellCount-e.info.cellCount;return i||AH.Attr.getStart(e).valueOf()-AH.Attr.getStart(t).valueOf()}))}getHorizontalCellHeight(e){let t=-1,i=null;return e.intersects.forEach((e=>{e.info.calculatedTop>t&&(t=e.info.calculatedTop,i=e)})),i?t-e.offsetTop+i.cachedOffsetHeight:0}createBusyIntervals(e){const t=[];for(let i=0;i<e;i++)t.push([]);return t}makeIntervalBusy(e,t){const i=e.info.busyIntervalLastCellIndex;for(let n=e.info.busyIntervalFirstCellIndex;n<=i;n++)this.addBusyInterval(t[n],new tU(e.relativePosition,e.relativePosition+e.cachedOffsetHeight))}addBusyInterval(e,t){if(!this.checkBusyIntervalExists(e,t)){let i=e.findIndex((e=>e.start>t.start));-1===i&&(i=e.length),e.splice(i,0,t)}}checkBusyIntervalExists(e,t){return e.some((e=>e.start===t.start&&e.end===t.end))}adjustAppointmentCellIndexes(e){const t=this.createAptsDateTimeCollection(e);this.calculateAdjustedCellIndexes(e,t)}createAptsDateTimeCollection(e){const t=[];for(let i=0;i<e.length;i++){const n=e[i],{startTime:s,endTime:r}=this.getAptAdjustedStartEndTime(n);this.addDateTime(t,s),this.addDateTime(t,r)}return t.sort(rH.dateTimeComparer),t}addDateTime(e,t){this.isAlreadyAdded(e,t)||e.push(t)}isAlreadyAdded(e,t){const i=e.length;for(let n=0;n<i;n++)if(e[n].valueOf()===t.valueOf())return!0;return!1}calculateAdjustedCellIndexes(e,t){for(let i=0;i<e.length;i++)this.calculateAdjustedCellIndexesCore(e[i],t)}resetCellHeight(e){for(const t in e)Object.prototype.hasOwnProperty.call(e,t)&&(e[t].cells[0].style.height="")}calculateAdjustedCellIndexesCore(e,t){const{startTime:i,endTime:n}=this.getAptAdjustedStartEndTime(e),s=nU(t,i,rH.dateTimeIndexComparer),r=nU(t,n,rH.dateTimeIndexComparer)-1;e.info.busyIntervalFirstCellIndex=s,e.info.busyIntervalLastCellIndex=r}getAptAdjustedStartEndTime(e){const t=AH.Attr.getSnapToCellsMode(this.view),i=AH.Attr.getAppointmentFirstCellIndex(e),n=AH.Attr.getAppointmentLastCellIndex(e),s=t===aH.Always||t===aH.Auto&&i-n<=1;return{startTime:AH.Attr.getStart(s?e.firstCell:e),endTime:s?AH.Attr.getEnd(e.lastCell):AH.Attr.getAppointmentEnd(e)}}saveCalculatedParameters(){this.startInterval=this.getView().startInterval,this.endInterval=this.getView().endInterval,this.resources=this.getView().resources}}class oU extends rU{constructor(){super(),this.appointmentStart=0,this.appointmentEnd=0,this.appointmentAllDay=!1,this.appointmentResources=""}showContainer(){}hideContainer(){}initObserver(){}contentChangedCore(){}initIntersects(e){}addIntersect(e,t){}saveCalculatedParameters(){}calculateAppointments(){var e;if(null===(e=this.getView().horizontalView)||void 0===e?void 0:e.getContainers()){const e=AH.Attr.getAppointmentTopPosition(this.getView());for(let t,i=0;t=this.elements[i];i++)t.info={cellCount:t.info.cellCount},this.calculateHorizontalAppointmentWidthAndLeft(t,e)}}updated(e){this.recalculateAppointments(),super.updated(e)}}C([An({type:Number,attribute:uH.appointmentStart})],oU.prototype,"appointmentStart",void 0),C([An({type:Number,attribute:uH.appointmentEnd})],oU.prototype,"appointmentEnd",void 0),C([An({type:Boolean,attribute:uH.appointmentAllDay})],oU.prototype,"appointmentAllDay",void 0),C([An({type:String,attribute:uH.appointmentResources})],oU.prototype,"appointmentResources",void 0);class aU extends sU{constructor(){super()}calculateAppointments(){for(let e,t=0;e=this.elements[t];t++)this.calculateAppointment(e);this.showContainer(),this.saveCalculatedParameters()}getView(){return this.view||(this.view=this.closest(`.${tH.View}`)),this.view}createDateTimeTableLayout(){return this.getView().createVerticalDateTimeTableLayout()}getAppointments(){return AH.getVerticalAppointments(this)}calculateAppointment(e){const t=e.firstCell;if(!t)return;const i=(t.offsetWidth-10)/AH.Attr.getAppointmentColumnsCount(e),n=t.getBoundingClientRect().height,s=AH.Attr.getAppointmentRow(e)-AH.Attr.getAppointmentFirstCellIndex(e),r=Math.floor(n*s),o=t.offsetTop+r,a=AH.Attr.getAppointmentColumn(e),l=t.offsetLeft+i*a,A=Math.floor(n*AH.Attr.getAppointmentRowSpan(e))-r;this.updateAppointmentCompactStyle(e,i),e.style.top=`${o}px`,e.style.left=`${l}px`,e.style.width=`${i}px`,e.style.height=`${A}px`}saveCalculatedParameters(){this.startInterval=this.getView().startInterval,this.endInterval=this.getView().endInterval,this.resources=this.getView().resources}}class lU extends aU{constructor(){super(),this.appointmentStart="",this.appointmentEnd="",this.appointmentAllDay=!1,this.appointmentResources=""}initObserver(){}contentChangedCore(){}saveCalculatedParameters(){}getAppointments(){return AH.getVerticalEditableAppointments(this)}updated(e){this.recalculateAppointments(),super.updated(e)}}C([An({type:String,attribute:uH.appointmentStart})],lU.prototype,"appointmentStart",void 0),C([An({type:String,attribute:uH.appointmentEnd})],lU.prototype,"appointmentEnd",void 0),C([An({type:Boolean,attribute:uH.appointmentAllDay})],lU.prototype,"appointmentAllDay",void 0),C([An({type:String,attribute:uH.appointmentResources})],lU.prototype,"appointmentResources",void 0);class AU extends de{constructor(){super()}initializeComponent(){super.initializeComponent(),this.addEventSubscriptions(),this.initializeKeyboardNavigator()}disposeComponent(){this.removeEventSubscriptions(),super.disposeComponent()}getView(){return this.querySelector(`.${tH.View}`)}getKeyboardNavigator(){return this.keyboardNavigator}adjustControl(e,t){var i;e.width!==t.width&&(null===(i=this.getView())||void 0===i||i.adjust())}addEventSubscriptions(){this.elementContentSizeSubscription=si(this,this.adjustControl.bind(this))}removeEventSubscriptions(){this.elementContentSizeSubscription&&ni(this.elementContentSizeSubscription)}initializeKeyboardNavigator(){this.keyboardNavigator=this.querySelector(`:scope > ${Qi}`),this.keyboardNavigator&&!this.keyboardNavigator.initialized&&this.keyboardNavigator.initialize(this,new YH(this))}}AU.TagName="dxbl-scheduler",customElements.define(AU.TagName,AU),customElements.define(VH.TagName,VH),customElements.define(zH.TagName,zH),customElements.define(OH.TagName,OH),customElements.define(JH.TagName,JH),customElements.define(eU.TagName,eU),customElements.define("dxbl-scheduler-horizontal-appointments-container",rU),customElements.define("dxbl-scheduler-horizontal-editable-appointments-container",oU),customElements.define("dxbl-scheduler-vertical-appointments-container",aU),customElements.define("dxbl-scheduler-vertical-editable-appointments-container",lU);class dU{}class cU extends CustomEvent{constructor(){super(cU.eventName,{detail:new dU,bubbles:!0})}}cU.eventName="dxbl:loading-panel.click",gt.register(cU.eventName,(e=>e.detail));class hU extends Es{constructor(){super(...arguments),this.attachPanelHandler=this.attachPanel.bind(this),this.resizePanelHandler=this.resizePanel.bind(this),this.clickPanelHandler=this.clickPanel.bind(this),this.panel=null,this.targetElement=null,this.targetResizeObserver=null,this.panelItems=[],this.positionTarget=null,this.panelVisible=!1,this.blockedContent=!1,this.hasContent=!1,this.zIndex=null,this.width="unset",this.height="unset",this.translateState="translate(0px; 0px)",this.trackingInterval=null,this.targetCurrentRect=null}render(){return Xn`
            <style>
                :host {
                    display: ${this.getDisplayProp()};
                    position: ${this.hasContent?"relative":"fixed"};
                    pointer-events: ${this.blockedContent||this.hasContent?"unset":"none"};
                    width: ${this.hasContent?"var(--dxbl-loading-panel-width)":this.width};
                    height: ${this.hasContent?"var(--dxbl-loading-panel-height)":this.height};
                    transform: ${this.hasContent?"none":this.translateState};
                    z-index: ${this.panelVisible&&this.zIndex&&!this.hasContent?this.zIndex:"auto"};
                }
            </style>
            <slot></slot>
        `}connectedOrContentChanged(){super.connectedOrContentChanged(),this.setAttribute(he.Loaded,"")}connectedCallback(){super.connectedCallback(),this.hasContent||window.addEventListener("resize",this.resizePanelHandler),this.panel=document.querySelector(`#${this.id}`),this.addEventListener("click",this.clickPanelHandler)}disconnectedCallback(){var e;super.disconnectedCallback(),this.targetElement&&(null===(e=this.targetResizeObserver)||void 0===e||e.unobserve(this.targetElement),this.unsubscribeTargetScroll()),window.removeEventListener("resize",this.resizePanelHandler),this.removeEventListener("click",this.clickPanelHandler),this.disablePersistentAttaching()}updated(e){super.updated(e),e.has("positionTarget")&&(this.setTargetElement(),this.processPanelElements(),this.attachPanel(),this.resizePanel()),e.has("panelVisible")&&(!this.targetElement&&this.panelVisible&&this.setTargetElement(),this.attachPanel(),this.resizePanel(),this.checkBlockPanelTabIndexes()),e.has("blockedContent")&&this.checkBlockPanelTabIndexes()}setTargetElement(){var e;if(this.positionTarget){if(this.targetElement=document.querySelector(this.positionTarget),!this.targetElement)return;this.targetCurrentRect=this.targetElement.getBoundingClientRect(),this.subscribeTargetResize(),this.subscribeTargetScroll(),this.enablePersistentAttaching()}else this.targetElement&&(null===(e=this.targetResizeObserver)||void 0===e||e.unobserve(this.targetElement),this.targetElement=null)}attachPanel(){!this.hasContent&&this.targetElement&&this.panel&&requestAnimationFrame((()=>{const e=this.targetElement.getBoundingClientRect();this.translateState=`translate(${e.left+this.scrollLeft}px, ${e.top+this.scrollTop}px)`}))}resizePanel(){this.targetElement&&this.panel&&requestAnimationFrame((()=>{const e=this.targetElement.getBoundingClientRect();this.width=e.width+"px",this.height=e.height+"px"}))}clickPanel(){this.panelVisible&&this.dispatchEvent(new cU)}processPanelElements(){this.targetElement&&(this.checkAndAddElementTabIndex(this.targetElement),this.processPanelChildElements(this.targetElement))}checkAndAddElementTabIndex(e){this.panelItems.map((e=>e.element)).indexOf(e)<0&&this.panelItems.push({element:e,tabIndex:e.hasAttribute("tabIndex")?e.tabIndex:null})}processPanelChildElements(e){const t=e.childNodes;for(let e=0;e<t.length;e++){const i=t[e];i instanceof HTMLElement&&(this.checkAndAddElementTabIndex(i),this.processPanelChildElements(i))}}checkBlockPanelTabIndexes(){this.panelItems.length&&this.panelItems.forEach((e=>{this.blockedContent&&this.panelVisible?e.element.tabIndex=-1:null!==e.tabIndex?e.element.tabIndex=e.tabIndex:e.element.removeAttribute("tabIndex")}))}subscribeTargetResize(){this.targetResizeObserver=new ResizeObserver((()=>this.resizePanel())),this.targetResizeObserver.observe(this.targetElement)}enablePersistentAttaching(){this.trackingInterval=setInterval((()=>{const e=this.targetElement.getBoundingClientRect();e.top===this.targetCurrentRect.top&&e.left===this.targetCurrentRect.left||(this.targetCurrentRect=e,this.attachPanel())}),0)}disablePersistentAttaching(){this.trackingInterval&&clearInterval(this.trackingInterval)}subscribeTargetScroll(){this.getTargetRootElements().forEach((e=>e.addEventListener("scroll",this.attachPanelHandler)))}unsubscribeTargetScroll(){this.getTargetRootElements().forEach((e=>e.removeEventListener("scroll",this.attachPanelHandler)))}getTargetRootElements(){return[...ot.getRootPath(this.targetElement)].filter((e=>e instanceof HTMLElement)).map((e=>e))}getDisplayProp(){return this.hasContent||this.positionTarget?this.hasContent||this.panelVisible?"inline-block":"none":"block"}}C([An({type:String,attribute:"position-target",reflect:!0})],hU.prototype,"positionTarget",void 0),C([An({type:Boolean,attribute:"panel-visible"})],hU.prototype,"panelVisible",void 0),C([An({type:Boolean,attribute:"blocked-content"})],hU.prototype,"blockedContent",void 0),C([An({type:Boolean,attribute:"has-content"})],hU.prototype,"hasContent",void 0),C([An({type:Number,attribute:"z-index"})],hU.prototype,"zIndex",void 0),C([dn()],hU.prototype,"width",void 0),C([dn()],hU.prototype,"height",void 0),C([dn()],hU.prototype,"translateState",void 0),CD(customElements,"dxbl-loading-panel",hU);let uU=class extends Es{constructor(){super(...arguments),this.width="",this.zIndex=0}updated(e){e.has("width")&&(this.style.width=this.width),e.has("zIndex")&&(this.style.zIndex=this.zIndex.toString())}};uU.shadowRootOptions={...gs.shadowRootOptions,mode:"open"},C([An()],uU.prototype,"width",void 0),C([An({type:Number,attribute:"z-index"})],uU.prototype,"zIndex",void 0),uU=C([on("dxbl-toast-portal")],uU);class pU{}pU.Toast=he.Prefix+"-toast",pU.ToastText=pU.Toast+"-text";let mU=class extends Es{constructor(){super(...arguments),this.maxHeight=""}updated(e){e.has("maxHeight")&&this.calculateHeight()}calculateHeight(){this.style.maxHeight=this.maxHeight;const e=this.querySelector(`.${pU.ToastText}`);if(e){const t=parseInt(window.getComputedStyle(e).lineHeight),i=Math.floor(e.offsetHeight/t);this.style.setProperty("--dxbl-toast-line-clamp",i.toString())}}};C([An({attribute:"max-height"})],mU.prototype,"maxHeight",void 0),mU=C([on("dxbl-toast")],mU);class gU{}gU.ProgressBar=he.Prefix+"-progress-bar",gU.ProgressCircularBar=he.Prefix+"-progress-circular-bar",gU.ProgressCircularBarTrack=gU.ProgressCircularBar+"-track",gU.ProgressCircularBarIndicator=gU.ProgressCircularBar+"-indicator",gU.ProgressBarLabel=gU.ProgressBar+"-label",gU.ProgressBarLabelContainer=gU.ProgressBarLabel+"-container";class CU{static convertRemToPixels(e){return e*parseFloat(getComputedStyle(document.documentElement).fontSize)}static convertToPixels(e){const t=document.createElement("div");t.style.fontSize="1rem",t.style.position="absolute",t.style.visibility="hidden",t.style.width=e,document.body.appendChild(t);const i=t.offsetWidth;return document.body.removeChild(t),i}}var fU,vU;!function(e){e[e.Small=0]="Small",e[e.Medium=1]="Medium",e[e.Large=2]="Large"}(fU||(fU={})),function(e){e[e.Horizontal=0]="Horizontal",e[e.Vertical=1]="Vertical",e[e.Circular=2]="Circular"}(vU||(vU={}));let bU=class extends Es{constructor(){super(...arguments),this.value=null,this.visible=!1,this.type=null,this.size="",this.sizeMode=null,this.thickness="",this.indeterminate=!1,this.emptyOffset=!1,this.thicknessPixel=0,this.circularSizeObserver=null}get radius(){return this.thicknessPixel?50-this.thicknessPixel/2:50}get isVertical(){return this.type===vU.Vertical}get isHorizontal(){return this.type===vU.Horizontal}get isCircular(){return this.type===vU.Circular}get offset(){return this.emptyOffset?0:this.indeterminate?.7*this.circumference:this.circumference*(100-this.value)/100}get circumference(){return Math.round(2*Math.PI*this.radius)}connectedCallback(){super.connectedCallback(),this.updateSize(),this.style.visibility="visible"}render(){return Xn`
            <style>
                :host {
                    --dxbl-progress-bar-indicator-width: ${this.isHorizontal?this.value+"%":"100%"};
                    --dxbl-progress-bar-indicator-height: ${this.isVertical?this.value+"%":"100%"};
                }
            </style>
            <slot></slot>
        `}updated(e){super.updated(e),e.has("visible")&&(this.style.display=this.visible?"":"none"),e.has("type")&&this.updateType(),(e.has("thickness")||e.has("sizeMode"))&&this.updateThickness(),(e.has("value")||e.has("indeterminate")||e.has("emptyOffset"))&&this.isCircular&&this.updateCircularValue(),(e.has("size")||e.has("type"))&&this.updateSize()}updateSize(){this.calculateSize(),this.updateCircular()}calculateSize(){this.style.width=this.isHorizontal||this.isCircular?this.size:"",this.style.height=this.isVertical||this.isCircular?this.size:"",this.style.setProperty("--dxbl-progress-bar-width",this.style.width),this.style.setProperty("--dxbl-progress-bar-height",this.style.height)}updateType(){this.updateCircular()}updateCircular(){this.isCircular&&(this.updateThickness(),this.updatePercentCircularSize())}updateThickness(){this.thickness?this.style.setProperty("--dxbl-progress-bar-thickness",this.thickness):this.style.removeProperty("--dxbl-progress-bar-thickness"),this.isCircular&&(this.thicknessPixel=CU.convertToPixels(getComputedStyle(this).getPropertyValue("--dxbl-progress-bar-thickness")),this.updateCircularValue(),this.updateCircularLabelSize())}updateCircularValue(){if(!this.isCircular||!this.thicknessPixel)return;const e=this.querySelector(`.${gU.ProgressCircularBarTrack}`),t=this.querySelector(`.${gU.ProgressCircularBarIndicator}`);e&&t&&(e.setAttribute("r",this.radius.toString()),t.setAttribute("r",this.radius.toString()),t.setAttribute("stroke-dasharray",this.circumference.toFixed(2)),t.setAttribute("stroke-dashoffset",this.offset.toFixed(2)),t.style.display=0===this.value?"none":"")}updatePercentCircularSize(){this.size.indexOf("%")<0?this.unsubscribeCircularSizeObserver():(this.subscribeCircularSizeObserver(),this.updateCircularPercentHeight())}subscribeCircularSizeObserver(){this.circularSizeObserver||(this.circularSizeObserver=new ResizeObserver((()=>this.updateCircularPercentHeight())),this.circularSizeObserver.observe(this))}unsubscribeCircularSizeObserver(){this.circularSizeObserver&&(this.circularSizeObserver.unobserve(this),this.circularSizeObserver=null,this.calculateSize())}updateCircularPercentHeight(){this.style.height=this.offsetWidth+"px",this.updateCircularLabelSize()}updateCircularLabelSize(){const e=(()=>{const e=this.querySelector(`.${gU.ProgressBarLabelContainer}`);if(!e)return 0;const t=e.querySelector(".dxbl-image");return t?t.clientWidth+CU.convertToPixels(getComputedStyle(e).gap):0})(),t=this.offsetWidth-2*Math.PI*this.thicknessPixel-e;this.style.setProperty("--dxbl-progress-bar-label-width",t.toFixed(2)+"px")}};C([An({type:Number})],bU.prototype,"value",void 0),C([An({type:Boolean})],bU.prototype,"visible",void 0),C([An({type:vU,converter:NE(vU)})],bU.prototype,"type",void 0),C([An()],bU.prototype,"size",void 0),C([An({type:fU,converter:NE(fU)})],bU.prototype,"sizeMode",void 0),C([An()],bU.prototype,"thickness",void 0),C([An({type:Boolean})],bU.prototype,"indeterminate",void 0),C([An({attribute:"empty-offset",type:Boolean})],bU.prototype,"emptyOffset",void 0),bU=C([on("dxbl-progress-bar")],bU);class wU extends MF{constructor(e,t,i,n){super(e,t,i,n),this._parentTargetElement=i.targetElement}get parentTargetElement(){return this._parentTargetElement}handlePopupShown(){super.handlePopupShown(),this.focusFirstItem(),this.synchronizeFocusState()}handlePopupClosed(){this.closedWithKeyboard&&this.parentStrategy.allowRestoreFocus(),super.handlePopupClosed()}synchronizeFocusState(){xi(this.parentTargetElement)&&Ii(this.targetElement)}focusSelectedItem(){this._focusSemaphore.doAllowedAction((()=>{super.focusSelectedItem()}))}doAction(e){kx(this.selectedItemElement)||(this.closedWithKeyboard=!0),super.doAction(e)}}const yU=".dxbl-btn:not([disabled])",BU=".dxbl-btn-dropdown-content-template";class EU extends tD{constructor(e,t){super(e,t),this._timeoutId=null,this.boundWaitForCustomSubMenuInitialization=this.waitForCustomSubMenuInitialization.bind(this),this.verticalOrientation=t.verticalOrientation}queryItems(){return[...this.targetElement.querySelectorAll(yU)]}handleKeyDownCore(e){switch(Be.KeyUtils.getEventKeyCode(e)){case Be.KeyCode.Home:return this.moveToFirstItem(),!0;case Be.KeyCode.End:return this.moveToLastItem(),!0;case Be.KeyCode.Up:return!(!e.altKey||e.shiftKey)&&this.performCloseShortcutEvent(e);case Be.KeyCode.Down:return!(!e.altKey||e.shiftKey)&&this.performOpenShortcutEvent(e);case Be.KeyCode.Tab:return this.handleTabKeyDown(e);case Be.KeyCode.Enter:case Be.KeyCode.Space:return this.performOpenShortcutEvent(e);default:return!1}}performOpenShortcutEvent(e){return!!this.hasMenu()&&(this.performShortcutEvent(e),this.focusSubMenuItemAsync(zx.First),!0)}performCloseShortcutEvent(e){return this.isMenuExpanded()&&(this.allowRestoreFocus(),this.performShortcutEvent(e)),!0}handleTabKeyDown(e){return this.performCloseShortcutEvent(e),e.shiftKey?this.selectedItemIndex>0?this.moveToPrevItem(!1):this.leaveBackward():this.selectedItemIndex<this.itemCount-1?this.moveToNextItem(!1):this.leaveForward(),!0}onSubMenuShown(e){const t=e.targetElement.querySelector(Qi);t&&!t.initialized?this.waitForCustomSubMenuInitialization(t,(()=>super.onSubMenuShown(e))):super.onSubMenuShown(e),this.disallowRestoreFocus()}onSubMenuClosed(e){this.shouldRestoreFocus=this.shouldRestoreFocus&&this.allowedToRestoreFocus,super.onSubMenuClosed(e)}waitForCustomSubMenuInitialization(e,t){this._timeoutId&&clearTimeout(this._timeoutId),e.initialized?t():this._timeoutId=setTimeout((()=>this.boundWaitForCustomSubMenuInitialization(e,t)),50)}createPopupStrategy(e,t){return new wU(e,t,this,[yU,BU].join(","))}createModalStrategy(e,t){return new OF(e,t,this,[yU,BU].join(","))}}const IU="data-dxbutton-id";let SU=class extends Es{constructor(){super(...arguments),this.verticalOrientation=!1}connectedOrContentChanged(){this.initializeKeyboardNavigator(),super.connectedOrContentChanged()}disconnectedCallback(){delete this._keyboardNavigator,super.disconnectedCallback()}initializeKeyboardNavigator(){this._keyboardNavigator=this.querySelector(`:scope > ${Qi}`),this._keyboardNavigator&&"initialized"in this._keyboardNavigator&&!this._keyboardNavigator.initialized&&this._keyboardNavigator.initialize(this,new EU(this._keyboardNavigator,this))}};C([An({attribute:"vertical-orientation",type:Boolean})],SU.prototype,"verticalOrientation",void 0),SU=C([on("dxbl-button")],SU),customElements.define("dxbl-button-dropdown-item",class extends Fx{constructor(){super(...arguments),this.boundOnButtonClick=this.onButtonClick.bind(this)}connectedCallback(){super.connectedCallback(),this.addEventListener("click",this.boundOnButtonClick)}disconnectedCallback(){this.removeEventListener("click",this.boundOnButtonClick),super.disconnectedCallback()}canHandlePointerDown(e){return K.containsInComposedPath(e,this)}onButtonClick(e){if(null===this.getAttribute("submit-form-on-click"))return;const t=this.getAttribute(IU);if(t){const e=document.querySelector(`[${IU}=${t}]`);if(e){const t=document.createElement("input");t.type="submit",t.hidden=!0,e.appendChild(t),t.click(),e.removeChild(t)}}}});class xU extends CustomEvent{constructor(e,t,i){super(xU.eventName,{detail:new DU(e,t,i),bubbles:!0,composed:!0,cancelable:!0})}}xU.eventName=sl+".oncolorchanged";class DU{constructor(e,t,i){this.Red=e,this.Green=t,this.Blue=i}}gt.register(xU.eventName,(e=>e.detail));class FU{static rgbToHtml(e){return"rgb("+e.red+", "+e.green+", "+e.blue+")"}static hsbToHtml(e){return this.rgbToHtml(this.hsbToRgb(e))}static htmlToHsb(e){return this.rgbToHsb(this.htmlToRgb(e))}static htmlToRgb(e){const t=(e=e.replace("rgb","").replace("(","").replace(")","")).split(",").map((e=>parseInt(e.trim())));return{red:t[0],green:t[1],blue:t[2]}}static rgbToHsb(e){const t=e.red/255,i=e.green/255,n=e.blue/255,s=Math.max(t,i,n),r=s-Math.min(t,i,n);let o;o=0===r?0:s===t?(i-n)/r%6:s===i?(n-t)/r+2:(t-i)/r+4,o*=60,o<0&&(o+=360);let a,l=s;return a=0===l?0:r/l,a*=100,l*=100,{hue:o,saturation:a,brightness:l}}static hsbToRgb(e){const t=Math.floor(e.hue/60),i=(FU.maxHsb.saturation-e.saturation)*e.brightness/FU.maxHsb.brightness,n=e.hue%60*(e.brightness-i)/60,s=i+n,r=e.brightness-n;let o={red:0,green:0,blue:0};switch(t){case 0:o={red:e.brightness,green:s,blue:i};break;case 1:o={red:r,green:e.brightness,blue:i};break;case 2:o={red:i,green:e.brightness,blue:s};break;case 3:o={red:i,green:r,blue:e.brightness};break;case 4:o={red:s,green:i,blue:e.brightness};break;case 5:o={red:e.brightness,green:i,blue:r}}return o.red=Math.round(2.55*o.red),o.green=Math.round(2.55*o.green),o.blue=Math.round(2.55*o.blue),o}}FU.maxHsb={hue:359,saturation:100,brightness:100};class TU{}TU.Prefix="dxbl-blazor-colorpicker",TU.HueAreaIndicator=TU.Prefix+"-hue-selection-rect",TU.SaturationBrightnessAreaIndicator=TU.Prefix+"-color-selection";class HU{}HU.ColorAttribute="data-color";class UU extends de{constructor(){super(),this._onColorChanged=null}get indicator(){return this.querySelector(this.getIndicatorCssCelector())}get _indicatorSize(){return{width:this.indicator.offsetWidth,height:this.indicator.offsetHeight}}get _containerSize(){return{width:this.offsetWidth,height:this.offsetHeight}}getIndicatorHeight(){return this._indicatorSize.height}getIndicatorWidth(){return this._indicatorSize.width}getContainerHeight(){return this._containerSize.height}getContainerWidth(){return this._containerSize.width}connectedCallback(){super.connectedCallback(),this.initializeEvents()}disposeComponent(){yi(this),super.disposeComponent()}setColorChangedCallback(e){this._onColorChanged=e}raiseColorChanged(e){null!=this._onColorChanged&&this._onColorChanged(e)}initializeEvents(){const e=e=>{WI.TouchUtils.isTouchEvent(e)&&e.preventDefault(),this.addEventListener(WI.TouchUtils.touchMouseUpEventName,t),this.addEventListener(WI.TouchUtils.touchMouseMoveEventName,i),this.moveIndicator(e)},t=e=>{this.removeEventListener(WI.TouchUtils.touchMouseUpEventName,t),this.removeEventListener(WI.TouchUtils.touchMouseMoveEventName,i)},i=e=>{WI.TouchUtils.isTouchEvent(e)&&e.preventDefault(),$I.EvtUtils.isLeftButtonPressed(e)&&this.moveIndicator(e)};this.addEventListener(WI.TouchUtils.touchMouseDownEventName,e),Bi(this,(()=>{this.removeEventListener(WI.TouchUtils.touchMouseDownEventName,e),this.removeEventListener(WI.TouchUtils.touchMouseUpEventName,t),this.removeEventListener(WI.TouchUtils.touchMouseMoveEventName,i)}))}updateBackground(e){}}customElements.define(ol,class extends UU{getIndicatorCssCelector(){return`.${TU.SaturationBrightnessAreaIndicator}`}moveIndicator(e){let t=St($I.EvtUtils.getEventX(e),this.indicator,!0),i=St($I.EvtUtils.getEventY(e),this.indicator,!1);t=Math.min(this.getContainerWidth(),Math.max(0,t))-this.getIndicatorWidth()/2,i=Math.min(this.getContainerHeight(),Math.max(0,i))-this.getIndicatorHeight()/2,this.indicator.style.top=i+"px",this.indicator.style.left=t+"px";const n={hue:FU.maxHsb.hue,saturation:this.getSaturationValue(t),brightness:this.getBrightnessValue(i)};this.raiseColorChanged(n)}updateColor(e){this.setIndicatorPosition(e),this.updateBackground(e)}updateBackground(e){this.style.backgroundColor=FU.hsbToHtml({hue:e.hue,saturation:FU.maxHsb.saturation,brightness:FU.maxHsb.brightness}),this.indicator.style.backgroundColor=FU.hsbToHtml(e)}setIndicatorPosition(e){this.indicator.style.left=this.convertSaturationToXCoordinate(e.saturation)+"px",this.indicator.style.top=this.convertBrightnessToYCoordinate(e.brightness)+"px"}convertSaturationToXCoordinate(e){const t=this.getContainerWidth()*e/FU.maxHsb.saturation-this.getIndicatorWidth()/2;return Math.floor(t)}convertBrightnessToYCoordinate(e){const t=this.getContainerHeight(),i=t-t*e/FU.maxHsb.brightness-this.getIndicatorHeight()/2;return Math.floor(i)}getSaturationValue(e){const t=(e+this.getIndicatorWidth()/2)*FU.maxHsb.saturation/this.getContainerWidth();return Math.floor(t)}getBrightnessValue(e){const t=FU.maxHsb.brightness-(e+this.getIndicatorHeight()/2)*FU.maxHsb.brightness/this.getContainerHeight();return Math.floor(t)}}),customElements.define(rl,class extends UU{getIndicatorCssCelector(){return`.${TU.HueAreaIndicator}`}moveIndicator(e){let t=St($I.EvtUtils.getEventY(e),this.indicator,!1);t=Math.min(this.getContainerHeight()-Math.round(this.getIndicatorHeight()/2),Math.max(0-this.getIndicatorHeight()/2,t)),this.indicator.style.top=t+"px";const i={hue:this.getHueValue(t),saturation:FU.maxHsb.saturation,brightness:FU.maxHsb.brightness};this.indicator.style.backgroundColor=FU.hsbToHtml(i),this.raiseColorChanged(i)}updateColor(e){this.indicator.style.top=this.calculateHueIndicatorPosition(e.hue)+"px",this.indicator.style.backgroundColor=FU.hsbToHtml({hue:e.hue,saturation:FU.maxHsb.saturation,brightness:FU.maxHsb.brightness})}calculateHueIndicatorPosition(e){const t=this.getContainerHeight(),i=this.getIndicatorHeight();let n=t-t*e/FU.maxHsb.hue;const s=Math.round(i/2);return n=Math.min(t-s,Math.max(0-i/2,n-s)),Math.round(n)}getHueValue(e){let t=(e+=e<0?this.getIndicatorHeight()/2:Math.round(this.getIndicatorHeight()/2))*FU.maxHsb.hue/this.getContainerHeight();return t=FU.maxHsb.hue-t,Math.round(t)}}),customElements.define(sl,class extends de{constructor(){super(...arguments),this._hueArea=null,this._colorArea=null,this._color=FU.maxHsb}initializeComponent(){if(this._hueArea=this.querySelector(rl),this._colorArea=this.querySelector(ol),!this._hueArea||!this._colorArea)throw new Error("ColorAreas elements not found");this.setupHueArea(),this.setupSaturationBrightnessArea(),this.setupColorValue()}setupHueArea(){var e;null===(e=this._hueArea)||void 0===e||e.setColorChangedCallback((e=>{if(this._color.hue=e.hue,null==this._colorArea)return;this._colorArea.updateBackground(this._color);const t=FU.hsbToRgb(this._color);this.raiseOnColorChanged(t.red,t.green,t.blue)}))}setupSaturationBrightnessArea(){var e;null===(e=this._colorArea)||void 0===e||e.setColorChangedCallback((e=>{this._color.saturation=e.saturation,this._color.brightness=e.brightness;const t=FU.hsbToRgb(this._color);null!=this._colorArea&&(this._colorArea.indicator.style.backgroundColor=FU.rgbToHtml(t),this.raiseOnColorChanged(t.red,t.green,t.blue))}))}setupColorValue(){const e=this.getAttribute(HU.ColorAttribute);if(null==e)return;const t=FU.htmlToHsb(e);this.updateColor(t)}updateColor(e){var t,i;this._color=e,null===(t=this._hueArea)||void 0===t||t.updateColor(e),null===(i=this._colorArea)||void 0===i||i.updateColor(e)}raiseOnColorChanged(e,t,i){this.dispatchEvent(new xU(e,t,i))}});const PU=document.createElement("style");PU.type="text/css";class QU extends HTMLElement{constructor(){super(),this.resourceStyleElement=PU.cloneNode()}static get observedAttributes(){return["css"]}attributeChangedCallback(e,t,i){"css"===e&&async function(e,t){e&&await Zt((()=>t.innerHTML=e))}(i,this.resourceStyleElement)}connectedCallback(){this.resourceStyleElement.isConnected||document.head.appendChild(this.resourceStyleElement)}disconnectedCallback(){this.resourceStyleElement.isConnected&&this.resourceStyleElement.remove()}}CD(customElements,"dxbl-dynamic-stylesheet",QU);const NU=[],RU=["src"],LU=document.createElement("DIV");LU.style.display="none",requestAnimationFrame((()=>{document.body.appendChild(LU)}));class MU extends HTMLElement{connectedCallback(){this.style.display="none"}static get observedAttributes(){return RU}attributeChangedCallback(e,t,i){NU.includes(i)||(NU.push(i),"src"===e&&MU.loadAndEmbedSpriteAsync(i).then((e=>{})).catch((e=>{})))}static async loadAndEmbedSpriteAsync(e){const t=await fetch(e).then((e=>e.text())),i=document.createElement("DIV");i.innerHTML=t,LU.appendChild(i)}}var kU,KU,OU;CD(customElements,"dxbl-webview-sprite-preloader",MU),function(e){e.Default="dxbl-adaptive-group-state-default",e.Text="dxbl-adaptive-group-state-text",e.NoText="dxbl-adaptive-group-state-no-text",e.Collapsed="dxbl-adaptive-group-state-collapsed"}(kU||(kU={})),function(e){e.Default="dxbl-adaptive-item-state-default",e.NoText="dxbl-adaptive-item-state-no-text",e.Collapsed="dxbl-adaptive-item-state-collapsed"}(KU||(KU={})),function(e){e.Default="dxbl-adaptive-ellipsis-state-default",e.Hidden="dxbl-toolbar-hidden-item"}(OU||(OU={}));const _U=Object.values(kU).map((e=>e));var VU;Object.values(KU).map((e=>e)),Object.values(OU).map((e=>e)),function(e){e.Default="dxbl-adaptive-state-default",e.FullSequential="dxbl-adaptive-state-full-seq",e.NoText="dxbl-adaptive-state-no-text",e.NoTextSequential="dxbl-adaptive-state-no-text-seq",e.Group="dxbl-adaptive-state-group-text",e.GroupNoText="dxbl-adaptive-state-grouping-no-text"}(VU||(VU={}));const zU=Object.values(VU).map((e=>e));class WU{}WU.Adaptive=he.Prefix+"-adaptive",WU.AdaptiveContainer=WU.Adaptive+"-container",WU.AdaptiveContainerContent=WU.AdaptiveContainer+"-content",WU.AdaptiveGroup=WU.Adaptive+"-group",WU.AdaptiveItem=WU.Adaptive+"-item",WU.EllipsisGroup=WU.Adaptive+"-ellipsis-group",WU.EllipsisGroupText=WU.EllipsisGroup+"-text",WU.EllipsisGroupNoText=WU.EllipsisGroup+"-no-text",WU.ItemCollapsed=WU.AdaptiveItem+"-collapsed",WU.ItemNoText=WU.AdaptiveItem+"-no-text",WU.VirtualContainer=WU.Adaptive+"-virtual-container",WU.VirtualTestContainer=WU.VirtualContainer+"-test";const $U=[WU.EllipsisGroupNoText,WU.EllipsisGroupText,OU.Default,OU.Hidden];class GU{renderContainerDefaultState(e){var t,i,n;for(const t of e.groups)this.resetGroupToDefault(t),this.resetItems(t.items),this.expandGroup(t);e.root.classList.remove(...zU),null===(t=e.ellipsis)||void 0===t||t.classList.remove(...$U),null===(i=e.ellipsis)||void 0===i||i.classList.add(OU.Hidden),null===(n=e.separator)||void 0===n||n.classList.add(tx.ToolbarHiddenItem)}renderContainerNoTextState(e,t){t.forEach((t=>{const i=e.root.querySelector(`#${t}`);i&&i.classList.add(KU.NoText)}))}renderGroupState(e,t){const i=e.element;i&&(i.classList.add(t),e.items.forEach((e=>this.hideElement(e))),this.showEllipsis(e))}renderContainerCollapsedState(e,t){if(t.forEach((t=>{const i=e.root.querySelector(`#${t}`);i&&i.classList.add(KU.Collapsed)})),t.size>0){const i=e.groups.filter((e=>e.items.some((e=>t.has(e.id)))));i.forEach((e=>this.showEllipsis(e)))}}showGlobalEllipsis(e){var t,i,n;null===(t=e.ellipsis)||void 0===t||t.classList.remove(...$U),null===(i=e.ellipsis)||void 0===i||i.classList.remove(OU.Hidden),null===(n=e.separator)||void 0===n||n.classList.remove(tx.ToolbarHiddenItem)}hideGlobalEllipsis(e){var t,i,n;null===(t=e.ellipsis)||void 0===t||t.classList.remove(...$U),null===(i=e.ellipsis)||void 0===i||i.classList.add(OU.Hidden),null===(n=e.separator)||void 0===n||n.classList.add(tx.ToolbarHiddenItem)}collapseGroup(e){e.items.forEach((e=>this.hideElement(e))),this.showEllipsis(e)}expandGroup(e){e.items.forEach((e=>this.showElement(e))),this.hideEllipsis(e)}resetGroupToDefault(e){e.element.classList.remove(..._U),e.element.classList.remove(...zU),e.ellipsis.classList.remove(...$U)}resetItems(e){e.forEach((e=>{e.classList.remove(WU.ItemNoText,WU.ItemCollapsed,KU.NoText.toString(),KU.Collapsed.toString(),"dxbl-toolbar-item-collapsed","dxbl-toolbar-hidden-item"),e.classList.add(KU.Default)}))}showEllipsis(e){e.ellipsis.classList.remove(tx.ToolbarHiddenItem),e.ellipsis.classList.add(OU.Default)}hideEllipsis(e){e.ellipsis.classList.remove(OU.Default),e.ellipsis.classList.add(tx.ToolbarHiddenItem)}showElement(e){e.classList.remove(WU.ItemCollapsed)}hideElement(e){e.classList.add(WU.ItemCollapsed)}}class qU{createDefaultState(e){return{layout:VU.Default,width:e.content.offsetWidth,groups:e.groups.map((e=>({id:e.element.id,state:kU.Default,order:e.order,items:e.items.map((t=>({id:t.id,state:KU.Default,groupId:e.element.id}))),ellipsis:{id:e.ellipsis.id,state:OU.Hidden}}))),ellipsis:{id:e.ellipsis.id,state:OU.Hidden}}}createNoTextState(e,t,i=new Set,n=kU.Default){return{layout:VU.NoText,width:e.content.offsetWidth,groups:e.groups.map((e=>({id:e.element.id,order:e.order,state:i.has(e.element.id)?kU.Text:kU.Default,items:e.items.map((n=>{return{id:n.id,groupId:e.element.id,state:(s=n.id,r=e.element.id,i.has(r)?KU.Collapsed:t.has(s)?KU.NoText:KU.Default)};var s,r})),ellipsis:{id:e.ellipsis.id,state:i.has(e.element.id)?OU.Default:OU.Hidden}}))),ellipsis:{id:e.ellipsis.id,state:function(t){const i=e.groups.filter((e=>t.has(e.element.id)));return i.flatMap((e=>e.blocks)).some((e=>e.collapseInGlobalGroup))}(i)?OU.Default:OU.Hidden}}}createCollapseState(e,t,i,n){function s(e){const n=e.blocks.filter((e=>!e.collapseInGlobalGroup)).map((e=>e.id)).some((e=>t.has(e))),s=i.has(e.element.id);return n||s}return{layout:VU.NoTextSequential,width:e.content.offsetWidth,groups:e.groups.map((e=>({id:e.element.id,order:e.order,state:i.has(e.element.id)?kU.Text:kU.Default,items:e.items.map((s=>{return{id:s.id,groupId:e.element.id,state:(r=s.id,o=e.element.id,i.has(o)||t.has(r)?KU.Collapsed:n)};var r,o})),ellipsis:{id:e.ellipsis.id,state:s(e)?OU.Default:OU.Hidden}}))),ellipsis:{id:e.ellipsis.id,state:e.groups.flatMap((e=>e.blocks)).filter((e=>t.has(e.id)||i.has(e.groupId))).some((e=>e.collapseInGlobalGroup))?OU.Default:OU.Hidden}}}createGroupNoTextState(e,t){return{layout:VU.GroupNoText,width:e.content.offsetWidth,groups:e.groups.map((e=>({id:e.element.id,order:e.order,state:t.has(e.element.id)?kU.NoText:kU.Text,items:e.items.map((t=>({id:t.id,groupId:e.element.id,state:KU.Collapsed}))),ellipsis:{id:e.ellipsis.id,state:OU.Default}}))),ellipsis:{id:e.ellipsis.id,state:e.groups.flatMap((e=>e.blocks)).some((e=>e.collapseInGlobalGroup))?OU.Default:OU.Hidden}}}}class YU{constructor(){this.renderer=new GU,this.factory=new qU}getStates(e,t,i){const n=[],s=this.getBlocks(e),r=[];if(i.toGroups&&r.push(...this.getGroupLimits(e)),n.push(...this.getDefaultState(e,r)),i.toIcons&&n.push(...this.getNoTextStates(e,s,r)),i.hideItems){const t=n.filter((e=>e.layout===VU.NoText)).sort(((e,t)=>e.width-t.width)).map((e=>e.width))[0];n.push(...this.getCollapsedStates(e,s,r,i.toIcons?KU.NoText:KU.Default,t))}return i.toGroups&&n.push(...this.getGroupNoTextStates(e,n)),n}getBlocks(e){const t=e.groups.flatMap((e=>e.blocks.reverse()));return t.sort(((e,t)=>t.adaptivePriority-e.adaptivePriority))}getNoTextStates(e,t,i){const n=[],s=new Set,r=new Set;this.renderer.hideGlobalEllipsis(e);for(const o of t){s.add(o.id),this.renderer.renderContainerNoTextState(e,s);const t=e.groups.find((e=>e.element.id===o.groupId)),a=i.find((e=>e.groupId===t.element.id));if(a&&!this.compareGroupWidth(t,a)){if(r.has(a.groupId))continue;this.renderer.renderGroupState(t,kU.Text),r.add(a.groupId)}n.push(this.factory.createNoTextState(e,s,r))}return n}getGroupLimits(e){const t=[];this.renderer.renderContainerDefaultState(e);for(const i of e.groups)this.renderer.renderGroupState(i,kU.Text),t.push({groupId:i.element.id,width:i.element.offsetWidth});return t}getCollapsedStates(e,t,i,n,s){const r=[],o=new Set,a=new Set;let l=!1;for(const A of t){if(o.add(A.id),A.collapseInGlobalGroup&&!l&&(this.renderer.showGlobalEllipsis(e),l=!0),this.renderer.renderContainerCollapsedState(e,o),e.content.offsetWidth>s)continue;const t=e.groups.find((e=>e.element.id===A.groupId)),d=i.find((e=>e.groupId===t.element.id));if(d&&!this.compareGroupWidth(t,d)){if(a.has(d.groupId))continue;this.renderer.renderGroupState(t,kU.Text),a.add(d.groupId)}r.push(this.factory.createCollapseState(e,o,a,n))}return r}getGroupNoTextStates(e,t){const i=[],n=t.filter((e=>e.groups.every((e=>e.state===kU.Text)))),s=new Set,r=new Set(n.flatMap((e=>e.groups)).sort(((e,t)=>e.order-t.order)).map((e=>e.id)));for(const t of r){const n=e.groups.find((e=>e.element.id===t));n.hasIcon&&(s.add(t),this.renderer.renderGroupState(n,kU.NoText),i.push(this.factory.createGroupNoTextState(e,s)))}return i}compareGroupWidth(e,t){return e.element.offsetWidth>t.width}getDefaultState(e,t){this.renderer.renderContainerDefaultState(e);for(const i of e.groups){const e=t.find((e=>e.groupId===i.element.id));e&&!this.compareGroupWidth(i,e)&&this.renderer.renderGroupState(i,kU.Text)}return[this.factory.createDefaultState(e)]}}const XU=Object.values(kU).map((e=>e)),JU=Object.values(KU).map((e=>e)),jU=Object.values(OU).map((e=>e));class ZU{constructor(){this.appliedState=null,this.states=[],this.currentCheckpoint=0,this.calculator=new YU,this.containerItemsUpdate=null}async configure(e,t,i){const n=this.copyContainer(e),s=this.createAdaptiveContainer(n,t);0!==s.content.offsetWidth&&(this.states=this.calculator.getStates(s,t,i),s.root.remove(),await this.adjust(e,t))}async adjust(e,t){const i=this.createAdaptiveContainer(e,t),n=i.root.offsetWidth,s=this.states.map((e=>e.width)).sort(((e,t)=>t-e)),r=s.find((e=>e<n));if(this.appliedState&&this.currentCheckpoint&&this.currentCheckpoint===r)return;e.querySelector(`.${WU.AdaptiveContainerContent}`);const o=this.states.filter((e=>e.width===r))[0];o&&(this.currentCheckpoint=r,await this.waitForAnimationFrame((()=>{if(this.applyNewState(i,o),this.containerItemsUpdate&&o.groups.length>0){const e=o.groups.map((e=>e.items)).reduce(((e,t)=>e.concat(t))).map((e=>({Id:e.id,TextHidden:e.state===KU.NoText,IsVisible:e.state!==KU.Collapsed})));this.containerItemsUpdate(e)}})))}applyNewState(e,t){for(const i of t.groups)this.applyGroupState(e,i);t.ellipsis&&this.applyEllipsisState(e,t.ellipsis),this.appliedState=t}waitForAnimationFrame(e){return new Promise((t=>{requestAnimationFrame((i=>{e(),t(i)}))}))}applyGroupState(e,t){const i=e.root.querySelector(`#${t.id}`);if(i){i.classList.remove(...XU),i.classList.add(t.state),i.dispatchEvent(new FF(t.state.toString()));for(const i of t.items)this.applyItemState(e,i);t.ellipsis&&this.applyEllipsisState(e,t.ellipsis)}}applyItemState(e,t){const i=e.root.querySelector(`#${t.id}`);i&&(i.classList.remove(...JU),i.classList.add(t.state))}applyEllipsisState(e,t){const i=e.root.querySelector(`#${t.id}`);i&&(i.classList.remove(...jU),i.classList.add(t.state))}copyContainer(e){const t=e.cloneNode(!0);t.classList.add(WU.VirtualContainer),t.style.visibility="hidden",t.style.position="absolute";return e.parentElement.appendChild(t),t}createAdaptiveContainer(e,t){const i=e.querySelector(`.${WU.AdaptiveContainerContent}`),n=i.querySelectorAll(`.${WU.AdaptiveGroup}`);let s=0;const r=[...n].reverse().map((e=>{s++;const i=e.querySelectorAll(t),n=e;return{element:e,order:s,hasText:n.hasAttribute("has-adaptive-text"),hasIcon:n.hasAttribute("has-adaptive-icon"),items:[...i],blocks:[...i].map((t=>({id:t.id,groupOrder:s,groupId:e.id,collapsed:!1,noText:!1,adaptivePriority:parseInt(t.getAttribute("adaptive-priority")),collapseInGlobalGroup:t.hasAttribute("collapse-in-global-group")}))),ellipsis:e.querySelector(`.${tx.ButtonEllipsis}`)}}));return{root:e,content:i,groups:r,separator:e.querySelector(".dxbl-ribbon-general-separator"),ellipsis:e.querySelector(".dxbl-toolbar-btn-ellipsis-general")}}}class eP{constructor(e){this.id=e}}class tP extends CustomEvent{constructor(e){super(tP.eventName,{detail:new eP(e),bubbles:!0})}}tP.eventName="dxbl-ribbon-item.resized";class iP{constructor(e,t){this.id=e,this.adaptivePriority=t}}class nP extends CustomEvent{constructor(e,t){super(nP.eventName,{detail:new iP(e,t),bubbles:!0,composed:!0})}}nP.eventName="dxbl-ribbon-item.updated";let sP=class extends Es{constructor(){super(...arguments),this.containerResizeObserver=null,this.contentResizeObserver=null,this.isAdaptivityEnabled=!1,this.virtualContainer=new ZU,this.itemResizedHandler=this.itemResized.bind(this),this.adaptiveItemUpdatedHandler=this.adaptiveItemUpdated.bind(this),this.initialized=!1,this.collapseToIcons=!1,this.canHideItems=!1,this.collapseToGroups=!1,this.minRootItemCount=0,this.itemSelector=".dxbl-adaptive-item:not(.dxbl-toolbar-btn-ellipsis)"}get settings(){return{toIcons:this.collapseToIcons,toGroups:this.collapseToGroups,hideItems:this.canHideItems}}firstUpdated(){this.tryAdapt()}updated(e){super.updated(e),(e.has("collapseToIcons")||e.has("canHideItems")||e.has("collapseToGroups"))&&this.configure()}connectedCallback(){super.connectedCallback(),this.addEventListener(tP.eventName,this.itemResizedHandler),this.addEventListener(nP.eventName,this.adaptiveItemUpdatedHandler),this.virtualContainer.containerItemsUpdate=e=>{this.dispatchEvent(new xF(Array.from(e)))}}disconnectedCallback(){var e;super.disconnectedCallback(),this.removeEventListener(tP.eventName,this.itemResizedHandler),this.removeEventListener(nP.eventName,this.adaptiveItemUpdatedHandler),null===(e=this.containerResizeObserver)||void 0===e||e.unobserve(this)}tryAdapt(){this.classList.contains(WU.VirtualContainer)||(this.containerResizeObserver=new ResizeObserver((()=>new Promise((()=>this.adjust())))),this.containerResizeObserver.observe(this),this.contentResizeObserver=new ResizeObserver((()=>{0!==this.offsetWidth&&this.configure()})),this.contentResizeObserver.observe(this.querySelector(`.${WU.AdaptiveContainerContent}`)),this.initialized=!0,this.configure())}async configure(){this.initialized&&await this.virtualContainer.configure(this,this.itemSelector,this.settings)}async adjust(){await this.virtualContainer.adjust(this,this.itemSelector)}itemResized(e){super.getUpdateComplete().then((()=>this.virtualContainer.configure(this,this.itemSelector,this.settings)))}adaptiveItemUpdated(e){}};sP.shadowRootOptions={...gs.shadowRootOptions,mode:"open"},C([An({attribute:"collapse-to-icons",type:Boolean})],sP.prototype,"collapseToIcons",void 0),C([An({attribute:"can-hide-items",type:Boolean})],sP.prototype,"canHideItems",void 0),C([An({attribute:"collapse-to-groups",type:Boolean})],sP.prototype,"collapseToGroups",void 0),C([An({attribute:"min-root-item-count",type:Number})],sP.prototype,"minRootItemCount",void 0),sP=C([on("dxbl-adaptive-container")],sP);const rP="dxbl-filter-builder",oP=`${rP}-node`,aP=`${oP}-value`,lP=`${aP}-btn`,AP="index",dP="dxbl-filter-builder";class cP extends Kd{constructor(){super(cP.eventName)}}cP.eventName=`${dP}.close-editor`;class hP{constructor(e,t){this.nodeIndex=e,this.nodeValueIndex=t}}class uP extends CustomEvent{constructor(e,t){super(uP.eventName,{detail:new hP(e,t),bubbles:!0,composed:!0,cancelable:!0})}}uP.eventName=`${dP}.show-editor`,gt.register(cP.eventName,(e=>e.detail)),gt.register(uP.eventName,(e=>e.detail));class pP extends Ya{onDocumentFocusOut(e){const t=e.target;if(!this.filterBuilder.isEditing||t.classList.contains(lP))return;const i=this.getClosestElement(t,aP,!0);if(null==i)return;const n=this.getClosestElement(e.relatedTarget,aP,!0)||this.getClosestElement(this.activePopup,aP,!0);if(null==n)return void this.closeEditor();const s=this.getNodeValueElementIndexes(i),r=this.getNodeValueElementIndexes(n);r.nodeIndex===s.nodeIndex&&r.nodeValueIndex==r.nodeValueIndex||this.closeEditor()}isPopupFromEditor(e){return this.filterBuilder.isEditing&&null!==this.getClosestElement(e,aP,!0)}closeEditor(){this.filterBuilder.dispatchEvent(new cP)}onDocumentClick(e){const t=this.getClosestElement(e.target,aP,!0);if(null==t)return;const i=this.getNodeValueElementIndexes(t);this.openEditor(i)}openEditor(e){null!==e&&this.filterBuilder.dispatchEvent(new uP(e.nodeIndex,e.nodeValueIndex))}constructor(e){super(),this.boundOnDocumentClickHandler=this.onDocumentClick.bind(this),this.filterBuilder=e}initialize(){document.addEventListener("click",this.boundOnDocumentClickHandler),super.initialize()}dispose(){document.removeEventListener("click",this.boundOnDocumentClickHandler),super.dispose()}getClosestElement(e,t,i=!1){var n;if(!e)return null;let s=null;if(this.filterBuilder.contains(e)&&(s=e.closest(`.${t}`)),!s&&i){const i=_a.getPortalFrom(e);i&&this.filterBuilder.contains(i)&&(s=null!==(n=i.closest(`.${t}`))&&void 0!==n?n:null)}return s}getNodeValueElementIndexes(e){const t=parseInt(e.getAttribute(AP)||""),i=this.getClosestElement(e,oP);if(null===i)return{nodeIndex:null,nodeValueIndex:null};const n=parseInt(i.getAttribute(AP)||"");return{nodeIndex:isNaN(n)?null:n,nodeValueIndex:isNaN(t)?null:t}}}let mP=class extends Es{constructor(){super(),this.isEditing=!1,this.editorManager=new pP(this)}connectedCallback(){this.editorManager.initialize(),super.connectedCallback()}disconnectedCallback(){this.editorManager.dispose(),super.disconnectedCallback()}};C([An({type:Boolean,attribute:"is-editing"})],mP.prototype,"isEditing",void 0),mP=C([on(rP)],mP);const gP="dxbl-stylesheet-warning";let CP=class extends ws{render(){return Xn`
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path fill-rule="evenodd" clip-rule="evenodd" d="M24 12C24 18.6274 18.6274 24 12 24C5.37258 24 0 18.6274 0 12C0 5.37258 5.37258 0 12 0C18.6274 0 24 5.37258 24 12ZM10 18C10 16.8954 10.8954 16 12 16C13.1046 16 14 16.8954 14 18C14 19.1046 13.1046 20 12 20C10.8954 20 10 19.1046 10 18ZM12 4C10.8954 4 10 4.89543 10 6V12C10 13.1046 10.8954 14 12 14C13.1046 14 14 13.1046 14 12V6C14 4.89543 13.1046 4 12 4Z" fill="currentColor" fill-opacity="0.75"/>
            </svg>
            <div>
                <p>This application references outdated DevExpress Blazor CSS resources. Refer to the following article for upgrade instructions: <a href="https://supportcenter.devexpress.com/ticket/details/t1081253" target="_blank">The location of CSS resources for DevExpress Blazor controls has changed</a>.</p>
            </div>
        `}static isStyleSheetDeprecated(e){return null!==e&&/\/dx-blazor(\.bs5)*\.css$/gi.test(e)}static create(){return document.createElement(gP)}};CP.styles=fn`
        :host {
            display: flex;
            align-items: center;
            justify-content: center;
            position: fixed;
            left: 0px;
            bottom: 0px;
            width: 100%;
            padding: 1.5rem;
            color: var(--bs-dark, var(--dark, rgb(33, 37, 41)));
            background-color: var(--bs-warning, var(--warning, rgb(255, 193, 7)));
            z-index: 10000;
            font-size: 0.875rem;
        }
        :host > svg {
            flex: 0 0 auto;
            margin-right: 1rem;
        }
        p {
            margin: 0;
        }
        a, span {
            font-weight: 600;
        }
        a {
            color: inherit;
        }`,CP=C([on(gP)],CP);const fP=-1e4;class vP{constructor(e,t){this._name=e,this._value=t}get name(){return this._name}get value(){return this._value}}class bP{constructor(e,t){this._selectors=e,this._rules=t}get selectors(){return this._selectors}get rules(){return this._rules}toString(e){let t=this.rules.join("\n");for(let i=0;i<e.length;i++){const n=e[i];t=t.replace(new RegExp(`${n.name}`,"g"),n.value)}return`${this.selectors.join(",\n")} { ${t} }`}}class wP{constructor(){this._rules=[],this._dummyContainer=null,this._ieCssStyles=[],this._styleElement=null,this.initialize()}get styleElement(){return null==this._styleElement&&(this._styleElement=this.createStyleElement()),this._styleElement}createStyleElement(){const e=document.createElement("STYLE");return document.head.appendChild(e),e}initialize(){this.initializeIeCssStyles(),this.initializeDummyElements(),this.initializeRules(),this.updateStyleElement(),this.removeDummyElements()}getAccentColor(){if(!this._dummyContainer)return"";const e=this._dummyContainer.querySelector("a");return window.getComputedStyle(e).color}getAccentShadowColor(e){const t=e.replace("rgb","").replace("(","").replace(")","").split(",").map((e=>e.trim()));t.push(".25");return`rgba(${t.join(",")})`}updateStyleElement(){h.Browser.IE?this.updateIEStyleElement():this.updateStyleElementCore()}updateIEStyleElement(){this._ieCssStyles&&(this.styleElement.innerHTML=this._ieCssStyles.map((e=>e.toString(this._rules))).join("\n"))}updateStyleElementCore(){if(this._rules){const e=this._rules.map((e=>`${e.name}: ${e.value}`)).join(";\n");this.styleElement.innerHTML=`:root{ ${e} }`}}update(){this._rules=[],this.initialize()}initializeIeCssStyles(){}initializeDummyElements(){}initializeRules(){}removeDummyElements(){}}class yP extends wP{initializeIeCssStyles(){this._ieCssStyles=[new bP(["th:focus .dxColumnResizeAnchor"],["box-shadow: 0 0 0 1px --dx-accent-shadow-color;"]),new bP(["th:focus .dxColumnResizeAnchor::after"],["border-left: 1px solid --dx-accent-color;","border-right: 1px solid --dx-accent-color;"]),new bP([".table th:focus:before"],["box-shadow: 0 0 0 2px --dx-accent-color;"])]}initializeDummyElements(){const e=this.createDummyContainer(),t=this.createDummyLink();e.appendChild(t),document.documentElement.appendChild(e),this._dummyContainer=e}createDummyContainer(){const e=document.createElement("DIV");return e.style.top=ui(fP),e.style.left=ui(fP),e.className="dxAIFE",e.setAttribute("aria-hidden","true"),e}createDummyLink(){const e=document.createElement("A");return e.innerHTML="test",e.href="javascript:;",e}removeDummyElements(){this._dummyContainer&&document.documentElement.removeChild(this._dummyContainer),this._dummyContainer=null}initializeRules(){const e=this.getAccentColor();this._rules&&(this._rules.push(new vP("--dx-accent-color",e)),this._rules.push(new vP("--dx-accent-shadow-color",this.getAccentShadowColor(e))))}}const BP={ensureAccentColorStyle:function(){window.dxAccentColorStyle||(window.dxAccentColorStyle=new yP)},showDeprecatedStyleSheetWarningIfNeeded:function(){const e=Array.from(document.styleSheets).map((e=>e.href)).filter(CP.isStyleSheetDeprecated);e.length>0&&e.forEach((e=>{const t=CP.create();document.body.appendChild(t)}))}};class EP{constructor(e,t,i){this.defaultValueSource=e,this.computedValueSource=t,this.valueDestination=i}}const IP=[new EP("--bs-body-bg","background-color","--dxbl-body-bg"),new EP("--bs-body-color","color","--dxbl-body-color")],SP=["--primary","--bs-primary"],xP=50,DP=200;function FP(){const e=document.body,t=window.getComputedStyle(e);IP.forEach((t=>{e.style.removeProperty(t.valueDestination)})),IP.filter((e=>!t.getPropertyValue(e.defaultValueSource))).forEach((i=>{e.style.setProperty(i.valueDestination,t.getPropertyValue(i.computedValueSource))}))}function TP(e,t){if(0===t)return e();const i=window.getComputedStyle(document.body),n=SP.map((e=>!!i.getPropertyValue(e))).reduce(((e,t)=>e||t),!1);if(n)return e();setTimeout((()=>TP(e,t-1)),DP)}function HP(){return new Promise(((e,t)=>{const i=document.createElement("IFRAME");i.style.cssText="position: absolute; display: none; top: -10000px; left: -10000px;",i.onload=()=>{e(i)},document.body.appendChild(i)}))}let UP=HP();function PP(e){return new Promise(((t,i)=>{(async function(){const e=await UP;return e.parentNode?e:(UP=HP(),await UP)})().then((i=>{const n=i.contentDocument,s=n.createElement("link");s.href=e,s.rel="stylesheet",s.onload=()=>{t(),s.remove()},s.onerror=()=>{t(),s.remove()},n.head.appendChild(s)}))}))}function QP(e){return new Promise(((t,i)=>{PP(e).then((()=>{TP(t,xP)}))}))}async function NP(e){if(e.nodeType===Node.ELEMENT_NODE){if("LINK"===e.tagName){const t=e;if("stylesheet"===t.rel)return await QP(t.href),!0}}return!1}function RP(e){NP(e).then((e=>{e&&FP()}))}const LP={initializeThemeCssRuntimeVariables:function(){const e=document.head;new MutationObserver(((e,t)=>{for(const t of e)"childList"===t.type&&t.addedNodes?t.addedNodes.forEach(RP):"attributes"===t.type&&"href"===t.attributeName&&RP(t.target)})).observe(e,{attributes:!0,childList:!0,subtree:!0}),Promise.all(Array.from(document.head.childNodes).map((e=>NP(e)))).then((()=>FP()))}};let MP;const kP={init:async function(e,t,i){return MP||(MP=Promise.resolve().then((()=>pT))),(await MP).init(e,t,i)},dispose:async function(e){return MP||(MP=Promise.resolve().then((()=>pT))),(await MP).dispose(e)}},KP=document.body,OP=new WeakMap,_P=new Map,VP={subtree:!0,childList:!0},zP=new MutationObserver((function(e){e.forEach(WP)}));function WP(e){e.removedNodes.forEach($P)}function $P(e){const t=_P.get(e);_P.delete(e)&&(0===_P.size&&zP.disconnect(),t())}const GP="show",qP="\\s*matrix\\(\\s*"+[0,0,0,0,0,0].map((function(){return"(\\-?\\d+\\.?\\d*)"})).join(",\\s*")+"\\)\\s*",YP="above",XP="below",JP="above-inner",jP="below-inner",ZP="top-sides",eQ="bottom-sides",tQ="outside-left",iQ="outside-right",nQ="left-sides",sQ="right-sides",rQ="resizing";function oQ(e){let t=0;if(null!=e&&""!==e)try{const i=e.indexOf("px");i>-1&&(t=parseFloat(e.substr(0,i)))}catch(e){}return Math.ceil(t)}function aQ(e,t,i){const n=e.getBoundingClientRect(),s={left:t(n.left),top:t(n.top),right:i(n.right),bottom:i(n.bottom)};return s.width=s.right-s.left,s.height=s.bottom-s.top,s}function lQ(e){return aQ(e,Math.floor,Math.ceil)}function AQ(e){return aQ(e,Math.ceil,Math.floor)}class dQ{constructor(e,t){this.key=e,this.info=t}checkMargin(){return!0}allowScroll(){return"height"===this.info.size}canApplyToElement(e){return e.className.indexOf("dxbs-align-"+this.key)>-1}getRange(e){const t=this.getTargetBox(e)[this.info.to],i=t+this.info.sizeM*(e.elementBox[this.info.size]+(this.checkMargin()?e.margin:0));return{from:Math.min(t,i),to:Math.max(t,i),windowOverflow:0}}getTargetBox(e){return null}validate(e,t){const i=t[this.info.size];return e.windowOverflow=Math.abs(Math.min(0,e.from-i.from)+Math.min(0,i.to-e.to)),e.validTo=Math.min(e.to,i.to),e.validFrom=Math.max(e.from,i.from),0===e.windowOverflow}applyRange(e,t){t.appliedModifierKeys[this.info.size]=this.key;const i="width"===this.info.size?"left":"top",n=t.styles;let s=e.from;this.allowScroll()&&e.windowOverflow>0&&(t.limitBox.scroll.width||(t.limitBox.scroll.width=!0,t.limitBox.width.to-=bt()),t.isScrollable&&(n["max-height"]=t.height-e.windowOverflow+"px",t.width+=bt(),t.elementBox.width+=bt(),s=e.validFrom)),n.width=t.width+"px",this.checkMargin()&&(s+=Math.max(0,this.info.sizeM)*t.margin),t.elementBox[i]+=s,function(e,t,i){e.transform="matrix(1, 0, 0, 1, "+t+", "+i+")"}(n,t.elementBox.left,t.elementBox.top)}dockElementToTarget(e){const t=this.getRange(e);this.dockElementToTargetInternal(t,e)||this.applyRange(t,e)}dockElementToTargetInternal(e,t){}}class cQ extends dQ{constructor(e,t,i){super(e,t,i),this.oppositePointName=i||null}getTargetBox(e){return this.info.useInnerTargetBox?e.targetBox.inner:e.targetBox.outer}getOppositePoint(){return this._oppositePoint||(this._oppositePoint=uQ.filter(function(e){return e.key===this.oppositePointName}.bind(this))[0])}dockElementToTargetInternal(e,t){if(this.validate(e,t.limitBox))this.applyRange(e,t);else{const i=this.getOppositePoint(),n=i.getRange(t);if(!(i.validate(n,t.limitBox)||n.windowOverflow<e.windowOverflow))return!1;i.applyRange(n,t)}return!0}}class hQ extends dQ{checkMargin(){return!1}getTargetBox(e){return e.targetBox.inner}dockElementToTargetInternal(e,t){return(this.info.isHorizontal&&t.fitHorizontally||!this.info.isHorizontal&&t.fitVertically)&&this.validate(e,t.limitBox),!1}validate(e,t){const i=Math.min(e.from,Math.max(0,e.to-t[this.info.size].to));return i>0&&(e.from-=i,e.to-=i),super.validate(e,t)}}const uQ=[new cQ(YP,{to:"top",from:"bottom",size:"height",sizeM:-1,isHorizontal:!1},XP),new cQ(XP,{to:"bottom",from:"top",size:"height",sizeM:1,isHorizontal:!1},YP),new cQ(JP,{to:"top",from:"bottom",size:"height",sizeM:-1,isHorizontal:!1,useInnerTargetBox:!1},jP),new cQ(jP,{to:"bottom",from:"top",size:"height",sizeM:1,isHorizontal:!1,useInnerTargetBox:!0},JP),new hQ(ZP,{to:"top",from:"top",size:"height",sizeM:1,isHorizontal:!1}),new hQ(eQ,{to:"bottom",from:"bottom",size:"height",sizeM:-1,isHorizontal:!1}),new cQ(tQ,{to:"left",from:"right",size:"width",sizeM:-1,isHorizontal:!0},iQ),new cQ(iQ,{to:"right",from:"left",size:"width",sizeM:1,isHorizontal:!0},tQ),new hQ(nQ,{to:"left",from:"left",size:"width",sizeM:1,isHorizontal:!0}),new hQ(sQ,{to:"right",from:"right",size:"width",sizeM:-1,isHorizontal:!0})];function pQ(e,t,i){const n=Pt(),s=lQ(e),r=AQ(t),o=e.ownerDocument.documentElement,a={isScrollable:T.DomUtils.hasClassName(e,"dxbs-scrollable"),specifiedOffsetModifiers:uQ.filter((function(t){return t.canApplyToElement(e)})),margin:oQ(n.marginTop),width:i?Math.max(i.width,Math.ceil(e.offsetWidth)):Math.ceil(e.offsetWidth),height:Math.ceil(e.offsetHeight),appliedModifierKeys:{height:null,width:null},fitHorizontally:i.fitHorizontally,fitVertically:i.fitVertically},l=function(e){const t=new RegExp(qP).exec(e.transform);return t?{left:parseInt(t[5]),top:parseInt(t[6])}:{left:0,top:0}}(n),A=e.classList.contains(he.InvisibleOffScreen)||e[rQ]?r.left:s.left;a.elementBox=function(e,t,i,n){return{left:e,top:t,right:e+i,bottom:t+n,width:i,height:n}}(l.left-A,l.top-s.top,s.width,s.height),a.targetBox={outer:lQ(t),inner:AQ(t)},a.limitBox={scroll:{width:o.clientWidth<window.innerWidth,height:o.clientHeight<window.innerHeight},width:{from:0,to:o.clientWidth},height:{from:0,to:o.clientHeight}},a.styles={};const d=(e.getAttribute("data-popup-align")||i&&i.align).split(/\s+/);return a.offsetModifiers=uQ.filter((function(e){return d.some((function(t){return e.key===t}))})),a}function mQ(e,t,i,n){return Zt((function(){const s=pQ(e,t,i);for(let e=0;e<s.offsetModifiers.length;e++)s.offsetModifiers[e].dockElementToTarget(s);var r;n(s),r=s.styles,ai(e,(function(e){if(null===e.inlineStyles)e.inlineStyles=r;else for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&(e.inlineStyles[t]=r[t])}))}))}function gQ(e,t,i,n=!0,s=!0,r=(e=>{})){null!==t&&(mQ(e,t,{align:i,fitHorizontally:n,fitVertically:s},r),Ai(e,GP,!0),li(e))}function CQ(e){return parseFloat(window.getComputedStyle(e,null).getPropertyValue("padding-right"))}function fQ(){return window.innerWidth-document.body.getBoundingClientRect().width}class vQ{constructor(e,t){this.x=e,this.y=t}clone(){return new vQ(this.x,this.y)}get length(){return Math.sqrt(this.x*this.x+this.y*this.y)}equal(e){return this.x===e.x&&this.y===e.y}limitByRectangle(e){const t=Math.min(Math.max(this.y,e.top),e.bottom),i=Math.min(Math.max(this.x,e.left),e.right);return new vQ(i,t)}isInRect(e){return e.left<=this.x&&this.x<=e.right&&e.top<=this.y&&this.y<=e.bottom}}class bQ{constructor(e,t,i,n){this.x=e,this.y=t,this.width=i,this.height=n}clone(){return new bQ(this.x,this.y,this.width,this.height)}get left(){return this.x}get top(){return this.y}get bottom(){return this.y+this.height}get right(){return this.x+this.width}get size(){return new bQ(0,0,this.width,this.height)}get location(){return new bQ(this.x,this.y,0,0)}get center(){return new bQ(this.x+this.width/2,this.y+this.height/2,0,0)}get scalarLength(){return Math.sqrt(this.x*this.x+this.y*this.y)}equal(e){return this.x===e.x&&this.y===e.y&&this.width===e.width&&this.height===e.height}limitByRectangle(e){const t=Math.min(Math.max(this.y,e.top),e.bottom),i=Math.min(Math.max(this.x,e.left),e.right);return new bQ(i,t,0,0)}}function wQ(e,t){const i=BQ(e),n=BQ(t);return new bQ(i.x+n.x,i.y+n.y,i.width+n.width,i.height+n.height)}function yQ(e,t){const i=BQ(e),n=BQ(t);return new bQ(i.x-n.x,i.y-n.y,i.width-n.width,i.height-n.height)}function BQ(e){if(e.getBoundingClientRect)return EQ(e);if(e===window)return{x:0,y:0,width:window.innerWidth,height:window.innerHeight};let t=0,i=0,n=0,s=0;return e.x&&(t=e.x),e.y&&(i=e.y),e.width&&(n=e.width),e.height&&(s=e.height),{x:t,y:i,width:n,height:s}}function EQ(e){const t=e.getBoundingClientRect();return!t||t.x&&t.y||(t.x=Math.min(t.left,t.right),t.y=Math.min(t.top,t.bottom)),new bQ(t.x,t.y,t.width,t.height)}function IQ(e){const t=EQ(e),i=window.getComputedStyle(e),n=SQ(i.marginLeft),s=SQ(i.marginRight),r=SQ(i.marginTop),o=SQ(i.marginBottom);return new bQ(t.x-n,t.y-r,t.width+n+s,t.height+r+o)}function SQ(e){return Math.max(parseFloat(e),0)}class xQ{constructor(e,t){this.element=e,this.getClientRect=t}get leftTopCorner(){const e=this;return new DQ(this.element,(function(t){return e.getClientRect(t)}),(function(e){return{x:0,y:0}}))}get leftBottomCorner(){const e=this;return new DQ(this.element,(function(t){const i=e.getClientRect(t);return new vQ(i.x,i.bottom)}),(function(t){const i=e.getClientRect(t);return new vQ(0,-i.height)}))}get rightTopCorner(){const e=this;return new DQ(this.element,(function(t){const i=e.getClientRect(t);return new vQ(i.right,i.y)}),(function(t){const i=e.getClientRect(t);return new vQ(-i.width,0)}))}get rightBottomCorner(){const e=this;return new DQ(this.element,(function(t){const i=e.getClientRect(t);return new vQ(i.right,i.bottom)}),(function(t){const i=e.getClientRect(t);return new vQ(-i.width,-i.height)}))}get center(){const e=this;return new DQ(this.element,(function(t){return e.getClientRect(t).center}))}}class DQ{constructor(e,t,i){this.element=e,this.getLocation=t,this.getDelta=i}get location(){return this.getLocation(this.element)}get delta(){return this.getDelta(this.element)}anchorTo(e){return new FQ(this,e)}}class FQ{constructor(e,t){this.point=e,this.anchor=t,this.events=new lS(this);const i=[];if(i.push([window,"resize"]),i.push([window,"scroll"]),this.containers=function(e,t){const i=[];for(;null!==e&&"BODY"!==e.tagName&&"#document"!==e.nodeName;)t(e)&&i.push(e),e=e.parentNode;return 0===i.length?null:i}(this.anchor.element.parentNode,this.isElementScrollable),this.containers&&this.containers.forEach((function(e){i.push([e,"scroll"])})),this.checkInCasesInt(i),"undefined"!=typeof ResizeObserver){const e=this;this.resizeObserver=new window.ResizeObserver((function(){e.update()})),this.resizeObserver.observe(this.anchor.element),this.resizeObserver.observe(this.point.element)}else this.resizeObserver=null;let n=this.point.element.offsetParent;this.notStaticParent=null===n?{x:0,y:0,scrollTop:0,scrollLeft:0}:mi(n)?n:window,this.update()}isElementScrollable(e){const t=window.getComputedStyle(e);return"static"===t.position&&("scroll"===t["overflow-x"]||"scroll"===t["overflow-y"]||"auto"===t["overflow-x"]||"auto"===t["overflow-y"])}update(){const e=this.notStaticParent===window?{x:window.scrollX,y:window.scrollY}:{x:this.notStaticParent.scrollLeft,y:this.notStaticParent.scrollTop},t=function(){const e=Array.from(arguments),t=[],i=[];e.forEach((function(e){"-"===e||"+"===e?t.push(e):i.push(e)}));const n=[];for(;i.length>0;)n.push(i.pop());for(;t.length>0;)n.push(t.shift());for(;n.length>0;){const e=n.shift();t.push("+"===e?wQ(t.pop(),t.pop()):"-"===e?yQ(t.pop(),t.pop()):e)}return t.pop()}(this.anchor.location,"+",this.point.delta,"-",this.notStaticParent,"+",e),i=this.point.element;Zt((function(){i.style.left=t.x+"px",i.style.top=t.y+"px"}))}checkInCasesInt(e){const t=this.events;e.forEach((function(e){t.attachEvent(e[0],e[1],(function(e){this.update()}))}))}checkInCases(){return this.containers?(this.checkInCasesInt(Array.from(arguments)),this.update(),this):this}dispose(){this.events&&(this.events.dispose(),this.events=null,this.dropDownStartPos=null,this.containers=null,this.resizeObserver&&this.resizeObserver.disconnect())}}function TQ(e){return new xQ(e,IQ)}function HQ(e){return new xQ(e,EQ)}var UQ,PQ;!function(e){e[e.Popup=0]="Popup",e[e.Modal=1]="Modal"}(UQ||(UQ={})),function(e){e[e.Down=1]="Down",e[e.Up=2]="Up"}(PQ||(PQ={}));const QQ=8,NQ=new WeakMap;let RQ;const LQ=[];const MQ=[{value:0,text:""},{value:1,text:YP},{value:2,text:XP},{value:4,text:ZP},{value:8,text:eQ},{value:16,text:tQ},{value:32,text:iQ},{value:64,text:nQ},{value:128,text:sQ},{value:256,text:JP},{value:512,text:jP}];const kQ={init:function(e,t,i,n){if(e=Mt(e),t=Mt(t),i=Mt(i),!e)return Promise.reject("failed");if(yi(e),i){const s=s=>{!function(e,t,i){let n=e.target;for(;n;){if(n===t)return;n=n.parentElement}i&&i()}(s,e,(function(){document.body.contains(e)||yi(e);const s=document.activeElement===t,r=i&&("hidden"!==(o=i).style.visibility||o.classList.contains("dxbs-visually-hidden"));var o;(s||r)&&n.invokeMethodAsync("OnDropDownLostFocus",t.value).catch((e=>console.error(e)))}))};document.addEventListener(WI.TouchUtils.touchMouseDownEventName,s),Bi(e,(function(){document.removeEventListener(WI.TouchUtils.touchMouseDownEventName,s)}))}return Promise.resolve("ok")},dispose:function(e){return(e=Mt(e))&&yi(e),RQ&&RQ.dispose(),Promise.resolve("ok")},showAdaptiveDropdown:function(e,t,i,n,s,r){if(!(e=Mt(e)))return Promise.reject();const o=Rt(e,i);if(!o)return Promise.reject();const a=document.documentElement,l=document.documentElement.style.overflow,A=document.body.style.overflow,d=document.body.scroll,c=t.dialogType,h=t.alignment,u=function(e){let t="";return MQ.forEach((i=>{0!=(i.value&e)&&(t&&(t+=" "),t+=i.text)})),t}(h),p=c===UQ.Modal,m=new ResizeObserver((function(i,n){if(i.length<1)return;C&&C.height!==i[0].contentRect.height&&(li(e),Lt(e,rQ,!0),gQ(e,o,u,t.fitHorizontally,t.fitVertically,f),Zt((()=>{Lt(e,rQ,!1)})));C=i[0].contentRect}));if(c===UQ.Popup)0===h?function(e,t,i){NQ.has(e)&&(NQ.get(e).disconnect(),NQ.delete(e));const n=t.offsetParent;if(!n)return void Zt((function(){t.style.visibility=""}));const s=n.getBoundingClientRect(),r=e.getBoundingClientRect(),o=r.top-s.top,a=s.bottom-r.bottom;let l;const A=window.getComputedStyle(t),d=t.offsetHeight+Math.max(parseFloat(A.marginTop),0)+Math.max(parseFloat(A.marginBottom),0)+QQ;if(i===PQ.Up)l=!0,s.top+(o-d)<=0&&s.top+o+e.offsetHeight+d+window.pageYOffset<=Math.max(document.body.scrollHeight,window.innerHeight)&&(l=!1);else l=!1,s.bottom-(a-d)>=window.innerHeight&&s.top+o-d+window.pageYOffset>=0&&(l=!0);const c=r.left+t.offsetWidth+QQ>=document.body.clientWidth&&r.right-t.offsetWidth-QQ>0;Zt((()=>{RQ&&RQ.dispose(),RQ=l?c?TQ(t).rightBottomCorner.anchorTo(HQ(e).rightTopCorner):TQ(t).leftBottomCorner.anchorTo(HQ(e).leftTopCorner):c?TQ(t).rightTopCorner.anchorTo(HQ(e).rightBottomCorner):TQ(t).leftTopCorner.anchorTo(HQ(e).leftBottomCorner),t.style.visibility=""}))}(o,e,t.dropDownDirection):gQ(e,o,u,t.fitHorizontally,t.fitVertically,f),t.handleResize&&m.observe(e);else{LQ.push(e),e.style.paddingRight=CQ(e)+fQ()+"px";const t=CQ(document.body)+fQ();document.body.style.paddingRight=String(t),document.body.classList.add("dxbl-modal-open")}let g=!1,C=null;function f(i){let n;i.appliedModifierKeys.height===XP||i.appliedModifierKeys.height===jP?n=t.bottomAlignmentCssClass:i.appliedModifierKeys.height!==YP&&i.appliedModifierKeys.height!==JP||(n=t.topAlignmentCssClass),n&&Ai(e,n,!0)}function v(t){const i=t.srcElement;e&&i&&(!e.contains(i)||c===UQ.Modal&&e===i)&&w(e)}function b(t){const i=t.target;i&&(a.removeEventListener("focusin",b),null===t.relatedTarget&&e&&e.contains(i)&&i.focus())}function w(e){if(!g){if(g=!0,pi(e))return;y(),s.invokeMethodAsync("CloseDialog").catch((function(t){pi(e)||console.error(t)}))}}function y(){if(a.removeEventListener(WI.TouchUtils.touchMouseDownEventName,v),window.removeEventListener("resize",E),m.disconnect(),c===UQ.Modal){if(e){const t=LQ.indexOf(e);t>-1&&LQ.splice(t,1)}LQ.length||(I(c,!1),document.body.classList.remove("dxbl-modal-open"),document.body.style.paddingRight=String(CQ(document.body)-fQ()))}e=null}function B(){if(!e)return;const t=e.querySelector(k);t&&t.focus()}function E(){if(!e||!Rt(e,"modal-dialog-owner"))return;const t=e.firstElementChild;if(!t)return;const i=t.classList,n=function(e,t,i){if(i!==UQ.Modal)return-1;const n=e.getBoundingClientRect(),s=t.getBoundingClientRect(),r=Rt(e,"dxbs-gridview"),o=r&&r.querySelector("thead");if(!o)return-1;const a=o.getBoundingClientRect(),l=(a||n).bottom;if(l>.5*t.clientHeight)return l-n.top<.5*t.clientHeight?l-s.top-.5*t.clientHeight:n.top-s.top-2;return-1}(o,a,c),s=a.clientHeight>a.clientWidth?"topVertical":"topHorizontal";Gt((function(){i.contains("topVertical")||i.contains("topHorizontal")?i.remove("transition"):i.add("transition"),n&&(a.scrollTop=n),i.remove("topVertical","topHorizontal"),i.add(s)}))}function I(e,t){if(e!==UQ.Modal)return;let i,n,s;t?(i="hidden",n="hidden",s=()=>{}):(i=l,n=A,s=d),document.documentElement.style.overflow=i,document.body.style.overflow=n,document.body.scroll=s}return a.addEventListener(WI.TouchUtils.touchMouseDownEventName,v),e.addEventListener("keydown",(function(t){e&&t.keyCode===Be.KeyCode.Esc&&w(e)})),e.addEventListener("focusout",(function(t){const i=t.relatedTarget;!g&&e&&(i&&!e.contains(i)?function(t){if(!e)return;const i=e.compareDocumentPosition(t);i&window.Node.DOCUMENT_POSITION_PRECEDING?function(){if(!e)return;const t=function(e){const t=e.querySelectorAll(k);return t[t.length-1]}(e);t&&t.focus()}():i&window.Node.DOCUMENT_POSITION_FOLLOWING&&B()}(i):null===i&&a.addEventListener("focusin",b))})),function(e,t,i,n){e&&t.addEventListener("touchmove",(e=>{e.srcElement===t&&e.preventDefault()}));if(n===UQ.Modal){let e;i.addEventListener("touchstart",(t=>{e=t})),i.addEventListener("touchmove",(t=>{(function(e,t){if(!t)return!1;const i=Rt(e.srcElement,"modal-header");if(i)return!0;const n=Rt(e.srcElement,"column-chooser-elements-container"),s=Rt(n,"modal-body");if(!n||!s)return!1;if(s.clientHeight>=n.clientHeight)return!0;const r=e.touches[0].pageY-t.touches[0].pageY,o=e=>e.getBoundingClientRect().top,a=n.querySelector(".column-chooser-element-container");if(a&&o(a)===o(s)&&r>=0&&e.cancelable)return!0;const l=e=>Math.round(e.getBoundingClientRect().bottom),A=n.querySelector(".column-chooser-element-container:last-child");return A&&l(A)===l(s)&&r<=0&&e.cancelable})(t,e)&&t.preventDefault(),e=t}))}}(p,e,o,c),function(e){if(OP.has(e))return OP.get(e);const t=new Promise((function(t){0===_P.size&&zP.observe(KP,VP),_P.set(e,(()=>{t(void 0)}))}));return OP.set(e,t),t}(e).then((()=>{y(),e=null})),I(c,!0),Zt((function(){e&&(t.showFocus||(Ii(e),Fi(e)),c===UQ.Popup&&(B(),function(e,t){const i=Rt(e,t);if(e&&i){const t=Rt(e,"dx-menu-bar");t&&t.classList.contains("vertical")||(si(i,n),n())}function n(){const t=e.getBoundingClientRect(),n=i.getBoundingClientRect(),s=parseFloat(e.style.marginLeft);if(s&&(t.x=t.x-s),Math.round(t.x+t.width)>Math.round(n.x+n.width)&&n.width>t.width){const i=Rt(e.parentNode,"dropdown-menu");if(i){const n=i.getBoundingClientRect(),s=parseFloat(window.getComputedStyle(i,null).getPropertyValue("border-right-width"));e.style.marginLeft="-"+(t.x+t.width-n.x-s)+"px"}else e.style.marginLeft="-"+(t.x+t.width-n.x-n.width)+"px"}else s&&(e.style.marginLeft="")}}(e,r)))})),c===UQ.Modal&&(window.addEventListener("resize",E),E()),Promise.resolve()},setInlineModalSize:function(e){if(!(e=Mt(e)))return;const t=e.getElementsByClassName("modal-body")[0];t.style.width=t.offsetWidth+"px",t.style.height=t.offsetHeight+"px"}},KQ=[],OQ={width:0,height:0};function _Q(e,t){e.invokeMethodAsync("OnWindowResize",t).catch((e=>console.error(e)))}window.addEventListener("resize",(e=>{const t=window.innerWidth,i=window.innerHeight;OQ.height===i&&OQ.width===t||(OQ.height=i,OQ.width=t,KQ.forEach((e=>e(OQ))))}),{passive:!0});const VQ={init:function(e){return function(e){if(KQ.indexOf(e)>-1)throw new Error("already subscribed");KQ.push(e)}((t=>{_Q(e,t.width)})),_Q(e,window.innerWidth),Promise.resolve("ok")},dispose:function(){return Promise.resolve("ok")}};function zQ(e,t){const i=document.createElement("link");return i.setAttribute("rel","stylesheet"),i.setAttribute("type","text/css"),i.setAttribute("href",e),i.setAttribute("data-theme-id",t),i}function WQ(e,t){const i=document.createElement("style");return i.setAttribute("data-theme-id",t),i.innerHTML=e,i}function $Q(e,t){e?e.insertAdjacentElement("afterend",t):document.head.appendChild(t)}const GQ={setTheme:async function(e,{paths:t,styles:i}){const n=document.querySelectorAll("[data-theme-id]");let s=n[n.length-1];for(const t of i){const i=WQ(t,e);$Q(s,i),s=i}const r=[],o=[];for(const i of t){if(!i)continue;const t=zQ(i,e);r.push(new Promise((e=>{t.onload=()=>{e()},t.onerror=()=>{o.push(i),e()}}))),$Q(s,t),s=t}return await Promise.all(r),n.forEach((e=>e.remove())),o},dispose:function(){return Promise.resolve("ok")}};class qQ{constructor(e,t,i,n,s,r,o,a){this.targetWidth=0,this.targetHeight=0,this.targetPositionX=0,this.targetPositionY=0,this.viewPortWidth=0,this.viewPortHeight=0,this.viewPortScrollHeight=0,this.viewPortScrollWidth=0,this.targetWidth=e,this.targetHeight=t,this.targetPositionX=i,this.targetPositionY=n,this.viewPortWidth=s,this.viewPortHeight=r,this.viewPortScrollWidth=o,this.viewPortScrollHeight=a}}const YQ={getReference:function(e){return function(e){if(!e)throw new Error("failed");return e}(e)},initResizeHelper:function(e){return VQ.init(e)},setTheme:function(e,t){return GQ.setTheme(e,t)},setInputValue:function(e,t){e.value=t},getInputValue:function(e){return e.value},getDeviceInfo:function(e,t){return G.getDeviceInfo(e,t)},getLayoutAttributes:function(e){const t=document.querySelector(e);if(null===e)throw new Error("Position target does not exist");if(null===t)return console.warn("Could not find an element by the specified position target"),function(){const e=document.querySelector("body").getBoundingClientRect();return new qQ(Math.floor(e.width/2),Math.floor(e.height),Math.floor(e.width/2),Math.floor(e.height),Math.floor(window.innerWidth),Math.floor(window.innerHeight),Math.floor(window.scrollX),Math.floor(window.scrollY))}();const i=t.getBoundingClientRect();return new qQ(Math.floor(i.width),Math.floor(i.height),Math.floor(i.x),Math.floor(i.y),Math.floor(window.innerWidth),Math.floor(window.innerHeight),Math.floor(window.scrollX),Math.floor(window.scrollY))},copyToClipboard:async function(e){if(navigator.clipboard&&window.isSecureContext)return await navigator.clipboard.writeText(e);const t=document.createElement("textarea");t.value=e,t.style.position="absolute",t.style.left="-999999px",t.style.height="0px",t.style.width="0px",document.body.prepend(t),t.select();try{document.execCommand("copy")}catch(e){console.error(e)}finally{t.remove()}},showFileSelectorDialog:async function(e){const t=e.isConnected?e:null;return null!==t&&t.showFileSelectorDialog(),Promise.resolve()},waitUntilElementLoaded:async function(e){customElements.get(e)||await customElements.whenDefined(e)},sendFileOptions:async function(e,t){const i=e.isConnected?e:null;if(null!==i){const e=await t.arrayBuffer(),n=new TextDecoder("utf-8").decode(e),s=JSON.parse(n);i.processUploadedFilesOptions(s)}return Promise.resolve()},downloadFileFromStream:async function(e,t){const i=await t.arrayBuffer(),n=URL.createObjectURL(new Blob([i])),s=document.createElement("a");return document.body.appendChild(s),s.href=n,s.download=null!=e?e:"",s.click(),s.remove(),URL.revokeObjectURL(n),Promise.resolve()},scrollIntoView:function(e,t){const i=e.ownerDocument.getElementById(t);if(null!==i){const t=i.getBoundingClientRect(),n=e.getBoundingClientRect();return new Promise(((s,r)=>{requestAnimationFrame((r=>{!(e.compareDocumentPosition(document.body)&Node.DOCUMENT_POSITION_DISCONNECTED)&&t.top>n.top&&i.scrollTop>0&&(i.scrollTop=0),s()}))}))}return Promise.resolve()}};LP.initializeThemeCssRuntimeVariables(),BP.showDeprecatedStyleSheetWarningIfNeeded();const XQ=Ci,JQ=jI,jQ=JI,ZQ=vB,eN=kQ,tN=YQ,iN=kP;function nN(){const e=document.querySelector(Ar);if(!e)throw new Error("Error when trying to get CaptureManager in DxPopupRoot");return e.captureManager}const sN=new MutationObserver((e=>{const t=e[0].target;if(t){const e=(h.Browser.Info||"").split(" ").filter((e=>e&&!t.classList.contains(e)));e.length>0&&t.classList.add(...e)}}));sN.observe(document.documentElement,{attributes:!0,attributeFilter:["class"]});export{XQ as DOMModule,eN as EditorsDropDownModule,JQ as FileInputModule,iN as RibbonModule,ZQ as RollerModule,jQ as UploadModule,tN as UtilsModule,nN as getCaptureManagerSingletonForTests};
